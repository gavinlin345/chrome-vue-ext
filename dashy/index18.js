import{S as ce,i as pe,s as de,a2 as Ve,n as G,at as Ke,p as D,au as Ze,bf as We,a5 as X,c as H,m as N,t as _,a as m,d as O,b as Q,cf as Je,E as fe,q as R,r as S,u as v,v as U,x as z,D as g,K as P,V as B,L as y,Z as J,y as ee,z as Qe,B as se,_ as K,N as qe,O as ne,P as le,R as x,cF as ae,cG as _e,aG as Ee,a8 as me,ck as Fe,W as ie,as as ve,aq as re,I as $e,cH as Xe,a9 as xe,aE as et,cI as tt,a1 as ke,bw as Ue,aa as ue,cJ as nt,aV as lt,cK as it,ab as rt,ar as ot,af as st,bZ as ft,U as at,b_ as ut,cL as ct,b$ as pt,c0 as dt,$ as De,ah as _t,av as mt,az as oe,aP as $t,e as kt,ay as bt,aB as ht}from"./overlayscrollbars.js";import{C as vt}from"./Card.js";import{D as ze}from"./DatePicker.js";import{T as Ge}from"./TimePicker.js";function gt(r,e,t){let n,l=G,i=()=>(l(),l=Ke(o,s=>t(1,n=s)),o);r.$$.on_destroy.push(()=>l());let{reminders:o}=e;i();const a=()=>{n.forEach(s=>{if(D(s.when).diff(D(),"minutes")<=0&&!s.notified){if(Ze({id:We(),title:s.title,body:"Reminder",app:"reminder",faIcon:{icon:"faBell",type:"solid"},timestamp:Date.now()}),s.repeat){const u=s.repeat==="daily"?D(s.when).add(1,"days").toDate().getTime():s.repeat==="weekly"?D(s.when).add(1,"weeks").toDate().getTime():s.repeat==="monthly"?D(s.when).add(1,"months").date()===D(s.when).date()?D(s.when).add(1,"months").toDate().getTime():D(s.when).add(1,"months").date(D(s.when).date()-1).toDate().getTime():D(s.when).add(1,"years").isLeapYear()?D(s.when).add(1,"years").toDate().getTime():D(s.when).add(1,"years").date(D(s.when).date()-1).toDate().getTime();X(o,n=n.map(d=>d.id===s.id?{...d,when:u,notified:!1}:d),n);return}o.update(u=>(u=u.map(d=>(d.id===d.id&&(d.notified=!0),d)),u))}})},f=setInterval(()=>{a()},1e3*10);return Ve(()=>{clearInterval(f)}),r.$$set=s=>{"reminders"in s&&i(t(0,o=s.reminders))},[o]}class wt extends ce{constructor(e){super(),pe(this,e,gt,null,de,{reminders:0})}}function Me(r,e,t){const n=r.slice();return n[29]=e[t],n}function yt(r){let e,t,n,l=r[0].title+"",i,o,a,f,s,u,d,p,$,w,Y,I,L,E;function F(b,c){return b[0].isTimeSet?It:Mt}let q=F(r),W=q(r),M=r[0].notify&&!r[0].notified&&Ie(),T=r[0].repeat&&Re(r);function Z(b,c){return b[2]>0?Ct:b[3]>0?jt:b[4]>0?Tt:b[1]?Rt:Yt}let h=Z(r),j=h(r),k=r[1]&&Ye(r),A=(r[3]>0||!r[1])&&Te(r),C=r[6]&&je(r);return{c(){e=R("div"),t=R("div"),n=R("span"),i=P(l),o=B(),a=R("span"),W.c(),f=B(),M&&M.c(),s=B(),T&&T.c(),d=B(),p=R("div"),$=R("span"),j.c(),w=B(),k&&k.c(),Y=B(),A&&A.c(),L=B(),C&&C.c(),S(n,"class","max-line-1 text-start font-semibold"),S(a,"class","flex w-full items-center text-start text-xs opacity-70"),S(t,"class","flex flex-1 flex-col items-start justify-center gap-0.5"),S($,"class","flex items-center justify-end gap-2 text-end"),S(p,"class","flex shrink-0 flex-col items-end justify-end gap-0.5 ml-5"),S(e,"class","flex w-full items-center justify-between")},m(b,c){v(b,e,c),y(e,t),y(t,n),y(n,i),y(t,o),y(t,a),W.m(a,null),y(a,f),M&&M.m(a,null),y(a,s),T&&T.m(a,null),y(e,d),y(e,p),y(p,$),j.m($,null),y($,w),k&&k.m($,null),y(p,Y),A&&A.m(p,null),y(e,L),C&&C.m(e,null),E=!0},p(b,c){(!E||c[0]&1)&&l!==(l=b[0].title+"")&&J(i,l),q===(q=F(b))&&W?W.p(b,c):(W.d(1),W=q(b),W&&(W.c(),W.m(a,f))),b[0].notify&&!b[0].notified?M?(M.p(b,c),c[0]&1&&_(M,1)):(M=Ie(),M.c(),_(M,1),M.m(a,s)):M&&(U(),m(M,1,1,()=>{M=null}),z()),b[0].repeat?T?(T.p(b,c),c[0]&1&&_(T,1)):(T=Re(b),T.c(),_(T,1),T.m(a,null)):T&&(U(),m(T,1,1,()=>{T=null}),z()),h===(h=Z(b))&&j?j.p(b,c):(j.d(1),j=h(b),j&&(j.c(),j.m($,w))),b[1]?k?(k.p(b,c),c[0]&2&&_(k,1)):(k=Ye(b),k.c(),_(k,1),k.m($,null)):k&&(U(),m(k,1,1,()=>{k=null}),z()),b[3]>0||!b[1]?A?A.p(b,c):(A=Te(b),A.c(),A.m(p,null)):A&&(A.d(1),A=null),b[6]?C?(C.p(b,c),c[0]&64&&_(C,1)):(C=je(b),C.c(),_(C,1),C.m(e,null)):C&&(U(),m(C,1,1,()=>{C=null}),z())},i(b){E||(_(M),_(T),b&&(u||ee(()=>{u=Qe(t,se,{delay:200,duration:250}),u.start()})),_(k),b&&ee(()=>{E&&(I||(I=K(p,se,{duration:200},!0)),I.run(1))}),_(C),E=!0)},o(b){m(M),m(T),m(k),b&&(I||(I=K(p,se,{duration:200},!1)),I.run(0)),m(C),E=!1},d(b){b&&g(e),W.d(),M&&M.d(),T&&T.d(),j.d(),k&&k.d(),A&&A.d(),b&&I&&I.end(),C&&C.d()}}}function Dt(r){let e,t,n,l,i,o,a,f,s,u,d,p,$,w,Y,I,L,E,F,q,W,M,T,Z;function h(c){r[13](c)}let j={placeholder:"Add a reminder",class:"w-full px-[0.75rem] text-sm"};r[0].title!==void 0&&(j.value=r[0].title),t=new qe({props:j}),ne.push(()=>le(t,"value",h)),t.$on("keydown",r[14]),t.$on("change",r[15]);function k(c){r[16](c)}let A={};r[7]!==void 0&&(A.value=r[7]),o=new ze({props:A}),ne.push(()=>le(o,"value",k)),o.$on("select",r[17]);function C(c){r[18](c)}let b={};return r[8]!==void 0&&(b.value=r[8]),u=new Ge({props:b}),ne.push(()=>le(u,"value",C)),u.$on("change",r[19]),w=new x({props:{icon:r[0].notify?ae:_e,tooltip:r[0].notify?"Send notification":"Do not send notification",class:"ml-1"}}),w.$on("click",r[20]),L=new x({props:{icon:r[0].repeat?"fluent:arrow-repeat-all-24-filled":"fluent:arrow-repeat-all-off-24-filled",tooltip:r[0].repeat?"Repeats "+r[0].repeat:"Doesn't repeat",class:"ml-1 text-[1.35rem]"}}),F=new Ee({props:{trigger:"click",transition:"slide",placement:"bottom-start",offset:[0,10],class:"flex flex-col items-start justify-start py-1",$$slots:{default:[Nt,({close:c})=>({28:c}),({close:c})=>[c?268435456:0]]},$$scope:{ctx:r}}}),{c(){e=R("div"),H(t.$$.fragment),l=B(),i=R("div"),H(o.$$.fragment),f=B(),s=R("div"),H(u.$$.fragment),p=B(),$=R("div"),H(w.$$.fragment),Y=B(),I=R("div"),H(L.$$.fragment),E=B(),H(F.$$.fragment),S(s,"class","flex items-center justify-start"),S($,"class","flex-center ml-1 flex gap-2"),S(i,"class","mt-2 flex w-full items-center justify-start gap-2"),S(e,"class","flex w-full flex-col items-start")},m(c,V){v(c,e,V),N(t,e,null),y(e,l),y(e,i),N(o,i,null),y(i,f),y(i,s),N(u,s,null),y(i,p),y(i,$),N(w,$,null),y($,Y),y($,I),N(L,I,null),y($,E),N(F,$,null),M=!0,T||(Z=me(W=Fe.call(null,e,{onClose:r[22],...r[9]&&{nodesToIgnore:[r[9]]}})),T=!0)},p(c,V){const te={};!n&&V[0]&1&&(n=!0,te.value=c[0].title,ie(()=>n=!1)),t.$set(te);const ge={};!a&&V[0]&128&&(a=!0,ge.value=c[7],ie(()=>a=!1)),o.$set(ge);const we={};!d&&V[0]&256&&(d=!0,we.value=c[8],ie(()=>d=!1)),u.$set(we);const be={};V[0]&1&&(be.icon=c[0].notify?ae:_e),V[0]&1&&(be.tooltip=c[0].notify?"Send notification":"Do not send notification"),w.$set(be);const he={};V[0]&1&&(he.icon=c[0].repeat?"fluent:arrow-repeat-all-24-filled":"fluent:arrow-repeat-all-off-24-filled"),V[0]&1&&(he.tooltip=c[0].repeat?"Repeats "+c[0].repeat:"Doesn't repeat"),L.$set(he);const ye={};V[0]&268435457|V[1]&2&&(ye.$$scope={dirty:V,ctx:c}),F.$set(ye),W&&ve(W.update)&&V[0]&544&&W.update.call(null,{onClose:c[22],...c[9]&&{nodesToIgnore:[c[9]]}})},i(c){M||(_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(w.$$.fragment,c),_(L.$$.fragment,c),_(F.$$.fragment,c),c&&ee(()=>{M&&(q||(q=K(i,re,{duration:200},!0)),q.run(1))}),M=!0)},o(c){m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(w.$$.fragment,c),m(L.$$.fragment,c),m(F.$$.fragment,c),c&&(q||(q=K(i,re,{duration:200},!1)),q.run(0)),M=!1},d(c){c&&g(e),O(t),O(o),O(u),O(w),O(L),O(F),c&&q&&q.end(),T=!1,Z()}}}function Mt(r){let e=D(r[0].when).format("MMMM Do YYYY")+"",t;return{c(){t=P(e)},m(n,l){v(n,t,l)},p(n,l){l[0]&1&&e!==(e=D(n[0].when).format("MMMM Do YYYY")+"")&&J(t,e)},d(n){n&&g(t)}}}function It(r){let e=D(r[0].when).format("h:mm A, MMMM Do YYYY")+"",t;return{c(){t=P(e)},m(n,l){v(n,t,l)},p(n,l){l[0]&1&&e!==(e=D(n[0].when).format("h:mm A, MMMM Do YYYY")+"")&&J(t,e)},d(n){n&&g(t)}}}function Ie(r){let e,t;return e=new $e({props:{icon:ae,class:"ml-2 text-xs"}}),{c(){H(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},p:G,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Re(r){let e,t,n,l,i,o;return t=new $e({props:{icon:Xe,class:"ml-2 text-xs"}}),{c(){e=R("div"),H(t.$$.fragment),S(e,"class","w-max")},m(a,f){v(a,e,f),N(t,e,null),l=!0,i||(o=me(n=xe.call(null,e,"Repeats "+r[0].repeat)),i=!0)},p(a,f){n&&ve(n.update)&&f[0]&1&&n.update.call(null,"Repeats "+a[0].repeat)},i(a){l||(_(t.$$.fragment,a),l=!0)},o(a){m(t.$$.fragment,a),l=!1},d(a){a&&g(e),O(t),i=!1,o()}}}function Rt(r){let e;return{c(){e=P("Overdue")},m(t,n){v(t,e,n)},p:G,d(t){t&&g(e)}}}function Yt(r){let e;return{c(){e=P("Now")},m(t,n){v(t,e,n)},p:G,d(t){t&&g(e)}}}function Tt(r){let e,t=Math.floor(r[4])+"",n,l,i=r[4]>1?"s":"",o;return{c(){e=P("In "),n=P(t),l=P(" minute"),o=P(i)},m(a,f){v(a,e,f),v(a,n,f),v(a,l,f),v(a,o,f)},p(a,f){f[0]&16&&t!==(t=Math.floor(a[4])+"")&&J(n,t),f[0]&16&&i!==(i=a[4]>1?"s":"")&&J(o,i)},d(a){a&&g(e),a&&g(n),a&&g(l),a&&g(o)}}}function jt(r){let e,t=Math.floor(r[3])+"",n,l,i=r[3]>1?"s":"",o;return{c(){e=P("In "),n=P(t),l=P(" hour"),o=P(i)},m(a,f){v(a,e,f),v(a,n,f),v(a,l,f),v(a,o,f)},p(a,f){f[0]&8&&t!==(t=Math.floor(a[3])+"")&&J(n,t),f[0]&8&&i!==(i=a[3]>1?"s":"")&&J(o,i)},d(a){a&&g(e),a&&g(n),a&&g(l),a&&g(o)}}}function Ct(r){let e,t=Math.floor(r[2])+"",n,l,i=r[2]>1?"s":"",o;return{c(){e=P("In "),n=P(t),l=P(" day"),o=P(i)},m(a,f){v(a,e,f),v(a,n,f),v(a,l,f),v(a,o,f)},p(a,f){f[0]&4&&t!==(t=Math.floor(a[2])+"")&&J(n,t),f[0]&4&&i!==(i=a[2]>1?"s":"")&&J(o,i)},d(a){a&&g(e),a&&g(n),a&&g(l),a&&g(o)}}}function Ye(r){let e,t;return e=new x({props:{icon:et,tooltip:"Clear"}}),e.$on("click",r[23]),{c(){H(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},p:G,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Te(r){let e;function t(i,o){if(i[2]>0)return Ht;if(i[3]>0)return Bt}let n=t(r),l=n&&n(r);return{c(){e=R("span"),l&&l.c(),S(e,"class","flex w-full items-end justify-end text-end text-xs opacity-70")},m(i,o){v(i,e,o),l&&l.m(e,null)},p(i,o){n===(n=t(i))&&l?l.p(i,o):(l&&l.d(1),l=n&&n(i),l&&(l.c(),l.m(e,null)))},d(i){i&&g(e),l&&l.d()}}}function Bt(r){let e=r[4]%60+"",t,n;return{c(){t=P(e),n=P(" minutes")},m(l,i){v(l,t,i),v(l,n,i)},p(l,i){i[0]&16&&e!==(e=l[4]%60+"")&&J(t,e)},d(l){l&&g(t),l&&g(n)}}}function Ht(r){let e=r[3]%24+"",t,n;return{c(){t=P(e),n=P(" hours")},m(l,i){v(l,t,i),v(l,n,i)},p(l,i){i[0]&8&&e!==(e=l[3]%24+"")&&J(t,e)},d(l){l&&g(t),l&&g(n)}}}function je(r){let e,t,n,l;return t=new x({props:{icon:tt,class:"text-xl transition",tooltip:"Remove"}}),t.$on("click",r[24]),{c(){e=R("div"),H(t.$$.fragment),S(e,"class","flex-center ml-2")},m(i,o){v(i,e,o),N(t,e,null),l=!0},p:G,i(i){l||(_(t.$$.fragment,i),i&&ee(()=>{l&&(n||(n=K(e,se,{duration:200},!0)),n.run(1))}),l=!0)},o(i){m(t.$$.fragment,i),i&&(n||(n=K(e,se,{duration:200},!1)),n.run(0)),l=!1},d(i){i&&g(e),O(t),i&&n&&n.end()}}}function Ce(r){let e,t;return e=new $e({props:{icon:nt,class:"ml-auto"}}),{c(){H(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},p:G,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Be(r){let e,t=r[29].l+"",n,l,i,o,a,f,s=r[0].repeat===r[29].v&&Ce();function u(){return r[21](r[29],r[28])}return{c(){e=R("button"),n=P(t),l=B(),s&&s.c(),i=B(),S(e,"class","flex w-36 items-center justify-start gap-2 px-3 py-1 text-left text-sm transition hover:bg-[var(--border-color-lighter)]")},m(d,p){v(d,e,p),y(e,n),y(e,l),s&&s.m(e,null),y(e,i),o=!0,a||(f=ue(e,"click",u),a=!0)},p(d,p){r=d,r[0].repeat===r[29].v?s?(s.p(r,p),p[0]&1&&_(s,1)):(s=Ce(),s.c(),_(s,1),s.m(e,i)):s&&(U(),m(s,1,1,()=>{s=null}),z())},i(d){o||(_(s),o=!0)},o(d){m(s),o=!1},d(d){d&&g(e),s&&s.d(),a=!1,f()}}}function Nt(r){let e,t,n=[{v:!1,l:"Don't repeat"},{v:"daily",l:"Daily"},{v:"weekly",l:"Weekly"},{v:"monthly",l:"Monthly"},{v:"yearly",l:"Yearly"}],l=[];for(let o=0;o<5;o+=1)l[o]=Be(Me(r,n,o));const i=o=>m(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<5;o+=1)l[o].c();e=ke()},m(o,a){for(let f=0;f<5;f+=1)l[f]&&l[f].m(o,a);v(o,e,a),t=!0},p(o,a){if(a[0]&268437505){n=[{v:!1,l:"Don't repeat"},{v:"daily",l:"Daily"},{v:"weekly",l:"Weekly"},{v:"monthly",l:"Monthly"},{v:"yearly",l:"Yearly"}];let f;for(f=0;f<5;f+=1){const s=Me(o,n,f);l[f]?(l[f].p(s,a),_(l[f],1)):(l[f]=Be(s),l[f].c(),_(l[f],1),l[f].m(e.parentNode,e))}for(U(),f=5;f<5;f+=1)i(f);z()}},i(o){if(!t){for(let a=0;a<5;a+=1)_(l[a]);t=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<5;a+=1)m(l[a]);t=!1},d(o){Ue(l,o),o&&g(e)}}}function Ot(r){let e,t,n,l;const i=[Dt,yt],o=[];function a(f,s){return f[5]?0:1}return t=a(r),n=o[t]=i[t](r),{c(){e=R("div"),n.c(),S(e,"class","container-card transition-container flex w-full items-center justify-between gap-4 svelte-1kaweas")},m(f,s){v(f,e,s),o[t].m(e,null),l=!0},p(f,s){let u=t;t=a(f),t===u?o[t].p(f,s):(U(),m(o[u],1,1,()=>{o[u]=null}),z(),n=o[t],n?n.p(f,s):(n=o[t]=i[t](f),n.c()),_(n,1),n.m(e,null))},i(f){l||(_(n),l=!0)},o(f){m(n),l=!1},d(f){f&&g(e),o[t].d()}}}function St(r){let e,t;return e=new vt({props:{class:"flex w-full items-center justify-between gap-4 "+(r[5]?"px-2":"px-3")+" py-2",styles:"border-radius: calc(var(--border-radius)/2)",$$slots:{default:[Ot]},$$scope:{ctx:r}}}),e.$on("pointerenter",r[25]),e.$on("pointerleave",r[26]),e.$on("click",r[27]),{c(){H(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},p(n,l){const i={};l[0]&32&&(i.class="flex w-full items-center justify-between gap-4 "+(n[5]?"px-2":"px-3")+" py-2"),l[0]&1023|l[1]&2&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function At(r,e,t){let n;Q(r,Je,c=>t(9,n=c));const{reminders:l}=fe("stores");let{reminder:i}=e,o=D(i.when).diff(D(),"days"),a=D(i.when).diff(D(),"hours"),f=D(i.when).diff(D(),"minutes"),s=D(i.when).isBefore(D()),u=!1,d=!1,p=new Date(i.when),$=D(i.when).format("HH:mm"),w;const Y=()=>{t(0,i.when=new Date(p.setHours(parseInt($.split(":")[0]),parseInt($.split(":")[1]))).getTime(),i),i.notified&&i.when>Date.now()&&t(0,i.notified=!1,i),l.update(c=>{const V=c.findIndex(te=>te.id===i.id);return c[V]=i,c})};Ve(()=>{clearInterval(w)});function I(c){r.$$.not_equal(i.title,c)&&(i.title=c,t(0,i))}const L=c=>{c.key===" "&&(c.preventDefault(),t(0,i.title+=" ",i))},E=()=>{Y()};function F(c){p=c,t(7,p)}const q=()=>{Y()};function W(c){$=c,t(8,$)}const M=()=>{Y()},T=()=>{t(0,i.notify=!i.notify,i),Y()},Z=(c,V)=>{t(0,i.repeat=c.v,i),Y(),V()},h=()=>{t(5,u=!1)},j=c=>{c.stopPropagation(),l.update(V=>(V.splice(V.findIndex(te=>te.id===i.id),1),V))},k=()=>{l.update(c=>(c.splice(c.findIndex(V=>V.id===i.id),1),c))},A=()=>t(6,d=!0),C=()=>t(6,d=!1),b=()=>{t(7,p=new Date(i.when)),t(8,$=D(i.when).format("HH:mm")),t(5,u=!0)};return r.$$set=c=>{"reminder"in c&&t(0,i=c.reminder)},r.$$.update=()=>{r.$$.dirty[0]&4099&&i.when>Date.now()&&(clearInterval(w),t(12,w=setInterval(()=>{t(2,o=D(i.when).diff(D(),"days")),t(3,a=D(i.when).diff(D(),"hours")),t(4,f=D(i.when).diff(D(),"minutes")),t(1,s=D(i.when).isBefore(D())),s&&clearInterval(w)},1e3)))},[i,s,o,a,f,u,d,p,$,n,l,Y,w,I,L,E,F,q,W,M,T,Z,h,j,k,A,C,b]}class Pt extends ce{constructor(e){super(),pe(this,e,At,St,de,{reminder:0},null,[-1,-1])}}function He(r,e,t){const n=r.slice();return n[25]=e[t],n}function Lt(r){let e,t,n,l,i;function o(s){r[14](s)}let a={placeholder:"Add a reminder",class:"w-full px-[0.75rem] text-sm",autofocus:!0};r[4]!==void 0&&(a.value=r[4]),e=new qe({props:a}),ne.push(()=>le(e,"value",o)),e.$on("keydown",r[15]),e.$on("focus",r[16]);let f=r[4]&&Ne(r);return{c(){H(e.$$.fragment),n=B(),f&&f.c(),l=ke()},m(s,u){N(e,s,u),v(s,n,u),f&&f.m(s,u),v(s,l,u),i=!0},p(s,u){const d={};!t&&u&16&&(t=!0,d.value=s[4],ie(()=>t=!1)),e.$set(d),s[4]?f?(f.p(s,u),u&16&&_(f,1)):(f=Ne(s),f.c(),_(f,1),f.m(l.parentNode,l)):f&&(U(),m(f,1,1,()=>{f=null}),z())},i(s){i||(_(e.$$.fragment,s),_(f),i=!0)},o(s){m(e.$$.fragment,s),m(f),i=!1},d(s){O(e,s),s&&g(n),f&&f.d(s),s&&g(l)}}}function Vt(r){let e;return{c(){e=R("div"),e.textContent="You've reached the max number of reminders",S(e,"class","flex-center border-light curved-half w-full px-4 py-2 text-sm")},m(t,n){v(t,e,n)},p:G,i:G,o:G,d(t){t&&g(e)}}}function Ne(r){let e,t,n,l,i,o,a,f,s,u,d,p,$,w,Y,I,L,E,F,q;function W(h){r[17](h)}let M={};r[3]!==void 0&&(M.value=r[3]),t=new ze({props:M}),ne.push(()=>le(t,"value",W)),t.$on("pointerdown",r[18]);function T(h){r[19](h)}let Z={};return r[2]!==void 0&&(Z.value=r[2]),o=new Ge({props:Z}),ne.push(()=>le(o,"value",T)),s=new x({props:{icon:r[1]?ae:_e,tooltip:r[1]?"Send notification":"Do not send notification",class:"ml-2"}}),s.$on("click",r[21]),p=new x({props:{icon:r[0]?"fluent:arrow-repeat-all-24-filled":"fluent:arrow-repeat-all-off-24-filled",tooltip:r[0]?"Repeats "+r[0]:"Doesn't repeat",class:"ml-1 text-[1.35rem]"}}),p.$on("click",r[22]),w=new Ee({props:{trigger:"click",transition:"slide",placement:"bottom-start",offset:[0,10],class:"flex flex-col items-start justify-start py-1",$$slots:{default:[Wt,({close:h})=>({24:h}),({close:h})=>h?16777216:0]},$$scope:{ctx:r}}}),I=new x({props:{icon:lt,class:"ml-auto mr-1 text-[1.25rem]",tooltip:"Add reminder"}}),I.$on("click",r[13]),{c(){e=R("div"),H(t.$$.fragment),l=B(),i=R("div"),H(o.$$.fragment),f=B(),H(s.$$.fragment),u=B(),d=R("div"),H(p.$$.fragment),$=B(),H(w.$$.fragment),Y=B(),H(I.$$.fragment),S(i,"class","flex items-center justify-start"),S(e,"class","mt-2 flex w-full items-center justify-between gap-2")},m(h,j){v(h,e,j),N(t,e,null),y(e,l),y(e,i),N(o,i,null),y(e,f),N(s,e,null),y(e,u),y(e,d),N(p,d,null),y(e,$),N(w,e,null),y(e,Y),N(I,e,null),E=!0,F||(q=ue(i,"pointerdown",r[20]),F=!0)},p(h,j){const k={};!n&&j&8&&(n=!0,k.value=h[3],ie(()=>n=!1)),t.$set(k);const A={};!a&&j&4&&(a=!0,A.value=h[2],ie(()=>a=!1)),o.$set(A);const C={};j&2&&(C.icon=h[1]?ae:_e),j&2&&(C.tooltip=h[1]?"Send notification":"Do not send notification"),s.$set(C);const b={};j&1&&(b.icon=h[0]?"fluent:arrow-repeat-all-24-filled":"fluent:arrow-repeat-all-off-24-filled"),j&1&&(b.tooltip=h[0]?"Repeats "+h[0]:"Doesn't repeat"),p.$set(b);const c={};j&285212673&&(c.$$scope={dirty:j,ctx:h}),w.$set(c)},i(h){E||(_(t.$$.fragment,h),_(o.$$.fragment,h),_(s.$$.fragment,h),_(p.$$.fragment,h),_(w.$$.fragment,h),_(I.$$.fragment,h),h&&ee(()=>{E&&(L||(L=K(e,re,{duration:300},!0)),L.run(1))}),E=!0)},o(h){m(t.$$.fragment,h),m(o.$$.fragment,h),m(s.$$.fragment,h),m(p.$$.fragment,h),m(w.$$.fragment,h),m(I.$$.fragment,h),h&&(L||(L=K(e,re,{duration:300},!1)),L.run(0)),E=!1},d(h){h&&g(e),O(t),O(o),O(s),O(p),O(w),O(I),h&&L&&L.end(),F=!1,q()}}}function Oe(r){let e,t;return e=new $e({props:{icon:it,class:"ml-auto"}}),{c(){H(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},p:G,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Se(r){let e,t=r[25].l+"",n,l,i,o,a,f,s=r[0]===r[25].v&&Oe();function u(){return r[23](r[25],r[24])}return{c(){e=R("button"),n=P(t),l=B(),s&&s.c(),i=B(),S(e,"class","flex w-36 items-center justify-start gap-2 px-3 py-1 text-left text-sm transition hover:bg-[var(--border-color-lighter)]")},m(d,p){v(d,e,p),y(e,n),y(e,l),s&&s.m(e,null),y(e,i),o=!0,a||(f=ue(e,"click",u),a=!0)},p(d,p){r=d,r[0]===r[25].v?s?(s.p(r,p),p&1&&_(s,1)):(s=Oe(),s.c(),_(s,1),s.m(e,i)):s&&(U(),m(s,1,1,()=>{s=null}),z())},i(d){o||(_(s),o=!0)},o(d){m(s),o=!1},d(d){d&&g(e),s&&s.d(),a=!1,f()}}}function Wt(r){let e,t,n=[{v:!1,l:"Don't repeat"},{v:"daily",l:"Daily"},{v:"weekly",l:"Weekly"},{v:"monthly",l:"Monthly"},{v:"yearly",l:"Yearly"}],l=[];for(let o=0;o<5;o+=1)l[o]=Se(He(r,n,o));const i=o=>m(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<5;o+=1)l[o].c();e=ke()},m(o,a){for(let f=0;f<5;f+=1)l[f]&&l[f].m(o,a);v(o,e,a),t=!0},p(o,a){if(a&16777217){n=[{v:!1,l:"Don't repeat"},{v:"daily",l:"Daily"},{v:"weekly",l:"Weekly"},{v:"monthly",l:"Monthly"},{v:"yearly",l:"Yearly"}];let f;for(f=0;f<5;f+=1){const s=He(o,n,f);l[f]?(l[f].p(s,a),_(l[f],1)):(l[f]=Se(s),l[f].c(),_(l[f],1),l[f].m(e.parentNode,e))}for(U(),f=5;f<5;f+=1)i(f);z()}},i(o){if(!t){for(let a=0;a<5;a+=1)_(l[a]);t=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<5;a+=1)m(l[a]);t=!1},d(o){Ue(l,o),o&&g(e)}}}function qt(r){let e,t,n,l,i;const o=[Vt,Lt],a=[];function f(s,u){return s[5].length>=50?0:1}return t=f(r),n=a[t]=o[t](r),{c(){e=R("div"),n.c(),S(e,"class","mt-2 flex w-full flex-col items-start")},m(s,u){v(s,e,u),a[t].m(e,null),i=!0},p(s,[u]){let d=t;t=f(s),t===d?a[t].p(s,u):(U(),m(a[d],1,1,()=>{a[d]=null}),z(),n=a[t],n?n.p(s,u):(n=a[t]=o[t](s),n.c()),_(n,1),n.m(e,null))},i(s){i||(_(n),s&&ee(()=>{i&&(l||(l=K(e,re,{duration:300},!0)),l.run(1))}),i=!0)},o(s){m(n),s&&(l||(l=K(e,re,{duration:300},!1)),l.run(0)),i=!1},d(s){s&&g(e),a[t].d(),s&&l&&l.end()}}}function Et(r,e,t){let n,l,i,o,a,f;const{notify:s,reminders:u,repeat:d,selectedDate:p,selectedTime:$,title:w}=fe("stores");Q(r,s,k=>t(1,l=k)),Q(r,u,k=>t(5,f=k)),Q(r,d,k=>t(0,n=k)),Q(r,p,k=>t(3,o=k)),Q(r,$,k=>t(2,i=k)),Q(r,w,k=>t(4,a=k));const Y=fe("appView"),I=()=>{a&&(u.update(k=>(k.push({id:We(),title:a,when:new Date(o.setHours(parseInt(i.split(":")[0]),parseInt(i.split(":")[1]))).getTime(),isTimeSet:!0,notify:l,repeat:n}),k)),X(w,a="",a),X(p,o=new Date,o),X($,i=D().format("HH:mm"),i),X(s,l=!0,l),X(d,n=!1,n))};function L(k){a=k,w.set(a)}const E=k=>{k.key==="Enter"&&I()},F=()=>{Y.set(!0)};function q(k){o=k,p.set(o)}const W=()=>{Y.set(!0)};function M(k){i=k,$.set(i)}return[n,l,i,o,a,f,s,u,d,p,$,w,Y,I,L,E,F,q,W,M,()=>{Y.set(!0)},()=>{X(s,l=!l,l)},()=>{Y.set(!0)},(k,A)=>{X(d,n=k.v,n),A()}]}class Ft extends ce{constructor(e){super(),pe(this,e,Et,qt,de,{})}}function Ae(r,e,t){const n=r.slice();return n[9]=e[t],n}function Ut(r){let e,t,n=[],l=new Map,i,o,a,f=r[0];const s=u=>u[9].id;for(let u=0;u<f.length;u+=1){let d=Ae(r,f,u),p=s(d);l.set(p,n[u]=Pe(p,d))}return{c(){e=R("div"),t=R("div");for(let u=0;u<n.length;u+=1)n[u].c();S(t,"class","flex max-h-[20rem] w-full flex-col items-start justify-start gap-1.5")},m(u,d){v(u,e,d),y(e,t);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(t,null);i=!0,o||(a=me(ot.call(null,e)),o=!0)},p(u,d){if(d&1){f=u[0],U();for(let p=0;p<n.length;p+=1)n[p].r();n=st(n,d,s,1,u,f,l,t,ft,Pe,null,Ae);for(let p=0;p<n.length;p+=1)n[p].a();z()}},i(u){if(!i){for(let d=0;d<f.length;d+=1)_(n[d]);i=!0}},o(u){for(let d=0;d<n.length;d+=1)m(n[d]);i=!1},d(u){u&&g(e);for(let d=0;d<n.length;d+=1)n[d].d();o=!1,a()}}}function zt(r){let e,t,n,l,i;return l=new at({props:{$$slots:{default:[Gt]},$$scope:{ctx:r}}}),l.$on("click",r[5]),{c(){e=R("div"),t=R("span"),t.innerHTML="You don&#39;t have any reminders yet. <br/> Add a reminder to get started.",n=B(),H(l.$$.fragment),S(t,"class","mx-12 text-center text-sm"),S(e,"class","flex-center flex-col gap-3 py-6")},m(o,a){v(o,e,a),y(e,t),y(e,n),N(l,e,null),i=!0},p(o,a){const f={};a&4096&&(f.$$scope={dirty:a,ctx:o}),l.$set(f)},i(o){i||(_(l.$$.fragment,o),i=!0)},o(o){m(l.$$.fragment,o),i=!1},d(o){o&&g(e),O(l)}}}function Pe(r,e){let t,n,l,i,o,a=G,f;return n=new Pt({props:{reminder:e[9]}}),{key:r,first:null,c(){t=R("div"),H(n.$$.fragment),l=B(),S(t,"class","w-full"),this.first=t},m(s,u){v(s,t,u),N(n,t,null),y(t,l),f=!0},p(s,u){e=s;const d={};u&1&&(d.reminder=e[9]),n.$set(d)},r(){o=t.getBoundingClientRect()},f(){ut(t),a(),ct(t,o)},a(){a(),a=pt(t,o,dt,{duration:300})},i(s){f||(_(n.$$.fragment,s),s&&ee(()=>{f&&(i||(i=K(t,De,{duration:200},!0)),i.run(1))}),f=!0)},o(s){m(n.$$.fragment,s),s&&(i||(i=K(t,De,{duration:200},!1)),i.run(0)),f=!1},d(s){s&&g(t),O(n),s&&i&&i.end()}}}function Gt(r){let e;return{c(){e=P("Add Reminder")},m(t,n){v(t,e,n)},d(t){t&&g(e)}}}function Le(r){let e,t;return e=new Ft({}),{c(){H(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Kt(r){let e,t,n,l,i,o,a,f;const s=[zt,Ut],u=[];function d($,w){return $[0].length===0?0:1}t=d(r),n=u[t]=s[t](r);let p=(r[2]||r[1])&&Le();return{c(){e=R("div"),n.c(),l=B(),p&&p.c(),S(e,"class","w-[24rem] px-2 py-2")},m($,w){v($,e,w),u[t].m(e,null),y(e,l),p&&p.m(e,null),o=!0,a||(f=[ue(e,"pointerenter",r[6]),ue(e,"pointerleave",r[7]),me(i=Fe.call(null,e,r[8]))],a=!0)},p($,[w]){let Y=t;t=d($),t===Y?u[t].p($,w):(U(),m(u[Y],1,1,()=>{u[Y]=null}),z(),n=u[t],n?n.p($,w):(n=u[t]=s[t]($),n.c()),_(n,1),n.m(e,l)),$[2]||$[1]?p?w&6&&_(p,1):(p=Le(),p.c(),_(p,1),p.m(e,null)):p&&(U(),m(p,1,1,()=>{p=null}),z()),i&&ve(i.update)&&w&2&&i.update.call(null,$[8])},i($){o||(_(n),_(p),o=!0)},o($){m(n),m(p),o=!1},d($){$&&g(e),u[t].d(),p&&p.d(),a=!1,rt(f)}}}function Zt(r,e,t){let n,l;const{reminders:i}=fe("stores");Q(r,i,p=>t(0,n=p));let o=!1;const a=fe("appView");Q(r,a,p=>t(2,l=p));const f=()=>{t(1,o=!0)},s=()=>n.length!==0&&t(1,o=!0),u=()=>n.length!==0&&t(1,o=!1),d=()=>{t(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&1&&X(i,n=n.sort((p,$)=>p.when-$.when),n)},[n,o,l,i,a,f,s,u,d]}class Jt extends ce{constructor(e){super(),pe(this,e,Zt,Kt,de,{})}}function Qt(r){let e,t;return e=new ht({}),{c(){H(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},p:G,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Xt(r){let e,t,n,l;return e=new Jt({}),n=new wt({props:{reminders:r[2]}}),{c(){H(e.$$.fragment),t=B(),H(n.$$.fragment)},m(i,o){N(e,i,o),v(i,t,o),N(n,i,o),l=!0},p:G,i(i){l||(_(e.$$.fragment,i),_(n.$$.fragment,i),l=!0)},o(i){m(e.$$.fragment,i),m(n.$$.fragment,i),l=!1},d(i){O(e,i),i&&g(t),O(n,i)}}}function xt(r){let e,t,n,l;const i=[Xt,Qt],o=[];function a(f,s){return f[0]?0:1}return e=a(r),t=o[e]=i[e](r),{c(){t.c(),n=ke()},m(f,s){o[e].m(f,s),v(f,n,s),l=!0},p(f,[s]){let u=e;e=a(f),e===u?o[e].p(f,s):(U(),m(o[u],1,1,()=>{o[u]=null}),z(),t=o[e],t?t.p(f,s):(t=o[e]=i[e](f),t.c()),_(t,1),t.m(n.parentNode,n))},i(f){l||(_(t),l=!0)},o(f){m(t),l=!1},d(f){o[e].d(f),f&&g(n)}}}function en(r,e,t){let n,{config:l}=e;const i={path:"user_data/{uid}/profiles/{currentProfile}/apps/"+l.id,currentProfile:_t,uid:mt},{create:o,isFetched:a,start:f,stop:s}=bt(i);Q(r,a,I=>t(0,n=I));const u=o("reminders",[]),d=oe(!1),p=oe(""),$=oe(D().format("HH:mm")),w=oe(new Date),Y=oe(!0);return $t(async()=>{f()}),kt("stores",{reminders:u,repeat:d,title:p,selectedTime:$,selectedDate:w,notify:Y}),r.$$set=I=>{"config"in I&&t(3,l=I.config)},[n,a,u,l]}class on extends ce{constructor(e){super(),pe(this,e,en,xt,de,{config:3})}}export{on as default};
