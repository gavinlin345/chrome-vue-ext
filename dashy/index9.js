import{S as ve,i as we,s as ye,q as w,r as v,u as C,v as W,a as h,x as H,t as d,D as E,b as pe,br as $e,av as Ie,bs as Se,bt as je,bu as Ce,o as Ee,O as Z,I as V,aE as ae,c as T,V as j,K as P,m as z,L as _,Z as te,y as G,_ as U,B as O,d as F,n as L,ae as qe,ak as Be,P as x,bv as De,Q as Te,U as ze,W as ee,N as Fe,aq as me,bw as Pe,R as Re,ac as Ae,a3 as Q,aa as Ue,a0 as Me,bx as Le,bf as We,by as He,p as Oe,bz as Ye,bA as Ke,bB as Ne,bC as Qe,bD as Ve,bE as Ze}from"./overlayscrollbars.js";function _e(i,t,e){const n=i.slice();return n[25]=t[e],n}function Ge(i){let t,e,n,r,f,s,a,l,o;return e=new V({props:{icon:ae,class:"shrink-0 text-2xl"}}),{c(){t=w("div"),T(e.$$.fragment),n=j(),r=w("span"),f=P("Your request has been submitted. We will get back to you as soon as possible. Ticket ID is "),s=P(i[6]),a=P("."),v(r,"class","text-center text-sm"),v(t,"class","mx-8 flex h-[14.5rem] shrink-0 flex-col items-center justify-center gap-4")},m(u,g){C(u,t,g),z(e,t,null),_(t,n),_(t,r),_(r,f),_(r,s),_(r,a),o=!0},p(u,g){(!o||g&64)&&te(s,u[6])},i(u){o||(d(e.$$.fragment,u),u&&G(()=>{o&&(l||(l=U(t,O,{duration:200},!0)),l.run(1))}),o=!0)},o(u){h(e.$$.fragment,u),u&&(l||(l=U(t,O,{duration:200},!1)),l.run(0)),o=!1},d(u){u&&E(t),F(e),u&&l&&l.end()}}}function Je(i){let t,e,n,r,f,s;return e=new V({props:{icon:ae,class:"shrink-0 text-2xl"}}),{c(){t=w("div"),T(e.$$.fragment),n=j(),r=w("span"),r.textContent="Thank you for your feedback. We really appreciate it.",v(r,"class","text-center text-sm"),v(t,"class","mx-8 flex h-[14.5rem] flex-col items-center justify-center gap-4")},m(a,l){C(a,t,l),z(e,t,null),_(t,n),_(t,r),s=!0},p:L,i(a){s||(d(e.$$.fragment,a),a&&G(()=>{s&&(f||(f=U(t,O,{duration:200},!0)),f.run(1))}),s=!0)},o(a){h(e.$$.fragment,a),a&&(f||(f=U(t,O,{duration:200},!1)),f.run(0)),s=!1},d(a){a&&E(t),F(e),a&&f&&f.end()}}}function Xe(i){let t,e,n,r,f,s;e=new qe({props:{class:"text-xl"}});function a(u,g){return u[0]==="support"?tt:et}let l=a(i),o=l(i);return{c(){t=w("div"),T(e.$$.fragment),n=j(),r=w("span"),o.c(),v(r,"class","text-center text-sm"),v(t,"class","flex h-[14.5rem] flex-col items-center justify-center gap-4")},m(u,g){C(u,t,g),z(e,t,null),_(t,n),_(t,r),o.m(r,null),s=!0},p(u,g){l!==(l=a(u))&&(o.d(1),o=l(u),o&&(o.c(),o.m(r,null)))},i(u){s||(d(e.$$.fragment,u),u&&G(()=>{s&&(f||(f=U(t,O,{duration:200},!0)),f.run(1))}),s=!0)},o(u){h(e.$$.fragment,u),u&&(f||(f=U(t,O,{duration:200},!1)),f.run(0)),s=!1},d(u){u&&E(t),F(e),o.d(),u&&f&&f.end()}}}function xe(i){var N,fe;let t,e,n,r,f,s,a,l,o,u,g,S,q,p,$,m,I,Y,M,R,A,K;function le(c){i[16](c)}let J={options:i[13],$$slots:{default:[lt,({option:c})=>({28:c}),({option:c})=>c?268435456:0]},$$scope:{ctx:i}};i[0]!==void 0&&(J.value=i[0]),s=new Be({props:J}),Z.push(()=>x(s,"value",le));let y=!((fe=(N=i[12])==null?void 0:N.userInfo)!=null&&fe.email)&&de(i);function ne(c){i[18](c)}let X={class:"mt-3 w-full px-[0.75rem] text-sm",styles:"min-height: 7rem; max-height: 12rem;",autoResize:!0,placeholder:i[0]==="support"?"How can we help you?":i[0]==="bug"?"Explain the issue or bug you found here.":"Please share your feedback with us.",maxlength:1e3};i[5]!==void 0&&(X.value=i[5]),u=new De({props:X}),Z.push(()=>x(u,"value",ne));function b(c){i[19](c)}let B={};i[7]!==void 0&&(B.value=i[7]),m=new Te({props:B}),Z.push(()=>x(m,"value",b));let k=i[7]&&be(i);return R=new ze({props:{class:"mt-4 self-center",disabled:!i[12]&&!i[4]||i[5].length<9,$$slots:{default:[ft]},$$scope:{ctx:i}}}),R.$on("click",i[15]),{c(){t=w("div"),e=w("div"),n=w("div"),r=w("span"),r.textContent="Request type",f=j(),T(s.$$.fragment),l=j(),y&&y.c(),o=j(),T(u.$$.fragment),S=j(),q=w("div"),p=w("span"),p.textContent="Add attachments",$=j(),T(m.$$.fragment),Y=j(),k&&k.c(),M=j(),T(R.$$.fragment),v(r,"class","text-sm"),v(n,"class","ml-1 flex items-center justify-start gap-3"),v(e,"class","flex flex-col w-full items-start justify-start gap-3"),v(p,"class","text-sm"),v(q,"class","mr-auto mt-2.5 ml-1 flex items-center justify-start gap-3"),v(t,"class","flex h-max w-full flex-col items-center justify-between")},m(c,D){C(c,t,D),_(t,e),_(e,n),_(n,r),_(n,f),z(s,n,null),_(e,l),y&&y.m(e,null),_(t,o),z(u,t,null),_(t,S),_(t,q),_(q,p),_(q,$),z(m,q,null),_(t,Y),k&&k.m(t,null),_(t,M),z(R,t,null),K=!0},p(c,D){var oe,ce;const se={};D&805306368&&(se.$$scope={dirty:D,ctx:c}),!a&&D&1&&(a=!0,se.value=c[0],ee(()=>a=!1)),s.$set(se),(ce=(oe=c[12])==null?void 0:oe.userInfo)!=null&&ce.email?y&&(W(),h(y,1,1,()=>{y=null}),H()):y?(y.p(c,D),D&4096&&d(y,1)):(y=de(c),y.c(),d(y,1),y.m(e,null));const re={};D&1&&(re.placeholder=c[0]==="support"?"How can we help you?":c[0]==="bug"?"Explain the issue or bug you found here.":"Please share your feedback with us."),!g&&D&32&&(g=!0,re.value=c[5],ee(()=>g=!1)),u.$set(re);const ue={};!I&&D&128&&(I=!0,ue.value=c[7],ee(()=>I=!1)),m.$set(ue),c[7]?k?(k.p(c,D),D&128&&d(k,1)):(k=be(c),k.c(),d(k,1),k.m(t,M)):k&&(W(),h(k,1,1,()=>{k=null}),H());const ie={};D&4144&&(ie.disabled=!c[12]&&!c[4]||c[5].length<9),D&536870912&&(ie.$$scope={dirty:D,ctx:c}),R.$set(ie)},i(c){K||(d(s.$$.fragment,c),d(y),d(u.$$.fragment,c),d(m.$$.fragment,c),d(k),d(R.$$.fragment,c),c&&G(()=>{K&&(A||(A=U(t,O,{duration:200},!0)),A.run(1))}),K=!0)},o(c){h(s.$$.fragment,c),h(y),h(u.$$.fragment,c),h(m.$$.fragment,c),h(k),h(R.$$.fragment,c),c&&(A||(A=U(t,O,{duration:200},!1)),A.run(0)),K=!1},d(c){c&&E(t),F(s),y&&y.d(),F(u),F(m),k&&k.d(),F(R),c&&A&&A.end()}}}function et(i){let t;return{c(){t=P("Submitting feedback")},m(e,n){C(e,t,n)},d(e){e&&E(t)}}}function tt(i){let t;return{c(){t=P("Submitting support request")},m(e,n){C(e,t,n)},d(e){e&&E(t)}}}function lt(i){let t,e,n,r,f=i[28].label+"",s,a;return e=new V({props:{icon:i[28].icon,class:"mr-2"}}),{c(){t=w("div"),T(e.$$.fragment),n=j(),r=w("span"),s=P(f),v(t,"class","flex items-center justify-start")},m(l,o){C(l,t,o),z(e,t,null),_(t,n),_(t,r),_(r,s),a=!0},p(l,o){const u={};o&268435456&&(u.icon=l[28].icon),e.$set(u),(!a||o&268435456)&&f!==(f=l[28].label+"")&&te(s,f)},i(l){a||(d(e.$$.fragment,l),a=!0)},o(l){h(e.$$.fragment,l),a=!1},d(l){l&&E(t),F(e)}}}function de(i){let t,e,n,r,f,s,a,l,o,u;function g(m){i[17](m)}let S={label:"Email",size:"md",class:"w-[12.5rem] px-2.5 py-1.5",placeholder:"Type a valid email here."};i[4]!==void 0&&(S.value=i[4]),r=new Fe({props:S}),Z.push(()=>x(r,"value",g));const q=[st,nt],p=[];function $(m,I){return I&16&&(a=null),a==null&&(a=!!m[4].match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)),a?0:m[4].length>0?1:-1}return~(l=$(i,-1))&&(o=p[l]=q[l](i)),{c(){t=w("div"),e=w("span"),e.textContent="Your email",n=j(),T(r.$$.fragment),s=j(),o&&o.c(),v(e,"class","text-sm"),v(t,"class","relative ml-1 flex items-center justify-start gap-7")},m(m,I){C(m,t,I),_(t,e),_(t,n),z(r,t,null),_(t,s),~l&&p[l].m(t,null),u=!0},p(m,I){const Y={};!f&&I&16&&(f=!0,Y.value=m[4],ee(()=>f=!1)),r.$set(Y);let M=l;l=$(m,I),l===M?~l&&p[l].p(m,I):(o&&(W(),h(p[M],1,1,()=>{p[M]=null}),H()),~l?(o=p[l],o?o.p(m,I):(o=p[l]=q[l](m),o.c()),d(o,1),o.m(t,null)):o=null)},i(m){u||(d(r.$$.fragment,m),d(o),u=!0)},o(m){h(r.$$.fragment,m),h(o),u=!1},d(m){m&&E(t),F(r),~l&&p[l].d()}}}function nt(i){let t,e;return t=new V({props:{class:"absolute top-1/2 right-2 -translate-y-1/2 transform",icon:Me}}),{c(){T(t.$$.fragment)},m(n,r){z(t,n,r),e=!0},p:L,i(n){e||(d(t.$$.fragment,n),e=!0)},o(n){h(t.$$.fragment,n),e=!1},d(n){F(t,n)}}}function st(i){let t,e;return t=new V({props:{class:"absolute top-1/2 right-2 -translate-y-1/2 transform ",icon:ae}}),{c(){T(t.$$.fragment)},m(n,r){z(t,n,r),e=!0},p:L,i(n){e||(d(t.$$.fragment,n),e=!0)},o(n){h(t.$$.fragment,n),e=!1},d(n){F(t,n)}}}function be(i){let t,e,n,r,f=i[1].length>0&&ge(i),s=i[12]&&ke(i);return{c(){t=w("div"),f&&f.c(),e=j(),s&&s.c(),v(t,"class","w-full")},m(a,l){C(a,t,l),f&&f.m(t,null),_(t,e),s&&s.m(t,null),r=!0},p(a,l){a[1].length>0?f?(f.p(a,l),l&2&&d(f,1)):(f=ge(a),f.c(),d(f,1),f.m(t,e)):f&&(W(),h(f,1,1,()=>{f=null}),H()),a[12]?s?(s.p(a,l),l&4096&&d(s,1)):(s=ke(a),s.c(),d(s,1),s.m(t,null)):s&&(W(),h(s,1,1,()=>{s=null}),H())},i(a){r||(d(f),d(s),a&&G(()=>{r&&(n||(n=U(t,me,{duration:250},!0)),n.run(1))}),r=!0)},o(a){h(f),h(s),a&&(n||(n=U(t,me,{duration:250},!1)),n.run(0)),r=!1},d(a){a&&E(t),f&&f.d(),s&&s.d(),a&&n&&n.end()}}}function ge(i){let t,e,n=i[1],r=[];for(let s=0;s<n.length;s+=1)r[s]=he(_e(i,n,s));const f=s=>h(r[s],1,1,()=>{r[s]=null});return{c(){t=w("div");for(let s=0;s<r.length;s+=1)r[s].c();v(t,"class","mt-4 flex flex-col gap-2")},m(s,a){C(s,t,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(t,null);e=!0},p(s,a){if(a&2){n=s[1];let l;for(l=0;l<n.length;l+=1){const o=_e(s,n,l);r[l]?(r[l].p(o,a),d(r[l],1)):(r[l]=he(o),r[l].c(),d(r[l],1),r[l].m(t,null))}for(W(),l=n.length;l<r.length;l+=1)f(l);H()}},i(s){if(!e){for(let a=0;a<n.length;a+=1)d(r[a]);e=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)h(r[a]);e=!1},d(s){s&&E(t),Pe(r,s)}}}function he(i){let t,e,n=i[25].name+"",r,f,s,a,l;function o(){return i[20](i[25])}return s=new Re({props:{class:"text-sm",icon:Ae,tooltip:"Remove file"}}),s.$on("click",o),{c(){t=w("div"),e=w("span"),r=P(n),f=j(),T(s.$$.fragment),a=j(),v(e,"class","max-line-1 text-sm"),v(t,"class","mt-1 flex items-center justify-between gap-2")},m(u,g){C(u,t,g),_(t,e),_(e,r),_(t,f),z(s,t,null),_(t,a),l=!0},p(u,g){i=u,(!l||g&2)&&n!==(n=i[25].name+"")&&te(r,n)},i(u){l||(d(s.$$.fragment,u),l=!0)},o(u){h(s.$$.fragment,u),l=!1},d(u){u&&E(t),F(s)}}}function ke(i){let t,e,n,r,f,s,a,l,o,u;const g=[at,it,rt],S=[];function q(p,$){return p[1]&&p[1].length>=3?0:p[3]?2:1}return s=q(i),a=S[s]=g[s](i),{c(){t=w("div"),e=w("input"),r=j(),f=w("span"),a.c(),v(e,"type","file"),v(e,"id","file"),v(e,"class","absolute top-0 left-0 z-10 h-full w-full cursor-pointer opacity-0"),e.multiple=!0,e.disabled=n=i[11]&&i[11].length>=5,v(f,"class","flex h-full w-full cursor-not-allowed items-center justify-center gap-3 text-sm"),Q(f,"z-10",i[1].length>=3),v(t,"class","curved border-light relative mt-4 flex h-12 w-full items-center justify-center transition hover:bg-black hover:bg-opacity-10"),Q(t,"mt-5",i[11]&&i[11].length>0),Q(t,"opactity-50",i[11]&&i[11].length>=5)},m(p,$){C(p,t,$),_(t,e),i[21](e),_(t,r),_(t,f),S[s].m(f,null),l=!0,o||(u=Ue(e,"change",i[14]),o=!0)},p(p,$){(!l||$&2048&&n!==(n=p[11]&&p[11].length>=5))&&(e.disabled=n);let m=s;s=q(p),s===m?S[s].p(p,$):(W(),h(S[m],1,1,()=>{S[m]=null}),H(),a=S[s],a?a.p(p,$):(a=S[s]=g[s](p),a.c()),d(a,1),a.m(f,null)),(!l||$&2)&&Q(f,"z-10",p[1].length>=3),(!l||$&2048)&&Q(t,"mt-5",p[11]&&p[11].length>0),(!l||$&2048)&&Q(t,"opactity-50",p[11]&&p[11].length>=5)},i(p){l||(d(a),l=!0)},o(p){h(a),l=!1},d(p){p&&E(t),i[21](null),S[s].d(),o=!1,u()}}}function rt(i){let t;return{c(){t=P(i[3])},m(e,n){C(e,t,n)},p(e,n){n&8&&te(t,e[3])},i:L,o:L,d(e){e&&E(t)}}}function it(i){let t,e,n;return e=new V({props:{icon:Le}}),{c(){t=P("Drop files here to upload! "),T(e.$$.fragment)},m(r,f){C(r,t,f),z(e,r,f),n=!0},p:L,i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),n=!1},d(r){r&&E(t),F(e,r)}}}function at(i){let t;return{c(){t=P("Max attachments per feedback is 3")},m(e,n){C(e,t,n)},p:L,i:L,o:L,d(e){e&&E(t)}}}function ft(i){let t;return{c(){t=P("Submit")},m(e,n){C(e,t,n)},d(e){e&&E(t)}}}function ut(i){let t,e,n,r;const f=[xe,Xe,Je,Ge],s=[];function a(l,o){return!l[8]&&!l[9]&&!l[10]?0:l[8]?1:l[9]?2:l[10]?3:-1}return~(e=a(i))&&(n=s[e]=f[e](i)),{c(){t=w("div"),n&&n.c(),v(t,"class","transition-container flex h-max w-[24rem] flex-col items-start px-3 py-3 transition-all")},m(l,o){C(l,t,o),~e&&s[e].m(t,null),r=!0},p(l,[o]){let u=e;e=a(l),e===u?~e&&s[e].p(l,o):(n&&(W(),h(s[u],1,1,()=>{s[u]=null}),H()),~e?(n=s[e],n?n.p(l,o):(n=s[e]=f[e](l),n.c()),d(n,1),n.m(t,null)):n=null)},i(l){r||(d(n),r=!0)},o(l){h(n),r=!1},d(l){l&&E(t),~e&&s[e].d()}}}function ot(i,t,e){let n,r;pe(i,$e,b=>e(12,n=b)),pe(i,Ie,b=>e(22,r=b));let f="support";const s=[{value:"feedback",label:"Feedback",icon:Se},{value:"bug",label:"Bug",icon:je},{value:"support",label:"Support",icon:Ce}];let a,l="",o="",u=[],g="",S="",q=!1,p=!1,$=!1,m=!1,I=[];const Y=async()=>{Array.from(a.files).forEach(B=>{if(!(u.length>=3)){if(B.size>25*1024*1024){e(3,l="Max file size is 25MB. Try again.");return}e(1,u=[...u,B])}}),e(2,a.value="",a)},M=async(b,B)=>{const k=Ne(Qe,`feeback/${B}/${b.name}`);await Ve(k,b);const N=await Ze(k);e(11,I=[...I,N])},R=async()=>{var B,k;if(!o.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)&&!n){e(3,l="Please enter a valid email address");return}if(g.length<10){e(3,l="Please enter a valid feedback");return}e(8,p=!0);const b=We();await Promise.all(u.map(N=>M(N,b))),He(Ye(Ke,`/feedback/${b}`),{category:f,attachments:I,...(B=n==null?void 0:n.userInfo)!=null&&B.email?{email:(k=n==null?void 0:n.userInfo)==null?void 0:k.email}:{email:o},...n&&{uid:r},loggedIn:!!n,timeStamp:Oe().toISOString(),feedback:g,id:b}).then(()=>{e(9,$=!0),setTimeout(()=>{e(9,$=!1)},5e3),e(1,u=[]),e(5,g=""),e(11,I=[]),e(3,l=""),e(4,o=""),e(8,p=!1)})},A=async()=>{if((f==="bug"||f==="feedback")&&R(),f==="support"){if(g.length<10){e(3,l="Please enter a valid feedback");return}const b=new FormData;b.append("message",g),b.append("email",o),u.forEach(k=>{b.append("attachments",k)}),e(8,p=!0);const B=await Ee.post("/dashy/submit_request",b,{headers:{"Content-Type":"multipart/form-data"}});B.data.status==="success"&&(e(8,p=!1),e(10,m=!0),e(6,S=B.data.ticketId),setTimeout(()=>{e(10,m=!1),e(6,S="")},5e3),e(1,u=[]),e(5,g=""),e(11,I=[]),e(3,l=""),e(4,o=""))}};function K(b){f=b,e(0,f)}function le(b){o=b,e(4,o)}function J(b){g=b,e(5,g)}function y(b){q=b,e(7,q)}const ne=b=>{e(1,u=u.filter(B=>B!==b))};function X(b){Z[b?"unshift":"push"](()=>{a=b,e(2,a)})}return i.$$.update=()=>{i.$$.dirty&1&&console.log(f),i.$$.dirty&2&&console.log(u)},[f,u,a,l,o,g,S,q,p,$,m,I,n,s,Y,A,K,le,J,y,ne,X]}class pt extends ve{constructor(t){super(),we(this,t,ot,ut,ye,{})}}export{pt as default};
