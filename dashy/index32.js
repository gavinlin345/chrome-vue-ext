import{eU as Jt,aj as Gt,l as Kt,ah as Rt,du as vt,S as ke,i as we,s as he,U as lt,q as k,V as M,c as T,r as b,u as C,L as m,m as A,t as _,a as g,D as S,d as D,K as B,b as E,aY as mt,E as me,a5 as pe,p as j,au as Qt,R as Se,T as dt,aR as ve,eV as Xt,N as en,O as Ue,P as ze,cv as tn,bb as nn,ak as nt,a3 as kt,aa as st,a8 as pt,ar as Lt,Z as re,W as Ye,v as X,x as ee,ab as _t,F as sn,cw as ln,a1 as Te,o as ct,b0 as Ee,J as it,n as Ie,ad as rn,a9 as Bt,a6 as Ot,aZ as on,eW as Pt,ac as an,aG as fn,ao as cn,an as wt,al as un,y as Zt,_ as ut,aq as ht,am as mn,B as yt,af as Ft,ag as Ht,aE as pn,a7 as dn,aD as _n,a2 as gn,aP as $n,e as Vt,av as bn,aw as vn,ax as kn,ay as wn,az as tt,aB as hn}from"./overlayscrollbars.js";import{D as yn}from"./DatePicker.js";import{T as Mn}from"./TimePicker.js";import{C as Wt}from"./Chip.js";import{I as In}from"./IntegrationItem.js";import{C as Cn}from"./Card.js";const Sn=async({integration_id:s})=>{const e=await Jt(Gt.currentUser).catch(()=>null),t=Kt(Rt);if(!t||!e)return;const n={userToken:e,profile:t,integration:s},i="https://zoom.us/oauth/authorize",l={client_id:vt.PUBLIC_ZOOM_CLIENT_ID,scope:"meeting:read,meeting:write,user_profile",state:JSON.stringify(n),response_type:"code",redirect_uri:`${vt.PUBLIC_CLIENT_URL}/connect/zoom`},r=`${i}?${new URLSearchParams(l).toString()}`,o=window.screenLeft+(window.innerWidth-600)/2,a=window.screenTop+(window.innerHeight-600)/2;return window.open(r,"Zoom",`width=600,height=600,top=${a},left=${o}`)};function Tn(s){let e;return{c(){e=B("Connect")},m(t,n){C(t,e,n)},d(t){t&&S(e)}}}function An(s){let e,t,n,i,l,r,o,a,f;return a=new lt({props:{class:"mt-3 text-base px-4",$$slots:{default:[Tn]},$$scope:{ctx:s}}}),a.$on("click",s[1]),{c(){e=k("div"),t=k("div"),t.innerHTML=`<img src="/apps/Zoom.svg" class="w-[max] h-[2.5rem] object-cover" alt="Todosit logo"/> 
    <span class="text-2xl font-semibold">Zoom</span>`,n=M(),i=k("span"),i.innerHTML="Connect your Zoom account to view and manage your meetings. <br/>",l=M(),r=k("span"),r.textContent="Dashy does not store any of your data.",o=M(),T(a.$$.fragment),b(t,"class","flex-center flex-col gap-6"),b(i,"class","text-base text-center mt-1"),b(r,"class","text-base text-center"),b(e,"class","w-[24rem] h-[24.75rem] px-6 py-4 flex flex-col gap-3 justify-center items-center")},m(u,d){C(u,e,d),m(e,t),m(e,n),m(e,i),m(e,l),m(e,r),m(e,o),A(a,e,null),f=!0},p(u,[d]){const c={};d&4&&(c.$$scope={dirty:d,ctx:u}),a.$set(c)},i(u){f||(_(a.$$.fragment,u),f=!0)},o(u){g(a.$$.fragment,u),f=!1},d(u){u&&S(e),D(a)}}}function Dn(s,e,t){let{widgetId:n=""}=e;const i=()=>{Sn({integration_id:n==="zoom"?"zoom":`zoom_${n}`})};return s.$$set=l=>{"widgetId"in l&&t(0,n=l.widgetId)},[n,i]}class Nn extends ke{constructor(e){super(),we(this,e,Dn,An,he,{widgetId:0})}}function xn(s,e,t){let n,i,l,r;E(s,mt,c=>t(3,l=c));const{minutesBeforeReminder:o,sendNotifications:a,meetings:f}=me("stores");E(s,o,c=>t(5,n=c)),E(s,a,c=>t(4,r=c)),E(s,f,c=>t(6,i=c));const u=c=>{let p=[];pe(f,i=i==null?void 0:i.map(v=>(v.reminderSent||j(v.start_time).isBefore(j(c).add(n,"minutes"))&&(p.push(v),v.reminderSent=!0),v)),i),p.length>0&&p.forEach(v=>{d(v)})},d=c=>{const p={id:c.custom_id,title:c.topic||"Untitled event",body:"Click to join the meeting now!",app:"zoom",icon:"/apps/Zoom.svg",action:"launchUrl",actionData:c.join_url,dueIn:c.start_time,timestamp:Date.now(),expiry:j(c.start_time).add(c.duration,"minutes").toISOString()};Qt(p)};return s.$$.update=()=>{s.$$.dirty&24&&r&&u(l)},[o,a,f,l,r]}class jn extends ke{constructor(e){super(),we(this,e,xn,null,he,{})}}function Mt(s){let e,t,n,i,l,r,o,a,f;n=new ve({props:{class:"text-xl",icon:ln}});function u(p){s[21](p)}let d={placeholder:"Repeat",class:"w-full py-2 px-2.5",options:s[14]};s[0]!==void 0&&(d.value=s[0]),l=new nt({props:d}),Ue.push(()=>ze(l,"value",u));let c=s[0]&&It(s);return{c(){e=k("div"),t=k("div"),T(n.$$.fragment),i=M(),T(l.$$.fragment),o=M(),c&&c.c(),a=Te(),b(t,"class","w-8 h-8 flex items-center justify-start shrink-0"),b(e,"class","flex items-center justify-start gap-4")},m(p,v){C(p,e,v),m(e,t),A(n,t,null),m(e,i),A(l,e,null),C(p,o,v),c&&c.m(p,v),C(p,a,v),f=!0},p(p,v){const $={};!r&&v[0]&1&&(r=!0,$.value=p[0],Ye(()=>r=!1)),l.$set($),p[0]?c?(c.p(p,v),v[0]&1&&_(c,1)):(c=It(p),c.c(),_(c,1),c.m(a.parentNode,a)):c&&(X(),g(c,1,1,()=>{c=null}),ee())},i(p){f||(_(n.$$.fragment,p),_(l.$$.fragment,p),_(c),f=!0)},o(p){g(n.$$.fragment,p),g(l.$$.fragment,p),g(c),f=!1},d(p){p&&S(e),D(n),D(l),p&&S(o),c&&c.d(p),p&&S(a)}}}function It(s){let e,t,n,i,l;function r(a){s[22](a)}let o={options:Array.from({length:20},Ln).map(Bn)};return s[7]!==void 0&&(o.value=s[7]),n=new nt({props:o}),Ue.push(()=>ze(n,"value",r)),{c(){e=k("div"),t=B(`End after
                `),T(n.$$.fragment),b(e,"class","flex flex-row gap-4 mt-1")},m(a,f){C(a,e,f),m(e,t),A(n,e,null),l=!0},p(a,f){const u={};!i&&f[0]&128&&(i=!0,u.value=a[7],Ye(()=>i=!1)),n.$set(u)},i(a){l||(_(n.$$.fragment,a),l=!0)},o(a){g(n.$$.fragment,a),l=!1},d(a){a&&S(e),D(n)}}}function Un(s){let e,t;return e=new lt({props:{class:"py-2 px-4",disabled:s[4]||!s[3],$$slots:{default:[Yn]},$$scope:{ctx:s}}}),e.$on("click",s[25]),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},p(n,i){const l={};i[0]&24&&(l.disabled=n[4]||!n[3]),i[0]&512|i[1]&2&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function zn(s){let e,t;return e=new lt({props:{class:"py-2 px-4",$$slots:{default:[En]},$$scope:{ctx:s}}}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},p(n,i){const l={};i[1]&2&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Yn(s){let e=s[9]?"Update":"Add",t,n;return{c(){t=B(e),n=B(" meeting")},m(i,l){C(i,t,l),C(i,n,l)},p(i,l){l[0]&512&&e!==(e=i[9]?"Update":"Add")&&re(t,e)},d(i){i&&S(t),i&&S(n)}}}function En(s){let e,t,n;return t=new ve({props:{icon:it,class:"ml-2 animate-spin"}}),{c(){e=B("Adding "),T(t.$$.fragment)},m(i,l){C(i,e,l),A(t,i,l),n=!0},p:Ie,i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){g(t.$$.fragment,i),n=!1},d(i){i&&S(e),D(t,i)}}}function Rn(s){let e,t,n,i,l,r,o=s[9]?"editing":"adding",a,f,u,d,c,p,v,$,I,Y,R,L,P,x,h,y,U,K,te,q,J,O,oe,ae,ye,Q,Ae,z,ne,se,Me,De,ie,be,Ze,ue,Ne,Fe,Ce=s[5]>1?"s":"",fe,Re,de,Le,_e,xe=s[6]>1?"s":"",G,F,Z,le,ce,ge,Be,He;n=new Se({props:{icon:dt,class:"text-xl"}}),n.$on("click",s[13]),Y=new ve({props:{class:"text-xl",icon:Xt}});function rt(w){s[18](w)}let Ve={placeholder:"Add a Topic",size:"md",class:"w-full py-2 px-2.5 "+(s[8]?"opacity-50":""),maxLength:255,disabled:s[8]};s[3]!==void 0&&(Ve.value=s[3]),L=new en({props:Ve}),Ue.push(()=>ze(L,"value",rt)),K=new ve({props:{class:"text-xl",icon:tn}});function ot(w){s[19](w)}let We={};s[1]!==void 0&&(We.value=s[1]),J=new yn({props:We}),Ue.push(()=>ze(J,"value",ot)),Q=new ve({props:{class:"text-xl",icon:nn}});function at(w){s[20](w)}let qe={};s[2]!==void 0&&(qe.value=s[2]),ne=new Mn({props:qe}),Ue.push(()=>ze(ne,"value",at));let H=!s[9]&&Mt(s);function ft(w){s[23](w)}let N={options:Array.from({length:24},On).map(Pn)};s[5]!==void 0&&(N.value=s[5]),ue=new nt({props:N}),Ue.push(()=>ze(ue,"value",ft));function W(w){s[24](w)}let Oe={class:"ml-2",options:[0,15,30,45].map(Zn)};s[6]!==void 0&&(Oe.value=s[6]),de=new nt({props:Oe}),Ue.push(()=>ze(de,"value",W));const Je=[zn,Un],$e=[];function Ge(w,V){return w[4]?0:1}return le=Ge(s),ce=$e[le]=Je[le](s),{c(){e=k("div"),t=k("div"),T(n.$$.fragment),i=M(),l=k("span"),r=B("Exit "),a=B(o),f=B(" meeting"),u=M(),d=k("div"),c=k("div"),p=k("div"),v=k("div"),$=k("div"),I=k("div"),T(Y.$$.fragment),R=M(),T(L.$$.fragment),x=M(),h=k("div"),y=k("div"),U=k("div"),T(K.$$.fragment),te=M(),q=k("div"),T(J.$$.fragment),oe=M(),ae=k("div"),ye=k("div"),T(Q.$$.fragment),Ae=M(),z=k("div"),T(ne.$$.fragment),Me=M(),H&&H.c(),De=M(),ie=k("div"),be=k("div"),be.textContent="Duration",Ze=M(),T(ue.$$.fragment),Fe=B(" hour"),fe=B(Ce),Re=M(),T(de.$$.fragment),_e=B(" minute"),G=B(xe),F=M(),Z=k("div"),ce.c(),b(l,"class","text-base"),b(t,"class","flex justify-start items-center gap-3"),b(I,"class","w-8 h-8 flex items-center justify-start shrink-0"),b($,"class","flex items-center justify-start gap-4"),b(U,"class","w-8 h-8 flex items-center justify-start shrink-0"),b(q,"class","flex items-center"),b(y,"class","flex items-center gap-4"),b(ye,"class","w-5 h-8 flex items-center justify-start shrink-0"),b(z,"class","flex items-center"),b(ae,"class","flex items-center justify-start gap-4"),b(h,"class","flex-row flex items-start justify-start gap-6"),b(be,"class","flex items-center justify-start shrink-0 mr-2"),b(ie,"class","flex flex-row gap-2 items-center mt-1"),b(v,"class","flex flex-col gap-4"),b(Z,"class","flex items-center justify-center gap-4 shrink-0 mt-10"),b(c,"class","flex flex-col h-full overflow-hidden"),kt(c,"opacity-50",s[4]),b(d,"class","flex flex-col mt-4 gap-4 h-full overflow-hidden"),b(e,"class","flex flex-col px-3 py-2 relative overflow-hidden h-full")},m(w,V){C(w,e,V),m(e,t),A(n,t,null),m(t,i),m(t,l),m(l,r),m(l,a),m(l,f),m(e,u),m(e,d),m(d,c),m(c,p),m(p,v),m(v,$),m($,I),A(Y,I,null),m($,R),A(L,$,null),m(v,x),m(v,h),m(h,y),m(y,U),A(K,U,null),m(y,te),m(y,q),A(J,q,null),m(h,oe),m(h,ae),m(ae,ye),A(Q,ye,null),m(ae,Ae),m(ae,z),A(ne,z,null),m(v,Me),H&&H.m(v,null),m(v,De),m(v,ie),m(ie,be),m(ie,Ze),A(ue,ie,null),m(ie,Fe),m(ie,fe),m(ie,Re),A(de,ie,null),m(ie,_e),m(ie,G),m(c,F),m(c,Z),$e[le].m(Z,null),ge=!0,Be||(He=[st(window,"keydown",s[17]),pt(Lt.call(null,p))],Be=!0)},p(w,V){(!ge||V[0]&512)&&o!==(o=w[9]?"editing":"adding")&&re(a,o);const je={};V[0]&256&&(je.class="w-full py-2 px-2.5 "+(w[8]?"opacity-50":"")),V[0]&256&&(je.disabled=w[8]),!P&&V[0]&8&&(P=!0,je.value=w[3],Ye(()=>P=!1)),L.$set(je);const Ke={};!O&&V[0]&2&&(O=!0,Ke.value=w[1],Ye(()=>O=!1)),J.$set(Ke);const Qe={};!se&&V[0]&4&&(se=!0,Qe.value=w[2],Ye(()=>se=!1)),ne.$set(Qe),w[9]?H&&(X(),g(H,1,1,()=>{H=null}),ee()):H?(H.p(w,V),V[0]&512&&_(H,1)):(H=Mt(w),H.c(),_(H,1),H.m(v,De));const Xe={};!Ne&&V[0]&32&&(Ne=!0,Xe.value=w[5],Ye(()=>Ne=!1)),ue.$set(Xe),(!ge||V[0]&32)&&Ce!==(Ce=w[5]>1?"s":"")&&re(fe,Ce);const et={};!Le&&V[0]&64&&(Le=!0,et.value=w[6],Ye(()=>Le=!1)),de.$set(et),(!ge||V[0]&64)&&xe!==(xe=w[6]>1?"s":"")&&re(G,xe);let Pe=le;le=Ge(w),le===Pe?$e[le].p(w,V):(X(),g($e[Pe],1,1,()=>{$e[Pe]=null}),ee(),ce=$e[le],ce?ce.p(w,V):(ce=$e[le]=Je[le](w),ce.c()),_(ce,1),ce.m(Z,null)),(!ge||V[0]&16)&&kt(c,"opacity-50",w[4])},i(w){ge||(_(n.$$.fragment,w),_(Y.$$.fragment,w),_(L.$$.fragment,w),_(K.$$.fragment,w),_(J.$$.fragment,w),_(Q.$$.fragment,w),_(ne.$$.fragment,w),_(H),_(ue.$$.fragment,w),_(de.$$.fragment,w),_(ce),ge=!0)},o(w){g(n.$$.fragment,w),g(Y.$$.fragment,w),g(L.$$.fragment,w),g(K.$$.fragment,w),g(J.$$.fragment,w),g(Q.$$.fragment,w),g(ne.$$.fragment,w),g(H),g(ue.$$.fragment,w),g(de.$$.fragment,w),g(ce),ge=!1},d(w){w&&S(e),D(n),D(Y),D(L),D(K),D(J),D(Q),D(ne),H&&H.d(),D(ue),D(de),$e[le].d(),Be=!1,_t(He)}}}const Ln=(s,e)=>e+1,Bn=s=>({label:`${s.toString()} ${s===1?"occurrence":"occurrences"}`,value:s}),On=(s,e)=>e,Pn=s=>({label:`${s.toString()}`,value:s}),Zn=s=>({label:`${s.toString()}`,value:s});function Fn(s,e,t){let n,i,l;const{isCreate:r,isEdit:o,selectedMeeting:a,meetings:f,widgetId:u}=me("stores");E(s,o,z=>t(9,l=z)),E(s,a,z=>t(27,i=z)),E(s,f,z=>t(26,n=z));const{getMeetings:d}=me("utils"),c=()=>{r.set(!1),o.set(!1)},p=[{label:"Does not repeat",value:null},{label:"Repeat Daily",value:1},{label:"Repeat Weekly",value:2},{label:"Repeat Monthly",value:3}];let v=new Date,$=sn(),I="",Y=!1,R=1,L=0,P=null,x=1,h=l&&i?n.find(z=>z.custom_id===i):null,y=!1;h&&(v=new Date(h.start_time),$=j(h.start_time).format("HH:mm"),I=h.topic,R=Math.floor(h.duration/60),L=h.duration%60,y=h.type!==1);const U=()=>{t(4,Y=!0);const z={topic:I,startTime:j(j(v).format("YYYY-MM-DD")+" "+$).toISOString(),repeat:P,timezone:"UTC",duration:R*60+L,occurrences:x};ct.post("/integration/zoom/meeting",{...z,startDate:j(v).subtract(1,"day").format("YYYY-MM-DD")},{params:{widgetId:u==="zoom"?"":u}}).then(async({data:ne})=>{await d(),Ee("Meeting added successfully","success"),t(4,Y=!1),c()}).catch(()=>{Ee("Failed to add meeting","error"),t(4,Y=!1)})},K=()=>{t(4,Y=!0);const z={topic:I,startTime:j(j(v).format("YYYY-MM-DD")+" "+$).toISOString(),duration:R*60+L,timezone:"UTC"};ct.patch("/integration/zoom/meeting",{...z},{params:{id:h==null?void 0:h.id,occurrence_id:h==null?void 0:h.occurrence_id,widgetId:u==="zoom"?"":u}}).then(({data:ne})=>{pe(f,n=n.map(se=>se.custom_id===ne.meeting.custom_id?{...ne.meeting,reminderSent:se.reminderSent}:se).sort((se,Me)=>j(se.startTime).diff(j(Me.startTime))),n),t(4,Y=!1),Ee("Event updated successfully","success"),c(),a.set(null)}).catch(()=>{Ee("Failed to update event","error"),t(4,Y=!1)})},te=z=>{z.key==="Escape"&&c()};function q(z){I=z,t(3,I)}function J(z){v=z,t(1,v)}function O(z){$=z,t(2,$)}function oe(z){P=z,t(0,P)}function ae(z){x=z,t(7,x)}function ye(z){R=z,t(5,R)}function Q(z){L=z,t(6,L)}const Ae=()=>l?K():U();return s.$$.update=()=>{s.$$.dirty[0]&1&&console.log(P)},[P,v,$,I,Y,R,L,x,y,l,o,a,f,c,p,U,K,te,q,J,O,oe,ae,ye,Q,Ae]}class Hn extends ke{constructor(e){super(),we(this,e,Fn,Rn,he,{},null,[-1,-1])}}const{window:Vn}=on;function Wn(s){let e,t,n,i,l;return t=new Se({props:{icon:an,class:"text-lg",tooltip:"Delete Meeting"}}),i=new fn({props:{trigger:"click",placement:"bottom-end",origin:"top right",offset:[0,10],$$slots:{default:[Gn,({close:r})=>({20:r}),({close:r})=>r?1048576:0]},$$scope:{ctx:s}}}),{c(){e=k("div"),T(t.$$.fragment),n=M(),T(i.$$.fragment)},m(r,o){C(r,e,o),A(t,e,null),C(r,n,o),A(i,r,o),l=!0},p(r,o){const a={};o&3145728&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){l||(_(t.$$.fragment,r),_(i.$$.fragment,r),l=!0)},o(r){g(t.$$.fragment,r),g(i.$$.fragment,r),l=!1},d(r){r&&S(e),D(t),r&&S(n),D(i,r)}}}function qn(s){let e,t;return e=new ve({props:{icon:it,class:"text-lg animate-spin"}}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},p:Ie,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Jn(s){let e;return{c(){e=B("Yes, delete meeting")},m(t,n){C(t,e,n)},d(t){t&&S(e)}}}function Gn(s){let e,t,n,i,l;function r(){return s[16](s[20])}return i=new lt({props:{$$slots:{default:[Jn]},$$scope:{ctx:s}}}),i.$on("click",r),{c(){e=k("div"),t=k("span"),t.textContent="Are you sure?",n=M(),T(i.$$.fragment),b(t,"class","text-base font-semibold"),b(e,"class","flex flex-col gap-2 p-2")},m(o,a){C(o,e,a),m(e,t),m(e,n),A(i,e,null),l=!0},p(o,a){s=o;const f={};a&2097152&&(f.$$scope={dirty:a,ctx:s}),i.$set(f)},i(o){l||(_(i.$$.fragment,o),l=!0)},o(o){g(i.$$.fragment,o),l=!1},d(o){o&&S(e),D(i)}}}function Ct(s){let e,t=s[4]?"Now live":`In ${s[2]}`,n;return{c(){e=k("span"),n=B(t),b(e,"class","text-base")},m(i,l){C(i,e,l),m(e,n)},p(i,l){l&20&&t!==(t=i[4]?"Now live":`In ${i[2]}`)&&re(n,t)},d(i){i&&S(e)}}}function Kn(s){let e;return{c(){e=B("Join meeting")},m(t,n){C(t,e,n)},d(t){t&&S(e)}}}function St(s){let e,t,n,i,l;return t=new ve({props:{icon:Pt}}),{c(){e=k("div"),T(t.$$.fragment),n=M(),i=k("span"),i.textContent="Non-recurring meeting",b(i,"class","text-base"),b(e,"class","flex items-center justify-start gap-3 mt-4")},m(r,o){C(r,e,o),A(t,e,null),m(e,n),m(e,i),l=!0},p:Ie,i(r){l||(_(t.$$.fragment,r),l=!0)},o(r){g(t.$$.fragment,r),l=!1},d(r){r&&S(e),D(t)}}}function Tt(s){let e,t,n,i,l;return t=new ve({props:{icon:Pt}}),{c(){e=k("div"),T(t.$$.fragment),n=M(),i=k("span"),i.textContent="Recurring meeting",b(i,"class","text-base"),b(e,"class","flex items-center justify-start gap-3 mt-4")},m(r,o){C(r,e,o),A(t,e,null),m(e,n),m(e,i),l=!0},p:Ie,i(r){l||(_(t.$$.fragment,r),l=!0)},o(r){g(t.$$.fragment,r),l=!1},d(r){r&&S(e),D(t)}}}function Qn(s){var le,ce,ge,Be,He,rt,Ve,ot,We,at,qe,H,ft;let e,t,n,i,l,r,o,a,f,u,d,c,p,v,$=(((le=s[0])==null?void 0:le.topic)||"Untitled Meeting")+"",I,Y,R,L,P,x=j((ce=s[0])==null?void 0:ce.start_time).format("ddd, MMM Do YYYY")+"",h,y,U=j((ge=s[0])==null?void 0:ge.start_time).format("h:mm a")+"",K,te,q=j((Be=s[0])==null?void 0:Be.start_time).add((He=s[0])==null?void 0:He.duration,"minutes").format("h:mm a")+"",J,O,oe,ae,ye,Q,Ae,z,ne,se,Me=((rt=s[0])==null?void 0:rt.id)+"",De,ie,be,Ze,ue=((Ve=s[0])==null?void 0:Ve.duration)>60?`${Math.floor(((ot=s[0])==null?void 0:ot.duration)/60)} hours ${((We=s[0])==null?void 0:We.duration)%60} minutes`:`${(at=s[0])==null?void 0:at.duration} minutes`,Ne,Fe,Ce,fe,Re,de;n=new Se({props:{icon:dt,class:"text-xl"}}),n.$on("click",s[9]),a=new Se({props:{icon:rn,class:"text-lg",tooltip:"Edit Meeting"}}),a.$on("click",s[15]);const Le=[qn,Wn],_e=[];function xe(N,W){return N[1]?0:1}u=xe(s),d=_e[u]=Le[u](s);let G=(s[3]||s[4])&&Ct(s);Q=new Wt({props:{class:"flex-center py-1 flex gap-2 text-xs",$$slots:{default:[Kn]},$$scope:{ctx:s}}}),Q.$on("click",s[17]);let F=((qe=s[0])==null?void 0:qe.type)===2&&St(),Z=(((H=s[0])==null?void 0:H.type)===3||((ft=s[0])==null?void 0:ft.type)===8)&&Tt();return{c(){e=k("div"),t=k("div"),T(n.$$.fragment),i=M(),l=k("span"),l.textContent="View all meetings",r=M(),o=k("div"),T(a.$$.fragment),f=M(),d.c(),c=M(),p=k("div"),v=k("span"),I=B($),Y=M(),R=k("div"),G&&G.c(),L=M(),P=k("span"),h=B(x),y=B(", "),K=B(U),te=B(" - "),J=B(q),O=M(),oe=k("div"),ae=k("div"),ae.innerHTML='<img src="/apps/Zoom.svg" class="w-4" alt="Meeting provider icon"/>',ye=M(),T(Q.$$.fragment),Ae=M(),z=k("div"),ne=B("Meeting ID: "),se=k("button"),De=B(Me),ie=M(),be=k("div"),Ze=B("Duration: "),Ne=B(ue),Fe=M(),F&&F.c(),Ce=M(),Z&&Z.c(),b(l,"class","text-base"),b(o,"class","flex gap-5 shrink-0 ml-auto"),b(t,"class","flex justify-start items-center gap-3"),b(v,"class","text-xl font-bold max-line-2"),b(R,"class","mr-1 flex items-center justify-start gap-3"),b(P,"class","text-sm mt-1"),b(ae,"class","flex-center shrink-0"),b(oe,"class","flex items-center justify-start gap-3 mt-4"),b(se,"class","font-semibold cursor-copy"),b(z,"class","mt-4"),b(be,"class","mt-4"),b(p,"class","flex flex-col mt-4"),b(e,"class","h-[20rem] flex flex-col px-3 py-2 overflow-overlay scrollbar")},m(N,W){C(N,e,W),m(e,t),A(n,t,null),m(t,i),m(t,l),m(t,r),m(t,o),A(a,o,null),m(o,f),_e[u].m(o,null),m(e,c),m(e,p),m(p,v),m(v,I),m(p,Y),m(p,R),G&&G.m(R,null),m(p,L),m(p,P),m(P,h),m(P,y),m(P,K),m(P,te),m(P,J),m(p,O),m(p,oe),m(oe,ae),m(oe,ye),A(Q,oe,null),m(p,Ae),m(p,z),m(z,ne),m(z,se),m(se,De),m(p,ie),m(p,be),m(be,Ze),m(be,Ne),m(p,Fe),F&&F.m(p,null),m(p,Ce),Z&&Z.m(p,null),fe=!0,Re||(de=[st(Vn,"keydown",s[14]),pt(Bt.call(null,ae,"Meeting")),st(se,"click",s[18])],Re=!0)},p(N,[W]){var $e,Ge,w,V,je,Ke,Qe,Xe,et,Pe,gt,$t,bt;let Oe=u;u=xe(N),u===Oe?_e[u].p(N,W):(X(),g(_e[Oe],1,1,()=>{_e[Oe]=null}),ee(),d=_e[u],d?d.p(N,W):(d=_e[u]=Le[u](N),d.c()),_(d,1),d.m(o,null)),(!fe||W&1)&&$!==($=((($e=N[0])==null?void 0:$e.topic)||"Untitled Meeting")+"")&&re(I,$),N[3]||N[4]?G?G.p(N,W):(G=Ct(N),G.c(),G.m(R,null)):G&&(G.d(1),G=null),(!fe||W&1)&&x!==(x=j((Ge=N[0])==null?void 0:Ge.start_time).format("ddd, MMM Do YYYY")+"")&&re(h,x),(!fe||W&1)&&U!==(U=j((w=N[0])==null?void 0:w.start_time).format("h:mm a")+"")&&re(K,U),(!fe||W&1)&&q!==(q=j((V=N[0])==null?void 0:V.start_time).add((je=N[0])==null?void 0:je.duration,"minutes").format("h:mm a")+"")&&re(J,q);const Je={};W&2097152&&(Je.$$scope={dirty:W,ctx:N}),Q.$set(Je),(!fe||W&1)&&Me!==(Me=((Ke=N[0])==null?void 0:Ke.id)+"")&&re(De,Me),(!fe||W&1)&&ue!==(ue=((Qe=N[0])==null?void 0:Qe.duration)>60?`${Math.floor(((Xe=N[0])==null?void 0:Xe.duration)/60)} hours ${((et=N[0])==null?void 0:et.duration)%60} minutes`:`${(Pe=N[0])==null?void 0:Pe.duration} minutes`)&&re(Ne,ue),((gt=N[0])==null?void 0:gt.type)===2?F?(F.p(N,W),W&1&&_(F,1)):(F=St(),F.c(),_(F,1),F.m(p,Ce)):F&&(X(),g(F,1,1,()=>{F=null}),ee()),(($t=N[0])==null?void 0:$t.type)===3||((bt=N[0])==null?void 0:bt.type)===8?Z?(Z.p(N,W),W&1&&_(Z,1)):(Z=Tt(),Z.c(),_(Z,1),Z.m(p,null)):Z&&(X(),g(Z,1,1,()=>{Z=null}),ee())},i(N){fe||(_(n.$$.fragment,N),_(a.$$.fragment,N),_(d),_(Q.$$.fragment,N),_(F),_(Z),fe=!0)},o(N){g(n.$$.fragment,N),g(a.$$.fragment,N),g(d),g(Q.$$.fragment,N),g(F),g(Z),fe=!1},d(N){N&&S(e),D(n),D(a),_e[u].d(),G&&G.d(),D(Q),F&&F.d(),Z&&Z.d(),Re=!1,_t(de)}}}function Xn(s,e,t){let n,i,l,r,o,a,f,u;E(s,mt,y=>t(11,o=y));const{selectedMeeting:d,meetings:c,isEdit:p,widgetId:v}=me("stores");E(s,d,y=>t(12,a=y)),E(s,c,y=>t(13,f=y)),E(s,p,y=>t(5,u=y));let $=!1;function I(){d.set(null)}const Y=()=>{n&&(t(1,$=!0),ct.delete("/integration/zoom/meeting",{params:{id:n.id,occurrence_id:n.occurrenceId,widgetId:v==="zoom"?"":v}}).then(()=>{Ee("Event deleted","success"),c.update(y=>y.filter(U=>U.id!==n.id)),I()}).catch(y=>{Ee("Failed to delete event","error"),console.error(y),t(1,$=!1)}))},R=y=>{y.key==="Escape"&&I()},L=()=>{pe(p,u=!0,u)},P=y=>{y(),Y()},x=y=>(y.stopPropagation(),window.open(n==null?void 0:n.join_url,"_blank")),h=()=>{navigator.clipboard.writeText(n==null?void 0:n.id),Ee("Meeting ID copied","success")};return s.$$.update=()=>{s.$$.dirty&12289&&t(0,n=f.find(y=>y.custom_id===a)??n??null),s.$$.dirty&2049&&t(4,i=n&&j(n.start_time).isBefore(o)&&j(n.start_time).add(n.duration,"minutes").isAfter(o)),s.$$.dirty&2049&&t(3,l=n&&j(n.start_time).isBefore(j().add(6,"hours"))&&j(n.start_time).isAfter(o)),s.$$.dirty&2049&&t(2,r=n&&Ot(j(n.start_time).valueOf()-o.getTime(),{short:!1})),s.$$.dirty&1&&console.log(n)},[n,$,r,l,i,u,d,c,p,I,Y,o,a,f,R,L,P,x,h]}class es extends ke{constructor(e){super(),we(this,e,Xn,Qn,he,{})}}function ts(s){let e,t,n,i,l,r,o,a;return t=new Se({props:{icon:cn,class:"text-2xl",tooltip:"Add meeting"}}),t.$on("click",s[6]),i=new Se({props:{tooltip:"Refresh meetings",icon:s[0]?it:wt,class:s[0]?"animate-spin text-xl ml-auto":"text-xl ml-auto"}}),i.$on("click",s[5]),r=new Se({props:{tooltip:"Settings",icon:un,class:"text-xl"}}),r.$on("click",s[7]),{c(){e=k("div"),T(t.$$.fragment),n=M(),T(i.$$.fragment),l=M(),T(r.$$.fragment),b(e,"class","flex items-center shrink-0 justify-start py-1 px-2 mt-2.5 gap-4")},m(f,u){C(f,e,u),A(t,e,null),m(e,n),A(i,e,null),m(e,l),A(r,e,null),a=!0},p(f,[u]){const d={};u&1&&(d.icon=f[0]?it:wt),u&1&&(d.class=f[0]?"animate-spin text-xl ml-auto":"text-xl ml-auto"),i.$set(d)},i(f){a||(_(t.$$.fragment,f),_(i.$$.fragment,f),_(r.$$.fragment,f),f&&Zt(()=>{a&&(o||(o=ut(e,ht,{duration:400},!0)),o.run(1))}),a=!0)},o(f){g(t.$$.fragment,f),g(i.$$.fragment,f),g(r.$$.fragment,f),f&&(o||(o=ut(e,ht,{duration:400},!1)),o.run(0)),a=!1},d(f){f&&S(e),D(t),D(i),D(r),f&&o&&o.end()}}}function ns(s,e,t){let n,i;const{isCreate:l,isUpdating:r,isSettings:o}=me("stores");E(s,r,d=>t(0,n=d)),E(s,o,d=>t(1,i=d));const{getMeetings:a}=me("utils");return[n,i,l,r,o,a,()=>l.set(!0),()=>pe(o,i=!0,i)]}class ss extends ke{constructor(e){super(),we(this,e,ns,ts,he,{})}}function is(s){let e,t,n,i,l,r,o,a,f,u,d,c,p,v,$;return n=new Se({props:{icon:dt,class:"text-xl"}}),n.$on("click",s[9]),o=new In({props:{integration:{...s[1].find(At),id:s[7]}}}),c=new nt({props:{options:[{label:"Never",value:!1},{label:"5 mins before",value:5},{label:"10 mins before",value:10},{label:"15 mins before",value:15},{label:"30 mins before",value:30}],value:s[2]?s[3]:!1}}),c.$on("change",s[10]),{c(){e=k("div"),t=k("div"),T(n.$$.fragment),i=M(),l=k("span"),l.textContent="Exit Settings",r=M(),T(o.$$.fragment),a=M(),f=k("div"),u=k("span"),u.textContent="Send notifications",d=M(),T(c.$$.fragment),b(l,"class","text-base"),b(t,"class","flex justify-start items-center gap-3 mb-2"),b(u,"class","w-32 text-sm"),b(f,"class","mt-2 flex items-center gap-3"),b(e,"class","flex h-full flex-col overflow-hidden gap-4 px-3 py-2")},m(I,Y){C(I,e,Y),m(e,t),A(n,t,null),m(t,i),m(t,l),m(e,r),A(o,e,null),m(e,a),m(e,f),m(f,u),m(f,d),A(c,f,null),p=!0,v||($=st(window,"keydown",s[8]),v=!0)},p(I,[Y]){const R={};Y&2&&(R.integration={...I[1].find(At),id:I[7]}),o.$set(R);const L={};Y&12&&(L.value=I[2]?I[3]:!1),c.$set(L)},i(I){p||(_(n.$$.fragment,I),_(o.$$.fragment,I),_(c.$$.fragment,I),p=!0)},o(I){g(n.$$.fragment,I),g(o.$$.fragment,I),g(c.$$.fragment,I),p=!1},d(I){I&&S(e),D(n),D(o),D(c),v=!1,$()}}}const At=s=>s.id==="zoom";function ls(s,e,t){let n,i,l,r;E(s,mn,$=>t(1,i=$));const{isSettings:o,widgetId:a,minutesBeforeReminder:f,sendNotifications:u}=me("stores");E(s,o,$=>t(0,n=$)),E(s,f,$=>t(3,r=$)),E(s,u,$=>t(2,l=$));const d=a==="zoom"?"zoom":`zoom_${a}`;return[n,i,l,r,o,f,u,d,$=>{$.key==="Escape"&&pe(o,n=!1,n)},()=>pe(o,n=!1,n),$=>{$.detail===!1?u.set(!1):(u.set(!0),pe(f,r=$.detail,r))}]}class rs extends ke{constructor(e){super(),we(this,e,ls,is,he,{})}}function Dt(s){let e,t,n,i;return t=new Wt({props:{class:"text-xs",$$slots:{default:[os]},$$scope:{ctx:s}}}),t.$on("click",s[6]),{c(){e=k("div"),T(t.$$.fragment),b(e,"class","mr-1 flex items-center justify-end")},m(l,r){C(l,e,r),A(t,e,null),i=!0},p(l,r){const o={};r&522&&(o.$$scope={dirty:r,ctx:l}),t.$set(o)},i(l){i||(_(t.$$.fragment,l),l&&Zt(()=>{i&&(n||(n=ut(e,yt,{duration:200},!0)),n.run(1))}),i=!0)},o(l){g(t.$$.fragment,l),l&&(n||(n=ut(e,yt,{duration:200},!1)),n.run(0)),i=!1},d(l){l&&S(e),D(t),l&&n&&n.end()}}}function os(s){let e=s[3]?"Now live":`In ${s[1]}`,t;return{c(){t=B(e)},m(n,i){C(n,t,i)},p(n,i){i&10&&e!==(e=n[3]?"Now live":`In ${n[1]}`)&&re(t,e)},d(n){n&&S(t)}}}function as(s){let e,t,n=(s[0].topic||"Untitled event")+"",i,l,r,o,a,f=j(s[0].start_time).format("MMM D, YYYY h:mm A")+"",u,d,c=j(s[0].start_time).add(s[0].duration,"minutes").format("h:mm A")+"",p,v,$,I,Y,R,L,P,x=(s[2]||s[3])&&Dt(s);return{c(){e=k("div"),t=k("span"),i=B(n),r=M(),o=k("div"),a=k("span"),u=B(f),d=B(" - "),p=B(c),v=M(),$=k("div"),x&&x.c(),I=M(),Y=k("button"),Y.innerHTML='<img src="/apps/Zoom.svg" class="w-6" alt="Meeting provider icon"/>',b(t,"class","max-line-1 text-left font-semibold"),b(t,"title",l=s[0].topic),b(a,"class","max-line-1 text-start text-xs font-[400]"),b(o,"class","flex items-center gap-4 opacity-70"),b(e,"class","flex flex-col gap-0.5"),b(Y,"class","flex-center flex gap-2 text-xs mr-1"),b($,"class","flex items-center justify-end gap-3")},m(h,y){C(h,e,y),m(e,t),m(t,i),m(e,r),m(e,o),m(o,a),m(a,u),m(a,d),m(a,p),C(h,v,y),C(h,$,y),x&&x.m($,null),m($,I),m($,Y),R=!0,L||(P=[pt(Bt.call(null,Y,"Join meeting")),st(Y,"click",s[7])],L=!0)},p(h,y){(!R||y&1)&&n!==(n=(h[0].topic||"Untitled event")+"")&&re(i,n),(!R||y&1&&l!==(l=h[0].topic))&&b(t,"title",l),(!R||y&1)&&f!==(f=j(h[0].start_time).format("MMM D, YYYY h:mm A")+"")&&re(u,f),(!R||y&1)&&c!==(c=j(h[0].start_time).add(h[0].duration,"minutes").format("h:mm A")+"")&&re(p,c),h[2]||h[3]?x?(x.p(h,y),y&12&&_(x,1)):(x=Dt(h),x.c(),_(x,1),x.m($,I)):x&&(X(),g(x,1,1,()=>{x=null}),ee())},i(h){R||(_(x),R=!0)},o(h){g(x),R=!1},d(h){h&&S(e),h&&S(v),h&&S($),x&&x.d(),L=!1,_t(P)}}}function fs(s){let e,t;return e=new Cn({props:{class:"px-3 py-2 flex gap-4 justify-between items-center",$$slots:{default:[as]},$$scope:{ctx:s}}}),e.$on("click",s[8]),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},p(n,[i]){const l={};i&527&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function cs(s,e,t){let n,i,l,r;E(s,mt,c=>t(5,r=c));let{event:o}=e;const{selectedMeeting:a}=me("stores"),f=c=>(c.stopPropagation(),window.open(o==null?void 0:o.join_url,"_blank")),u=c=>(c.stopPropagation(),window.open(o==null?void 0:o.join_url,"_blank")),d=()=>a.set(o.custom_id);return s.$$set=c=>{"event"in c&&t(0,o=c.event)},s.$$.update=()=>{s.$$.dirty&33&&t(3,n=j(o.start_time).isBefore(r)&&j(o.start_time).add(o.duration,"minutes").isAfter(r)),s.$$.dirty&33&&t(2,i=j(o.start_time).isBefore(j().add(6,"hours"))&&j(o.start_time).isAfter(r)),s.$$.dirty&33&&t(1,l=Ot(j(o.start_time).valueOf()-r.getTime(),{short:!0}))},[o,l,i,n,a,r,f,u,d]}class qt extends ke{constructor(e){super(),we(this,e,cs,fs,he,{event:0})}}function Nt(s,e,t){const n=s.slice();return n[13]=e[t],n}function xt(s,e,t){const n=s.slice();return n[13]=e[t],n}function us(s){let e,t,n,i=[],l=new Map,r,o,a,f=s[2].length>0&&jt(s),u=s[1];const d=c=>c[13].custom_id;for(let c=0;c<u.length;c+=1){let p=Nt(s,u,c),v=d(p);l.set(v,i[c]=Yt(v,p))}return{c(){e=k("div"),t=k("div"),f&&f.c(),n=M();for(let c=0;c<i.length;c+=1)i[c].c();b(t,"class","flex flex-col gap-2 transition-height h-full")},m(c,p){C(c,e,p),m(e,t),f&&f.m(t,null),m(t,n);for(let v=0;v<i.length;v+=1)i[v]&&i[v].m(t,null);r=!0,o||(a=pt(Lt.call(null,e)),o=!0)},p(c,p){c[2].length>0?f?(f.p(c,p),p&4&&_(f,1)):(f=jt(c),f.c(),_(f,1),f.m(t,n)):f&&(X(),g(f,1,1,()=>{f=null}),ee()),p&2&&(u=c[1],X(),i=Ft(i,p,d,1,c,u,l,t,Ht,Yt,null,Nt),ee())},i(c){if(!r){_(f);for(let p=0;p<u.length;p+=1)_(i[p]);r=!0}},o(c){g(f);for(let p=0;p<i.length;p+=1)g(i[p]);r=!1},d(c){c&&S(e),f&&f.d();for(let p=0;p<i.length;p+=1)i[p].d();o=!1,a()}}}function ms(s){let e,t,n,i;const l=[ds,ps],r=[];function o(a,f){return a[3]?0:1}return t=o(s),n=r[t]=l[t](s),{c(){e=k("div"),n.c(),b(e,"class","flex items-center flex-col justify-center h-full")},m(a,f){C(a,e,f),r[t].m(e,null),i=!0},p(a,f){let u=t;t=o(a),t===u?r[t].p(a,f):(X(),g(r[u],1,1,()=>{r[u]=null}),ee(),n=r[t],n?n.p(a,f):(n=r[t]=l[t](a),n.c()),_(n,1),n.m(e,null))},i(a){i||(_(n),i=!0)},o(a){g(n),i=!1},d(a){a&&S(e),r[t].d()}}}function jt(s){let e,t,n=[],i=new Map,l,r,o,a=s[2];const f=d=>d[13].id;for(let d=0;d<a.length;d+=1){let c=xt(s,a,d),p=f(c);i.set(p,n[d]=Ut(p,c))}let u=s[1].length>0&&zt();return{c(){e=k("span"),e.textContent="Today",t=M();for(let d=0;d<n.length;d+=1)n[d].c();l=M(),u&&u.c(),r=Te(),b(e,"class","ml-1.5 mt-1 text-start text-[0.9rem] font-medium")},m(d,c){C(d,e,c),C(d,t,c);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(d,c);C(d,l,c),u&&u.m(d,c),C(d,r,c),o=!0},p(d,c){c&4&&(a=d[2],X(),n=Ft(n,c,f,1,d,a,i,l.parentNode,Ht,Ut,l,xt),ee()),d[1].length>0?u||(u=zt(),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i(d){if(!o){for(let c=0;c<a.length;c+=1)_(n[c]);o=!0}},o(d){for(let c=0;c<n.length;c+=1)g(n[c]);o=!1},d(d){d&&S(e),d&&S(t);for(let c=0;c<n.length;c+=1)n[c].d(d);d&&S(l),u&&u.d(d),d&&S(r)}}}function Ut(s,e){let t,n,i;return n=new qt({props:{event:e[13]}}),{key:s,first:null,c(){t=Te(),T(n.$$.fragment),this.first=t},m(l,r){C(l,t,r),A(n,l,r),i=!0},p(l,r){e=l;const o={};r&4&&(o.event=e[13]),n.$set(o)},i(l){i||(_(n.$$.fragment,l),i=!0)},o(l){g(n.$$.fragment,l),i=!1},d(l){l&&S(t),D(n,l)}}}function zt(s){let e;return{c(){e=k("span"),e.textContent="Upcoming",b(e,"class","ml-1.5 mt-1 text-start text-[0.9rem] font-medium")},m(t,n){C(t,e,n)},d(t){t&&S(e)}}}function Yt(s,e){let t,n,i;return n=new qt({props:{event:e[13]}}),{key:s,first:null,c(){t=Te(),T(n.$$.fragment),this.first=t},m(l,r){C(l,t,r),A(n,l,r),i=!0},p(l,r){e=l;const o={};r&2&&(o.event=e[13]),n.$set(o)},i(l){i||(_(n.$$.fragment,l),i=!0)},o(l){g(n.$$.fragment,l),i=!1},d(l){l&&S(t),D(n,l)}}}function ps(s){let e,t,n,i,l,r;return e=new ve({props:{icon:pn,class:"text-5xl shrink-0"}}),l=new lt({props:{class:"mt-4",$$slots:{default:[_s]},$$scope:{ctx:s}}}),l.$on("click",s[9]),{c(){T(e.$$.fragment),t=M(),n=k("span"),n.textContent="No upcoming meetings",i=M(),T(l.$$.fragment),b(n,"class","text-lg flex-center gap-4 mt-6")},m(o,a){A(e,o,a),C(o,t,a),C(o,n,a),C(o,i,a),A(l,o,a),r=!0},p(o,a){const f={};a&262144&&(f.$$scope={dirty:a,ctx:o}),l.$set(f)},i(o){r||(_(e.$$.fragment,o),_(l.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(l.$$.fragment,o),r=!1},d(o){D(e,o),o&&S(t),o&&S(n),o&&S(i),D(l,o)}}}function ds(s){let e,t,n,i,l,r,o;return r=new ve({props:{icon:it,class:"animate-spin text-2xl"}}),{c(){e=k("img"),n=M(),i=k("span"),l=B("Looking for meetings "),T(r.$$.fragment),dn(e.src,t="/apps/Zoom.svg")||b(e,"src",t),b(e,"class","w-10 h-10"),b(e,"alt","Google Calendar logo"),b(i,"class","text-lg flex-center gap-4 mt-6")},m(a,f){C(a,e,f),C(a,n,f),C(a,i,f),m(i,l),A(r,i,null),o=!0},p:Ie,i(a){o||(_(r.$$.fragment,a),o=!0)},o(a){g(r.$$.fragment,a),o=!1},d(a){a&&S(e),a&&S(n),a&&S(i),D(r)}}}function _s(s){let e;return{c(){e=B("Add meeting")},m(t,n){C(t,e,n)},d(t){t&&S(e)}}}function gs(s){let e,t,n,i;const l=[ms,us],r=[];function o(a,f){return a[0].length===0?0:1}return e=o(s),t=r[e]=l[e](s),{c(){t.c(),n=Te()},m(a,f){r[e].m(a,f),C(a,n,f),i=!0},p(a,[f]){let u=e;e=o(a),e===u?r[e].p(a,f):(X(),g(r[u],1,1,()=>{r[u]=null}),ee(),t=r[e],t?t.p(a,f):(t=r[e]=l[e](a),t.c()),_(t,1),t.m(n.parentNode,n))},i(a){i||(_(t),i=!0)},o(a){g(t),i=!1},d(a){r[e].d(a),a&&S(n)}}}function $s(s,e,t){let n,i,l,r,o,a;E(s,mt,$=>t(7,r=$)),me("appView");const{meetings:f,isCreate:u,lastUpdated:d,isUpdating:c,widgetId:p}=me("stores");E(s,f,$=>t(8,o=$)),E(s,c,$=>t(3,a=$));const v=()=>u.set(!0);return s.$$.update=()=>{s.$$.dirty&384&&t(0,n=o.filter($=>j($.start_time).add($.duration,"minutes").isAfter(r))),s.$$.dirty&129&&t(2,i=n.filter($=>j($.start_time).isSame(r,"day")).sort(($,I)=>$.start_time.localeCompare(I.start_time))),s.$$.dirty&129&&t(1,l=n.filter($=>j($.start_time).isAfter(r,"day")).sort(($,I)=>$.start_time.localeCompare(I.start_time)))},[n,l,i,a,f,u,c,r,o,v]}class bs extends ke{constructor(e){super(),we(this,e,$s,gs,he,{})}}function vs(s){let e,t,n,i,l;const r=[ys,hs],o=[];function a(u,d){return u[4]?0:1}e=a(s),t=o[e]=r[e](s);let f=(s[0]||s[5])&&Et();return{c(){t.c(),n=M(),f&&f.c(),i=Te()},m(u,d){o[e].m(u,d),C(u,n,d),f&&f.m(u,d),C(u,i,d),l=!0},p(u,d){let c=e;e=a(u),e!==c&&(X(),g(o[c],1,1,()=>{o[c]=null}),ee(),t=o[e],t||(t=o[e]=r[e](u),t.c()),_(t,1),t.m(n.parentNode,n)),u[0]||u[5]?f?d&33&&_(f,1):(f=Et(),f.c(),_(f,1),f.m(i.parentNode,i)):f&&(X(),g(f,1,1,()=>{f=null}),ee())},i(u){l||(_(t),_(f),l=!0)},o(u){g(t),g(f),l=!1},d(u){o[e].d(u),u&&S(n),f&&f.d(u),u&&S(i)}}}function ks(s){let e,t;return e=new rs({}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},p:Ie,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ws(s){let e,t;return e=new Hn({}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},p:Ie,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function hs(s){let e,t;return e=new bs({}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ys(s){let e,t;return e=new es({}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Et(s){let e,t;return e=new ss({}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ms(s){let e,t,n,i,l;const r=[ws,ks,vs],o=[];function a(f,u){return f[1]||f[2]?0:f[3]?1:2}return t=a(s),n=o[t]=r[t](s),{c(){e=k("div"),n.c(),b(e,"class",i="w-[24rem] flex-col justify-between flex px-2 py-2 overflow-hidden "+(s[0]?"h-[40rem]":"h-[24.75rem]")),_n(e,"transition","height 0.2s ease-in-out, max-height 0.2s ease-in-out, min-height 0.2s ease-in-out")},m(f,u){C(f,e,u),o[t].m(e,null),l=!0},p(f,[u]){let d=t;t=a(f),t===d?o[t].p(f,u):(X(),g(o[d],1,1,()=>{o[d]=null}),ee(),n=o[t],n?n.p(f,u):(n=o[t]=r[t](f),n.c()),_(n,1),n.m(e,null)),(!l||u&1&&i!==(i="w-[24rem] flex-col justify-between flex px-2 py-2 overflow-hidden "+(f[0]?"h-[40rem]":"h-[24.75rem]")))&&b(e,"class",i)},i(f){l||(_(n),l=!0)},o(f){g(n),l=!1},d(f){f&&S(e),o[t].d()}}}function Is(s,e,t){let n,i,l,r,o,a,f,u;const{meetings:d,lastUpdated:c,isUpdating:p,selectedMeeting:v,widgetId:$,isCreate:I,isEdit:Y,isSettings:R}=me("stores");E(s,d,U=>t(14,n=U)),E(s,c,U=>t(15,i=U)),E(s,v,U=>t(4,f=U)),E(s,I,U=>t(1,r=U)),E(s,Y,U=>t(2,o=U)),E(s,R,U=>t(3,a=U));const L=me("alwaysAppView");E(s,L,U=>t(0,l=U));const P=me("appActive");E(s,P,U=>t(5,u=U));const x=h();gn(()=>{x()}),$n(async()=>{j(i).add(5,"minutes").isAfter(j())||y()});function h(){const U=setInterval(()=>{y()},3e5);return()=>clearInterval(U)}const y=async()=>{p.set(!0);try{const{data:U}=await ct.get("/integration/zoom/list_meetings",{params:{widgetId:$==="zoom"?"":$}}),K=U.meetings.map(te=>{const q=n.find(J=>J.id===te.id);return{...te,reminderSent:(q==null?void 0:q.reminderSent)??!1}});d.set(K),c.set(j().valueOf())}catch(U){console.error(U)}finally{p.set(!1)}};return Vt("utils",{getMeetings:y}),[l,r,o,a,f,u,d,c,v,I,Y,R,L,P]}class Cs extends ke{constructor(e){super(),we(this,e,Is,Ms,he,{})}}function Ss(s){let e,t;return e=new hn({}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},p:Ie,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ts(s){let e,t,n,i;const l=[Ds,As],r=[];function o(a,f){return a[1]?0:1}return e=o(s),t=r[e]=l[e](s),{c(){t.c(),n=Te()},m(a,f){r[e].m(a,f),C(a,n,f),i=!0},p(a,f){let u=e;e=o(a),e===u?r[e].p(a,f):(X(),g(r[u],1,1,()=>{r[u]=null}),ee(),t=r[e],t?t.p(a,f):(t=r[e]=l[e](a),t.c()),_(t,1),t.m(n.parentNode,n))},i(a){i||(_(t),i=!0)},o(a){g(t),i=!1},d(a){r[e].d(a),a&&S(n)}}}function As(s){let e,t;return e=new Nn({props:{widgetId:s[0].id}}),{c(){T(e.$$.fragment)},m(n,i){A(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.widgetId=n[0].id),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ds(s){let e,t,n,i;return e=new Cs({}),n=new jn({}),{c(){T(e.$$.fragment),t=M(),T(n.$$.fragment)},m(l,r){A(e,l,r),C(l,t,r),A(n,l,r),i=!0},p:Ie,i(l){i||(_(e.$$.fragment,l),_(n.$$.fragment,l),i=!0)},o(l){g(e.$$.fragment,l),g(n.$$.fragment,l),i=!1},d(l){D(e,l),l&&S(t),D(n,l)}}}function Ns(s){let e,t,n,i;const l=[Ts,Ss],r=[];function o(a,f){return a[2]?0:1}return e=o(s),t=r[e]=l[e](s),{c(){t.c(),n=Te()},m(a,f){r[e].m(a,f),C(a,n,f),i=!0},p(a,[f]){let u=e;e=o(a),e===u?r[e].p(a,f):(X(),g(r[u],1,1,()=>{r[u]=null}),ee(),t=r[e],t?t.p(a,f):(t=r[e]=l[e](a),t.c()),_(t,1),t.m(n.parentNode,n))},i(a){i||(_(t),i=!0)},o(a){g(t),i=!1},d(a){r[e].d(a),a&&S(n)}}}function xs(s,e,t){let n,i,l,r,o,a,f,{config:u}=e;const d={path:`user_data/{uid}/profiles/{currentProfile}/apps/${u.id}`,currentProfile:Rt,uid:bn},c=u.id==="zoom"?"zoom":`zoom_${u.id}`,{create:p,createPersist:v,isFetched:$,start:I,stop:Y}=wn(d);E(s,$,O=>t(2,f=O));const R=v("lastUpdated",1696020917e3),L=v("meetings",[]);E(s,L,O=>t(14,o=O));const P=tt(!1),x=tt(!1);E(s,x,O=>t(12,l=O));const h=tt(!1);E(s,h,O=>t(11,i=O));const y=tt(!1);E(s,y,O=>t(13,r=O));const U=p("minutesBeforeReminder",5),K=p("sendNotifications",!0),te=tt(null);E(s,te,O=>t(10,n=O));const q=vn([kn],([O])=>{const oe=O==null?void 0:O[c];return oe?oe.id:!1});E(s,q,O=>t(1,a=O));const J=()=>{pe(L,o=[],o),pe(y,r=!1,r),pe(x,l=!1,l),pe(h,i=!1,i),pe(te,n=null,n),R.set(1696020917e3)};return I(),Vt("stores",{lastUpdated:R,isUpdating:P,meetings:L,isEdit:x,isCreate:h,isIntegrated:q,widgetId:u.id,integrationId:c,isSettings:y,minutesBeforeReminder:U,sendNotifications:K,selectedMeeting:te}),s.$$set=O=>{"config"in O&&t(0,u=O.config)},s.$$.update=()=>{s.$$.dirty&6&&f&&!a&&J()},[u,a,f,$,L,x,h,y,te,q]}class Ls extends ke{constructor(e){super(),we(this,e,xs,Ns,he,{config:0})}}export{Ls as default};
