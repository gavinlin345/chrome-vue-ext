import{S as we,i as ke,s as le,q as R,V as M,r as b,u as $,L as k,t as p,v as E,a as h,x as F,D as v,b as O,f as Be,bo as x,bc as te,bd as Ee,be as Fe,bf as re,a2 as je,R as J,an as $e,bg as Te,bh as We,K as j,c as D,a7 as N,m as U,Z as K,d as A,aD as P,y as Ce,_ as se,B as ae,I as ve,J as Ge,a1 as oe,U as Ne,bp as He,O as ee,P as ne,W as ie,aI as fe,bl as Oe,a5 as ue,bm as q,a3 as B,aa as y,aQ as ze,ab as Ie,aP as Je,bn as Ke,n as Qe}from"./overlayscrollbars.js";import{R as Ve,G as Xe}from"./Resize.js";function me(i){let e,o,t,a,s,l,r=i[0].name+"",n,f,u,c,_,m,w,I,W,L,T,S;return c=new J({props:{icon:$e,size:"lg",tooltip:"Reload",class:"shrink-0",id:`reload-${i[0].id}`}}),c.$on("click",i[16]),c.$on("pointerdown",xe),m=new J({props:{icon:Te,size:"lg",tooltip:"Minimize",class:"shrink-0",id:`minimize-${i[0].id}`}}),m.$on("click",i[17]),m.$on("pointerdown",en),I=new J({props:{icon:i[1].pinned?"ri:unpin-fill":"ri:pushpin-fill",size:"xl",tooltip:i[1].pinned?"Unpin":"Pin",class:"shrink-0",id:`pin-${i[0].id}`}}),I.$on("click",i[18]),I.$on("pointerdown",nn),L=new J({props:{icon:We,size:"lg",tooltip:"Close",class:"shrink-0",id:`close-${i[0].id}`}}),L.$on("click",i[19]),L.$on("pointerdown",ln),{c(){e=R("div"),o=R("img"),s=M(),l=R("span"),n=j(r),f=M(),u=R("div"),D(c.$$.fragment),_=M(),D(m.$$.fragment),w=M(),D(I.$$.fragment),W=M(),D(L.$$.fragment),N(o.src,t=i[0].iconImg)||b(o,"src",t),b(o,"class","h-6 w-6 mr-2 object-contain"),b(o,"alt",a=i[0].name),b(l,"class","max-line-1 mr-3"),b(u,"class","flex flex-row gap-4 ml-auto"),b(e,"class",T="w-full h-full flex items-center justify-start shrink-0 px-3 "+(i[8]?"":"py-2"))},m(g,z){$(g,e,z),k(e,o),k(e,s),k(e,l),k(l,n),k(e,f),k(e,u),U(c,u,null),k(u,_),U(m,u,null),k(u,w),U(I,u,null),k(u,W),U(L,u,null),S=!0},p(g,z){(!S||z[0]&1&&!N(o.src,t=g[0].iconImg))&&b(o,"src",t),(!S||z[0]&1&&a!==(a=g[0].name))&&b(o,"alt",a),(!S||z[0]&1)&&r!==(r=g[0].name+"")&&K(n,r);const Q={};z[0]&1&&(Q.id=`reload-${g[0].id}`),c.$set(Q);const V={};z[0]&1&&(V.id=`minimize-${g[0].id}`),m.$set(V);const C={};z[0]&2&&(C.icon=g[1].pinned?"ri:unpin-fill":"ri:pushpin-fill"),z[0]&2&&(C.tooltip=g[1].pinned?"Unpin":"Pin"),z[0]&1&&(C.id=`pin-${g[0].id}`),I.$set(C);const X={};z[0]&1&&(X.id=`close-${g[0].id}`),L.$set(X),(!S||z[0]&256&&T!==(T="w-full h-full flex items-center justify-start shrink-0 px-3 "+(g[8]?"":"py-2")))&&b(e,"class",T)},i(g){S||(p(c.$$.fragment,g),p(m.$$.fragment,g),p(I.$$.fragment,g),p(L.$$.fragment,g),S=!0)},o(g){h(c.$$.fragment,g),h(m.$$.fragment,g),h(I.$$.fragment,g),h(L.$$.fragment,g),S=!1},d(g){g&&v(e),A(c),A(m),A(I),A(L)}}}function de(i){let e,o,t=(!i[3]||i[4])&&ce(i);return{c(){e=R("div"),t&&t.c(),P(e,"width",(i[8]?24:i[5]||24)+"rem"),P(e,"height",(i[6]||30)+"rem")},m(a,s){$(a,e,s),t&&t.m(e,null),o=!0},p(a,s){!a[3]||a[4]?t?(t.p(a,s),s[0]&24&&p(t,1)):(t=ce(a),t.c(),p(t,1),t.m(e,null)):t&&(E(),h(t,1,1,()=>{t=null}),F()),(!o||s[0]&288)&&P(e,"width",(a[8]?24:a[5]||24)+"rem"),(!o||s[0]&64)&&P(e,"height",(a[6]||30)+"rem")},i(a){o||(p(t),o=!0)},o(a){h(t),o=!1},d(a){a&&v(e),t&&t.d()}}}function ce(i){let e,o,t,a,s=!i[4]&&pe(i),l=i[4]&&_e(i);return{c(){e=R("div"),s&&s.c(),o=M(),l&&l.c(),b(e,"class","w-full h-full flex items-center gap-3 justify-center flex-col px-8")},m(r,n){$(r,e,n),s&&s.m(e,null),k(e,o),l&&l.m(e,null),a=!0},p(r,n){r[4]?s&&(E(),h(s,1,1,()=>{s=null}),F()):s?(s.p(r,n),n[0]&16&&p(s,1)):(s=pe(r),s.c(),p(s,1),s.m(e,o)),r[4]?l?(l.p(r,n),n[0]&16&&p(l,1)):(l=_e(r),l.c(),p(l,1),l.m(e,null)):l&&(E(),h(l,1,1,()=>{l=null}),F())},i(r){a||(p(s),p(l),r&&Ce(()=>{a&&(t||(t=se(e,ae,{duration:300},!0)),t.run(1))}),a=!0)},o(r){h(s),h(l),r&&(t||(t=se(e,ae,{duration:300},!1)),t.run(0)),a=!1},d(r){r&&v(e),s&&s.d(),l&&l.d(),r&&t&&t.end()}}}function pe(i){let e,o,t=i[0].name+"",a,s,l,r;return l=new ve({props:{icon:Ge,class:"animate-spin ml-3"}}),{c(){e=R("span"),o=j("Loading "),a=j(t),s=M(),D(l.$$.fragment),b(e,"class","flex-center text-lg text-center")},m(n,f){$(n,e,f),k(e,o),k(e,a),k(e,s),U(l,e,null),r=!0},p(n,f){(!r||f[0]&1)&&t!==(t=n[0].name+"")&&K(a,t)},i(n){r||(p(l.$$.fragment,n),r=!0)},o(n){h(l.$$.fragment,n),r=!1},d(n){n&&v(e),A(l)}}}function _e(i){var c;let e,o,t=i[0].name+"",a,s,l,r,n,f;l=new J({props:{icon:$e,class:"ml-2",tooltip:"Reload"}}),l.$on("click",i[2]);let u=((c=i[0])==null?void 0:c.troubleShootInfo)&&be(i);return{c(){e=R("span"),o=j("Failed to load "),a=j(t),s=M(),D(l.$$.fragment),r=M(),u&&u.c(),n=oe(),b(e,"class","flex-center text-lg text-center")},m(_,m){$(_,e,m),k(e,o),k(e,a),k(e,s),U(l,e,null),$(_,r,m),u&&u.m(_,m),$(_,n,m),f=!0},p(_,m){var w;(!f||m[0]&1)&&t!==(t=_[0].name+"")&&K(a,t),(w=_[0])!=null&&w.troubleShootInfo?u?(u.p(_,m),m[0]&1&&p(u,1)):(u=be(_),u.c(),p(u,1),u.m(n.parentNode,n)):u&&(E(),h(u,1,1,()=>{u=null}),F())},i(_){f||(p(l.$$.fragment,_),p(u),f=!0)},o(_){h(l.$$.fragment,_),h(u),f=!1},d(_){_&&v(e),A(l),_&&v(r),u&&u.d(_),_&&v(n)}}}function be(i){var r;let e,o=((r=i[0])==null?void 0:r.troubleShootInfo)+"",t,a,s,l;return s=new Ne({props:{class:"mt-2 flex-center",$$slots:{default:[Ze]},$$scope:{ctx:i}}}),s.$on("click",i[20]),{c(){e=R("span"),t=j(o),a=M(),D(s.$$.fragment),b(e,"class","text-center max-w-[16rem] mt-4")},m(n,f){$(n,e,f),k(e,t),$(n,a,f),U(s,n,f),l=!0},p(n,f){var c;(!l||f[0]&1)&&o!==(o=((c=n[0])==null?void 0:c.troubleShootInfo)+"")&&K(t,o);const u={};f[0]&1|f[1]&1&&(u.$$scope={dirty:f,ctx:n}),s.$set(u)},i(n){l||(p(s.$$.fragment,n),l=!0)},o(n){h(s.$$.fragment,n),l=!1},d(n){n&&v(e),n&&v(a),A(s,n)}}}function Ze(i){let e,o=i[0].name+"",t,a,s,l;return s=new ve({props:{icon:He,class:"ml-2"}}),{c(){e=j("Open "),t=j(o),a=M(),D(s.$$.fragment)},m(r,n){$(r,e,n),$(r,t,n),$(r,a,n),U(s,r,n),l=!0},p(r,n){(!l||n[0]&1)&&o!==(o=r[0].name+"")&&K(t,o)},i(r){l||(p(s.$$.fragment,r),l=!0)},o(r){h(s.$$.fragment,r),l=!1},d(r){r&&v(e),r&&v(t),r&&v(a),A(s,r)}}}function Ye(i){let e,o,t,a,s;return{c(){e=R("iframe"),N(e.src,o=q(i[0].url,i[7],i[0].loadMobile))||b(e,"src",o),b(e,"class","border-0 block align-bottom bg-white"),P(e,"width",(i[8]?24:i[5]||24)+"rem"),P(e,"height",(i[6]||30)+"rem"),b(e,"title",t=i[0].name),b(e,"allow","camera; microphone; encrypted-media; picture-in-picture; storage-access; fullscreen; display-capture; document-domain;"),B(e,"hidden",!i[3]||i[4]),B(e,"pointer-events-none",i[11]||i[12])},m(l,r){$(l,e,r),a||(s=[y(e,"pointerdown",ze(i[15])),y(e,"error",i[22])],a=!0)},p(l,r){r[0]&129&&!N(e.src,o=q(l[0].url,l[7],l[0].loadMobile))&&b(e,"src",o),r[0]&288&&P(e,"width",(l[8]?24:l[5]||24)+"rem"),r[0]&64&&P(e,"height",(l[6]||30)+"rem"),r[0]&1&&t!==(t=l[0].name)&&b(e,"title",t),r[0]&24&&B(e,"hidden",!l[3]||l[4]),r[0]&6144&&B(e,"pointer-events-none",l[11]||l[12])},d(l){l&&v(e),a=!1,Ie(s)}}}function qe(i){let e,o,t,a,s;return{c(){e=R("iframe"),N(e.src,o=q(i[0].url,i[7],i[0].loadMobile))||b(e,"src",o),b(e,"class","border-0 block align-bottom bg-white"),P(e,"width",(i[8]?24:i[5]||24)+"rem"),P(e,"height",(i[6]||30)+"rem"),b(e,"title",t=i[0].name),b(e,"sandbox","allow-downloads allow-presentation allow-modals allow-same-origin allow-scripts allow-popups allow-forms"),b(e,"allow","camera; microphone; encrypted-media; picture-in-picture; storage-access; fullscreen; display-capture; document-domain;"),B(e,"hidden",!i[3]||i[4]),B(e,"pointer-events-none",i[11]||i[12])},m(l,r){$(l,e,r),a||(s=[y(e,"pointerdown",ze(i[14])),y(e,"error",i[21])],a=!0)},p(l,r){r[0]&129&&!N(e.src,o=q(l[0].url,l[7],l[0].loadMobile))&&b(e,"src",o),r[0]&288&&P(e,"width",(l[8]?24:l[5]||24)+"rem"),r[0]&64&&P(e,"height",(l[6]||30)+"rem"),r[0]&1&&t!==(t=l[0].name)&&b(e,"title",t),r[0]&24&&B(e,"hidden",!l[3]||l[4]),r[0]&6144&&B(e,"pointer-events-none",l[11]||l[12])},d(l){l&&v(e),a=!1,Ie(s)}}}function ge(i){let e;function o(s,l){var r;return(r=s[0])!=null&&r.disableRedirect?qe:Ye}let t=o(i),a=t(i);return{c(){a.c(),e=oe()},m(s,l){a.m(s,l),$(s,e,l)},p(s,l){t===(t=o(s))&&a?a.p(s,l):(a.d(1),a=t(s),a&&(a.c(),a.m(e.parentNode,e)))},d(s){a.d(s),s&&v(e)}}}function he(i){let e,o,t,a;function s(n){i[23](n)}function l(n){i[24](n)}let r={};return i[5]!==void 0&&(r.w=i[5]),i[6]!==void 0&&(r.h=i[6]),e=new Ve({props:r}),ee.push(()=>ne(e,"w",s)),ee.push(()=>ne(e,"h",l)),e.$on("resize",i[13]),{c(){D(e.$$.fragment)},m(n,f){U(e,n,f),a=!0},p(n,f){const u={};!o&&f[0]&32&&(o=!0,u.w=n[5],ie(()=>o=!1)),!t&&f[0]&64&&(t=!0,u.h=n[6],ie(()=>t=!1)),e.$set(u)},i(n){a||(p(e.$$.fragment,n),a=!0)},o(n){h(e.$$.fragment,n),a=!1},d(n){A(e,n)}}}function ye(i){var _;let e,o,t,a=i[7],s,l,r,n=(i[8]||((_=i[1])==null?void 0:_.pinned))&&me(i),f=(!i[3]||i[4])&&de(i),u=ge(i),c=i[3]&&!i[8]&&he(i);return{c(){e=R("div"),n&&n.c(),o=M(),f&&f.c(),t=M(),u.c(),s=M(),c&&c.c(),b(e,"class",l=i[8]?"flex flex-col pt-2.5 gap-2":"contents")},m(m,w){$(m,e,w),n&&n.m(e,null),k(e,o),f&&f.m(e,null),k(e,t),u.m(e,null),k(e,s),c&&c.m(e,null),r=!0},p(m,w){var I;m[8]||(I=m[1])!=null&&I.pinned?n?(n.p(m,w),w[0]&258&&p(n,1)):(n=me(m),n.c(),p(n,1),n.m(e,o)):n&&(E(),h(n,1,1,()=>{n=null}),F()),!m[3]||m[4]?f?(f.p(m,w),w[0]&24&&p(f,1)):(f=de(m),f.c(),p(f,1),f.m(e,t)):f&&(E(),h(f,1,1,()=>{f=null}),F()),w[0]&128&&le(a,a=m[7])?(u.d(1),u=ge(m),u.c(),u.m(e,s)):u.p(m,w),m[3]&&!m[8]?c?(c.p(m,w),w[0]&264&&p(c,1)):(c=he(m),c.c(),p(c,1),c.m(e,null)):c&&(E(),h(c,1,1,()=>{c=null}),F()),(!r||w[0]&256&&l!==(l=m[8]?"flex flex-col pt-2.5 gap-2":"contents"))&&b(e,"class",l)},i(m){r||(p(n),p(f),p(c),r=!0)},o(m){h(n),h(f),h(c),r=!1},d(m){m&&v(e),n&&n.d(),f&&f.d(),u.d(m),c&&c.d()}}}const xe=i=>i.stopPropagation(),en=i=>i.stopPropagation(),nn=i=>i.stopPropagation(),ln=i=>i.stopPropagation();function on(i,e,o){let t,a,s,l,r;O(i,Be,d=>o(8,t=d)),O(i,x,d=>o(9,a=d)),O(i,te,d=>o(10,s=d)),O(i,Ee,d=>o(11,l=d)),O(i,Fe,d=>o(12,r=d));let{config:n}=e,{state:f}=e,u=!1,c=!1,_=(f==null?void 0:f.w)||n.w||24,m=(f==null?void 0:f.h)||n.h||30,w=re("short");const I=()=>{o(5,_=(f==null?void 0:f.w)||n.w||24),o(6,m=(f==null?void 0:f.h)||n.h||30)},W=()=>{o(3,u=!1),o(4,c=!1),o(7,w=re("short"))};let L=setTimeout(()=>{o(4,c=!0)},1e4);const T=(d,G,H)=>{d.type==="iframe-loaded"&&d.embedId===w&&(o(3,u=!0),clearTimeout(L))},S=(d,G,H)=>{d.type==="send-config"&&d.embedId===w&&H({...n})},g=d=>{const{id:G}=d.detail;G===n.id&&W()},z=(d,G,H)=>{d.type==="site-loaded"&&(d.url===n.url||d.url.includes(n.url))&&(o(3,u=!0),clearTimeout(L))},Q=d=>{const{w:G,h:H}=d.detail;x.update(Z=>(Z=Z.map(Y=>(Y.id===n.id&&(Y.w=G,Y.h=H),Y)),Z))};window.addEventListener("reload-widget",g),chrome.runtime.onMessage.addListener(T),chrome.runtime.onMessage.addListener(S),n!=null&&n.listenForSiteLoaded&&chrome.runtime.onMessage.addListener(z),je(()=>{chrome.runtime.onMessage.removeListener(T),chrome.runtime.onMessage.removeListener(S),chrome.runtime.onMessage.removeListener(z),window.removeEventListener("reload-widget",g)});function V(d){fe.call(this,i,d)}function C(d){fe.call(this,i,d)}const X=()=>{W()},Me=()=>Oe.update(d=>[...d,n.id]),Le=()=>{ue(x,a=a.map(d=>(d.id===n.id&&(d.pinned=!d.pinned),d)),a)},Re=()=>{ue(te,s=s.filter(d=>d!==n.id),s)},Pe=()=>{window.open(n.url,"_blank")},Se=()=>{console.log("error")},De=()=>{console.log("error")};function Ue(d){_=d,o(5,_)}function Ae(d){m=d,o(6,m)}return i.$$set=d=>{"config"in d&&o(0,n=d.config),"state"in d&&o(1,f=d.state)},i.$$.update=()=>{i.$$.dirty[0]&3&&(n||f)&&I()},[n,f,W,u,c,_,m,w,t,a,s,l,r,Q,V,C,X,Me,Le,Re,Pe,Se,De,Ue,Ae]}class tn extends we{constructor(e){super(),ke(this,e,on,ye,le,{config:0,state:1,reload:2},null,[-1,-1])}get reload(){return this.$$.ctx[2]}}function rn(i){let e,o,t;function a(l){i[5](l)}let s={config:i[1],state:i[2]};return i[0]!==void 0&&(s.reload=i[0]),e=new tn({props:s}),ee.push(()=>ne(e,"reload",a)),{c(){D(e.$$.fragment)},m(l,r){U(e,l,r),t=!0},p(l,r){const n={};r&2&&(n.config=l[1]),r&4&&(n.state=l[2]),!o&&r&1&&(o=!0,n.reload=l[0],ie(()=>o=!1)),e.$set(n)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){A(e,l)}}}function sn(i){let e,o;return e=new Xe({}),{c(){D(e.$$.fragment)},m(t,a){U(e,t,a),o=!0},p:Qe,i(t){o||(p(e.$$.fragment,t),o=!0)},o(t){h(e.$$.fragment,t),o=!1},d(t){A(e,t)}}}function an(i){let e,o,t,a;const s=[sn,rn],l=[];function r(n,f){return n[4]&&!n[3]?0:1}return e=r(i),o=l[e]=s[e](i),{c(){o.c(),t=oe()},m(n,f){l[e].m(n,f),$(n,t,f),a=!0},p(n,[f]){let u=e;e=r(n),e===u?l[e].p(n,f):(E(),h(l[u],1,1,()=>{l[u]=null}),F(),o=l[e],o?o.p(n,f):(o=l[e]=s[e](n),o.c()),p(o,1),o.m(t.parentNode,t))},i(n){a||(p(o),a=!0)},o(n){h(o),a=!1},d(n){l[e].d(n),n&&v(t)}}}function fn(i,e,o){let{config:t}=e,{state:a}=e,{reload:s=()=>{}}=e;const l=Ke();let r=!l;Je(async()=>{});function n(f){s=f,o(0,s)}return i.$$set=f=>{"config"in f&&o(1,t=f.config),"state"in f&&o(2,a=f.state),"reload"in f&&o(0,s=f.reload)},[s,t,a,r,l,n]}class dn extends we{constructor(e){super(),ke(this,e,fn,an,le,{config:1,state:2,reload:0})}}export{dn as default};
