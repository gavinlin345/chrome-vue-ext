import{S as X,i as K,s as Q,U as kt,q as S,V as O,c as C,r as v,u as U,L as P,m as T,t as w,a as k,D as N,d as L,K as ee,aa as j,aQ as Oe,a8 as le,a9 as Re,v as Z,x as H,as as Ue,ab as ue,E as ne,b as A,G as vt,ca as Je,cb as Ve,aI as $e,dU as ft,dV as dt,dW as pt,dX as mt,I as W,an as De,n as q,aC as yt,cJ as Me,d$ as xt,ac as Gt,bn as gt,e0 as Ne,R as Y,ao as ze,bh as Ee,e1 as Ge,da as Pe,aD as ae,de as he,c5 as Pt,Z as Ce,e2 as Ct,l as Te,a3 as ye,aG as je,y as we,z as Tt,C as Lt,a5 as re,a7 as me,aF as Le,_ as ie,B as ce,e3 as bt,c9 as Ie,af as Se,ag as Ae,a1 as ge,e4 as qe,a2 as Fe,N as It,O as _t,P as Rt,W as Dt,ba as Et,j as We,k as St,e5 as Ut,ce as Ze,e6 as ht,aM as He,aN as Xe,aP as Nt,at as $t,ah as Ot,av as Mt,cM as zt,e as jt,ay as At,az as _e}from"./overlayscrollbars.js";function qt(o){let e;return{c(){e=ee("Grant Permissions")},m(r,t){U(r,e,t)},d(r){r&&N(e)}}}function Ft(o){let e,r,t,n,s;return n=new kt({props:{class:"mt-4",$$slots:{default:[qt]},$$scope:{ctx:o}}}),n.$on("click",o[1]),{c(){e=S("div"),r=S("span"),r.textContent="Dashy needs your permission to view and manage your tabs and tab groups. Dashy does not store your data.",t=O(),C(n.$$.fragment),v(r,"class","text-sm text-center"),v(e,"class","max-w-[24rem] p-4 h-max flex flex-col items-center justify-center")},m(l,c){U(l,e,c),P(e,r),P(e,t),T(n,e,null),s=!0},p(l,[c]){const i={};c&4&&(i.$$scope={dirty:c,ctx:l}),n.$set(i)},i(l){s||(w(n.$$.fragment,l),s=!0)},o(l){k(n.$$.fragment,l),s=!1},d(l){l&&N(e),L(n)}}}function Wt(o,e,r){let{checkForPermissions:t}=e;const n=async()=>{await chrome.permissions.request({permissions:["tabs","tabGroups","bookmarks"]})&&t()};return o.$$set=s=>{"checkForPermissions"in s&&r(0,t=s.checkForPermissions)},[t,n]}class Bt extends X{constructor(e){super(),K(this,e,Wt,Ft,Q,{checkForPermissions:0})}}const Jt=o=>({}),Ke=o=>({}),Vt=o=>({}),Qe=o=>({});function Zt(o){let e;const r=o[7].idle,t=ft(r,o,o[6],Ke);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&64)&&dt(t,r,n,n[6],e?mt(r,n[6],s,Jt):pt(n[6]),Ke)},i(n){e||(w(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function Ht(o){let e;const r=o[7].dropped,t=ft(r,o,o[6],Qe);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&64)&&dt(t,r,n,n[6],e?mt(r,n[6],s,Vt):pt(n[6]),Qe)},i(n){e||(w(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function Xt(o){let e,r,t,n,s,l,c,i,g;const u=[Ht,Zt],p=[];function b(a,f){return a[1]?0:1}return t=b(o),n=p[t]=u[t](o),{c(){e=S("button"),r=S("div"),n.c(),v(r,"class","transition-container"),v(e,"class",s="flex-1 h-8 flex-center curved transition "+(o[0]?"opacity-100 scale-105 border":"opacity-70  border-light")+" hover:opacity-100 hover:scale-105 focus:scale-100")},m(a,f){U(a,e,f),P(e,r),p[t].m(r,null),c=!0,i||(g=[j(e,"dragover",o[10]),j(e,"pointerdown",Oe(o[8])),j(e,"dragleave",o[11]),j(e,"drop",o[12]),j(e,"click",o[13]),j(e,"click",o[9]),le(l=Re.call(null,e,{title:o[5].tooltip,show:!o[2]}))],i=!0)},p(a,[f]){let m=t;t=b(a),t===m?p[t].p(a,f):(Z(),k(p[m],1,1,()=>{p[m]=null}),H(),n=p[t],n?n.p(a,f):(n=p[t]=u[t](a),n.c()),w(n,1),n.m(r,null)),(!c||f&1&&s!==(s="flex-1 h-8 flex-center curved transition "+(a[0]?"opacity-100 scale-105 border":"opacity-70  border-light")+" hover:opacity-100 hover:scale-105 focus:scale-100"))&&v(e,"class",s),l&&Ue(l.update)&&f&36&&l.update.call(null,{title:a[5].tooltip,show:!a[2]})},i(a){c||(w(n),c=!0)},o(a){k(n),c=!1},d(a){a&&N(e),p[t].d(),i=!1,ue(g)}}}function Kt(o,e,r){let t,{$$slots:n={},$$scope:s}=e;const{isPointerDown:l}=ne("stores");A(o,l,y=>r(2,t=y));let c=!1,i=!1,g=vt();function u(y){$e.call(this,o,y)}function p(y){$e.call(this,o,y)}const b=y=>{y.preventDefault(),y.stopPropagation(),r(0,c=!0)},a=y=>{r(0,c=!1)},f=y=>{r(0,c=!1),r(1,i=!0),setTimeout(()=>{r(1,i=!1)},1e3);const G=y.dataTransfer.getData("text/plain");try{const I=JSON.parse(G);I.type==="tab"&&g("drop",I)}catch{return}},m=()=>{r(1,i=!0),setTimeout(()=>{r(1,i=!1)},1e3)};return o.$$set=y=>{r(5,e=Je(Je({},e),Ve(y))),"$$scope"in y&&r(6,s=y.$$scope)},e=Ve(e),[c,i,t,l,g,e,s,n,u,p,b,a,f,m]}class xe extends X{constructor(e){super(),K(this,e,Kt,Xt,Q,{})}}function Qt(o){let e,r;return e=new W({props:{icon:De,class:"animate-spin"}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function Yt(o){let e,r;return e=new W({props:{icon:De}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function er(o){let e,r;return e=new xe({props:{tooltip:"Click or drop a tab to group it",$$slots:{dropped:[rr],idle:[tr]},$$scope:{ctx:o}}}),e.$on("click",o[7]),e.$on("drop",o[8]),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p(t,n){const s={};n&16384&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function tr(o){let e,r;return e=new W({props:{icon:yt}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function rr(o){let e,r;return e=new W({props:{icon:Me}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function nr(o){let e,r;return e=new W({props:{icon:xt,class:"-rotate-45"}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function or(o){let e,r;return e=new W({props:{icon:Me}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function sr(o){let e,r;return e=new W({props:{icon:Gt}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function lr(o){let e,r;return e=new W({props:{icon:Me}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function ar(o){let e,r=gt(),t,n,s,l,c,i,g,u,p=r;n=new xe({props:{tooltip:"Click or drop a tab to reload it",$$slots:{idle:[Yt],dropped:[Qt]},$$scope:{ctx:o}}}),n.$on("click",o[5]),n.$on("drop",o[6]);let b=er(o);return c=new xe({props:{tooltip:"Click or drop a tab to pin it",$$slots:{dropped:[or],idle:[nr]},$$scope:{ctx:o}}}),c.$on("click",o[9]),c.$on("drop",o[10]),g=new xe({props:{tooltip:"Click or drop a tab to close it",$$slots:{dropped:[lr],idle:[sr]},$$scope:{ctx:o}}}),g.$on("click",o[11]),g.$on("drop",o[12]),{c(){e=S("div"),t=O(),C(n.$$.fragment),s=O(),b&&b.c(),l=O(),C(c.$$.fragment),i=O(),C(g.$$.fragment),v(e,"class","dropzones flex flex-row gap-2 mt-auto pt-1")},m(a,f){U(a,e,f),P(e,t),T(n,e,null),P(e,s),b&&b.m(e,null),P(e,l),T(c,e,null),P(e,i),T(g,e,null),u=!0},p(a,[f]){const m={};f&16384&&(m.$$scope={dirty:f,ctx:a}),n.$set(m),b.p(a,f);const y={};f&16384&&(y.$$scope={dirty:f,ctx:a}),c.$set(y);const G={};f&16384&&(G.$$scope={dirty:f,ctx:a}),g.$set(G)},i(a){u||(w(p),w(n.$$.fragment,a),w(b),w(c.$$.fragment,a),w(g.$$.fragment,a),u=!0)},o(a){k(p),k(n.$$.fragment,a),k(b),k(c.$$.fragment,a),k(g.$$.fragment,a),u=!1},d(a){a&&N(e),L(n),b&&b.d(),L(c),L(g)}}}function ir(o){ne("stores");const e=(f=null)=>{f?chrome.tabs.reload(f.id):chrome.tabs.query({active:!0,currentWindow:!0},m=>{chrome.tabs.reload(m[0].id)})},r=(f=null)=>{f?chrome.tabs.group({tabIds:f.id}):chrome.tabs.query({active:!0,currentWindow:!0},m=>{chrome.tabs.group({tabIds:m[0].id})})},t=(f=null)=>{f?chrome.tabs.remove(f.id):chrome.tabs.query({active:!0,currentWindow:!0},m=>{chrome.tabs.remove(m[0].id)})},n=(f=null)=>{f?chrome.tabs.update(f.id,{pinned:!0}):chrome.tabs.query({active:!0,currentWindow:!0},m=>{chrome.tabs.update(m[0].id,{pinned:!m[0].pinned})})};return[e,r,t,n,()=>chrome.tabs.create({}),()=>e(),({detail:f})=>e(f),()=>r(),({detail:f})=>r(f),()=>n(),({detail:f})=>n(f),()=>t(),({detail:f})=>t(f)]}class cr extends X{constructor(e){super(),K(this,e,ir,ar,Q,{})}}function ur(o){let e,r,t,n,s,l,c,i,g,u,p,b,a,f,m,y,G,I,d,h;return t=new W({props:{icon:Ne,class:"mr-2 -rotate-45"}}),p=new Y({props:{icon:ze,class:"text-lg",tooltip:"Add tab"}}),p.$on("click",o[6]),a=new Y({props:{icon:Ne,class:"-rotate-45 text-sm",tooltip:"Unpin tabs"}}),a.$on("click",o[7]),m=new Y({props:{icon:Ee,class:"text-lg",tooltip:"Remove pinned tabs"}}),m.$on("click",o[8]),G=new Y({props:{icon:o[1]?Pe:Ge,class:"text-lg",tooltip:o[1]?"Expand group":"Collapse group"}}),G.$on("click",o[9]),{c(){e=S("div"),r=S("span"),C(t.$$.fragment),n=ee(`
    Pinned tabs`),l=O(),c=S("div"),i=S("button"),u=O(),C(p.$$.fragment),b=O(),C(a.$$.fragment),f=O(),C(m.$$.fragment),y=O(),C(G.$$.fragment),v(r,"class",s=o[4][o[0]]+" rounded max-w-[13.5rem] py-1 px-2 text-sm border-0 text-[var(--text)] border-b-0 w-full items-center flex justify-start"),ae(r,"border-bottom-left-radius","0"),ae(r,"border-bottom-right-radius","0"),v(i,"class",g="h-4 w-4 rounded-full "+o[4][o[0]]),v(c,"class","opacity-0 group-hover:opacity-100 px-2 shrink-0 flex gap-3 items-center transition w-max pb-1"),v(e,"class","flex flex-row items-center w-full")},m($,D){U($,e,D),P(e,r),T(t,r,null),P(r,n),P(e,l),P(e,c),P(c,i),P(c,u),T(p,c,null),P(c,b),T(a,c,null),P(c,f),T(m,c,null),P(c,y),T(G,c,null),I=!0,d||(h=[le(Re.call(null,i,"Change color")),j(i,"click",o[5])],d=!0)},p($,[D]){(!I||D&1&&s!==(s=$[4][$[0]]+" rounded max-w-[13.5rem] py-1 px-2 text-sm border-0 text-[var(--text)] border-b-0 w-full items-center flex justify-start"))&&v(r,"class",s),(!I||D&1&&g!==(g="h-4 w-4 rounded-full "+$[4][$[0]]))&&v(i,"class",g);const _={};D&2&&(_.icon=$[1]?Pe:Ge),D&2&&(_.tooltip=$[1]?"Expand group":"Collapse group"),G.$set(_)},i($){I||(w(t.$$.fragment,$),w(p.$$.fragment,$),w(a.$$.fragment,$),w(m.$$.fragment,$),w(G.$$.fragment,$),I=!0)},o($){k(t.$$.fragment,$),k(p.$$.fragment,$),k(a.$$.fragment,$),k(m.$$.fragment,$),k(G.$$.fragment,$),I=!1},d($){$&&N(e),L(t),L(p),L(a),L(m),L(G),d=!1,ue(h)}}}function fr(o,e,r){let t,n;const{collaspePinned:s,pinnedGroupColor:l}=ne("stores");A(o,s,m=>r(1,n=m)),A(o,l,m=>r(0,t=m));let{tabs:c}=e;const i=["grey","blue","red","yellow","green","pink","purple","cyan","orange"],g={grey:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600 dark:bg-blue-300",red:"bg-red-600 dark:bg-red-300",yellow:"bg-yellow-600 dark:bg-yellow-400",green:"bg-lime-600 dark:bg-lime-300",pink:"bg-pink-600 dark:bg-pink-300",purple:"bg-purple-600 dark:bg-purple-300",cyan:"bg-cyan-600 dark:bg-cyan-400",orange:"bg-orange-600 dark:bg-orange-400"},u=()=>{const m=i.indexOf(t);m===i.length-1?l.set(i[0]):l.set(i[m+1])},p=async()=>{var y;const m=await chrome.tabs.create({index:c[c.length-1].index+1,active:!0});(y=chrome==null?void 0:chrome.tabs)==null||y.update(m.id,{pinned:!0})},b=async()=>{const m=await chrome.tabs.query({pinned:!0});for(const y of m)chrome.tabs.update(y.id,{pinned:!1})},a=async()=>{const m=await chrome.tabs.query({pinned:!0});for(const y of m)chrome.tabs.remove(y.id)},f=()=>{s.update(m=>!m)};return o.$$set=m=>{"tabs"in m&&r(10,c=m.tabs)},[t,n,s,l,g,u,p,b,a,f,c]}class dr extends X{constructor(e){super(),K(this,e,fr,ur,Q,{tabs:10})}}function pr(o){let e,r,t;return e=new W({props:{icon:De}}),{c(){C(e.$$.fragment),r=ee(`
      Reload`)},m(n,s){T(e,n,s),U(n,r,s),t=!0},p:q,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n),n&&N(r)}}}function mr(o){let e,r,t;return e=new W({props:{icon:Pt}}),{c(){C(e.$$.fragment),r=ee(`
      Duplicate`)},m(n,s){T(e,n,s),U(n,r,s),t=!0},p:q,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n),n&&N(r)}}}function gr(o){let e,r,t=o[0].pinned?"Unpin":"Pin",n,s;return e=new W({props:{icon:Ne}}),{c(){C(e.$$.fragment),r=O(),n=ee(t)},m(l,c){T(e,l,c),U(l,r,c),U(l,n,c),s=!0},p(l,c){(!s||c&1)&&t!==(t=l[0].pinned?"Unpin":"Pin")&&Ce(n,t)},i(l){s||(w(e.$$.fragment,l),s=!0)},o(l){k(e.$$.fragment,l),s=!1},d(l){L(e,l),l&&N(r),l&&N(n)}}}function br(o){let e,r,t,n,s;return r=new he({props:{class:"text-xs",gap:"3",$$slots:{default:[_r]},$$scope:{ctx:o}}}),{c(){e=S("button"),C(r.$$.fragment),v(e,"class","opacity-70 transition hover:opacity-100")},m(l,c){U(l,e,c),T(r,e,null),t=!0,n||(s=j(e,"click",o[4]),n=!0)},p(l,c){const i={};c&2048&&(i.$$scope={dirty:c,ctx:l}),r.$set(i)},i(l){t||(w(r.$$.fragment,l),t=!0)},o(l){k(r.$$.fragment,l),t=!1},d(l){l&&N(e),L(r),n=!1,s()}}}function _r(o){let e,r,t;return e=new W({props:{icon:ze}}),{c(){C(e.$$.fragment),r=ee(`
        Create Group`)},m(n,s){T(e,n,s),U(n,r,s),t=!0},p:q,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n),n&&N(r)}}}function hr(o){let e,r,t;return e=new W({props:{icon:Ee}}),{c(){C(e.$$.fragment),r=ee(`
      Close`)},m(n,s){T(e,n,s),U(n,r,s),t=!0},p:q,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){L(e,n),n&&N(r)}}}function $r(o){let e,r,t,n,s,l,c,i,g,u,p,b,a,f,m,y;t=new he({props:{class:"text-xs",gap:"3",$$slots:{default:[pr]},$$scope:{ctx:o}}}),l=new he({props:{class:"text-xs",gap:"3",$$slots:{default:[mr]},$$scope:{ctx:o}}}),g=new he({props:{class:"text-xs",gap:"3",$$slots:{default:[gr]},$$scope:{ctx:o}}});let G=br(o);return a=new he({props:{class:"text-xs",gap:"3",$$slots:{default:[hr]},$$scope:{ctx:o}}}),{c(){e=S("div"),r=S("button"),C(t.$$.fragment),n=O(),s=S("button"),C(l.$$.fragment),c=O(),i=S("button"),C(g.$$.fragment),u=O(),G&&G.c(),p=O(),b=S("button"),C(a.$$.fragment),v(r,"class","opacity-70 transition hover:opacity-100"),v(s,"class","opacity-70 transition hover:opacity-100"),v(i,"class","opacity-70 transition hover:opacity-100"),v(b,"class","opacity-70 transition hover:opacity-100"),v(e,"class","flex w-max cursor-default flex-col items-start justify-center gap-2 pl-3 pr-4 py-2")},m(I,d){U(I,e,d),P(e,r),T(t,r,null),P(e,n),P(e,s),T(l,s,null),P(e,c),P(e,i),T(g,i,null),P(e,u),G&&G.m(e,null),P(e,p),P(e,b),T(a,b,null),f=!0,m||(y=[j(r,"click",o[2]),j(s,"click",o[6]),j(i,"click",o[3]),j(b,"click",o[5])],m=!0)},p(I,[d]){const h={};d&2048&&(h.$$scope={dirty:d,ctx:I}),t.$set(h);const $={};d&2048&&($.$$scope={dirty:d,ctx:I}),l.$set($);const D={};d&2049&&(D.$$scope={dirty:d,ctx:I}),g.$set(D),G.p(I,d);const _={};d&2048&&(_.$$scope={dirty:d,ctx:I}),a.$set(_)},i(I){f||(w(t.$$.fragment,I),w(l.$$.fragment,I),w(g.$$.fragment,I),w(G),w(a.$$.fragment,I),f=!0)},o(I){k(t.$$.fragment,I),k(l.$$.fragment,I),k(g.$$.fragment,I),k(G),k(a.$$.fragment,I),f=!1},d(I){I&&N(e),L(t),L(l),L(g),G&&G.d(),L(a),m=!1,ue(y)}}}function wr(o,e,r){const{tabs:t}=ne("stores");A(o,t,p=>r(8,p));let{tab:n}=e,{close:s=()=>{}}=e;const l=()=>{chrome.tabs.reload(n.id),s()},c=()=>{chrome.tabs.update(n.id,{pinned:!n.pinned}),s()},i=()=>{chrome.tabs.group({tabIds:[n.id]}),s()},g=()=>{chrome.tabs.remove(n.id),s()},u=()=>{chrome.tabs.duplicate(n.id),s()};return o.$$set=p=>{"tab"in p&&r(0,n=p.tab),"close"in p&&r(7,s=p.close)},[n,t,l,c,i,g,u,s]}class wt extends X{constructor(e){super(),K(this,e,wr,$r,Q,{tab:0,close:7})}}const de=(o,e)=>{const r=o.classList.contains("tab-group"),t=o.parentElement.classList.contains("parent-group");let n=!r&&!t?o.parentElement.previousElementSibling:o.previousElementSibling;return console.log(n),n?n.classList.contains("tab-group")?Te(e).get(n.lastElementChild.lastElementChild):n.classList.contains("tab-item")?Te(e).get(n):null:null},pe=(o,e)=>{const r=o.classList.contains("tab-group"),t=o.parentElement.classList.contains("parent-group");let n=!r&&!t?o.parentElement.nextElementSibling:o.nextElementSibling;return n?n.classList.contains("tab-group")?Te(e).get(n.lastElementChild.firstElementChild):n.classList.contains("tab-item")?Te(e).get(n):null:null},[kr,vr]=Ct({});function Ye(o){let e,r,t,n,s,l;const c=[xr,yr],i=[];function g(u,p){return u[0].status==="loading"?0:1}return r=g(o),t=i[r]=c[r](o),s=new je({props:{trigger:"contextmenu",closeOnContextMenu:!0,origin:"top left",placement:"right-start",offset:[0,10],transition:null,$$slots:{default:[Gr,({close:u})=>({18:u}),({close:u})=>u?262144:0]},$$scope:{ctx:o}}}),{c(){e=S("div"),t.c(),n=O(),C(s.$$.fragment),v(e,"class","h-8 w-8 transition-container")},m(u,p){U(u,e,p),i[r].m(e,null),U(u,n,p),T(s,u,p),l=!0},p(u,p){let b=r;r=g(u),r===b?i[r].p(u,p):(Z(),k(i[b],1,1,()=>{i[b]=null}),H(),t=i[r],t?t.p(u,p):(t=i[r]=c[r](u),t.c()),w(t,1),t.m(e,null));const a={};p&786433&&(a.$$scope={dirty:p,ctx:u}),s.$set(a)},i(u){l||(w(t),w(s.$$.fragment,u),l=!0)},o(u){k(t),k(s.$$.fragment,u),l=!1},d(u){u&&N(e),i[r].d(),u&&N(n),L(s,u)}}}function yr(o){let e,r,t,n,s;return{c(){e=S("img"),me(e.src,r=Le(o[0].url)||"/assets/chrome.png")||v(e,"src",r),v(e,"alt",t=o[0].title),v(e,"class","h-8 w-8"),v(e,"draggable","false")},m(l,c){U(l,e,c),s=!0},p(l,c){(!s||c&1&&!me(e.src,r=Le(l[0].url)||"/assets/chrome.png"))&&v(e,"src",r),(!s||c&1&&t!==(t=l[0].title))&&v(e,"alt",t)},i(l){s||(l&&we(()=>{s&&(n||(n=ie(e,ce,{},!0)),n.run(1))}),s=!0)},o(l){l&&(n||(n=ie(e,ce,{},!1)),n.run(0)),s=!1},d(l){l&&N(e),l&&n&&n.end()}}}function xr(o){let e,r,t,n;return r=new W({props:{icon:bt,class:"animate-spin text-lg"}}),{c(){e=S("div"),C(r.$$.fragment),v(e,"class","h-8 w-8 flex-center")},m(s,l){U(s,e,l),T(r,e,null),n=!0},p:q,i(s){n||(w(r.$$.fragment,s),s&&we(()=>{n&&(t||(t=ie(e,ce,{},!0)),t.run(1))}),n=!0)},o(s){k(r.$$.fragment,s),s&&(t||(t=ie(e,ce,{},!1)),t.run(0)),n=!1},d(s){s&&N(e),L(r),s&&t&&t.end()}}}function Gr(o){let e,r;return e=new wt({props:{tab:o[0],close:o[18]}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.tab=t[0]),n&262144&&(s.close=t[18]),e.$set(s)},i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function et(o){let e,r,t,n,s,l,c=o[0].title+"",i,g,u,p,b,a,f,m;const y=[Cr,Pr],G=[];function I(d,h){return d[0].status==="loading"?0:1}return t=I(o),n=G[t]=y[t](o),u=new Y({props:{icon:De,class:"text-xl hidden group-hover/tab:flex",tooltip:"Refresh tab"}}),u.$on("click",o[11]),b=new Y({props:{icon:Ee,class:"text-xl ml-2 hidden group-hover/tab:flex",tooltip:"Close tab"}}),b.$on("click",o[12]),f=new je({props:{trigger:"contextmenu",closeOnContextMenu:!0,origin:"top left",placement:"bottom",offset:[0,-5],transition:null,$$slots:{default:[Tr,({close:d})=>({18:d}),({close:d})=>d?262144:0]},$$scope:{ctx:o}}}),{c(){e=S("div"),r=S("div"),n.c(),s=O(),l=S("span"),i=ee(c),g=O(),C(u.$$.fragment),p=O(),C(b.$$.fragment),a=O(),C(f.$$.fragment),v(r,"class","h-5 w-5 transition-container flex-center shrink-0"),v(l,"class","text-sm truncate w-full text-start"),v(e,"class","flex items-center justify-start w-full gap-2 px-2 py-1.5 group/tab")},m(d,h){U(d,e,h),P(e,r),G[t].m(r,null),P(e,s),P(e,l),P(l,i),P(e,g),T(u,e,null),P(e,p),T(b,e,null),U(d,a,h),T(f,d,h),m=!0},p(d,h){let $=t;t=I(d),t===$?G[t].p(d,h):(Z(),k(G[$],1,1,()=>{G[$]=null}),H(),n=G[t],n?n.p(d,h):(n=G[t]=y[t](d),n.c()),w(n,1),n.m(r,null)),(!m||h&1)&&c!==(c=d[0].title+"")&&Ce(i,c);const D={};h&786433&&(D.$$scope={dirty:h,ctx:d}),f.$set(D)},i(d){m||(w(n),w(u.$$.fragment,d),w(b.$$.fragment,d),w(f.$$.fragment,d),m=!0)},o(d){k(n),k(u.$$.fragment,d),k(b.$$.fragment,d),k(f.$$.fragment,d),m=!1},d(d){d&&N(e),G[t].d(),L(u),L(b),d&&N(a),L(f,d)}}}function Pr(o){let e,r,t,n,s;return{c(){e=S("img"),me(e.src,r=o[0].favIconUrl||"/assets/chrome.png")||v(e,"src",r),v(e,"alt",t=o[0].title),v(e,"class","h-5 w-5"),v(e,"draggable","false")},m(l,c){U(l,e,c),s=!0},p(l,c){(!s||c&1&&!me(e.src,r=l[0].favIconUrl||"/assets/chrome.png"))&&v(e,"src",r),(!s||c&1&&t!==(t=l[0].title))&&v(e,"alt",t)},i(l){s||(l&&we(()=>{s&&(n||(n=ie(e,ce,{},!0)),n.run(1))}),s=!0)},o(l){l&&(n||(n=ie(e,ce,{},!1)),n.run(0)),s=!1},d(l){l&&N(e),l&&n&&n.end()}}}function Cr(o){let e,r,t,n;return r=new W({props:{icon:bt,class:"animate-spin text-lg"}}),{c(){e=S("div"),C(r.$$.fragment),v(e,"class","h-5 w-5 flex-center")},m(s,l){U(s,e,l),T(r,e,null),n=!0},p:q,i(s){n||(w(r.$$.fragment,s),s&&we(()=>{n&&(t||(t=ie(e,ce,{},!0)),t.run(1))}),n=!0)},o(s){k(r.$$.fragment,s),s&&(t||(t=ie(e,ce,{},!1)),t.run(0)),n=!1},d(s){s&&N(e),L(r),s&&t&&t.end()}}}function Tr(o){let e,r;return e=new wt({props:{tab:o[0],close:o[18]}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p(t,n){const s={};n&1&&(s.tab=t[0]),n&262144&&(s.close=t[18]),e.$set(s)},i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function tt(o){let e,r,t,n;return{c(){e=S("div"),v(e,"class","absolute -bottom-[0.35rem] h-[1px] w-8 bg-[var(--text)]")},m(s,l){U(s,e,l),n=!0},i(s){n||(we(()=>{n&&(t&&t.end(1),r=Tt(e,vr,{duration:250,key:"features"}),r.start())}),n=!0)},o(s){r&&r.invalidate(),t=Lt(e,kr,{duration:250,key:"features"}),n=!1},d(s){s&&N(e),s&&t&&t.end()}}}function Lr(o){let e,r,t,n,s,l,c,i,g,u=!o[4]&&Ye(o),p=o[4]&&et(o),b=o[0].active&&!o[4]&&tt();return{c(){e=S("button"),u&&u.c(),r=O(),p&&p.c(),t=O(),b&&b.c(),v(e,"class",n="flex items-center gap-2 relative flex-row flex-wrap tab-item "+(o[3]?"":"hover:opacity-100")+" focus:scale-100 transition-opacity "+(o[4]?`curved glass w-full ${o[0].active?"border":"border-light "}`:"")),v(e,"draggable","true"),ye(e,"opacity-90",!o[0].active),ye(e,"hidden",o[1])},m(a,f){U(a,e,f),u&&u.m(e,null),P(e,r),p&&p.m(e,null),P(e,t),b&&b.m(e,null),c=!0,i||(g=[j(e,"click",o[10]),j(e,"dblclick",o[11]),j(e,"contextmenu",Oe(o[13])),le(s=o[9].call(null,e,o[0])),j(e,"dragstart",o[14]),j(e,"dragend",o[15]),le(l=Re.call(null,e,{title:o[2],classNames:"max-line-2",styles:"padding: 0.15rem 0.75rem; overflow: hidden; max-width: 10rem; font-size: 0.75rem;",show:!o[4]}))],i=!0)},p(a,[f]){a[4]?u&&(Z(),k(u,1,1,()=>{u=null}),H()):u?(u.p(a,f),f&16&&w(u,1)):(u=Ye(a),u.c(),w(u,1),u.m(e,r)),a[4]?p?(p.p(a,f),f&16&&w(p,1)):(p=et(a),p.c(),w(p,1),p.m(e,t)):p&&(Z(),k(p,1,1,()=>{p=null}),H()),a[0].active&&!a[4]?b?f&17&&w(b,1):(b=tt(),b.c(),w(b,1),b.m(e,null)):b&&(Z(),k(b,1,1,()=>{b=null}),H()),(!c||f&25&&n!==(n="flex items-center gap-2 relative flex-row flex-wrap tab-item "+(a[3]?"":"hover:opacity-100")+" focus:scale-100 transition-opacity "+(a[4]?`curved glass w-full ${a[0].active?"border":"border-light "}`:"")))&&v(e,"class",n),s&&Ue(s.update)&&f&1&&s.update.call(null,a[0]),l&&Ue(l.update)&&f&20&&l.update.call(null,{title:a[2],classNames:"max-line-2",styles:"padding: 0.15rem 0.75rem; overflow: hidden; max-width: 10rem; font-size: 0.75rem;",show:!a[4]}),(!c||f&25)&&ye(e,"opacity-90",!a[0].active),(!c||f&27)&&ye(e,"hidden",a[1])},i(a){c||(w(u),w(p),w(b),c=!0)},o(a){k(u),k(p),k(b),c=!1},d(a){a&&N(e),u&&u.d(),p&&p.d(),b&&b.d(),i=!1,ue(g)}}}function Ir(o,e,r){let t,n,s,l,c;const{isList:i,isPointerDown:g,refsToTabs:u,tabsToRefs:p}=ne("stores");A(o,i,$=>r(4,c=$)),A(o,g,$=>r(3,l=$)),A(o,u,$=>r(16,n=$)),A(o,p,$=>r(17,s=$));let{tab:b}=e,{hide:a=!1}=e;const f=($,D)=>{if(s.has(D.id)){const _=s.get(D.id);if(_===$)return;n.delete(_),s.delete(D.id),_.remove()}return n.set($,D),s.set(D.id,$),{update:_=>{n.set($,_)}}},m=()=>{chrome.tabs.update(b.id,{active:!0})},y=$=>{$.stopPropagation(),chrome.tabs.reload(b.id)},G=$=>{$.stopPropagation(),chrome.tabs.remove(b.id)};function I($){$e.call(this,o,$)}const d=()=>{re(g,l=!0,l)},h=()=>{re(g,l=!1,l)};return o.$$set=$=>{"tab"in $&&r(0,b=$.tab),"hide"in $&&r(1,a=$.hide)},o.$$.update=()=>{o.$$.dirty&1&&r(2,t=b.title)},[b,a,t,l,c,i,g,u,p,f,m,y,G,I,d,h]}class Be extends X{constructor(e){super(),K(this,e,Ir,Lr,Q,{tab:0,hide:1})}}function rt(o,e,r){const t=o.slice();return t[17]=e[r],t}function nt(o,e){let r,t,n;return t=new Be({props:{tab:e[17]}}),{key:o,first:null,c(){r=ge(),C(t.$$.fragment),this.first=r},m(s,l){U(s,r,l),T(t,s,l),n=!0},p(s,l){e=s;const c={};l&1&&(c.tab=e[17]),t.$set(c)},i(s){n||(w(t.$$.fragment,s),n=!0)},o(s){k(t.$$.fragment,s),n=!1},d(s){s&&N(r),L(t,s)}}}function Rr(o){let e,r,t,n,s=[],l=new Map,c,i,g,u;r=new dr({props:{tabs:o[0]}});let p=o[0];const b=a=>a[17].id;for(let a=0;a<p.length;a+=1){let f=rt(o,p,a),m=b(f);l.set(m,s[a]=nt(m,f))}return{c(){e=S("div"),C(r.$$.fragment),t=O(),n=S("div");for(let a=0;a<s.length;a+=1)s[a].c();v(n,"class",c=Ie(`flex curved tab-group-items overflow-hidden w-full max-h-auto border-[1px]
    ${o[2]?"flex-col gap-1.5 p-2":"flex-row gap-4 px-3 py-2.5"} ${o[11][o[3]]}
    ${o[4]?"max-h-0 p-0":"max-h-auto"}`)),ae(n,"border-style","solid"),ae(n,"border-top-left-radius","0"),v(e,"class","flex-col flex items-start justify-start tab-group w-full group pinned-group")},m(a,f){U(a,e,f),T(r,e,null),P(e,t),P(e,n);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(n,null);i=!0,g||(u=[le(o[12].call(null,n)),j(e,"dragstart",o[13]),j(e,"dragend",o[14])],g=!0)},p(a,[f]){const m={};f&1&&(m.tabs=a[0]),r.$set(m),f&1&&(p=a[0],Z(),s=Se(s,f,b,1,a,p,l,n,Ae,nt,null,rt),H()),(!i||f&28&&c!==(c=Ie(`flex curved tab-group-items overflow-hidden w-full max-h-auto border-[1px]
    ${a[2]?"flex-col gap-1.5 p-2":"flex-row gap-4 px-3 py-2.5"} ${a[11][a[3]]}
    ${a[4]?"max-h-0 p-0":"max-h-auto"}`)))&&v(n,"class",c)},i(a){if(!i){w(r.$$.fragment,a);for(let f=0;f<p.length;f+=1)w(s[f]);i=!0}},o(a){k(r.$$.fragment,a);for(let f=0;f<s.length;f+=1)k(s[f]);i=!1},d(a){a&&N(e),L(r);for(let f=0;f<s.length;f+=1)s[f].d();g=!1,ue(u)}}}function Dr(o,e,r){let t,n,s,l,c,i;const{collaspePinned:g,isList:u,isPointerDown:p,pinnedGroupColor:b,refsToGroups:a,refsToTabs:f}=ne("stores");A(o,g,h=>r(4,i=h)),A(o,u,h=>r(2,l=h)),A(o,p,h=>r(1,s=h)),A(o,b,h=>r(3,c=h)),A(o,a,h=>r(15,t=h)),A(o,f,h=>r(16,n=h));let{tabs:m}=e;const y={grey:"border-gray-600 dark:border-gray-300",blue:"border-blue-600 dark:border-blue-300",red:"border-red-600 dark:border-red-300",yellow:"border-yellow-600 dark:border-yellow-400",green:"border-lime-600 dark:border-lime-300",pink:"border-pink-600 dark:border-pink-300",purple:"border-purple-600 dark:border-purple-300",cyan:"border-cyan-600 dark:border-cyan-400",orange:"border-orange-600 dark:border-orange-400"},G=h=>{const $=new qe(h,{group:{name:"tabs",pull:!0,put:(D,_,x)=>!!x.classList.contains("tab-item")},animation:250,easing:"cubic-bezier(1, 0, 0, 1)",draggable:".tab-item",setData:(D,_)=>{const x=_;D.setData("text/plain",JSON.stringify({type:"tab",id:n.get(x).id}))},onMove:D=>!D.related.classList.contains("pinned-group"),onAdd:D=>{const _=D.item,x=n.get(_),R=n.get(_.previousElementSibling)||de(h,f),z=n.get(_.nextElementSibling)||pe(h,f);if(!R){chrome.tabs.update(x.id,{pinned:!0}),chrome.tabs.move(x.id,{index:0});return}if(!z){chrome.tabs.update(x.id,{pinned:!0}),chrome.tabs.move(x.id,{index:-1});return}const M=R?(R==null?void 0:R.index)>x.index:!1,E=R?(R==null?void 0:R.index)+1===x.index:!1,te=M?R==null?void 0:R.index:(R==null?void 0:R.index)+1;chrome.tabs.update(x.id,{pinned:!0}),E||chrome.tabs.move(x.id,{index:te})},onUpdate:D=>{const _=D.item,x=n.get(_),R=n.get(_.previousElementSibling)||de(h,f),z=n.get(_.nextElementSibling)||pe(h,f);if(!R){chrome.tabs.move(x.id,{index:0});return}if(!z){chrome.tabs.move(x.id,{index:-1});return}const E=(R?(R==null?void 0:R.index)>x.index:!1)?R==null?void 0:R.index:(R==null?void 0:R.index)+1;chrome.tabs.move(x.id,{index:E})}});t.set(h,{isParent:!0}),Fe(()=>{$.destroy()})},I=h=>{re(p,s=!0,s)},d=h=>{re(p,s=!1,s)};return o.$$set=h=>{"tabs"in h&&r(0,m=h.tabs)},[m,s,l,c,i,g,u,p,b,a,f,y,G,I,d]}class Er extends X{constructor(e){super(),K(this,e,Dr,Rr,Q,{tabs:0})}}function ot(o,e,r){const t=o.slice();return t[7]=e[r],t}function st(o){let e,r;return e=new je({props:{trigger:"click",show:!0,visible:!0,closeOnOutsideClick:!0,class:"flex flex-col max-w-[23rem] pl-3 pr-2 py-2 max-h-[16rem] ",placement:"bottom-start",autoFocus:!1,offset:[0,8],transition:"slide",$$slots:{default:[Sr]},$$scope:{ctx:o}}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p(t,n){const s={};n&1026&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function lt(o,e){let r,t,n,s,l,c,i,g=e[7].title+"",u,p,b=e[7].url+"",a,f,m,y,G;function I(){return e[5](e[7])}return{key:o,first:null,c(){r=S("button"),t=S("img"),l=O(),c=S("div"),i=S("h3"),u=ee(g),p=ee(" - "),a=ee(b),f=O(),me(t.src,n=Le(e[7].url))||v(t,"src",n),v(t,"alt",s=e[7].title),v(t,"class","h-5 w-5"),v(i,"class","text-sm fade-text text-left w-full whitespace-nowrap"),v(c,"class","flex flex-col items-start justify-start w-full overflow-hidden opacity-80 transition hover:opacity-100"),v(r,"class","flex flex-row gap-3 w-full items-center"),v(r,"title",m=e[7].url),v(r,"draggable",!0),this.first=r},m(d,h){U(d,r,h),P(r,t),P(r,l),P(r,c),P(c,i),P(i,u),P(i,p),P(i,a),P(r,f),y||(G=j(r,"click",I),y=!0)},p(d,h){e=d,h&2&&!me(t.src,n=Le(e[7].url))&&v(t,"src",n),h&2&&s!==(s=e[7].title)&&v(t,"alt",s),h&2&&g!==(g=e[7].title+"")&&Ce(u,g),h&2&&b!==(b=e[7].url+"")&&Ce(a,b),h&2&&m!==(m=e[7].url)&&v(r,"title",m)},d(d){d&&N(r),y=!1,G()}}}function Sr(o){let e,r=[],t=new Map,n=o[1];const s=l=>l[7].id;for(let l=0;l<n.length;l+=1){let c=ot(o,n,l),i=s(c);t.set(i,r[l]=lt(i,c))}return{c(){e=S("div");for(let l=0;l<r.length;l+=1)r[l].c();v(e,"class","flex flex-col gap-3 overflow-overlay scrollbar-none w-full h-full")},m(l,c){U(l,e,c);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(l,c){c&10&&(n=l[1],r=Se(r,c,s,1,l,n,t,e,Et,lt,null,ot))},d(l){l&&N(e);for(let c=0;c<r.length;c+=1)r[c].d()}}}function Ur(o){let e,r,t,n,s;function l(g){o[4](g)}let c={placeholder:"Search or enter address",class:"text-sm px-3 py-1.5 w-full"};o[0]!==void 0&&(c.value=o[0]),e=new It({props:c}),_t.push(()=>Rt(e,"value",l)),e.$on("keydown",o[2]);let i=o[1].length>0&&st(o);return{c(){C(e.$$.fragment),t=O(),i&&i.c(),n=ge()},m(g,u){T(e,g,u),U(g,t,u),i&&i.m(g,u),U(g,n,u),s=!0},p(g,[u]){const p={};!r&&u&1&&(r=!0,p.value=g[0],Dt(()=>r=!1)),e.$set(p),g[1].length>0?i?(i.p(g,u),u&2&&w(i,1)):(i=st(g),i.c(),w(i,1),i.m(n.parentNode,n)):i&&(Z(),k(i,1,1,()=>{i=null}),H())},i(g){s||(w(e.$$.fragment,g),w(i),s=!0)},o(g){k(e.$$.fragment,g),k(i),s=!1},d(g){L(e,g),g&&N(t),i&&i.d(g),g&&N(n)}}}function Nr(o,e,r){let t="",n=[];const s=async()=>{const u=await chrome.bookmarks.search(t),p=await chrome.history.search({text:t});r(1,n=[...u,...p])},l=u=>{if(u.key==="Enter"){if(We(t)){const p=St(t);chrome.tabs.create({url:p,active:!0})}else chrome.tabs.create({url:`https://www.google.com/search?q=${t}`,active:!0});r(0,t="")}},c=u=>{chrome.tabs.create({url:u.url,active:!0}),r(0,t="")};function i(u){t=u,r(0,t)}const g=u=>c(u);return o.$$.update=()=>{o.$$.dirty&1&&(t.length>0?s():r(1,n=[]))},[t,n,l,c,i,g]}class Or extends X{constructor(e){super(),K(this,e,Nr,Ur,Q,{})}}function Mr(o){let e,r,t,n,s,l,c,i,g,u,p,b,a,f,m,y,G,I;return g=new Y({props:{icon:ze,class:"text-lg",tooltip:"Add tab"}}),g.$on("click",o[3]),p=new Y({props:{icon:Ut,class:"text-base",tooltip:"Open in new window"}}),p.$on("click",o[4]),a=new Y({props:{icon:Ee,class:"text-lg",tooltip:"Remove group"}}),a.$on("click",o[5]),m=new Y({props:{icon:o[0].collapsed?Pe:Ge,class:"text-lg",tooltip:o[0].collapsed?"Expand group":"Collapse group"}}),m.$on("click",o[6]),{c(){var d,h;e=S("div"),r=S("input"),n=O(),s=S("div"),l=S("button"),i=O(),C(g.$$.fragment),u=O(),C(p.$$.fragment),b=O(),C(a.$$.fragment),f=O(),C(m.$$.fragment),v(r,"class",t=o[1][(d=o[0])==null?void 0:d.color]+" rounded py-1 focus:outline-0 px-2 text-sm border-0 text-[var(--text)] border-b-0 w-full"),ae(r,"border-bottom-left-radius","0"),ae(r,"border-bottom-right-radius","0"),v(r,"placeholder","Untitled group"),v(l,"class",c="h-4 w-4 rounded-full "+o[1][(h=o[0])==null?void 0:h.color]),v(s,"class","opacity-0 group-hover:opacity-100 px-2 shrink-0 flex gap-3 items-center transition w-max pb-1"),v(e,"class","flex flex-row items-center w-full")},m(d,h){U(d,e,h),P(e,r),Ze(r,o[0].title),P(e,n),P(e,s),P(s,l),P(s,i),T(g,s,null),P(s,u),T(p,s,null),P(s,b),T(a,s,null),P(s,f),T(m,s,null),y=!0,G||(I=[j(r,"input",o[9]),j(r,"input",o[10]),le(Re.call(null,l,"Change color")),j(l,"click",o[2])],G=!0)},p(d,[h]){var D,_;(!y||h&1&&t!==(t=d[1][(D=d[0])==null?void 0:D.color]+" rounded py-1 focus:outline-0 px-2 text-sm border-0 text-[var(--text)] border-b-0 w-full"))&&v(r,"class",t),h&1&&r.value!==d[0].title&&Ze(r,d[0].title),(!y||h&1&&c!==(c="h-4 w-4 rounded-full "+d[1][(_=d[0])==null?void 0:_.color]))&&v(l,"class",c);const $={};h&1&&($.icon=d[0].collapsed?Pe:Ge),h&1&&($.tooltip=d[0].collapsed?"Expand group":"Collapse group"),m.$set($)},i(d){y||(w(g.$$.fragment,d),w(p.$$.fragment,d),w(a.$$.fragment,d),w(m.$$.fragment,d),y=!0)},o(d){k(g.$$.fragment,d),k(p.$$.fragment,d),k(a.$$.fragment,d),k(m.$$.fragment,d),y=!1},d(d){d&&N(e),L(g),L(p),L(a),L(m),G=!1,ue(I)}}}function zr(o,e,r){let{group:t}=e,{tabs:n}=e;const s=["grey","blue","red","yellow","green","pink","purple","cyan","orange"],l={grey:"bg-gray-600 dark:bg-gray-300",blue:"bg-blue-600 dark:bg-blue-300",red:"bg-red-600 dark:bg-red-300",yellow:"bg-yellow-600 dark:bg-yellow-400",green:"bg-lime-600 dark:bg-lime-300",pink:"bg-pink-600 dark:bg-pink-300",purple:"bg-purple-600 dark:bg-purple-300",cyan:"bg-cyan-600 dark:bg-cyan-400",orange:"bg-orange-600 dark:bg-orange-400"},c=()=>{var y,G;const m=s.indexOf(t.color);m===s.length-1?(y=chrome==null?void 0:chrome.tabGroups)==null||y.update(t.id,{color:s[0]}):(G=chrome==null?void 0:chrome.tabGroups)==null||G.update(t.id,{color:s[m+1]})},i=async()=>{var y;const m=await chrome.tabs.create({index:n[n.length-1].index+1,active:!0});(y=chrome==null?void 0:chrome.tabs)==null||y.group({tabIds:[m.id],groupId:t.id})},g=async()=>{const m=await chrome.windows.create();chrome.tabGroups.move(t.id,{windowId:m.id,index:-1})},u=async()=>{chrome.tabs.remove(n.map(m=>m.id))},p=()=>{chrome.tabGroups.update(t.id,{collapsed:!t.collapsed})},b=m=>{var y;(y=chrome==null?void 0:chrome.tabGroups)==null||y.update(t.id,{title:m})};function a(){t.title=this.value,r(0,t)}const f=()=>{b(t.title)};return o.$$set=m=>{"group"in m&&r(0,t=m.group),"tabs"in m&&r(8,n=m.tabs)},[t,l,c,i,g,u,p,b,n,a,f]}class jr extends X{constructor(e){super(),K(this,e,zr,Mr,Q,{group:0,tabs:8})}}function at(o,e,r){const t=o.slice();return t[16]=e[r],t}function it(o,e){let r,t,n;return t=new Be({props:{tab:e[16]}}),{key:o,first:null,c(){r=ge(),C(t.$$.fragment),this.first=r},m(s,l){U(s,r,l),T(t,s,l),n=!0},p(s,l){e=s;const c={};l&1&&(c.tab=e[16]),t.$set(c)},i(s){n||(w(t.$$.fragment,s),n=!0)},o(s){k(t.$$.fragment,s),n=!1},d(s){s&&N(r),L(t,s)}}}function Ar(o){let e,r,t,n,s=[],l=new Map,c,i,g,u;r=new jr({props:{group:o[1],tabs:o[0]}});let p=o[0];const b=a=>a[16].id;for(let a=0;a<p.length;a+=1){let f=at(o,p,a),m=b(f);l.set(m,s[a]=it(m,f))}return{c(){e=S("div"),C(r.$$.fragment),t=O(),n=S("div");for(let a=0;a<s.length;a+=1)s[a].c();v(n,"class",c=Ie(`flex flex-wrap curved tab-group-items overflow-hidden w-full 
        ${o[8][o[1].color]}
        ${o[3]?"flex-col gap-1.5 p-2":"flex-row gap-4 px-3 py-2.5"} 
        ${o[1].collapsed?"max-h-0 p-0 border-[1px]":"max-h-auto border-[1px]"}`)),ae(n,"border-style","solid"),ae(n,"border-top-left-radius","0"),v(e,"class","flex-col flex items-start justify-start tab-group w-full group")},m(a,f){U(a,e,f),T(r,e,null),P(e,t),P(e,n);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(n,null);i=!0,g||(u=[le(o[9].call(null,n)),j(e,"dragstart",o[11]),j(e,"dragend",o[12]),j(e,"dragover",ht(o[10])),j(e,"drop",Oe(o[13]))],g=!0)},p(a,[f]){const m={};f&2&&(m.group=a[1]),f&1&&(m.tabs=a[0]),r.$set(m),f&1&&(p=a[0],Z(),s=Se(s,f,b,1,a,p,l,n,Ae,it,null,at),H()),(!i||f&10&&c!==(c=Ie(`flex flex-wrap curved tab-group-items overflow-hidden w-full 
        ${a[8][a[1].color]}
        ${a[3]?"flex-col gap-1.5 p-2":"flex-row gap-4 px-3 py-2.5"} 
        ${a[1].collapsed?"max-h-0 p-0 border-[1px]":"max-h-auto border-[1px]"}`)))&&v(n,"class",c)},i(a){if(!i){w(r.$$.fragment,a);for(let f=0;f<p.length;f+=1)w(s[f]);i=!0}},o(a){k(r.$$.fragment,a);for(let f=0;f<s.length;f+=1)k(s[f]);i=!1},d(a){a&&N(e),L(r);for(let f=0;f<s.length;f+=1)s[f].d();g=!1,ue(u)}}}function qr(o,e,r){let t,n,s,l;const{isList:c,isPointerDown:i,refsToGroups:g,refsToTabs:u}=ne("stores");A(o,c,d=>r(3,l=d)),A(o,i,d=>r(2,s=d)),A(o,g,d=>r(14,t=d)),A(o,u,d=>r(15,n=d));let{group:p}=e,{tabs:b}=e;const a={grey:"border-gray-600 dark:border-gray-300",blue:"border-blue-600 dark:border-blue-300",red:"border-red-600 dark:border-red-300",yellow:"border-yellow-600 dark:border-yellow-400",green:"border-lime-600 dark:border-lime-300",pink:"border-pink-600 dark:border-pink-300",purple:"border-purple-600 dark:border-purple-300",cyan:"border-cyan-600 dark:border-cyan-400",orange:"border-orange-600 dark:border-orange-400"},f=d=>{const h=new qe(d,{group:{name:"tabs",pull:!0,put:($,D,_)=>!!_.classList.contains("tab-item")},setData:($,D)=>{const _=D;$.setData("text/plain",JSON.stringify({type:"tab",id:n.get(_).id}))},animation:250,easing:"cubic-bezier(1, 0, 0, 1)",draggable:".tab-item",onMove:$=>!$.related.classList.contains("pinned-group"),onAdd:$=>{const D=$.item,_=n.get(D),x=n.get(D.previousElementSibling)||de(d,u),R=n.get(D.nextElementSibling)||pe(d,u);if(!x){chrome.tabs.update(_.id,{pinned:!1}),chrome.tabs.move(_.id,{index:0}),chrome.tabs.group({tabIds:[_.id],groupId:p.id});return}if(!R){chrome.tabs.update(_.id,{pinned:!1}),chrome.tabs.move(_.id,{index:-1}),chrome.tabs.group({tabIds:[_.id],groupId:p.id});return}const z=x?(x==null?void 0:x.index)>_.index:!1,M=x?(x==null?void 0:x.index)+1===_.index:!1,E=z?x==null?void 0:x.index:(x==null?void 0:x.index)+1;chrome.tabs.update(_.id,{pinned:!1}),M||chrome.tabs.move(_.id,{index:E}),chrome.tabs.group({tabIds:[_.id],groupId:p.id})},onUpdate:$=>{const D=$.item,_=n.get(D),x=n.get(D.previousElementSibling)||de(d,u),R=n.get(D.nextElementSibling)||pe(d,u);if(!x){chrome.tabs.move(_.id,{index:0});return}if(!R){chrome.tabs.move(_.id,{index:-1});return}const M=(x?(x==null?void 0:x.index)>_.index:!1)?x==null?void 0:x.index:(x==null?void 0:x.index)+1;chrome.tabs.move(_.id,{index:M})}});t.set(d,{isParent:!1,id:p.id}),Fe(()=>{h.destroy()})};function m(d){$e.call(this,o,d)}const y=()=>{re(i,s=!0,s)},G=()=>{re(i,s=!1,s)},I=async d=>{try{const{data:h,type:$}=JSON.parse(d.dataTransfer.getData("json"));if($!=="bookmarks-drop")return;if(h.type==="folder"&&h.sites&&h.sites.length>0){let D=[],_=[];for(const R of h.sites)_.push(chrome.tabs.create({url:R.url,pinned:!1,active:!1}));D=await Promise.all(_);const x=await chrome.tabs.group({tabIds:D.map(R=>R.id)});chrome.tabGroups.update(x,{title:h.title})}else if(We(h.url)){const D=await chrome.tabs.create({url:h.url,pinned:!1,active:!1});chrome.tabs.group({tabIds:[D.id],groupId:p.id})}}catch(h){console.log(h)}};return o.$$set=d=>{"group"in d&&r(1,p=d.group),"tabs"in d&&r(0,b=d.tabs)},[b,p,s,l,c,i,g,u,a,f,m,y,G,I]}class Fr extends X{constructor(e){super(),K(this,e,qr,Ar,Q,{group:1,tabs:0})}}function ct(o,e,r){const t=o.slice();return t[18]=e[r],t}function Wr(o){let e,r;return e=new Be({props:{tab:o[18]}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.tab=t[18]),e.$set(s)},i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function Br(o){let e,r;return e=new Er({props:{tabs:o[18].tabs}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.tabs=t[18].tabs),e.$set(s)},i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function Jr(o){let e,r;return e=new Fr({props:{group:o[18],tabs:o[18].tabs}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p(t,n){const s={};n&2&&(s.group=t[18]),n&2&&(s.tabs=t[18].tabs),e.$set(s)},i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function ut(o,e){let r,t,n,s,l;const c=[Jr,Br,Wr],i=[];function g(u,p){return u[18].type==="group"?0:u[18].type==="pinned"?1:2}return t=g(e),n=i[t]=c[t](e),{key:o,first:null,c(){r=ge(),n.c(),s=ge(),this.first=r},m(u,p){U(u,r,p),i[t].m(u,p),U(u,s,p),l=!0},p(u,p){e=u;let b=t;t=g(e),t===b?i[t].p(e,p):(Z(),k(i[b],1,1,()=>{i[b]=null}),H(),n=i[t],n?n.p(e,p):(n=i[t]=c[t](e),n.c()),w(n,1),n.m(s.parentNode,s))},i(u){l||(w(n),l=!0)},o(u){k(n),l=!1},d(u){u&&N(r),i[t].d(u),u&&N(s)}}}function Vr(o){let e,r,t,n,s,l,c,i=[],g=new Map,u,p,b,a,f,m,y;t=new Or({}),s=new Y({props:{icon:o[4]?He:Xe,class:"shrink-0 text-2xl mr-1"}}),s.$on("click",o[11]);let G=o[1];const I=d=>{var h;return(h=d[18])==null?void 0:h.id};for(let d=0;d<G.length;d+=1){let h=ct(o,G,d),$=I(h);g.set($,i[d]=ut($,h))}return b=new cr({}),{c(){e=S("div"),r=S("div"),C(t.$$.fragment),n=O(),C(s.$$.fragment),l=O(),c=S("div");for(let d=0;d<i.length;d+=1)i[d].c();p=O(),C(b.$$.fragment),v(r,"class","flex items-center justify-start w-full gap-3"),v(c,"class",u="flex w-full h-max parent-group overflow-overlay scrollbar-none "+(o[4]?"flex-col justify-start gap-1.5":"flex-row flex-wrap justify-center gap-y-4 gap-x-5 mt-1.5 pb-2")),v(e,"class",a="w-[24rem] "+(o[3]?"h-[40rem]":"h-[20.75rem]")+" p-2 flex gap-2 flex-col")},m(d,h){U(d,e,h),P(e,r),T(t,r,null),P(r,n),T(s,r,null),P(e,l),P(e,c);for(let $=0;$<i.length;$+=1)i[$]&&i[$].m(c,null);o[12](c),P(e,p),T(b,e,null),f=!0,m||(y=[le(o[9].call(null,c)),j(c,"pointerdown",o[13]),j(c,"dragover",ht(o[10])),j(c,"drop",o[14])],m=!0)},p(d,[h]){const $={};h&16&&($.icon=d[4]?He:Xe),s.$set($),h&2&&(G=d[1],Z(),i=Se(i,h,I,1,d,G,g,c,Ae,ut,null,ct),H()),(!f||h&16&&u!==(u="flex w-full h-max parent-group overflow-overlay scrollbar-none "+(d[4]?"flex-col justify-start gap-1.5":"flex-row flex-wrap justify-center gap-y-4 gap-x-5 mt-1.5 pb-2")))&&v(c,"class",u),(!f||h&8&&a!==(a="w-[24rem] "+(d[3]?"h-[40rem]":"h-[20.75rem]")+" p-2 flex gap-2 flex-col"))&&v(e,"class",a)},i(d){if(!f){w(t.$$.fragment,d),w(s.$$.fragment,d);for(let h=0;h<G.length;h+=1)w(i[h]);w(b.$$.fragment,d),f=!0}},o(d){k(t.$$.fragment,d),k(s.$$.fragment,d);for(let h=0;h<i.length;h+=1)k(i[h]);k(b.$$.fragment,d),f=!1},d(d){d&&N(e),L(t),L(s);for(let h=0;h<i.length;h+=1)i[h].d();o[12](null),L(b),m=!1,ue(y)}}}function Zr(o,e,r){let t,n,s,l=q,c=()=>(l(),l=$t(a,_=>r(17,s=_)),a),i,g;o.$$.on_destroy.push(()=>l());const{isList:u,refsToGroups:p,refsToTabs:b,tabs:a}=ne("stores");A(o,u,_=>r(4,g=_)),A(o,p,_=>r(15,t=_)),A(o,b,_=>r(16,n=_)),c();let f=[],m;const y=ne("alwaysAppView");A(o,y,_=>r(3,i=_)),Nt(async()=>{var x,R,z,M,E,te,fe,be;const _=async()=>{var se;re(a,s=await chrome.tabs.query({currentWindow:!0}),s);const oe=await((se=chrome==null?void 0:chrome.tabGroups)==null?void 0:se.query({}).catch(()=>[])),B=[];s.forEach(J=>{if((J.groupId===-1||!J.groupId)&&!J.pinned)B.push({...J,type:"tab"});else if(J.pinned){const F=B.find(V=>V.type==="pinned");F?F.tabs.push(J):B.push({type:"pinned",id:"pinned",tabs:[J]})}else{const F=oe.find(V=>V.id===J.groupId);if(B.find(V=>V.id===(F==null?void 0:F.id)))return;F&&B.push({type:"group",id:F.id,...F,tabs:s.filter(V=>V.groupId===F.id)})}}),r(1,f=B)};return _(),chrome.tabs.onUpdated.addListener(_),chrome.tabs.onRemoved.addListener(_),chrome.tabs.onMoved.addListener(_),chrome.tabs.onCreated.addListener(_),chrome.tabs.onActivated.addListener(_),chrome.tabs.onDetached.addListener(_),chrome.tabs.onHighlighted.addListener(_),chrome.tabs.onReplaced.addListener(_),(R=(x=chrome.tabGroups)==null?void 0:x.onCreated)==null||R.addListener(_),(M=(z=chrome.tabGroups)==null?void 0:z.onUpdated)==null||M.addListener(_),(te=(E=chrome.tabGroups)==null?void 0:E.onMoved)==null||te.addListener(_),(be=(fe=chrome.tabGroups)==null?void 0:fe.onRemoved)==null||be.addListener(_),()=>{var oe,B,se,J,F,V,ke,ve;chrome.tabs.onUpdated.removeListener(_),chrome.tabs.onRemoved.removeListener(_),chrome.tabs.onMoved.removeListener(_),chrome.tabs.onCreated.removeListener(_),chrome.tabs.onActivated.removeListener(_),chrome.tabs.onDetached.removeListener(_),chrome.tabs.onHighlighted.removeListener(_),chrome.tabs.onReplaced.removeListener(_),(B=(oe=chrome.tabGroups)==null?void 0:oe.onCreated)==null||B.removeListener(_),(J=(se=chrome.tabGroups)==null?void 0:se.onUpdated)==null||J.removeListener(_),(V=(F=chrome.tabGroups)==null?void 0:F.onMoved)==null||V.removeListener(_),(ve=(ke=chrome.tabGroups)==null?void 0:ke.onRemoved)==null||ve.removeListener(_)}});const G=_=>{const x=new qe(_,{group:"tabs",animation:250,easing:"cubic-bezier(1, 0, 0, 1)",filter:".pinned-group",setData:(R,z)=>{const M=z,E=t.get(M)||t.get(M.lastElementChild);E?R.setData("text/plain",JSON.stringify({type:"group",id:E.id})):R.setData("text/plain",JSON.stringify({type:"tab",id:n.get(M).id}))},onMove:R=>!R.related.classList.contains("pinned-group"),onAdd:R=>{const z=R.item,M=n.get(z);let E=de(z,b),te=pe(z,b);if(!E){chrome.tabs.move(M.id,{index:0}),chrome.tabs.update(M.id,{pinned:!1}),chrome.tabs.ungroup([M.id]);return}if(!te){chrome.tabs.move(M.id,{index:-1}),chrome.tabs.update(M.id,{pinned:!1}),chrome.tabs.ungroup([M.id]);return}const fe=E?(E==null?void 0:E.index)>M.index:!1,be=E?(E==null?void 0:E.index)+1===M.index:!1,oe=fe?E==null?void 0:E.index:(E==null?void 0:E.index)+1;chrome.tabs.update(M.id,{pinned:!1}),be||chrome.tabs.move(M.id,{index:oe}),chrome.tabs.ungroup([M.id])},onUpdate:R=>{var B;const z=R.item,M=t.get(z)||t.get(z.lastElementChild);if(M){let se=de(z.lastElementChild,b);if(!se){chrome.tabGroups.move(M.id,{index:0});return}if(!pe(z.lastElementChild,b)){chrome.tabGroups.move(M.id,{index:-1});return}const F=se.index,V=z.firstElementChild,ke=Array.from(z.children).length,ve=(B=n.get(V))==null?void 0:B.index;F>ve?chrome.tabGroups.move(M.id,{index:F-ke+1}):chrome.tabGroups.move(M.id,{index:F+1});return}const E=n.get(z.previousElementSibling)||de(z,b),te=n.get(z.nextElementSibling)||pe(z,b);if(!E){chrome.tabs.move(n.get(z).id,{index:0});return}if(!te){chrome.tabs.move(n.get(z).id,{index:-1});return}const fe=n.get(z),oe=(E?(E==null?void 0:E.index)>fe.index:!1)?E==null?void 0:E.index:(E==null?void 0:E.index)+1;chrome.tabs.move(fe.id,{index:oe})}});t.set(_,{isParent:!0}),Fe(()=>{x.destroy()})};function I(_){$e.call(this,o,_)}const d=()=>re(u,g=!g,g);function h(_){_t[_?"unshift":"push"](()=>{m=_,r(2,m)})}return[a,f,m,i,g,u,p,b,y,G,I,d,h,_=>{_.target!==m&&_.stopPropagation()},async _=>{try{const{data:x,type:R}=JSON.parse(_.dataTransfer.getData("json"));if(R!=="bookmarks-drop")return;if(!x.url&&x.children&&x.children.length>0){let z=[],M=[];for(const E of x.children)E.url&&M.push(chrome.tabs.create({url:E.url,pinned:!1,active:!1}));if(z=await Promise.all(M),!gt()){const E=await chrome.tabs.group({tabIds:z.map(te=>te.id)});chrome.tabGroups.update(E,{title:x.title})}}else We(x.url)&&chrome.tabs.create({url:x.url,pinned:!1,active:!1})}catch{return}}]}class Hr extends X{constructor(e){super(),K(this,e,Zr,Vr,Q,{})}}function Xr(o){let e,r;return e=new Bt({props:{checkForPermissions:o[2]}}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function Kr(o){let e,r;return e=new Hr({}),{c(){C(e.$$.fragment)},m(t,n){T(e,t,n),r=!0},p:q,i(t){r||(w(e.$$.fragment,t),r=!0)},o(t){k(e.$$.fragment,t),r=!1},d(t){L(e,t)}}}function Qr(o){let e,r,t,n;const s=[Kr,Xr],l=[];function c(i,g){return i[1]?0:1}return e=c(o),r=l[e]=s[e](o),{c(){r.c(),t=ge()},m(i,g){l[e].m(i,g),U(i,t,g),n=!0},p(i,[g]){let u=e;e=c(i),e===u?l[e].p(i,g):(Z(),k(l[u],1,1,()=>{l[u]=null}),H(),r=l[e],r?r.p(i,g):(r=l[e]=s[e](i),r.c()),w(r,1),r.m(t.parentNode,t))},i(i){n||(w(r),n=!0)},o(i){k(r),n=!1},d(i){l[e].d(i),i&&N(t)}}}function Yr(o,e,r){let t,n=q,s=()=>(n(),n=$t($,_=>r(1,t=_)),$);o.$$.on_destroy.push(()=>n());let{config:l}=e;const c={path:"user_data/{uid}/profiles/{currentProfile}/apps/"+l.id,currentProfile:Ot,uid:Mt},{create:i,createPersist:g,isFetched:u,start:p,stop:b}=At(c),a=_e(new Map),f=_e(new Map),m=_e([]),y=_e(!1),G=_e(new Map),I=i("isList",!1),d=i("collaspePinned",!1),h=i("pinnedGroupColor","grey"),$=zt("tabs:permissonsGranted",!1);s(),jt("stores",{refsToGroups:a,refsToTabs:f,tabs:m,isPointerDown:y,tabsToRefs:G,isList:I,collaspePinned:d,pinnedGroupColor:h,permissonsGranted:$}),D();async function D(){const _=["tabs","tabGroups","bookmarks"],x=await chrome.permissions.getAll();_.every(R=>x.permissions.includes(R))?re($,t=!0,t):re($,t=!1,t)}return o.$$set=_=>{"config"in _&&r(3,l=_.config)},[$,t,D,l,i,g,u,p,b,a,f,m,y,G,I,d,h]}class rn extends X{constructor(e){super(),K(this,e,Yr,Qr,Q,{config:3,create:4,createPersist:5,storesReady:6,start:7,stop:8,refsToGroups:9,refsToTabs:10,tabs:11,isPointerDown:12,tabsToRefs:13,isList:14,collaspePinned:15,pinnedGroupColor:16,permissonsGranted:0})}get create(){return this.$$.ctx[4]}get createPersist(){return this.$$.ctx[5]}get storesReady(){return this.$$.ctx[6]}get start(){return this.$$.ctx[7]}get stop(){return this.$$.ctx[8]}get refsToGroups(){return this.$$.ctx[9]}get refsToTabs(){return this.$$.ctx[10]}get tabs(){return this.$$.ctx[11]}get isPointerDown(){return this.$$.ctx[12]}get tabsToRefs(){return this.$$.ctx[13]}get isList(){return this.$$.ctx[14]}get collaspePinned(){return this.$$.ctx[15]}get pinnedGroupColor(){return this.$$.ctx[16]}get permissonsGranted(){return this.$$.ctx[0]}}export{rn as default};
