import{S as fe,i as ue,s as oe,R as ie,T as kt,N as ye,O as ke,P as Se,U as $e,q as I,c as M,V as E,r as k,u as L,L as v,m as D,W as Ae,v as K,a as $,x as O,t as h,D as N,d as F,E as se,b as J,G as ct,K as Q,o as be,bf as $t,a5 as G,a7 as ne,aD as he,a8 as we,ar as at,bw as Ce,aE as wt,Z as ee,n as Y,I as _e,a0 as vt,J as ae,a3 as X,y as Ie,z as Le,B as pe,C as Ne,aP as ft,a1 as re,aa as ce,ab as ut,af as Be,bZ as yt,b_ as _t,b$ as mt,c0 as pt,c1 as St,c2 as At,c3 as ve,a9 as dt,as as gt,aZ as Ct,b0 as It,c4 as Lt,c5 as Nt,bp as Bt,ao as jt,c6 as Tt,c7 as Ue,c8 as Rt,ag as Vt,ah as Pt,av as Et,e as Mt,ay as Dt,az as ge,aB as Ft}from"./overlayscrollbars.js";import{C as ht}from"./Card.js";function He(s,e,l){const t=s.slice();return t[15]=e[l],t}function Ut(s){let e;return{c(){e=Q("Validate")},m(l,t){L(l,e,t)},d(l){l&&N(e)}}}function Ht(s){var Z;let e,l,t,n,r,c,o,i,a,u,f,b,_,m,p,y;const C=[Zt,qt],d=[];function B(j,V){return j[1].source.name?0:1}o=B(s),i=d[o]=C[o](s);let R=(Z=s[1])==null?void 0:Z.items,A=[];for(let j=0;j<R.length;j+=1)A[j]=We(He(s,R,j));const U=j=>$(A[j],1,1,()=>{A[j]=null});return _=new $e({props:{class:"mt-4",disabled:!s[1].source.name,$$slots:{default:[Gt]},$$scope:{ctx:s}}}),_.$on("click",s[14]),{c(){e=I("div"),l=I("div"),t=I("img"),c=E(),i.c(),a=E(),u=I("div"),f=I("div");for(let j=0;j<A.length;j+=1)A[j].c();b=E(),M(_.$$.fragment),ne(t.src,n=s[1].source.icon)||k(t,"src",n),k(t,"class","h-8 w-8 object-cover"),k(t,"alt",r=s[1].source.name),k(l,"class","flex-center gap-3"),k(f,"class","flex flex-col gap-2"),he(u,"width","100%"),he(u,"margin-top","1rem"),he(u,"flex-grow","1"),k(e,"class","flex-center w-full flex-1 flex-col overflow-hidden pt-4 pb-2")},m(j,V){L(j,e,V),v(e,l),v(l,t),v(l,c),d[o].m(l,null),v(e,a),v(e,u),v(u,f);for(let g=0;g<A.length;g+=1)A[g]&&A[g].m(f,null);v(e,b),D(_,e,null),m=!0,p||(y=we(at.call(null,u)),p=!0)},p(j,V){var z;(!m||V&2&&!ne(t.src,n=j[1].source.icon))&&k(t,"src",n),(!m||V&2&&r!==(r=j[1].source.name))&&k(t,"alt",r);let g=o;if(o=B(j),o===g?d[o].p(j,V):(K(),$(d[g],1,1,()=>{d[g]=null}),O(),i=d[o],i?i.p(j,V):(i=d[o]=C[o](j),i.c()),h(i,1),i.m(l,null)),V&2){R=(z=j[1])==null?void 0:z.items;let P;for(P=0;P<R.length;P+=1){const le=He(j,R,P);A[P]?(A[P].p(le,V),h(A[P],1)):(A[P]=We(le),A[P].c(),h(A[P],1),A[P].m(f,null))}for(K(),P=R.length;P<A.length;P+=1)U(P);O()}const S={};V&2&&(S.disabled=!j[1].source.name),V&262144&&(S.$$scope={dirty:V,ctx:j}),_.$set(S)},i(j){if(!m){h(i);for(let V=0;V<R.length;V+=1)h(A[V]);h(_.$$.fragment,j),m=!0}},o(j){$(i),A=A.filter(Boolean);for(let V=0;V<A.length;V+=1)$(A[V]);$(_.$$.fragment,j),m=!1},d(j){j&&N(e),d[o].d(),Ce(A,j),F(_),p=!1,y()}}}function Wt(s){let e,l,t,n;const r=[Ot,Kt,Jt],c=[];function o(i,a){return i[2]?0:i[3]?2:1}return l=o(s),t=c[l]=r[l](s),{c(){e=I("div"),t.c(),k(e,"class","h-full w-full flex-1")},m(i,a){L(i,e,a),c[l].m(e,null),n=!0},p(i,a){let u=l;l=o(i),l===u?c[l].p(i,a):(K(),$(c[u],1,1,()=>{c[u]=null}),O(),t=c[l],t?t.p(i,a):(t=c[l]=r[l](i),t.c()),h(t,1),t.m(e,null))},i(i){n||(h(t),n=!0)},o(i){$(t),n=!1},d(i){i&&N(e),c[l].d()}}}function qt(s){let e,l,t,n,r;function c(i){s[12](i)}let o={placeholder:"Name",class:"py-2 text-sm leading-5"};return s[4]!==void 0&&(o.value=s[4]),e=new ye({props:o}),ke.push(()=>Se(e,"value",c)),n=new ie({props:{icon:wt,tooltip:"Confirm name",class:"text-xl"}}),n.$on("click",s[13]),{c(){M(e.$$.fragment),t=E(),M(n.$$.fragment)},m(i,a){D(e,i,a),L(i,t,a),D(n,i,a),r=!0},p(i,a){const u={};!l&&a&16&&(l=!0,u.value=i[4],Ae(()=>l=!1)),e.$set(u)},i(i){r||(h(e.$$.fragment,i),h(n.$$.fragment,i),r=!0)},o(i){$(e.$$.fragment,i),$(n.$$.fragment,i),r=!1},d(i){F(e,i),i&&N(t),F(n,i)}}}function Zt(s){let e,l=s[1].source.name+"",t;return{c(){e=I("span"),t=Q(l),k(e,"class","text-xl font-semibold leading-6")},m(n,r){L(n,e,r),v(e,t)},p(n,r){r&2&&l!==(l=n[1].source.name+"")&&ee(t,l)},i:Y,o:Y,d(n){n&&N(e)}}}function zt(s){let e,l=s[15].title+"",t,n;return{c(){e=I("span"),t=Q(l),n=E(),k(e,"class","max-line-2 text-start text-sm")},m(r,c){L(r,e,c),v(e,t),L(r,n,c)},p(r,c){c&2&&l!==(l=r[15].title+"")&&ee(t,l)},d(r){r&&N(e),r&&N(n)}}}function We(s){let e,l;return e=new ht({props:{class:"flex flex-col items-start justify-start gap-1 px-3 py-2",$$slots:{default:[zt]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},p(t,n){const r={};n&262146&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Gt(s){let e;return{c(){e=Q("Add Source")},m(l,t){L(l,e,t)},d(l){l&&N(e)}}}function Jt(s){let e,l,t,n,r,c;return l=new _e({props:{class:"text-2xl",icon:vt}}),{c(){e=I("div"),M(l.$$.fragment),t=E(),n=I("span"),r=Q(s[3]),k(e,"class","flex h-full w-full flex-1 flex-col items-center justify-center gap-3 px-10")},m(o,i){L(o,e,i),D(l,e,null),v(e,t),v(e,n),v(n,r),c=!0},p(o,i){(!c||i&8)&&ee(r,o[3])},i(o){c||(h(l.$$.fragment,o),c=!0)},o(o){$(l.$$.fragment,o),c=!1},d(o){o&&N(e),F(l)}}}function Kt(s){let e;return{c(){e=I("div"),e.innerHTML="<span>Enter a valid RSS feed URL and click Validate to continue.</span>",k(e,"class","flex h-full w-full flex-1 items-center justify-center px-14 text-center")},m(l,t){L(l,e,t)},p:Y,i:Y,o:Y,d(l){l&&N(e)}}}function Ot(s){let e,l,t,n,r;return n=new _e({props:{class:"animate-spin text-xl",icon:ae}}),{c(){e=I("div"),l=I("span"),l.textContent="Checking your url",t=E(),M(n.$$.fragment),k(e,"class","flex h-full w-full flex-1 items-center justify-center gap-3 px-14")},m(c,o){L(c,e,o),v(e,l),v(e,t),D(n,e,null),r=!0},p:Y,i(c){r||(h(n.$$.fragment,c),r=!0)},o(c){$(n.$$.fragment,c),r=!1},d(c){c&&N(e),F(n)}}}function Yt(s){let e,l,t,n,r,c,o,i,a,u,f,b;t=new ie({props:{icon:kt,class:"ml-1 shrink-0",tooltip:"Back"}}),t.$on("click",s[9]);function _(d){s[10](d)}let m={placeholder:"RSS url",class:"w-full text-sm leading-6"};s[0]!==void 0&&(m.value=s[0]),r=new ye({props:m}),ke.push(()=>Se(r,"value",_)),i=new $e({props:{class:"shrink-0 leading-6",$$slots:{default:[Ut]},$$scope:{ctx:s}}}),i.$on("click",s[11]);const p=[Wt,Ht],y=[];function C(d,B){return d[1]?1:0}return u=C(s),f=y[u]=p[u](s),{c(){e=I("div"),l=I("div"),M(t.$$.fragment),n=E(),M(r.$$.fragment),o=E(),M(i.$$.fragment),a=E(),f.c(),k(l,"class","flex w-full items-center justify-between gap-3"),k(e,"class","mt-1 flex h-full w-[23rem] flex-col overflow-hidden")},m(d,B){L(d,e,B),v(e,l),D(t,l,null),v(l,n),D(r,l,null),v(l,o),D(i,l,null),v(e,a),y[u].m(e,null),b=!0},p(d,[B]){const R={};!c&&B&1&&(c=!0,R.value=d[0],Ae(()=>c=!1)),r.$set(R);const A={};B&262144&&(A.$$scope={dirty:B,ctx:d}),i.$set(A);let U=u;u=C(d),u===U?y[u].p(d,B):(K(),$(y[U],1,1,()=>{y[U]=null}),O(),f=y[u],f?f.p(d,B):(f=y[u]=p[u](d),f.c()),h(f,1),f.m(e,null))},i(d){b||(h(t.$$.fragment,d),h(r.$$.fragment,d),h(i.$$.fragment,d),h(f),b=!0)},o(d){$(t.$$.fragment,d),$(r.$$.fragment,d),$(i.$$.fragment,d),$(f),b=!1},d(d){d&&N(e),F(t),F(r),F(i),y[u].d()}}}function Qt(s,e,l){let t;const{customSources:n}=se("stores");J(s,n,d=>l(5,t=d));let r="",c=null,o=!1,i=!1,a="";const u=ct(),f=async()=>{if(l(2,o=!0),t.find(d=>d.url===r)){l(3,i="You have already added this source"),l(2,o=!1);return}await be.get("/apps/news/validate",{params:{url:r}}).then(d=>{l(1,c=d.data),l(3,i=!1)}).catch(()=>{l(3,i="Unable to validate your url. Please check your url and try again.")}),l(2,o=!1)},b=()=>u("close");function _(d){r=d,l(0,r)}const m=()=>{f()};function p(d){a=d,l(4,a)}return[r,c,o,i,a,t,n,u,f,b,_,m,p,()=>{l(1,c.source.name=a,c)},()=>{if(!c.source.name)return;const d={id:$t(),name:c.source.name,url:r,icon:c.source.icon,custom:!0};G(n,t=[d,...t],t),u("close")}]}class Xt extends fe{constructor(e){super(),ue(this,e,Qt,Yt,oe,{})}}function qe(s,e,l){const t=s.slice();return t[30]=e[l],t}function Ze(s,e,l){const t=s.slice();return t[33]=e[l],t}function xt(s){let e,l;return e=new Xt({}),e.$on("close",s[27]),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},p:Y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function el(s){let e,l,t,n;const r=[ll,tl],c=[];function o(i,a){return i[4].length>0?0:1}return e=o(s),l=c[e]=r[e](s),{c(){l.c(),t=re()},m(i,a){c[e].m(i,a),L(i,t,a),n=!0},p(i,a){let u=e;e=o(i),e===u?c[e].p(i,a):(K(),$(c[u],1,1,()=>{c[u]=null}),O(),l=c[e],l?l.p(i,a):(l=c[e]=r[e](i),l.c()),h(l,1),l.m(t.parentNode,t))},i(i){n||(h(l),n=!0)},o(i){$(l),n=!1},d(i){c[e].d(i),i&&N(t)}}}function tl(s){let e,l,t,n;return t=new _e({props:{icon:ae,class:"mr-2 animate-spin"}}),{c(){e=I("p"),l=Q("Loading sources "),M(t.$$.fragment),k(e,"class","flex-center h-[22.8rem] w-[23rem] gap-3 text-center text-lg"),X(e,"h-[22.8rem]",!s[8]),X(e,"h-[32rem]",s[8])},m(r,c){L(r,e,c),v(e,l),D(t,e,null),n=!0},p(r,c){(!n||c[0]&256)&&X(e,"h-[22.8rem]",!r[8]),(!n||c[0]&256)&&X(e,"h-[32rem]",r[8])},i(r){n||(h(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&N(e),F(t)}}}function ll(s){let e,l,t,n,r,c,o,i,a,u,f,b,_,m,p,y,C,d,B,R,A,U,Z;function j(T){s[19](T)}let V={placeholder:"Search sources",class:"w-full text-sm leading-6"};s[0]!==void 0&&(V.value=s[0]),l=new ye({props:V}),ke.push(()=>Se(l,"value",j)),r=new $e({props:{class:"shrink-0 leading-6",$$slots:{default:[nl]},$$scope:{ctx:s}}}),r.$on("click",s[20]);let g=s[7],S=[];for(let T=0;T<g.length;T+=1)S[T]=ze(Ze(s,g,T));const z=[il,rl],P=[];function le(T,W){return T[6].length===0?0:1}return B=le(s),R=P[B]=z[B](s),{c(){e=I("div"),M(l.$$.fragment),n=E(),M(r.$$.fragment),c=E(),o=I("div"),i=I("div"),a=I("button"),u=Q("Following"),b=E(),_=I("button"),m=Q("All Sources"),y=E();for(let T=0;T<S.length;T+=1)S[T].c();C=E(),d=I("div"),R.c(),k(e,"class","flex w-full items-center justify-between gap-3"),k(a,"class",f="curved-half flex w-full flex-row gap-3 px-3 py-1.5 text-sm transition hover:bg-[var(--bg)] "+(s[1]==="Following"&&"bg-[var(--bg)]")),k(_,"class",p="curved-half flex w-full flex-row gap-3 px-3 py-1.5 text-sm transition hover:bg-[var(--bg)] "+(s[1]==="All Sources"&&"bg-[var(--bg)]")),k(i,"class","flex w-[12rem] flex-col items-start"),k(d,"class","curved border-light overflow-overlay scrollbar relative flex h-full w-full flex-col bg-[var(--bg)] py-1"),k(o,"class","mt-3 flex flex-1 flex-row gap-2 overflow-hidden")},m(T,W){L(T,e,W),D(l,e,null),v(e,n),D(r,e,null),L(T,c,W),L(T,o,W),v(o,i),v(i,a),v(a,u),v(i,b),v(i,_),v(_,m),v(i,y);for(let w=0;w<S.length;w+=1)S[w]&&S[w].m(i,null);v(o,C),v(o,d),P[B].m(d,null),A=!0,U||(Z=[ce(a,"click",s[21]),ce(_,"click",s[22])],U=!0)},p(T,W){const w={};!t&&W[0]&1&&(t=!0,w.value=T[0],Ae(()=>t=!1)),l.$set(w);const H={};if(W[1]&32&&(H.$$scope={dirty:W,ctx:T}),r.$set(H),(!A||W[0]&2&&f!==(f="curved-half flex w-full flex-row gap-3 px-3 py-1.5 text-sm transition hover:bg-[var(--bg)] "+(T[1]==="Following"&&"bg-[var(--bg)]")))&&k(a,"class",f),(!A||W[0]&2&&p!==(p="curved-half flex w-full flex-row gap-3 px-3 py-1.5 text-sm transition hover:bg-[var(--bg)] "+(T[1]==="All Sources"&&"bg-[var(--bg)]")))&&k(_,"class",p),W[0]&130){g=T[7];let x;for(x=0;x<g.length;x+=1){const de=Ze(T,g,x);S[x]?S[x].p(de,W):(S[x]=ze(de),S[x].c(),S[x].m(i,null))}for(;x<S.length;x+=1)S[x].d(1);S.length=g.length}let me=B;B=le(T),B===me?P[B].p(T,W):(K(),$(P[me],1,1,()=>{P[me]=null}),O(),R=P[B],R?R.p(T,W):(R=P[B]=z[B](T),R.c()),h(R,1),R.m(d,null))},i(T){A||(h(l.$$.fragment,T),h(r.$$.fragment,T),h(R),A=!0)},o(T){$(l.$$.fragment,T),$(r.$$.fragment,T),$(R),A=!1},d(T){T&&N(e),F(l),F(r),T&&N(c),T&&N(o),Ce(S,T),P[B].d(),U=!1,ut(Z)}}}function nl(s){let e;return{c(){e=Q("Add Source")},m(l,t){L(l,e,t)},d(l){l&&N(e)}}}function ze(s){let e,l=s[33]+"",t,n,r,c;function o(){return s[23](s[33])}return{c(){e=I("button"),t=Q(l),k(e,"class",n="curved-half flex w-full flex-row gap-3 px-3 py-1.5 text-sm transition hover:bg-[var(--bg)] "+(s[1]===s[33]&&"bg-[var(--bg)]"))},m(i,a){L(i,e,a),v(e,t),r||(c=ce(e,"click",o),r=!0)},p(i,a){s=i,a[0]&128&&l!==(l=s[33]+"")&&ee(t,l),a[0]&130&&n!==(n="curved-half flex w-full flex-row gap-3 px-3 py-1.5 text-sm transition hover:bg-[var(--bg)] "+(s[1]===s[33]&&"bg-[var(--bg)]"))&&k(e,"class",n)},d(i){i&&N(e),r=!1,c()}}}function rl(s){let e=[],l=new Map,t,n,r=s[6];const c=o=>o[30].id;for(let o=0;o<r.length;o+=1){let i=qe(s,r,o),a=c(i);l.set(a,e[o]=Ge(a,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=re()},m(o,i){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,i);L(o,t,i),n=!0},p(o,i){if(i[0]&98380){r=o[6],K();for(let a=0;a<e.length;a+=1)e[a].r();e=Be(e,i,c,1,o,r,l,t.parentNode,yt,Ge,t,qe);for(let a=0;a<e.length;a+=1)e[a].a();O()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)h(e[i]);n=!0}},o(o){for(let i=0;i<e.length;i+=1)$(e[i]);n=!1},d(o){for(let i=0;i<e.length;i+=1)e[i].d(o);o&&N(t)}}}function il(s){let e;return{c(){e=I("p"),e.textContent="No sources found",k(e,"class","flex-center h-full w-full text-center text-sm")},m(l,t){L(l,e,t)},p:Y,i:Y,o:Y,d(l){l&&N(e)}}}function sl(s){let e,l,t;function n(...r){return s[25](s[30],...r)}return l=new ie({props:{icon:St,tooltip:"Follow"}}),l.$on("click",n),{c(){e=I("div"),M(l.$$.fragment),k(e,"class","vertical-center absolute right-4 ml-auto opacity-0 shadow-md transition group-hover:opacity-100")},m(r,c){L(r,e,c),D(l,e,null),t=!0},p(r,c){s=r},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){$(l.$$.fragment,r),t=!1},d(r){r&&N(e),F(l)}}}function ol(s){let e,l,t;function n(...r){return s[24](s[30],...r)}return l=new ie({props:{icon:At,tooltip:"Unfollow"}}),l.$on("click",n),{c(){e=I("div"),M(l.$$.fragment),k(e,"class","vertical-center absolute right-4 ml-auto opacity-0 shadow-md transition group-hover:opacity-100")},m(r,c){L(r,e,c),D(l,e,null),t=!0},p(r,c){s=r},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){$(l.$$.fragment,r),t=!1},d(r){r&&N(e),F(l)}}}function Ge(s,e){let l,t,n,r,c,o,i=e[30].name+"",a,u,f,b,_,m,p,y=Y,C,d,B;function R(...g){return e[17](e[30],...g)}function A(...g){return e[18](e[30],...g)}const U=[ol,sl],Z=[];function j(g,S){return S[0]&76&&(f=null),f==null&&(f=!!(g[2].find(R)||g[3].find(A))),f?0:1}b=j(e,[-1,-1]),_=Z[b]=U[b](e);function V(){return e[26](e[30])}return{key:s,first:null,c(){l=I("button"),t=I("img"),c=E(),o=I("span"),a=Q(i),u=E(),_.c(),m=E(),ne(t.src,n=e[30].icon)||k(t,"src",n),k(t,"class","h-6 w-6"),k(t,"alt",r=e[30].name),k(o,"class","fade-text w-full overflow-hidden whitespace-nowrap text-start"),k(l,"class","curved-half group relative flex w-full flex-row items-center gap-3 px-3.5 py-[0.575rem] transition hover:bg-[var(--bg)]"),this.first=l},m(g,S){L(g,l,S),v(l,t),v(l,c),v(l,o),v(o,a),v(l,u),Z[b].m(l,null),v(l,m),C=!0,d||(B=ce(l,"click",V),d=!0)},p(g,S){e=g,(!C||S[0]&64&&!ne(t.src,n=e[30].icon))&&k(t,"src",n),(!C||S[0]&64&&r!==(r=e[30].name))&&k(t,"alt",r),(!C||S[0]&64)&&i!==(i=e[30].name+"")&&ee(a,i);let z=b;b=j(e,S),b===z?Z[b].p(e,S):(K(),$(Z[z],1,1,()=>{Z[z]=null}),O(),_=Z[b],_?_.p(e,S):(_=Z[b]=U[b](e),_.c()),h(_,1),_.m(l,m))},r(){p=l.getBoundingClientRect()},f(){_t(l),y()},a(){y(),y=mt(l,p,pt,{duration:250})},i(g){C||(h(_),C=!0)},o(g){$(_),C=!1},d(g){g&&N(l),Z[b].d(),d=!1,B()}}}function cl(s){let e,l,t,n,r,c;const o=[el,xt],i=[];function a(u,f){return u[5]?1:0}return l=a(s),t=i[l]=o[l](s),{c(){e=I("div"),t.c(),k(e,"class","transition-height flex w-full flex-col overflow-hidden px-1 py-1"),X(e,"h-[22.8rem]",!s[8]),X(e,"h-[34rem]",s[8])},m(u,f){L(u,e,f),i[l].m(e,null),c=!0},p(u,f){let b=l;l=a(u),l===b?i[l].p(u,f):(K(),$(i[b],1,1,()=>{i[b]=null}),O(),t=i[l],t?t.p(u,f):(t=i[l]=o[l](u),t.c()),h(t,1),t.m(e,null)),(!c||f[0]&256)&&X(e,"h-[22.8rem]",!u[8]),(!c||f[0]&256)&&X(e,"h-[34rem]",u[8])},i(u){c||(h(t),u&&Ie(()=>{c&&(r&&r.end(1),n=Le(e,pe,{duration:250,delay:250}),n.start())}),c=!0)},o(u){$(t),n&&n.invalidate(),u&&(r=Ne(e,pe,{duration:250})),c=!1},d(u){u&&N(e),i[l].d(),u&&r&&r.end()}}}function al(s,e,l){let t,n,r,c,o,i,a;const{categories:u,customSources:f,selectedSource:b,selectedSourceItems:_,selectedSources:m,sources:p}=se("stores");J(s,u,w=>l(7,i=w)),J(s,f,w=>l(3,r=w)),J(s,b,w=>l(28,c=w)),J(s,m,w=>l(2,n=w)),J(s,p,w=>l(4,o=w));let y="",C="All Sources",d=!1;const B=se("alwaysAppView");J(s,B,w=>l(8,a=w)),ft(()=>{be.get("/apps/news/sources").then(w=>{G(p,o=w.data,o),G(u,i=[...new Set(w.data.map(H=>H.category))],i)})});const R=w=>{w.custom?G(f,r=r.filter(H=>H.id!==w.id),r):G(m,n=n.filter(H=>H.id!==w.id),n),_.update(H=>(delete H[w.id],H)),(c==null?void 0:c.id)===w.id&&b.set(null)},A=w=>{w.custom?(G(f,r=[w,...r],r),_.update(H=>(H[w.id]=[],H))):(G(m,n=[w,...n],n),_.update(H=>(H[w.id]=[],H)))},U=(w,H)=>H.id===w.id,Z=(w,H)=>H.id===w.id;function j(w){y=w,l(0,y)}const V=()=>{l(5,d=!0)},g=()=>l(1,C="Following"),S=()=>l(1,C="All Sources"),z=w=>l(1,C=w),P=(w,H)=>{H.stopPropagation(),R(w)},le=(w,H)=>{H.stopPropagation(),A(w)},T=w=>{n.find(H=>H.id===w.id)||r.find(H=>H.id===w.id)?R(w):A(w)},W=()=>{l(5,d=!1)};return s.$$.update=()=>{s.$$.dirty[0]&31&&l(6,t=C==="Following"?[...r.map(w=>({...w,custom:!0})),...n.map(w=>({...w,custom:!1}))].filter(w=>w.name.toLowerCase().includes(y.toLowerCase())):o.filter(w=>C==="All Sources"?w.name.toLowerCase().includes(y.toLowerCase()):w.name.toLowerCase().includes(y.toLowerCase())&&w.category===C))},[y,C,n,r,o,d,t,i,a,u,f,b,m,p,B,R,A,U,Z,j,V,g,S,z,P,le,T,W]}class fl extends fe{constructor(e){super(),ue(this,e,al,cl,oe,{},null,[-1,-1])}}function ul(s){var B,R;let e,l,t,n,r,c,o,i=((R=(B=s[0])==null?void 0:B.item)==null?void 0:R.title)+"",a,u,f,b=s[1]&&!s[1].includes("-")?s[1]+" • ":"",_,m,p=s[0].source.name+"",y,C,d;return{c(){e=I("img"),r=E(),c=I("div"),o=I("span"),a=Q(i),u=E(),f=I("span"),_=Q(b),m=E(),y=Q(p),ne(e.src,l=s[0].source.icon)||k(e,"src",l),k(e,"class","h-8 w-8"),k(e,"alt",t=s[0].source.name),k(o,"class","max-line-2 text-start leading-6"),k(f,"class","max-line-1 mt-0.5 self-start text-start text-xs"),k(c,"class","flex w-full flex-col items-start justify-start")},m(A,U){L(A,e,U),L(A,r,U),L(A,c,U),v(c,o),v(o,a),v(c,u),v(c,f),v(f,_),v(f,m),v(f,y),C||(d=we(n=dt.call(null,e,s[0].source.name)),C=!0)},p(A,U){var Z,j;U&1&&!ne(e.src,l=A[0].source.icon)&&k(e,"src",l),U&1&&t!==(t=A[0].source.name)&&k(e,"alt",t),n&&gt(n.update)&&U&1&&n.update.call(null,A[0].source.name),U&1&&i!==(i=((j=(Z=A[0])==null?void 0:Z.item)==null?void 0:j.title)+"")&&ee(a,i),U&2&&b!==(b=A[1]&&!A[1].includes("-")?A[1]+" • ":"")&&ee(_,b),U&1&&p!==(p=A[0].source.name+"")&&ee(y,p)},d(A){A&&N(e),A&&N(r),A&&N(c),C=!1,d()}}}function _l(s){let e,l;return e=new ht({props:{class:"flex flex-row items-center gap-4 px-3.5 py-2.5",$$slots:{default:[ul]},$$scope:{ctx:s}}}),e.$on("click",s[4]),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},p(t,[n]){const r={};n&35&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function ml(s,e,l){let t,n;const{selectedItem:r}=se("stores");J(s,r,i=>l(2,n=i));let{item:c}=e;const o=()=>G(r,n=c,n);return s.$$set=i=>{"item"in i&&l(0,c=i.item)},s.$$.update=()=>{var i;s.$$.dirty&1&&l(1,t=ve((i=c==null?void 0:c.item)==null?void 0:i.date))},[c,t,n,r,o]}class bt extends fe{constructor(e){super(),ue(this,e,ml,_l,oe,{item:0})}}const{window:pl}=Ct;function Je(s){var H,me,x,de,je,Te;let e,l,t,n,r=s[0].source.name+"",c,o,i,a,u,f,b=s[0].item.title+"",_,m,p,y,C=s[0].item.author?`By ${s[0].item.author}, `:"",d,B,R=ve(s[0].item.date)+"",A,U,Z,j,V,g,S,z,P,le,T;l=new ie({props:{icon:Lt,tooltip:"Go back"}}),l.$on("click",s[5]);let W=((je=(de=(x=(me=(H=s[0])==null?void 0:H.item)==null?void 0:me.thumbnail)==null?void 0:x[0])==null?void 0:de.$)==null?void 0:je.url)&&Ke(s),w=((Te=s[0])==null?void 0:Te.item.content)&&Oe(s);return g=new $e({props:{class:"flex-center",$$slots:{default:[dl]},$$scope:{ctx:s}}}),g.$on("click",s[6]),z=new ie({props:{icon:Nt,class:"ml-3 text-xl",tooltip:"Copy link"}}),z.$on("click",s[7]),{c(){e=I("div"),M(l.$$.fragment),t=E(),n=I("span"),c=Q(r),o=E(),i=I("div"),a=I("div"),u=I("div"),f=I("span"),_=Q(b),m=E(),p=I("div"),y=I("span"),d=Q(C),B=E(),A=Q(R),U=E(),W&&W.c(),Z=E(),w&&w.c(),j=E(),V=I("div"),M(g.$$.fragment),S=E(),M(z.$$.fragment),k(n,"class",""),k(e,"class","mb-3 flex items-center justify-start gap-3"),k(f,"class","mb-1 mt-1 text-[1.05rem] font-semibold leading-6"),k(p,"class","mb-4 mt-1 flex items-center justify-between pr-1 text-sm"),k(u,"class","mb-auto flex flex-col"),k(V,"class","flex-center mt-4 flex w-full self-end"),k(a,"class","flex h-full flex-col"),he(i,"flex-grow","1")},m(q,te){L(q,e,te),D(l,e,null),v(e,t),v(e,n),v(n,c),L(q,o,te),L(q,i,te),v(i,a),v(a,u),v(u,f),v(f,_),v(u,m),v(u,p),v(p,y),v(y,d),v(y,B),v(y,A),v(u,U),W&&W.m(u,null),v(u,Z),w&&w.m(u,null),v(a,j),v(a,V),D(g,V,null),v(V,S),D(z,V,null),P=!0,le||(T=we(at.call(null,i)),le=!0)},p(q,te){var Ve,Pe,Ee,Me,De,Fe;(!P||te&1)&&r!==(r=q[0].source.name+"")&&ee(c,r),(!P||te&1)&&b!==(b=q[0].item.title+"")&&ee(_,b),(!P||te&1)&&C!==(C=q[0].item.author?`By ${q[0].item.author}, `:"")&&ee(d,C),(!P||te&1)&&R!==(R=ve(q[0].item.date)+"")&&ee(A,R),(De=(Me=(Ee=(Pe=(Ve=q[0])==null?void 0:Ve.item)==null?void 0:Pe.thumbnail)==null?void 0:Ee[0])==null?void 0:Me.$)!=null&&De.url?W?W.p(q,te):(W=Ke(q),W.c(),W.m(u,Z)):W&&(W.d(1),W=null),(Fe=q[0])!=null&&Fe.item.content?w?w.p(q,te):(w=Oe(q),w.c(),w.m(u,null)):w&&(w.d(1),w=null);const Re={};te&257&&(Re.$$scope={dirty:te,ctx:q}),g.$set(Re)},i(q){P||(h(l.$$.fragment,q),h(g.$$.fragment,q),h(z.$$.fragment,q),P=!0)},o(q){$(l.$$.fragment,q),$(g.$$.fragment,q),$(z.$$.fragment,q),P=!1},d(q){q&&N(e),F(l),q&&N(o),q&&N(i),W&&W.d(),w&&w.d(),F(g),F(z),le=!1,T()}}}function Ke(s){let e,l;return{c(){var t,n,r,c,o;e=I("img"),ne(e.src,l=(o=(c=(r=(n=(t=s[0])==null?void 0:t.item)==null?void 0:n.thumbnail)==null?void 0:r[0])==null?void 0:c.$)==null?void 0:o.url)||k(e,"src",l),k(e,"class","curved mb-3 h-44 w-full object-cover"),k(e,"alt","Article cover")},m(t,n){L(t,e,n)},p(t,n){var r,c,o,i,a;n&1&&!ne(e.src,l=(a=(i=(o=(c=(r=t[0])==null?void 0:r.item)==null?void 0:c.thumbnail)==null?void 0:o[0])==null?void 0:i.$)==null?void 0:a.url)&&k(e,"src",l)},d(t){t&&N(e)}}}function Oe(s){let e,l=s[0].item.content+"";return{c(){e=I("p"),k(e,"class","news-reader-section text-base")},m(t,n){L(t,e,n),e.innerHTML=l},p(t,n){n&1&&l!==(l=t[0].item.content+"")&&(e.innerHTML=l)},d(t){t&&N(e)}}}function dl(s){let e,l=s[0].source.name+"",t,n,r,c;return r=new _e({props:{icon:Bt,class:"ml-2"}}),{c(){e=Q("Read more on "),t=Q(l),n=E(),M(r.$$.fragment)},m(o,i){L(o,e,i),L(o,t,i),L(o,n,i),D(r,o,i),c=!0},p(o,i){(!c||i&1)&&l!==(l=o[0].source.name+"")&&ee(t,l)},i(o){c||(h(r.$$.fragment,o),c=!0)},o(o){$(r.$$.fragment,o),c=!1},d(o){o&&N(e),o&&N(t),o&&N(n),F(r,o)}}}function Ye(s){let e,l,t=s[0]&&Je(s);return{c(){t&&t.c(),e=re()},m(n,r){t&&t.m(n,r),L(n,e,r),l=!0},p(n,r){n[0]?t?(t.p(n,r),r&1&&h(t,1)):(t=Je(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(K(),$(t,1,1,()=>{t=null}),O())},i(n){l||(h(t),l=!0)},o(n){$(t),l=!1},d(n){t&&t.d(n),n&&N(e)}}}function gl(s){let e,l,t=s[0],n,r,c,o,i,a=Ye(s);return{c(){e=I("div"),l=I("div"),a.c(),k(l,"class","flex h-full flex-col scroll-smooth"),k(e,"class","reader transition-height flex w-full flex-col overflow-hidden px-3 py-2"),X(e,"h-[22.8rem]",!s[1]),X(e,"h-[34rem]",s[1])},m(u,f){L(u,e,f),v(e,l),a.m(l,null),c=!0,o||(i=ce(pl,"keydown",s[4]),o=!0)},p(u,[f]){f&1&&oe(t,t=u[0])?(K(),$(a,1,1,Y),O(),a=Ye(u),a.c(),h(a,1),a.m(l,null)):a.p(u,f),(!c||f&2)&&X(e,"h-[22.8rem]",!u[1]),(!c||f&2)&&X(e,"h-[34rem]",u[1])},i(u){c||(h(a),u&&Ie(()=>{c&&(r&&r.end(1),n=Le(e,pe,{duration:200,delay:200}),n.start())}),c=!0)},o(u){$(a),n&&n.invalidate(),u&&(r=Ne(e,pe,{duration:200})),c=!1},d(u){u&&N(e),a.d(u),u&&r&&r.end(),o=!1,i()}}}function hl(s,e,l){let t,n;const{selectedItem:r}=se("stores");J(s,r,f=>l(0,t=f));const c=se("alwaysAppView");return J(s,c,f=>l(1,n=f)),[t,n,r,c,f=>{f.key==="Escape"&&G(r,t=null,t)},()=>G(r,t=null,t),()=>{window.open(t==null?void 0:t.item.link,"_blank")},()=>{var f;navigator.clipboard.writeText(((f=t==null?void 0:t.item)==null?void 0:f.link)||""),It("Link copied to clipboard","success")}]}class bl extends fe{constructor(e){super(),ue(this,e,hl,gl,oe,{})}}function Qe(s,e,l){const t=s.slice();return t[24]=e[l],t}function Xe(s){let e,l,t;return l=new ie({props:{tooltip:"Show all",icon:s[0]?ae:Ue,class:"mr-2 ml-0.5 shrink-0 text-2xl "+(s[0]?"animate-spin":""),styles:!s[6]&&!s[7]&&"opacity: 1"}}),l.$on("click",s[18]),l.$on("click",s[19]),{c(){e=I("div"),M(l.$$.fragment),k(e,"class","contents shrink-0")},m(n,r){L(n,e,r),D(l,e,null),t=!0},p(n,r){const c={};r&1&&(c.icon=n[0]?ae:Ue),r&1&&(c.class="mr-2 ml-0.5 shrink-0 text-2xl "+(n[0]?"animate-spin":"")),r&192&&(c.styles=!n[6]&&!n[7]&&"opacity: 1"),l.$set(c)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&N(e),F(l)}}}function xe(s,e){let l,t,n,r,c,o,i,a=Y,u,f;function b(){return e[21](e[24])}return{key:s,first:null,c(){var _;l=I("button"),t=I("img"),c=E(),ne(t.src,n=e[24].icon)||k(t,"src",n),k(t,"class","h-7 w-7 object-cover"),k(t,"alt",r=e[24].name),k(l,"class","shrink-0 overflow-hidden opacity-60 transition"),X(l,"opacity-[1]",e[24].id===((_=e[6])==null?void 0:_.id)),this.first=l},m(_,m){L(_,l,m),v(l,t),v(l,c),u||(f=[we(o=dt.call(null,l,e[24].name)),ce(l,"click",e[20]),ce(l,"click",b)],u=!0)},p(_,m){var p;e=_,m&32&&!ne(t.src,n=e[24].icon)&&k(t,"src",n),m&32&&r!==(r=e[24].name)&&k(t,"alt",r),o&&gt(o.update)&&m&32&&o.update.call(null,e[24].name),m&96&&X(l,"opacity-[1]",e[24].id===((p=e[6])==null?void 0:p.id))},r(){i=l.getBoundingClientRect()},f(){_t(l),a()},a(){a(),a=mt(l,i,pt,{duration:250})},d(_){_&&N(l),u=!1,ut(f)}}}function et(s){let e,l;return e=new ie({props:{icon:Rt,class:"shrink-0 "+(s[3]?"rotate-180":"")+" transition",tooltip:"Show more"}}),e.$on("click",s[23]),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},p(t,n){const r={};n&8&&(r.class="shrink-0 "+(t[3]?"rotate-180":"")+" transition"),e.$set(r)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function kl(s){let e,l,t,n,r,c,o=[],i=new Map,a,u;t=new ie({props:{icon:jt,styles:(!s[6]&&s[7]||s[1].length===0)&&"opacity: 1",class:"ml-1 mr-1 shrink-0 text-[1.7rem]",tooltip:"Add sources"}}),t.$on("click",s[16]),t.$on("click",s[17]);let f=s[5].length>0&&Xe(s),b=s[5];const _=p=>p[24].id;for(let p=0;p<b.length;p+=1){let y=Qe(s,b,p),C=_(y);i.set(C,o[p]=xe(C,y))}let m=s[5].length>5&&et(s);return{c(){e=I("div"),l=I("div"),M(t.$$.fragment),n=E(),f&&f.c(),r=E(),c=I("div");for(let p=0;p<o.length;p+=1)o[p].c();a=E(),m&&m.c(),k(l,"class","shrink-0"),k(c,"class","flex w-full items-center justify-start gap-5 overflow-hidden"),k(e,"class","flex w-full items-center justify-start gap-4 px-3")},m(p,y){L(p,e,y),v(e,l),D(t,l,null),v(e,n),f&&f.m(e,null),v(e,r),v(e,c);for(let C=0;C<o.length;C+=1)o[C]&&o[C].m(c,null);s[22](c),v(e,a),m&&m.m(e,null),u=!0},p(p,[y]){const C={};if(y&194&&(C.styles=(!p[6]&&p[7]||p[1].length===0)&&"opacity: 1"),t.$set(C),p[5].length>0?f?(f.p(p,y),y&32&&h(f,1)):(f=Xe(p),f.c(),h(f,1),f.m(e,r)):f&&(K(),$(f,1,1,()=>{f=null}),O()),y&352){b=p[5];for(let d=0;d<o.length;d+=1)o[d].r();o=Be(o,y,_,1,p,b,i,c,Tt,xe,null,Qe);for(let d=0;d<o.length;d+=1)o[d].a()}p[5].length>5?m?(m.p(p,y),y&32&&h(m,1)):(m=et(p),m.c(),h(m,1),m.m(e,null)):m&&(K(),$(m,1,1,()=>{m=null}),O())},i(p){u||(h(t.$$.fragment,p),h(f),h(m),u=!0)},o(p){$(t.$$.fragment,p),$(f),$(m),u=!1},d(p){p&&N(e),F(t),f&&f.d();for(let y=0;y<o.length;y+=1)o[y].d();s[22](null),m&&m.d()}}}function $l(s,e,l){let t,n,r,c,o,i;const{addSources:a,customSources:u,selectedItem:f,selectedSource:b,selectedSources:_}=se("stores");J(s,a,S=>l(7,o=S)),J(s,u,S=>l(15,r=S)),J(s,f,S=>l(8,i=S)),J(s,b,S=>l(6,c=S)),J(s,_,S=>l(1,n=S));let m=0,p=!1,{loadingSources:y=!1}=e,C;const d=ct(),B=()=>d("addSources"),R=()=>G(f,i=null,i),A=()=>{d("showAll"),G(b,c=null,c)},U=()=>G(f,i=null,i),Z=()=>G(f,i=null,i),j=S=>G(b,c=S,c);function V(S){ke[S?"unshift":"push"](()=>{C=S,l(4,C)})}const g=()=>{p?(C.scrollBy({left:-m,behavior:"smooth"}),l(2,m=0)):(C.scrollBy({left:200,behavior:"smooth"}),l(2,m+=200)),setTimeout(()=>{C.scrollWidth-C.scrollLeft<=C.clientWidth+5?l(3,p=!0):l(3,p=!1)},250)};return s.$$set=S=>{"loadingSources"in S&&l(0,y=S.loadingSources)},s.$$.update=()=>{s.$$.dirty&32770&&l(5,t=[...r,...n])},[y,n,m,p,C,t,c,o,i,a,u,f,b,_,d,r,B,R,A,U,Z,j,V,g]}class wl extends fe{constructor(e){super(),ue(this,e,$l,kl,oe,{loadingSources:0})}}function tt(s,e,l){const t=s.slice();return t[25]=e[l],t}function lt(s,e,l){const t=s.slice();return t[25]=e[l],t}function vl(s){let e,l,t,n,r,c,o,i,a;const u=[Cl,Al,Sl],f=[];function b(_,m){return m&160&&(l=null),_[1]?_[2]&&!_[4][_[1].id]?1:(l==null&&(l=!!(Array.isArray(_[5])&&!_[7])),l?2:-1):0}return~(t=b(s,-1))&&(n=f[t]=u[t](s)),{c(){e=I("div"),n&&n.c(),k(e,"class","overflow-overlay scrollbar transition-height flex w-full flex-col gap-1"),X(e,"hidden",s[7]),X(e,"h-[22.8rem]",!s[8]),X(e,"h-[34rem]",s[8])},m(_,m){L(_,e,m),~t&&f[t].m(e,null),o=!0,i||(a=ce(e,"scroll",s[20]),i=!0)},p(_,m){let p=t;t=b(_,m),t===p?~t&&f[t].p(_,m):(n&&(K(),$(f[p],1,1,()=>{f[p]=null}),O()),~t?(n=f[t],n?n.p(_,m):(n=f[t]=u[t](_),n.c()),h(n,1),n.m(e,null)):n=null),(!o||m&128)&&X(e,"hidden",_[7]),(!o||m&256)&&X(e,"h-[22.8rem]",!_[8]),(!o||m&256)&&X(e,"h-[34rem]",_[8])},i(_){o||(h(n),_&&Ie(()=>{o&&(c&&c.end(1),r=Le(e,pe,{duration:200,delay:200}),r.start())}),o=!0)},o(_){$(n),r&&r.invalidate(),_&&(c=Ne(e,pe,{duration:200})),o=!1},d(_){_&&N(e),~t&&f[t].d(),_&&c&&c.end(),i=!1,a()}}}function yl(s){let e,l;return e=new fl({}),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},p:Y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Sl(s){let e,l,t=s[4][s[1].id],n=[];for(let c=0;c<t.length;c+=1)n[c]=nt(tt(s,t,c));const r=c=>$(n[c],1,1,()=>{n[c]=null});return{c(){for(let c=0;c<n.length;c+=1)n[c].c();e=re()},m(c,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(c,o);L(c,e,o),l=!0},p(c,o){if(o&18){t=c[4][c[1].id];let i;for(i=0;i<t.length;i+=1){const a=tt(c,t,i);n[i]?(n[i].p(a,o),h(n[i],1)):(n[i]=nt(a),n[i].c(),h(n[i],1),n[i].m(e.parentNode,e))}for(K(),i=t.length;i<n.length;i+=1)r(i);O()}},i(c){if(!l){for(let o=0;o<t.length;o+=1)h(n[o]);l=!0}},o(c){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)$(n[o]);l=!1},d(c){Ce(n,c),c&&N(e)}}}function Al(s){let e,l,t;return l=new _e({props:{icon:ae,class:"animate-spin text-4xl"}}),{c(){e=I("div"),M(l.$$.fragment),k(e,"class","flex h-full w-full flex-col items-center justify-center")},m(n,r){L(n,e,r),D(l,e,null),t=!0},p:Y,i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&N(e),F(l)}}}function Cl(s){let e,l,t,n;const r=[Ll,Il],c=[];function o(i,a){return i[2]&&i[5].length===0?0:1}return e=o(s),l=c[e]=r[e](s),{c(){l.c(),t=re()},m(i,a){c[e].m(i,a),L(i,t,a),n=!0},p(i,a){let u=e;e=o(i),e===u?c[e].p(i,a):(K(),$(c[u],1,1,()=>{c[u]=null}),O(),l=c[e],l?l.p(i,a):(l=c[e]=r[e](i),l.c()),h(l,1),l.m(t.parentNode,t))},i(i){n||(h(l),n=!0)},o(i){$(l),n=!1},d(i){c[e].d(i),i&&N(t)}}}function nt(s){let e,l;return e=new bt({props:{item:s[25]}}),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},p(t,n){const r={};n&18&&(r.item=t[25]),e.$set(r)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Il(s){let e=Array.isArray(s[5]),l,t,n,r,c,o=e&&rt(s);const i=[Bl,Nl],a=[];function u(f,b){return f[2]?0:f[3]===null?1:-1}return~(t=u(s))&&(n=a[t]=i[t](s)),{c(){o&&o.c(),l=E(),n&&n.c(),r=re()},m(f,b){o&&o.m(f,b),L(f,l,b),~t&&a[t].m(f,b),L(f,r,b),c=!0},p(f,b){b&32&&(e=Array.isArray(f[5])),e?o?(o.p(f,b),b&32&&h(o,1)):(o=rt(f),o.c(),h(o,1),o.m(l.parentNode,l)):o&&(K(),$(o,1,1,()=>{o=null}),O());let _=t;t=u(f),t===_?~t&&a[t].p(f,b):(n&&(K(),$(a[_],1,1,()=>{a[_]=null}),O()),~t?(n=a[t],n?n.p(f,b):(n=a[t]=i[t](f),n.c()),h(n,1),n.m(r.parentNode,r)):n=null)},i(f){c||(h(o),h(n),c=!0)},o(f){$(o),$(n),c=!1},d(f){o&&o.d(f),f&&N(l),~t&&a[t].d(f),f&&N(r)}}}function Ll(s){let e,l,t;return l=new _e({props:{icon:ae,class:"animate-spin text-4xl"}}),{c(){e=I("div"),M(l.$$.fragment),k(e,"class","flex h-full w-full flex-col items-center justify-center")},m(n,r){L(n,e,r),D(l,e,null),t=!0},p:Y,i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){$(l.$$.fragment,n),t=!1},d(n){n&&N(e),F(l)}}}function rt(s){let e=[],l=new Map,t,n,r=s[5];const c=o=>Math.random();for(let o=0;o<r.length;o+=1){let i=lt(s,r,o),a=c();l.set(a,e[o]=it(a,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=re()},m(o,i){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,i);L(o,t,i),n=!0},p(o,i){i&32&&(r=o[5],K(),e=Be(e,i,c,1,o,r,l,t.parentNode,Vt,it,t,lt),O())},i(o){if(!n){for(let i=0;i<r.length;i+=1)h(e[i]);n=!0}},o(o){for(let i=0;i<e.length;i+=1)$(e[i]);n=!1},d(o){for(let i=0;i<e.length;i+=1)e[i].d(o);o&&N(t)}}}function it(s,e){let l,t,n;return t=new bt({props:{item:e[25]}}),{key:s,first:null,c(){l=re(),M(t.$$.fragment),this.first=l},m(r,c){L(r,l,c),D(t,r,c),n=!0},p(r,c){e=r;const o={};c&32&&(o.item=e[25]),t.$set(o)},i(r){n||(h(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&N(l),F(t,r)}}}function Nl(s){let e;return{c(){e=I("span"),e.textContent="That's all folks!",k(e,"class","flex-center my-2 gap-3")},m(l,t){L(l,e,t)},p:Y,i:Y,o:Y,d(l){l&&N(e)}}}function Bl(s){let e,l,t,n;return t=new _e({props:{icon:ae,class:"animate-spin"}}),{c(){e=I("span"),l=Q("Loading more "),M(t.$$.fragment),k(e,"class","flex-center my-2 gap-3")},m(r,c){L(r,e,c),v(e,l),D(t,e,null),n=!0},p:Y,i(r){n||(h(t.$$.fragment,r),n=!0)},o(r){$(t.$$.fragment,r),n=!1},d(r){r&&N(e),F(t)}}}function st(s){let e=s[7],l,t,n=ot();return{c(){n.c(),l=re()},m(r,c){n.m(r,c),L(r,l,c),t=!0},p(r,c){c&128&&oe(e,e=r[7])?(K(),$(n,1,1,Y),O(),n=ot(),n.c(),h(n,1),n.m(l.parentNode,l)):n.p(r,c)},i(r){t||(h(n),t=!0)},o(r){$(n),t=!1},d(r){r&&N(l),n.d(r)}}}function ot(s){let e,l;return e=new bl({}),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},p:Y,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function jl(s){let e,l,t,n,r,c,o,i,a;t=new wl({props:{loadingSources:s[2]}}),t.$on("addSources",s[18]),t.$on("showAll",s[19]);const u=[yl,vl],f=[];function b(m,p){return(m[6]||m[0].length===0)&&!m[1]?0:1}c=b(s),o=f[c]=u[c](s);let _=s[7]&&st(s);return{c(){e=I("div"),l=I("div"),M(t.$$.fragment),n=E(),r=I("div"),o.c(),i=E(),_&&_.c(),k(r,"class","transition-container mt-1 w-full"),k(l,"class","mt-3 flex w-full flex-col items-start gap-3"),k(e,"class","flex h-max w-[24rem] flex-row px-1 py-1")},m(m,p){L(m,e,p),v(e,l),D(t,l,null),v(l,n),v(l,r),f[c].m(r,null),v(r,i),_&&_.m(r,null),a=!0},p(m,[p]){const y={};p&4&&(y.loadingSources=m[2]),t.$set(y);let C=c;c=b(m),c===C?f[c].p(m,p):(K(),$(f[C],1,1,()=>{f[C]=null}),O(),o=f[c],o?o.p(m,p):(o=f[c]=u[c](m),o.c()),h(o,1),o.m(r,i)),m[7]?_?(_.p(m,p),p&128&&h(_,1)):(_=st(m),_.c(),h(_,1),_.m(r,null)):_&&(K(),$(_,1,1,()=>{_=null}),O())},i(m){a||(h(t.$$.fragment,m),h(o),h(_),a=!0)},o(m){$(t.$$.fragment,m),$(o),$(_),a=!1},d(m){m&&N(e),F(t),f[c].d(),_&&_.d()}}}function Tl(s,e,l){let t,n,r,c,o,i,a,u;const{addSources:f,customSources:b,items:_,selectedItem:m,selectedSource:p,selectedSourceItems:y,selectedSources:C}=se("stores");J(s,f,g=>l(6,i=g)),J(s,b,g=>l(23,c=g)),J(s,_,g=>l(5,o=g)),J(s,m,g=>l(7,a=g)),J(s,p,g=>l(1,n=g)),J(s,y,g=>l(4,r=g)),J(s,C,g=>l(0,t=g));let d=!1,B=0;ft(()=>{A()});const R=se("alwaysAppView");J(s,R,g=>l(8,u=g));const A=async()=>{B!==null&&(l(2,d=!0),be.post("/apps/news/fetch",{ids:t.map(g=>g.id),customSources:c,page:B}).then(g=>{var S,z,P;(S=g.data)!=null&&S.items?B===0?G(_,o=[...(z=g.data)==null?void 0:z.items],o):G(_,o=[...o,...(P=g.data)==null?void 0:P.items],o):G(_,o=[],o),g.data.pagination.current,g.data.pagination.pages,l(3,B=g.data.pagination.next),l(2,d=!1)}).catch(()=>{l(2,d=!1)}))},U=async g=>{g&&(l(2,d=!0),n!=null&&n.id&&be.post("/apps/news/fetch",{ids:c.find(S=>g.id===(S==null?void 0:S.id))?[]:[g.id],customSources:c.find(S=>g.id===(S==null?void 0:S.id))?[g]:[]}).then(S=>{var z;g!=null&&g.id&&((z=S.data)!=null&&z.items?G(y,r={...r,[g.id]:S.data.items},r):G(y,r={...r,[g.id]:[]},r),l(2,d=!1))}).catch(()=>{l(2,d=!1),G(y,r={...r,[g.id]:[]},r)}))},Z=()=>{G(p,n=null,n),G(f,i=!0,i)},j=()=>{G(p,n=null,n),G(f,i=!1,i)},V=g=>{if(g.target&&g.target.scrollHeight<=g.target.scrollTop+g.target.clientHeight){if(d)return;A()}};return s.$$.update=()=>{s.$$.dirty&2&&U(n),s.$$.dirty&1&&t&&(l(3,B=0),A())},[t,n,d,B,r,o,i,a,u,f,b,_,m,p,y,C,R,A,Z,j,V]}class Rl extends fe{constructor(e){super(),ue(this,e,Tl,jl,oe,{})}}function Vl(s){let e,l;return e=new Ft({}),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Pl(s){let e,l;return e=new Rl({}),{c(){M(e.$$.fragment)},m(t,n){D(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function El(s){let e,l,t,n;const r=[Pl,Vl],c=[];function o(i,a){return i[0]?0:1}return e=o(s),l=c[e]=r[e](s),{c(){l.c(),t=re()},m(i,a){c[e].m(i,a),L(i,t,a),n=!0},p(i,[a]){let u=e;e=o(i),e!==u&&(K(),$(c[u],1,1,()=>{c[u]=null}),O(),l=c[e],l||(l=c[e]=r[e](i),l.c()),h(l,1),l.m(t.parentNode,t))},i(i){n||(h(l),n=!0)},o(i){$(l),n=!1},d(i){c[e].d(i),i&&N(t)}}}function Ml(s,e,l){let t,{config:n}=e;const r={path:"user_data/{uid}/profiles/{currentProfile}/apps/"+n.id,currentProfile:Pt,uid:Et},{create:c,createPersist:o,isFetched:i,start:a}=Dt(r);J(s,i,B=>l(0,t=B));const u=c("selectedSources",[]),f=ge(null),b=ge(null),_=o("allFollowingItems",[]),m=o("selectedSourceItems",{}),p=c("customSources",[]),y=ge(!1),C=ge([]),d=ge([]);return a(),Mt("stores",{selectedSources:u,selectedItem:f,selectedSource:b,items:_,selectedSourceItems:m,customSources:p,addSources:y,sources:C,categories:d}),s.$$set=B=>{"config"in B&&l(2,n=B.config)},[t,i,n]}class Ul extends fe{constructor(e){super(),ue(this,e,Ml,El,oe,{config:2})}}export{Ul as default};
