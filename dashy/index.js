import{l as ge,o as ye,p as Y,S as he,i as be,s as ke,q as C,r as y,u as S,v as Z,a as $,x as U,t as g,y as pe,z as Ie,B as se,C as Se,D as E,E as $e,b as ne,F as nt,G as Be,H as zt,I as Ce,J as Te,c as H,K as Q,m as T,L as h,n as te,d as N,M as Vt,N as At,O as fe,P as ue,Q as Ye,R as De,T as Xe,U as Re,V as j,W as de,X as lt,Y as Ht,Z as me,_ as Me,$ as xe,a0 as Tt,a1 as _e,a2 as Fe,a3 as rt,a4 as Bt,a5 as ve,a6 as Rt,a7 as Le,a8 as qe,a9 as Ze,aa as Ue,ab as et,ac as Ft,ad as Nt,ae as We,af as Ne,ag as Pe,ah as tt,ai as Pt,aj as jt,ak as ze,al as qt,am as Wt,an as Qe,ao as Jt,ap as Kt,aq as it,ar as Qt,as as Xt,at as je,au as Zt,av as Ut,aw as Ke,ax as en,e as tn,ay as nn,az as st,aA as ln,aB as rn}from"./overlayscrollbars.js";import{D as xt}from"./DatePicker.js";import{T as Ve}from"./TimePicker.js";import{C as sn}from"./Card.js";import{C as an}from"./Chip.js";import{I as on}from"./IntegrationItem.js";const we=async({updatingEvents:s,calendarConfig:e,isGoogleCalendarIntegrated:t,google_calendar_events:n,widgetId:l})=>{var r,i;try{s.set(!0);const o=(i=(r=ge(e))==null?void 0:r.google_calendar_ids)==null?void 0:i.map(_=>_.id),a=ge(e).unselected_calenders,c=o==null?void 0:o.filter(_=>!a.includes(_)),u=await new Promise(_=>{o&&o.length>0&&_(c),(!o||o.length===0)&&ye.get("/integration/google_calendar/get_all_calendars",{params:{widgetId:l==="calendar"?"":l}}).then(m=>{if(m){e.update(p=>(p.google_calendar_ids=m.data.calendars,p));const k=m.data.calendars.map(p=>p.id);_(k)}}).catch(()=>{_([])})});if(!u||u.length===0){s.set(!1);return}const d=await ye.get("/integration/google_calendar/all_events",{params:{calendars:u,days:ge(e).time_period,onlyMeetings:!1,startDate:Y().startOf("day").toISOString(),widgetId:l==="calendar"?"":l}});if(!d)return s.set(!1),null;if(d){const _=d.data.events.map(m=>{m!=null&&m.event_url&&(m.event_url=m.event_url+`&authuser=${ge(t)}`),m!=null&&m.meeting_url&&(m.meeting_url=m.meeting_url+`?authuser=${ge(t)}`);let k=ge(n).find(p=>p.id===m.id);return k?(k={...k,...m},k):m});n.set(_),s.set(!1)}}catch{s.set(!1)}},cn=async(s,{updatingEvents:e,calendarConfig:t,isGoogleCalendarIntegrated:n,google_calendar_events:l,widgetId:r})=>{try{const i=Y(s).startOf("day").toISOString(),o=Y(s).endOf("day").toISOString();e.set(!0);const a=ge(t).google_calendar_ids.map(d=>d.id),c=ge(t).unselected_calenders,f=a==null?void 0:a.filter(d=>!c.includes(d));if(!a||a.length===0){const d=await ye.get("/integration/google_calendar/all_events",{params:{widgetId:r==="calendar"?"":r}}).catch(console.log);if(!d)return null;d&&(t.update(_=>(_.google_calendar_ids=d.data,_)),we({updatingEvents:e,calendarConfig:t,isGoogleCalendarIntegrated:n,google_calendar_events:l,widgetId:r}))}if(!f||f.length===0)return null;const u=await ye.get("/integration/google_calendar/get_events_day",{params:{calendars:f,start:i,end:o,widgetId:r==="calendar"?"":r}});if(!u)return null;if(u)return e.set(!1),u.data.events}catch(i){console.log(i),e.set(!1)}},fn=async(s,e,{updatingEvents:t,calendarConfig:n,isGoogleCalendarIntegrated:l,google_calendar_events:r,widgetId:i})=>{try{t.set(!0);const o=ge(n).google_calendar_ids.map(u=>u.id),a=ge(n).unselected_calenders,c=o==null?void 0:o.filter(u=>!a.includes(u));if(!o||o.length===0){const u=await ye.get("/integration/google_calendar/get_all_calendars",{params:{widgetId:i==="calendar"?"":i}}).catch(console.log);if(!u)return null;u&&(n.update(d=>(d.google_calendar_ids=u.data.calendars,d)),we({updatingEvents:t,calendarConfig:n,isGoogleCalendarIntegrated:l,google_calendar_events:r,widgetId:i}))}if(!c||c.length===0)return null;const f=await ye.get("/integration/google_calendar/get_events_day",{params:{calendars:c,onlyMeetings:!1,start:s,end:e,widgetId:i==="calendar"?"":i}});if(!f)return null;if(f)return t.set(!1),f.data.events}catch(o){console.log(o),t.set(!1)}};function un(s){let e,t,n,l,r,i;return t=new Ce({props:{icon:Te,class:"animate-spin text-lg"}}),{c(){e=C("div"),H(t.$$.fragment),n=Q(`
      Adding event`),y(e,"class","flex-center h-64 flex-col gap-3 text-base")},m(o,a){S(o,e,a),T(t,e,null),h(e,n),i=!0},p:te,i(o){i||(g(t.$$.fragment,o),o&&pe(()=>{i&&(r&&r.end(1),l=Ie(e,se,{delay:200,duration:200}),l.start())}),i=!0)},o(o){$(t.$$.fragment,o),l&&l.invalidate(),o&&(r=Se(e,se,{duration:200})),i=!1},d(o){o&&E(e),N(t),o&&r&&r.end()}}}function dn(s){let e,t,n,l,r,i,o,a,c,f,u,d,_,m,k,p,b,O,G,P,w,v,M,D,x,A,B,W,L,q,V,ie,le,re;n=new Ce({props:{icon:Vt}});function X(I){s[13](I)}let R={placeholder:"Summary",size:"md",class:"w-full",maxLength:255};s[2]!==void 0&&(R.value=s[2]),c=new At({props:R}),fe.push(()=>ue(c,"value",X));function ae(I){s[14](I)}let oe={};s[0]!==void 0&&(oe.value=s[0]),b=new xt({props:oe}),fe.push(()=>ue(b,"value",ae));function ce(I){s[15](I)}let z={round:!0,filled:!0};s[7]!==void 0&&(z.checked=s[7]),v=new Ye({props:z}),fe.push(()=>ue(v,"checked",ce));let F=!s[7]&&at(s),J=s[9]&&ot(s);W=new De({props:{icon:Xe,size:"xl",$$slots:{default:[_n]},$$scope:{ctx:s}}}),W.$on("click",s[20]),q=new Re({props:{disabled:s[5],$$slots:{default:[mn]},$$scope:{ctx:s}}}),q.$on("click",s[12]);let K=s[6]&&ct(s);return{c(){e=C("div"),t=C("span"),H(n.$$.fragment),l=Q(`
        Add a new event`),r=j(),i=C("div"),o=C("span"),o.textContent="Title",a=j(),H(c.$$.fragment),u=j(),d=C("div"),_=C("span"),_.textContent="When",m=j(),k=C("div"),p=C("div"),H(b.$$.fragment),G=j(),P=C("div"),w=Q("All day "),H(v.$$.fragment),D=j(),F&&F.c(),x=j(),J&&J.c(),A=j(),B=C("div"),H(W.$$.fragment),L=j(),H(q.$$.fragment),V=j(),K&&K.c(),y(t,"class","flex-center mb-2 gap-3 text-lg"),y(o,"class","w-16 shrink-0"),y(i,"class","flex items-center justify-start"),y(_,"class","mt-1 w-16"),y(P,"class","flex-center ml-6 gap-3"),y(p,"class","flex items-center"),y(k,"class","flex flex-col items-start"),y(d,"class","flex items-start justify-start"),y(B,"class","mt-4 flex w-full items-center justify-center gap-4"),y(e,"class","flex h-full w-full flex-col gap-5")},m(I,ee){S(I,e,ee),h(e,t),T(n,t,null),h(t,l),h(e,r),h(e,i),h(i,o),h(i,a),T(c,i,null),h(e,u),h(e,d),h(d,_),h(d,m),h(d,k),h(k,p),T(b,p,null),h(p,G),h(p,P),h(P,w),T(v,P,null),h(k,D),F&&F.m(k,null),h(e,x),J&&J.m(e,null),h(e,A),h(e,B),T(W,B,null),h(B,L),T(q,B,null),h(e,V),K&&K.m(e,null),re=!0},p(I,ee){const Oe={};!f&&ee&4&&(f=!0,Oe.value=I[2],de(()=>f=!1)),c.$set(Oe);const Ge={};!O&&ee&1&&(O=!0,Ge.value=I[0],de(()=>O=!1)),b.$set(Ge);const Ae={};!M&&ee&128&&(M=!0,Ae.checked=I[7],de(()=>M=!1)),v.$set(Ae),I[7]?F&&(Z(),$(F,1,1,()=>{F=null}),U()):F?(F.p(I,ee),ee&128&&g(F,1)):(F=at(I),F.c(),g(F,1),F.m(k,null)),I[9]?J?(J.p(I,ee),ee&512&&g(J,1)):(J=ot(I),J.c(),g(J,1),J.m(e,A)):J&&(Z(),$(J,1,1,()=>{J=null}),U());const He={};ee&536870912&&(He.$$scope={dirty:ee,ctx:I}),W.$set(He);const Ee={};ee&32&&(Ee.disabled=I[5]),ee&536870912&&(Ee.$$scope={dirty:ee,ctx:I}),q.$set(Ee),I[6]?K?(K.p(I,ee),ee&64&&g(K,1)):(K=ct(I),K.c(),g(K,1),K.m(e,null)):K&&(Z(),$(K,1,1,()=>{K=null}),U())},i(I){re||(g(n.$$.fragment,I),g(c.$$.fragment,I),g(b.$$.fragment,I),g(v.$$.fragment,I),g(F),g(J),g(W.$$.fragment,I),g(q.$$.fragment,I),g(K),I&&pe(()=>{re&&(le&&le.end(1),ie=Ie(e,se,{delay:200,duration:200}),ie.start())}),re=!0)},o(I){$(n.$$.fragment,I),$(c.$$.fragment,I),$(b.$$.fragment,I),$(v.$$.fragment,I),$(F),$(J),$(W.$$.fragment,I),$(q.$$.fragment,I),$(K),ie&&ie.invalidate(),I&&(le=Se(e,se,{duration:200})),re=!1},d(I){I&&E(e),N(n),N(c),N(b),N(v),F&&F.d(),J&&J.d(),N(W),N(q),K&&K.d(),I&&le&&le.end()}}}function at(s){let e,t,n,l,r,i,o,a,c,f,u,d,_,m=lt(s[8])+"",k,p;function b(w){s[16](w)}let O={};s[1]!==void 0&&(O.value=s[1]),t=new Ve({props:O}),fe.push(()=>ue(t,"value",b));function G(w){s[17](w)}let P={};return s[3]!==void 0&&(P.value=s[3]),o=new Ve({props:P}),fe.push(()=>ue(o,"value",G)),o.$on("change",s[18]),d=new De({props:{icon:Ht,tooltip:"Duration",size:"md"}}),{c(){e=C("div"),H(t.$$.fragment),l=j(),r=C("span"),r.textContent="to",i=j(),H(o.$$.fragment),f=j(),u=C("span"),H(d.$$.fragment),_=j(),k=Q(m),y(r,"class","mx-3"),y(e,"class","mt-4 flex items-center justify-start"),y(u,"class","mt-3 flex items-center justify-start gap-2 text-sm")},m(w,v){S(w,e,v),T(t,e,null),h(e,l),h(e,r),h(e,i),T(o,e,null),S(w,f,v),S(w,u,v),T(d,u,null),h(u,_),h(u,k),p=!0},p(w,v){const M={};!n&&v&2&&(n=!0,M.value=w[1],de(()=>n=!1)),t.$set(M);const D={};!a&&v&8&&(a=!0,D.value=w[3],de(()=>a=!1)),o.$set(D),(!p||v&256)&&m!==(m=lt(w[8])+"")&&me(k,m)},i(w){p||(g(t.$$.fragment,w),g(o.$$.fragment,w),w&&pe(()=>{p&&(c||(c=Me(e,xe,{},!0)),c.run(1))}),g(d.$$.fragment,w),p=!0)},o(w){$(t.$$.fragment,w),$(o.$$.fragment,w),w&&(c||(c=Me(e,xe,{},!1)),c.run(0)),$(d.$$.fragment,w),p=!1},d(w){w&&E(e),N(t),N(o),w&&c&&c.end(),w&&E(f),w&&E(u),N(d)}}}function ot(s){let e,t,n,l,r,i;function o(c){s[19](c)}let a={size:"lg",round:!0,filled:!0};return s[4]!==void 0&&(a.value=s[4]),l=new Ye({props:a}),fe.push(()=>ue(l,"value",o)),{c(){e=C("div"),t=C("span"),t.textContent="Add Google Meet link",n=j(),H(l.$$.fragment),y(t,"class","flex-center gap-2"),y(e,"class","mt-2 flex items-center gap-4")},m(c,f){S(c,e,f),h(e,t),h(e,n),T(l,e,null),i=!0},p(c,f){const u={};!r&&f&16&&(r=!0,u.value=c[4],de(()=>r=!1)),l.$set(u)},i(c){i||(g(l.$$.fragment,c),i=!0)},o(c){$(l.$$.fragment,c),i=!1},d(c){c&&E(e),N(l)}}}function _n(s){let e;return{c(){e=Q("Back")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function mn(s){let e;return{c(){e=Q("Confirm")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function ct(s){let e,t,n,l,r,i;return t=new Ce({props:{icon:Tt}}),{c(){e=C("div"),H(t.$$.fragment),n=j(),l=C("span"),r=Q(s[6]),y(e,"class","curved-half flex w-max items-center justify-center gap-2 self-center bg-red-400 px-4 py-1.5 text-sm")},m(o,a){S(o,e,a),T(t,e,null),h(e,n),h(e,l),h(l,r),i=!0},p(o,a){(!i||a&64)&&me(r,o[6])},i(o){i||(g(t.$$.fragment,o),i=!0)},o(o){$(t.$$.fragment,o),i=!1},d(o){o&&E(e),N(t)}}}function pn(s){let e,t,n,l,r,i;const o=[dn,un],a=[];function c(f,u){return f[5]?1:0}return t=c(s),n=a[t]=o[t](s),{c(){e=C("div"),n.c(),y(e,"class","transition-container px-3 py-3")},m(f,u){S(f,e,u),a[t].m(e,null),i=!0},p(f,[u]){let d=t;t=c(f),t===d?a[t].p(f,u):(Z(),$(a[d],1,1,()=>{a[d]=null}),U(),n=a[t],n?n.p(f,u):(n=a[t]=o[t](f),n.c()),g(n,1),n.m(e,null))},i(f){i||(g(n),f&&pe(()=>{i&&(r&&r.end(1),l=Ie(e,se,{delay:200,duration:200}),l.start())}),i=!0)},o(f){$(n),l&&l.invalidate(),f&&(r=Se(e,se,{duration:200})),i=!1},d(f){f&&E(e),a[t].d(),f&&r&&r.end()}}}let gn="";function $n(s=null){const e=s?new Date(s):new Date,t=new Date(Math.ceil(e.getTime()/(15*60*1e3))*15*60*1e3),n=[{label:new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t),value:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/^24/,"00").padStart(5,"0")}];for(let l=0;l<24*4-1;l++){t.setMinutes(t.getMinutes()+15);const r=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t),i=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/^24/,"00").padStart(5,"0");n.push({label:r,value:i})}return n}function hn(s,e,t){let n;const{dashy_events:l,updatingEvents:r,calendarConfig:i,isGoogleCalendarIntegrated:o,google_calendar_events:a,widgetId:c}=$e("stores");ne(s,o,V=>t(9,n=V));let f="",u=new Date,d=nt(),_=nt(60),m=!1,k=!1,p=!1,b=!1,O=60;const G=Be(),P=async()=>{if(f===""){t(6,p="Event name can't be empty");return}if(f.length>255){t(6,p="Event name is too long");return}const V=Y(u).format("YYYY-MM-DD"),ie=Y(V+" "+d,"YYYY-MM-DD HH:mm").toISOString(),le=_>d?Y(V+" "+_,"YYYY-MM-DD HH:mm").toISOString():Y(V+" "+_,"YYYY-MM-DD HH:mm").add(1,"day").toISOString(),re=Y(V).format("YYYY-MM-DD");t(5,k=!0);const X={id:Math.random().toString(36).substr(2,9),summary:f,start:b?re:ie,end:b?re:le,allDay:b,event_url:gn};if(!n)l.update(R=>[...R,X]),G("close");else try{const R=await ye.post("/integration/google_calendar/create_event",{title:f,start:b?re:ie,end:b?re:le,allDay:b,createMeeting:m,calendarId:"primary"},{params:{widgetId:c==="calendar"?"":c}});if(!R||!R.data.success)return;R.data.success&&(await we({updatingEvents:r,calendarConfig:i,isGoogleCalendarIntegrated:o,google_calendar_events:a,widgetId:c}),G("close"))}catch{t(5,k=!1)}};$n(Y(u).toISOString());function w(V,ie){const le=Y(V).format("YYYY-MM-DD"),re=Y(le+" "+ie,"YYYY-MM-DD HH:mm").toISOString();return Y(re).isBefore(Y())}const v=()=>{t(3,_=Y(d,"HH:mm").add(O,"minutes").format("HH:mm"))};function M(V){f=V,t(2,f)}function D(V){u=V,t(0,u),t(1,d)}function x(V){b=V,t(7,b)}function A(V){d=V,t(1,d)}function B(V){_=V,t(3,_)}const W=()=>{t(8,O=zt(d,_))};function L(V){m=V,t(4,m)}const q=()=>G("close");return s.$$.update=()=>{s.$$.dirty&3&&w(u,d)&&t(0,u=Y(u).add(1,"day").toDate()),s.$$.dirty&2&&d&&v()},[u,d,f,_,m,k,p,b,O,n,o,G,P,M,D,x,A,B,W,L,q]}class bn extends he{constructor(e){super(),be(this,e,hn,pn,ke,{})}}function ft(s){let e,t;return e=new sn({props:{class:"curved-half group relative flex w-full items-center justify-between gap-1 border px-[0.8rem] pt-2.5 pb-2",$$slots:{default:[Mn]},$$scope:{ctx:s}}}),e.$on("click",s[22]),e.$on("pointerenter",s[23]),e.$on("pointerleave",s[24]),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p(n,l){const r={};l[0]&749|l[1]&32&&(r.$$scope={dirty:l,ctx:n}),e.$set(r)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function kn(s){let e,t,n,l;return t=new an({props:{class:"text-xs",$$slots:{default:[wn]},$$scope:{ctx:s}}}),t.$on("click",s[20]),{c(){e=C("div"),H(t.$$.fragment),y(e,"class","mr-1 flex items-center justify-end")},m(r,i){S(r,e,i),T(t,e,null),l=!0},p(r,i){const o={};i[0]&40|i[1]&32&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){l||(g(t.$$.fragment,r),r&&pe(()=>{l&&(n||(n=Me(e,se,{duration:200},!0)),n.run(1))}),l=!0)},o(r){$(t.$$.fragment,r),r&&(n||(n=Me(e,se,{duration:200},!1)),n.run(0)),l=!1},d(r){r&&E(e),N(t),r&&n&&n.end()}}}function vn(s){let e,t,n,l,r;const i=[Dn,yn],o=[];function a(c,f){return c[6]?0:c[14]?1:-1}return~(t=a(s))&&(n=o[t]=i[t](s)),{c(){e=C("div"),n&&n.c(),y(e,"class","mr-2 flex items-center justify-end gap-4")},m(c,f){S(c,e,f),~t&&o[t].m(e,null),r=!0},p(c,f){let u=t;t=a(c),t===u?~t&&o[t].p(c,f):(n&&(Z(),$(o[u],1,1,()=>{o[u]=null}),U()),~t?(n=o[t],n?n.p(c,f):(n=o[t]=i[t](c),n.c()),g(n,1),n.m(e,null)):n=null)},i(c){r||(g(n),c&&pe(()=>{r&&(l||(l=Me(e,se,{duration:200},!0)),l.run(1))}),r=!0)},o(c){$(n),c&&(l||(l=Me(e,se,{duration:200},!1)),l.run(0)),r=!1},d(c){c&&E(e),~t&&o[t].d(),c&&l&&l.end()}}}function wn(s){let e=s[3]?"Now live":`In ${s[5]}`,t;return{c(){t=Q(e)},m(n,l){S(n,t,l)},p(n,l){l[0]&40&&e!==(e=n[3]?"Now live":`In ${n[5]}`)&&me(t,e)},d(n){n&&E(t)}}}function yn(s){let e,t,n,l;return e=new De({props:{icon:Ft,tooltip:"Delete event"}}),e.$on("click",s[18]),n=new De({props:{icon:Nt,tooltip:"Update event"}}),n.$on("click",s[19]),{c(){H(e.$$.fragment),t=j(),H(n.$$.fragment)},m(r,i){T(e,r,i),S(r,t,i),T(n,r,i),l=!0},p:te,i(r){l||(g(e.$$.fragment,r),g(n.$$.fragment,r),l=!0)},o(r){$(e.$$.fragment,r),$(n.$$.fragment,r),l=!1},d(r){N(e,r),r&&E(t),N(n,r)}}}function Dn(s){let e,t;return e=new We({}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function ut(s){let e,t,n,l,r;return{c(){var i;e=C("button"),t=C("img"),Le(t.src,n=`/apps/${(i=s[0])==null?void 0:i.meeting_provider}.svg`)||y(t,"src",n),y(t,"class","w-6"),y(t,"alt","Google Meet icon"),y(e,"class","flex-center flex gap-2 text-xs")},m(i,o){S(i,e,o),h(e,t),l||(r=[qe(Ze.call(null,e,"Join meeting")),Ue(e,"click",s[21])],l=!0)},p(i,o){var a;o[0]&1&&!Le(t.src,n=`/apps/${(a=i[0])==null?void 0:a.meeting_provider}.svg`)&&y(t,"src",n)},d(i){i&&E(e),l=!1,et(r)}}}function Mn(s){var B,W;let e,t,n=s[0].summary+"",l,r,i,o,a,c=Y(s[0].start).format("ddd, MMM D")+"",f,u,d=(B=s[0])!=null&&B.allDay?"All day":`${s[15]} - ${s[16]}`,_,m,k,p,b,O,G,P,w,v;const M=[vn,kn],D=[];function x(L,q){return L[7]?0:(L[2]||L[3])&&!L[0].allDay?1:-1}~(b=x(s))&&(O=D[b]=M[b](s));let A=((W=s[0])==null?void 0:W.meeting)&&ut(s);return{c(){e=C("div"),t=C("span"),l=Q(n),i=j(),o=C("div"),a=C("span"),f=Q(c),u=Q(", "),_=Q(d),m=j(),k=C("div"),p=C("div"),O&&O.c(),G=j(),A&&A.c(),P=j(),w=C("div"),y(t,"class","max-line-1 text-left font-semibold"),y(t,"title",r=s[0].summary),y(a,"class","max-line-1 text-start text-xs font-[400]"),y(o,"class","flex items-center gap-4 opacity-70"),y(e,"class","flex flex-col gap-0.5"),y(p,"class","transition-container flex items-center justify-center"),y(w,"class","absolute bottom-3 right-3 flex h-max w-max items-center gap-3 opacity-[0] transition group-hover:opacity-[1]"),rt(w,"opacity-[1]",s[6]),y(k,"class","ml-2 mr-1 flex shrink-0 gap-3")},m(L,q){S(L,e,q),h(e,t),h(t,l),h(e,i),h(e,o),h(o,a),h(a,f),h(a,u),h(a,_),S(L,m,q),S(L,k,q),h(k,p),~b&&D[b].m(p,null),h(k,G),A&&A.m(k,null),h(k,P),h(k,w),v=!0},p(L,q){var ie,le;(!v||q[0]&1)&&n!==(n=L[0].summary+"")&&me(l,n),(!v||q[0]&1&&r!==(r=L[0].summary))&&y(t,"title",r),(!v||q[0]&1)&&c!==(c=Y(L[0].start).format("ddd, MMM D")+"")&&me(f,c),(!v||q[0]&1)&&d!==(d=(ie=L[0])!=null&&ie.allDay?"All day":`${L[15]} - ${L[16]}`)&&me(_,d);let V=b;b=x(L),b===V?~b&&D[b].p(L,q):(O&&(Z(),$(D[V],1,1,()=>{D[V]=null}),U()),~b?(O=D[b],O?O.p(L,q):(O=D[b]=M[b](L),O.c()),g(O,1),O.m(p,null)):O=null),(le=L[0])!=null&&le.meeting?A?A.p(L,q):(A=ut(L),A.c(),A.m(k,P)):A&&(A.d(1),A=null),(!v||q[0]&64)&&rt(w,"opacity-[1]",L[6])},i(L){v||(g(O),v=!0)},o(L){$(O),v=!1},d(L){L&&E(e),L&&E(m),L&&E(k),~b&&D[b].d(),A&&A.d()}}}function Cn(s){let e,t,n=(!s[4]||s[0].allDay||s[1])&&ft(s);return{c(){n&&n.c(),e=_e()},m(l,r){n&&n.m(l,r),S(l,e,r),t=!0},p(l,r){!l[4]||l[0].allDay||l[1]?n?(n.p(l,r),r[0]&19&&g(n,1)):(n=ft(l),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(Z(),$(n,1,1,()=>{n=null}),U())},i(l){t||(g(n),t=!0)},o(l){$(n),t=!1},d(l){n&&n.d(l),l&&E(e)}}}function In(s,e,t){var ce;let n,l,r,i;const{calendarConfig:o,dashy_events:a,eventToUpdate:c,isGoogleCalendarIntegrated:f,updatingEvents:u,google_calendar_events:d,widgetId:_}=$e("stores");ne(s,o,z=>t(27,r=z)),ne(s,a,z=>t(26,n=z)),ne(s,c,z=>t(9,i=z)),ne(s,f,z=>t(8,l=z));let{event:m}=e,k,p,b,O,G=!1,P=l?(ce=r.google_calendar_ids.find(z=>z.id===m.calendar_id))==null?void 0:ce.isOwner:!0,w,{showAlways:v=!1}=e;const{addTimeout:M,clearTimeouts:D}=Bt();let x=!1;const A=Be(),B=Y(m.start).format("h:mm A"),W=Y(m.end).format("h:mm A"),L=()=>{l?(t(6,G=!0),ye.delete("/integration/google_calendar/delete_event",{data:{event_id:m.id,calendar_id:m.calendar_id},params:{widgetId:_==="calendar"?"":_}}).then(()=>{we({updatingEvents:u,calendarConfig:o,isGoogleCalendarIntegrated:f,google_calendar_events:d,widgetId:_})}).catch(z=>{t(6,G=!1)})):ve(a,n=n.filter(z=>z.id!==m.id),n)},q=()=>{if(t(2,k=Y(m.start).isBetween(Y(),Y().add(6,"hours"))),t(3,p=Y(m.end).isAfter(Y())&&Y(m.start).isBefore(Y())),t(4,b=Y(m.end).isBefore(Y())),b&&A("eventOver"),k&&!p)V(),w=setInterval(V,1e3*30);else if(p){const z=Y(m.end).diff(Y(),"minutes");M(()=>{t(4,b=!0)},z*1e3*60)}else if(!b){const z=Y(m.start).diff(Y().add(6,"hours"),"minutes");M(q,z*1e3*60)}},V=()=>{if(t(3,p=Y(m.end).isAfter(Y())&&Y(m.start).isBefore(Y())),p){const F=Y(m.end).diff(Y(),"minutes");M(()=>{t(4,b=!0),A("eventOver")},F*1e3*60),clearInterval(w);return}const z=new Date(m.start).getTime()-new Date().getTime();t(5,O=Rt(z))};q(),Fe(()=>{clearInterval(w),D()});const ie=z=>(z.stopPropagation(),L()),le=z=>(z.stopPropagation(),ve(c,i=m,i)),re=z=>(z.stopPropagation(),window.open(m==null?void 0:m.event_url,"_blank")),X=z=>(z.stopPropagation(),window.open(m==null?void 0:m.meeting_url,"_blank")),R=()=>{if(P){if(m.meeting&&(m!=null&&m.meeting_url)){window.open(m==null?void 0:m.meeting_url,"_blank");return}if(m!=null&&m.event_url){const z=m==null?void 0:m.event_url.replace("https://www.google.com/calendar",`https://www.google.com/calendar/u/${l}`);window.open(z,"_blank")}}},ae=()=>t(7,x=!0),oe=()=>t(7,x=!1);return s.$$set=z=>{"event"in z&&t(0,m=z.event),"showAlways"in z&&t(1,v=z.showAlways)},[m,v,k,p,b,O,G,x,l,i,o,a,c,f,P,B,W,L,ie,le,re,X,R,ae,oe]}class Je extends he{constructor(e){super(),be(this,e,In,Cn,ke,{event:0,showAlways:1},null,[-1,-1])}}function dt(s,e,t){const n=s.slice();return n[12]=e[t],n}function Sn(s){let e,t,n,l;const r=[On,Yn],i=[];function o(a,c){return a[1].length>0?0:1}return t=o(s),n=i[t]=r[t](s),{c(){e=C("div"),n.c(),y(e,"class","flex h-full flex-col gap-2")},m(a,c){S(a,e,c),i[t].m(e,null),l=!0},p(a,c){let f=t;t=o(a),t===f?i[t].p(a,c):(Z(),$(i[f],1,1,()=>{i[f]=null}),U(),n=i[t],n?n.p(a,c):(n=i[t]=r[t](a),n.c()),g(n,1),n.m(e,null))},i(a){l||(g(n),l=!0)},o(a){$(n),l=!1},d(a){a&&E(e),i[t].d()}}}function En(s){let e,t,n,l,r;return l=new Ce({props:{icon:Te,class:"animate-spin",size:"lg"}}),{c(){e=C("div"),t=C("span"),t.textContent="Looking for events",n=j(),H(l.$$.fragment),y(t,"class","font-light"),y(e,"class","flex h-full flex-col items-center justify-center gap-4")},m(i,o){S(i,e,o),h(e,t),h(e,n),T(l,e,null),r=!0},p:te,i(i){r||(g(l.$$.fragment,i),r=!0)},o(i){$(l.$$.fragment,i),r=!1},d(i){i&&E(e),N(l)}}}function Yn(s){let e;return{c(){e=C("div"),e.innerHTML='<span class="font-light">No events yet!</span>',y(e,"class","flex h-full flex-col items-center justify-center gap-4")},m(t,n){S(t,e,n)},p:te,i:te,o:te,d(t){t&&E(e)}}}function On(s){let e,t=Y(s[0]).format("dddd, MMM DD")+"",n,l,r=[],i=new Map,o,a,c=s[1];const f=u=>u[12].id;for(let u=0;u<c.length;u+=1){let d=dt(s,c,u),_=f(d);i.set(_,r[u]=_t(_,d))}return{c(){e=C("span"),n=Q(t),l=j();for(let u=0;u<r.length;u+=1)r[u].c();o=_e(),y(e,"class","font-light")},m(u,d){S(u,e,d),h(e,n),S(u,l,d);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(u,d);S(u,o,d),a=!0},p(u,d){(!a||d&1)&&t!==(t=Y(u[0]).format("dddd, MMM DD")+"")&&me(n,t),d&2&&(c=u[1],Z(),r=Ne(r,d,f,1,u,c,i,o.parentNode,Pe,_t,o,dt),U())},i(u){if(!a){for(let d=0;d<c.length;d+=1)g(r[d]);a=!0}},o(u){for(let d=0;d<r.length;d+=1)$(r[d]);a=!1},d(u){u&&E(e),u&&E(l);for(let d=0;d<r.length;d+=1)r[d].d(u);u&&E(o)}}}function _t(s,e){let t,n,l;return n=new Je({props:{event:e[12]}}),{key:s,first:null,c(){t=_e(),H(n.$$.fragment),this.first=t},m(r,i){S(r,t,i),T(n,r,i),l=!0},p(r,i){e=r;const o={};i&2&&(o.event=e[12]),n.$set(o)},i(r){l||(g(n.$$.fragment,r),l=!0)},o(r){$(n.$$.fragment,r),l=!1},d(r){r&&E(t),N(n,r)}}}function Gn(s){let e,t,n,l;const r=[En,Sn],i=[];function o(a,c){return a[2]?0:1}return e=o(s),t=i[e]=r[e](s),{c(){t.c(),n=_e()},m(a,c){i[e].m(a,c),S(a,n,c),l=!0},p(a,[c]){let f=e;e=o(a),e===f?i[e].p(a,c):(Z(),$(i[f],1,1,()=>{i[f]=null}),U(),t=i[e],t?t.p(a,c):(t=i[e]=r[e](a),t.c()),g(t,1),t.m(n.parentNode,n))},i(a){l||(g(t),l=!0)},o(a){$(t),l=!1},d(a){i[e].d(a),a&&E(n)}}}function An(s,e,t){let n,l,r;const{isGoogleCalendarIntegrated:i,dashy_events:o,updatingEvents:a,calendarConfig:c,google_calendar_events:f,widgetId:u}=$e("stores");ne(s,i,k=>t(6,n=k)),ne(s,o,k=>t(7,l=k)),ne(s,a,k=>t(2,r=k));let{filterDate:d}=e,_=[];const m=async(k,p)=>{if(p){const b=await cn(k,{updatingEvents:a,calendarConfig:c,isGoogleCalendarIntegrated:p,google_calendar_events:f,widgetId:u});b&&t(1,_=b)}else t(1,_=l.filter(b=>Y(b.start).isSame(k,"day")))};return s.$$set=k=>{"filterDate"in k&&t(0,d=k.filterDate)},s.$$.update=()=>{s.$$.dirty&65&&m(d,n)},[d,_,r,i,o,a,n]}class Hn extends he{constructor(e){super(),be(this,e,An,Gn,ke,{filterDate:0})}}function mt(s,e,t){const n=s.slice();return n[21]=e[t],n}function pt(s,e,t){const n=s.slice();return n[21]=e[t],n}function Tn(s){let e,t,n,l=s[1].length>0&&gt(s),r=s[2].length>0&&bt(s);return{c(){l&&l.c(),e=j(),r&&r.c(),t=_e()},m(i,o){l&&l.m(i,o),S(i,e,o),r&&r.m(i,o),S(i,t,o),n=!0},p(i,o){i[1].length>0?l?(l.p(i,o),o&2&&g(l,1)):(l=gt(i),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(Z(),$(l,1,1,()=>{l=null}),U()),i[2].length>0?r?(r.p(i,o),o&4&&g(r,1)):(r=bt(i),r.c(),g(r,1),r.m(t.parentNode,t)):r&&(Z(),$(r,1,1,()=>{r=null}),U())},i(i){n||(g(l),g(r),n=!0)},o(i){$(l),$(r),n=!1},d(i){l&&l.d(i),i&&E(e),r&&r.d(i),i&&E(t)}}}function Nn(s){let e,t,n,l;const r=[jn,Pn],i=[];function o(a,c){return a[4]?0:1}return t=o(s),n=i[t]=r[t](s),{c(){e=C("div"),n.c(),y(e,"class","flex h-40 w-full flex-col items-center justify-center gap-6")},m(a,c){S(a,e,c),i[t].m(e,null),l=!0},p(a,c){let f=t;t=o(a),t===f?i[t].p(a,c):(Z(),$(i[f],1,1,()=>{i[f]=null}),U(),n=i[t],n?n.p(a,c):(n=i[t]=r[t](a),n.c()),g(n,1),n.m(e,null))},i(a){l||(g(n),l=!0)},o(a){$(n),l=!1},d(a){a&&E(e),i[t].d()}}}function gt(s){let e,t,n,l=[],r=new Map,i,o,a=s[1];const c=u=>u[21].id;for(let u=0;u<a.length;u+=1){let d=pt(s,a,u),_=c(d);r.set(_,l[u]=$t(_,d))}let f=s[2].length>0&&ht();return{c(){e=C("div"),t=C("span"),t.textContent="Today",n=j();for(let u=0;u<l.length;u+=1)l[u].c();i=j(),f&&f.c(),y(t,"class","ml-1 mb-1 text-start text-[0.9rem] font-medium"),y(e,"class","my-1 flex h-max w-full flex-col gap-2")},m(u,d){S(u,e,d),h(e,t),h(e,n);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(e,null);h(e,i),f&&f.m(e,null),o=!0},p(u,d){d&2&&(a=u[1],Z(),l=Ne(l,d,c,1,u,a,r,e,Pe,$t,i,pt),U()),u[2].length>0?f||(f=ht(),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(u){if(!o){for(let d=0;d<a.length;d+=1)g(l[d]);o=!0}},o(u){for(let d=0;d<l.length;d+=1)$(l[d]);o=!1},d(u){u&&E(e);for(let d=0;d<l.length;d+=1)l[d].d();f&&f.d()}}}function $t(s,e){let t,n,l;return n=new Je({props:{event:e[21]}}),{key:s,first:null,c(){t=_e(),H(n.$$.fragment),this.first=t},m(r,i){S(r,t,i),T(n,r,i),l=!0},p(r,i){e=r;const o={};i&2&&(o.event=e[21]),n.$set(o)},i(r){l||(g(n.$$.fragment,r),l=!0)},o(r){$(n.$$.fragment,r),l=!1},d(r){r&&E(t),N(n,r)}}}function ht(s){let e;return{c(){e=C("span"),e.textContent="Upcoming",y(e,"class","ml-1 mt-1 text-start text-[0.9rem] font-medium")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function bt(s){let e=[],t=new Map,n,l,r=s[2];const i=o=>o[21].id;for(let o=0;o<r.length;o+=1){let a=mt(s,r,o),c=i(a);t.set(c,e[o]=kt(c,a))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=_e()},m(o,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,a);S(o,n,a),l=!0},p(o,a){a&32773&&(r=o[2],Z(),e=Ne(e,a,i,1,o,r,t,n.parentNode,Pe,kt,n,mt),U())},i(o){if(!l){for(let a=0;a<r.length;a+=1)g(e[a]);l=!0}},o(o){for(let a=0;a<e.length;a+=1)$(e[a]);l=!1},d(o){for(let a=0;a<e.length;a+=1)e[a].d(o);o&&E(n)}}}function kt(s,e){let t,n,l;return n=new Je({props:{event:e[21]}}),n.$on("eventOver",e[18]),{key:s,first:null,c(){t=_e(),H(n.$$.fragment),this.first=t},m(r,i){S(r,t,i),T(n,r,i),l=!0},p(r,i){e=r;const o={};i&4&&(o.event=e[21]),n.$set(o)},i(r){l||(g(n.$$.fragment,r),l=!0)},o(r){$(n.$$.fragment,r),l=!1},d(r){r&&E(t),N(n,r)}}}function Pn(s){let e,t,n,l,r;return l=new Re({props:{class:"curved-half flex-center gap-3 rounded-md px-4 py-2 text-sm",$$slots:{default:[xn]},$$scope:{ctx:s}}}),l.$on("pointerdown",Bn),l.$on("click",s[17]),{c(){e=C("span"),e.innerHTML=`Connect
          <img src="/apps/google_calendar.png" alt="Google Calendar logo" class="mx-1 inline h-5 w-5"/> 
          <span class="font-semibold">Google Calendar</span> to sync existing events or add a new event to Dashy.`,t=j(),n=C("div"),H(l.$$.fragment),y(e,"class","mx-6 text-center text-sm"),y(n,"class","flex gap-4")},m(i,o){S(i,e,o),S(i,t,o),S(i,n,o),T(l,n,null),r=!0},p(i,o){const a={};o&67108864&&(a.$$scope={dirty:o,ctx:i}),l.$set(a)},i(i){r||(g(l.$$.fragment,i),r=!0)},o(i){$(l.$$.fragment,i),r=!1},d(i){i&&E(e),i&&E(t),i&&E(n),N(l)}}}function jn(s){let e,t,n,l;const r=[zn,Ln],i=[];function o(a,c){return a[5]?1:0}return e=o(s),t=i[e]=r[e](s),{c(){t.c(),n=_e()},m(a,c){i[e].m(a,c),S(a,n,c),l=!0},p(a,c){let f=e;e=o(a),e===f?i[e].p(a,c):(Z(),$(i[f],1,1,()=>{i[f]=null}),U(),t=i[e],t?t.p(a,c):(t=i[e]=r[e](a),t.c()),g(t,1),t.m(n.parentNode,n))},i(a){l||(g(t),l=!0)},o(a){$(t),l=!1},d(a){i[e].d(a),a&&E(n)}}}function xn(s){let e,t,n;return{c(){e=C("img"),n=Q(`
            Connect Google Calendar`),Le(e.src,t="/apps/google_calendar.png")||y(e,"src",t),y(e,"alt","Google Calendar logo"),y(e,"class","inline h-5 w-5")},m(l,r){S(l,e,r),S(l,n,r)},p:te,d(l){l&&E(e),l&&E(n)}}}function Ln(s){let e,t,n,l;return t=new We({}),{c(){e=C("span"),H(t.$$.fragment),n=Q("Updating events"),y(e,"class","flex-center mx-8 flex-col gap-3 text-center")},m(r,i){S(r,e,i),T(t,e,null),h(e,n),l=!0},p:te,i(r){l||(g(t.$$.fragment,r),l=!0)},o(r){$(t.$$.fragment,r),l=!1},d(r){r&&E(e),N(t)}}}function zn(s){let e,t,n=s[6]?"meetings":"events",l,r,i=s[14](s[3])+"",o,a;return{c(){e=C("span"),t=Q("No "),l=Q(n),r=Q(` for
            `),o=Q(i),a=Q(" Â  ðŸŽ‰"),y(e,"class","mx-8 text-center")},m(c,f){S(c,e,f),h(e,t),h(e,l),h(e,r),h(e,o),h(e,a)},p(c,f){f&64&&n!==(n=c[6]?"meetings":"events")&&me(l,n),f&8&&i!==(i=c[14](c[3])+"")&&me(o,i)},i:te,o:te,d(c){c&&E(e)}}}function Vn(s){let e,t,n,l;const r=[Nn,Tn],i=[];function o(a,c){return a[1].length===0&&a[2].length===0?0:a[1].length>0||a[2].length>0?1:-1}return~(t=o(s))&&(n=i[t]=r[t](s)),{c(){e=C("div"),n&&n.c(),y(e,"class","flex h-full w-full flex-col gap-2")},m(a,c){S(a,e,c),~t&&i[t].m(e,null),l=!0},p(a,[c]){let f=t;t=o(a),t===f?~t&&i[t].p(a,c):(n&&(Z(),$(i[f],1,1,()=>{i[f]=null}),U()),~t?(n=i[t],n?n.p(a,c):(n=i[t]=r[t](a),n.c()),g(n,1),n.m(e,null)):n=null)},i(a){l||(g(n),l=!0)},o(a){$(n),l=!1},d(a){a&&E(e),~t&&i[t].d()}}}const Bn=s=>s.stopPropagation();function Rn(s,e,t){let n,l,r,i,o,a;ne(s,tt,D=>t(7,a=D));const{calendarConfig:c,events:f,isGoogleCalendarIntegrated:u,onlyMeetings:d,updatingEvents:_,integrationId:m}=$e("stores");ne(s,c,D=>t(3,l=D)),ne(s,f,D=>t(0,n=D)),ne(s,u,D=>t(4,r=D)),ne(s,d,D=>t(6,o=D)),ne(s,_,D=>t(5,i=D));let{addEvent:k}=e;const p=D=>{switch(l.time_period){case 1:return"today";case 7:return"the next week";case 14:return"the next two weeks";case 30:return"the next month"}};let b=[],O=[];const P=setTimeout(()=>{w(n)},(()=>{const D=Y();return Y().endOf("day").diff(D,"minutes")})()*60*1e3);Fe(()=>{clearTimeout(P)});const w=D=>{t(1,b=D.filter(x=>{const A=Y(x.start).isSame(Y(),"day"),B=Y().isAfter(x.end);return A&&(x.allDay||!B)}).sort((x,A)=>new Date(x.start).getTime()-new Date(A.start).getTime())),t(2,O=D.filter(x=>!b.find(A=>A.id===x.id)).sort((x,A)=>new Date(x.start).getTime()-new Date(A.start).getTime()))},v=()=>Pt({user:jt.currentUser,currentProfile:a,integration:"google_calendar",integration_id:m}),M=()=>w(n);return s.$$set=D=>{"addEvent"in D&&t(16,k=D.addEvent)},s.$$.update=()=>{s.$$.dirty&1&&w(n)},[n,b,O,l,r,i,o,a,c,f,u,d,_,m,p,w,k,v,M]}class Lt extends he{constructor(e){super(),be(this,e,Rn,Vn,ke,{addEvent:16})}}function vt(s,e,t){const n=s.slice();return n[19]=e[t],n}function Fn(s){let e,t=[],n=new Map,l,r=s[3];const i=o=>o[19].id;for(let o=0;o<r.length;o+=1){let a=vt(s,r,o),c=i(a);n.set(c,t[o]=wt(c,a))}return{c(){e=C("div");for(let o=0;o<t.length;o+=1)t[o].c();y(e,"class","flex w-full flex-col gap-2")},m(o,a){S(o,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);l=!0},p(o,a){a&8&&(r=o[3],Z(),t=Ne(t,a,i,1,o,r,n,e,Pe,wt,null,vt),U())},i(o){if(!l){for(let a=0;a<r.length;a+=1)g(t[a]);l=!0}},o(o){for(let a=0;a<t.length;a+=1)$(t[a]);l=!1},d(o){o&&E(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function qn(s){let e,t,n=s[4]&&yt(s);return{c(){e=C("div"),n&&n.c(),y(e,"class","flex h-32 mb-4 w-full flex-col items-center justify-center gap-6")},m(l,r){S(l,e,r),n&&n.m(e,null),t=!0},p(l,r){l[4]?n?(n.p(l,r),r&16&&g(n,1)):(n=yt(l),n.c(),g(n,1),n.m(e,null)):n&&(Z(),$(n,1,1,()=>{n=null}),U())},i(l){t||(g(n),t=!0)},o(l){$(n),t=!1},d(l){l&&E(e),n&&n.d()}}}function wt(s,e){let t,n,l;return n=new Je({props:{event:e[19],showAlways:!0}}),{key:s,first:null,c(){t=_e(),H(n.$$.fragment),this.first=t},m(r,i){S(r,t,i),T(n,r,i),l=!0},p(r,i){e=r;const o={};i&8&&(o.event=e[19]),n.$set(o)},i(r){l||(g(n.$$.fragment,r),l=!0)},o(r){$(n.$$.fragment,r),l=!1},d(r){r&&E(t),N(n,r)}}}function yt(s){let e,t,n,l;const r=[Jn,Wn],i=[];function o(a,c){return a[2]?1:0}return e=o(s),t=i[e]=r[e](s),{c(){t.c(),n=_e()},m(a,c){i[e].m(a,c),S(a,n,c),l=!0},p(a,c){let f=e;e=o(a),e===f?i[e].p(a,c):(Z(),$(i[f],1,1,()=>{i[f]=null}),U(),t=i[e],t?t.p(a,c):(t=i[e]=r[e](a),t.c()),g(t,1),t.m(n.parentNode,n))},i(a){l||(g(t),l=!0)},o(a){$(t),l=!1},d(a){i[e].d(a),a&&E(n)}}}function Wn(s){let e,t,n,l;return t=new We({}),{c(){e=C("span"),H(t.$$.fragment),n=Q("Updating events"),y(e,"class","flex-center mx-8 flex-col gap-3 text-center")},m(r,i){S(r,e,i),T(t,e,null),h(e,n),l=!0},p:te,i(r){l||(g(t.$$.fragment,r),l=!0)},o(r){$(t.$$.fragment,r),l=!1},d(r){r&&E(e),N(t)}}}function Jn(s){let e,t,n=s[1]?"meetings":"events",l,r,i=Y(s[0]).toDate().toLocaleString("default",{month:"long"})+"",o,a;return{c(){e=C("span"),t=Q("No "),l=Q(n),r=Q(` for
            `),o=Q(i),a=Q(`
            ðŸŽ‰`),y(e,"class","mx-8 text-center")},m(c,f){S(c,e,f),h(e,t),h(e,l),h(e,r),h(e,o),h(e,a)},p(c,f){f&2&&n!==(n=c[1]?"meetings":"events")&&me(l,n),f&1&&i!==(i=Y(c[0]).toDate().toLocaleString("default",{month:"long"})+"")&&me(o,i)},i:te,o:te,d(c){c&&E(e)}}}function Kn(s){let e,t,n,l,r,i,o;function a(_){s[11](_)}let c={options:s[9],class:"mb-2"};s[0]!==void 0&&(c.value=s[0]),t=new ze({props:c}),fe.push(()=>ue(t,"value",a));const f=[qn,Fn],u=[];function d(_,m){return _[3].length===0?0:1}return r=d(s),i=u[r]=f[r](s),{c(){e=C("div"),H(t.$$.fragment),l=j(),i.c(),y(e,"class","flex h-full w-full flex-col gap-1.5")},m(_,m){S(_,e,m),T(t,e,null),h(e,l),u[r].m(e,null),o=!0},p(_,[m]){const k={};!n&&m&1&&(n=!0,k.value=_[0],de(()=>n=!1)),t.$set(k);let p=r;r=d(_),r===p?u[r].p(_,m):(Z(),$(u[p],1,1,()=>{u[p]=null}),U(),i=u[r],i?i.p(_,m):(i=u[r]=f[r](_),i.c()),g(i,1),i.m(e,null))},i(_){o||(g(t.$$.fragment,_),g(i),o=!0)},o(_){$(t.$$.fragment,_),$(i),o=!1},d(_){_&&E(e),N(t),u[r].d()}}}function Qn(s,e,t){let n,l,r,i,o;const{selectedMonth:a,isGoogleCalendarIntegrated:c,onlyMeetings:f,selectedMonthEvents:u,updatingEvents:d,calendarConfig:_,google_calendar_events:m,widgetId:k}=$e("stores");ne(s,a,v=>t(0,r=v)),ne(s,c,v=>t(4,o=v)),ne(s,f,v=>t(1,i=v)),ne(s,u,v=>t(10,l=v)),Y(r).isBefore(Y(),"month")&&ve(a,r=Y(r).add(1,"month").format("YYYY-MM")+"-01",r);let b=!1;const O=[...Array.from({length:12},(v,M)=>{const D=Y().add(M,"months");return{label:D.format("MMMM"),value:D.format("YYYY-MM")+"-01"}})],G=async v=>{const M=Y(v).startOf("month").toISOString(),D=Y(v).endOf("month").toISOString();t(2,b=!0);const x=await fn(M,D,{updatingEvents:d,calendarConfig:_,isGoogleCalendarIntegrated:c,google_calendar_events:m,widgetId:k}).catch(()=>[]);u.update(A=>(A=A.filter(B=>Y(B.start).month()!==Y(v).month()),[...A,...x])),t(2,b=!1)},P=v=>{const M=new Set;return v.filter(D=>{const x=M.has(D.id);return M.add(D.id),!x})};function w(v){r=v,a.set(r)}return s.$$.update=()=>{s.$$.dirty&1024&&ve(u,l=P(l),l),s.$$.dirty&1027&&t(3,n=l.filter(v=>i?v==null?void 0:v.meeting:!0).filter(v=>Y(v.start).month()===Y(r).month()).sort((v,M)=>new Date(v.start).getTime()-new Date(M.start).getTime())),s.$$.dirty&1&&G(r)},[r,i,b,n,o,a,c,f,u,O,l,w]}class Xn extends he{constructor(e){super(),be(this,e,Qn,Kn,ke,{})}}function Dt(s,e,t){const n=s.slice();return n[19]=e[t],n}function Mt(s){let e,t,n,l,r,i,o,a=[],c=new Map,f;const u=[Un,Zn],d=[];function _(p,b){return p[0]?0:1}l=_(s),r=d[l]=u[l](s);let m=s[1].google_calendar_ids;const k=p=>p[19].id;for(let p=0;p<m.length;p+=1){let b=Dt(s,m,p),O=k(b);c.set(O,a[p]=Ct(O,b))}return{c(){e=C("div"),t=C("span"),n=Q(`Available Calendars

        `),r.c(),i=j(),o=C("div");for(let p=0;p<a.length;p+=1)a[p].c();y(t,"class","mb-1 flex items-center gap-2 font-medium"),y(o,"class","max-h-[8.1rem] flex flex-col gap-2 overflow-auto"),y(e,"class","mt-3 flex flex-col gap-2")},m(p,b){S(p,e,b),h(e,t),h(t,n),d[l].m(t,null),h(e,i),h(e,o);for(let O=0;O<a.length;O+=1)a[O]&&a[O].m(o,null);f=!0},p(p,b){let O=l;l=_(p),l===O?d[l].p(p,b):(Z(),$(d[O],1,1,()=>{d[O]=null}),U(),r=d[l],r?r.p(p,b):(r=d[l]=u[l](p),r.c()),g(r,1),r.m(t,null)),b&1026&&(m=p[1].google_calendar_ids,Z(),a=Ne(a,b,k,1,p,m,c,o,Pe,Ct,null,Dt),U())},i(p){if(!f){g(r);for(let b=0;b<m.length;b+=1)g(a[b]);f=!0}},o(p){$(r);for(let b=0;b<a.length;b+=1)$(a[b]);f=!1},d(p){p&&E(e),d[l].d();for(let b=0;b<a.length;b+=1)a[b].d()}}}function Zn(s){let e,t;return e=new De({props:{icon:Qe,class:"ml-2",tooltip:"Refresh calendars"}}),e.$on("click",s[14]),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Un(s){let e,t;return e=new We({props:{class:"ml-2 text-lg"}}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Ct(s,e){let t,n,l,r,i=e[19].summary+"",o,a,c;function f(..._){return e[15](e[19],..._)}function u(..._){return e[16](e[19],..._)}function d(){return e[17](e[19])}return n=new Ye({props:{round:!0,filled:!0,size:"1.15",checked:!e[1].unselected_calenders.find(f),disabled:e[1].google_calendar_ids.length-e[1].unselected_calenders.length===1&&!e[1].unselected_calenders.find(u)}}),n.$on("change",d),{key:s,first:null,c(){t=C("div"),H(n.$$.fragment),l=j(),r=C("span"),o=Q(i),a=j(),y(r,"class","text-sm"),y(t,"class","flex items-center gap-3"),this.first=t},m(_,m){S(_,t,m),T(n,t,null),h(t,l),h(t,r),h(r,o),h(t,a),c=!0},p(_,m){e=_;const k={};m&2&&(k.checked=!e[1].unselected_calenders.find(f)),m&2&&(k.disabled=e[1].google_calendar_ids.length-e[1].unselected_calenders.length===1&&!e[1].unselected_calenders.find(u)),n.$set(k),(!c||m&2)&&i!==(i=e[19].summary+"")&&me(o,i)},i(_){c||(g(n.$$.fragment,_),c=!0)},o(_){$(n.$$.fragment,_),c=!1},d(_){_&&E(t),N(n)}}}function el(s){let e,t,n;return e=new Ce({props:{icon:Xe,class:"mr-2"}}),{c(){H(e.$$.fragment),t=Q(`
    View events`)},m(l,r){T(e,l,r),S(l,t,r),n=!0},p:te,i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){$(e.$$.fragment,l),n=!1},d(l){N(e,l),l&&E(t)}}}function tl(s){let e,t,n,l,r,i,o,a,c,f,u,d,_,m,k,p,b,O,G,P,w,v;n=new Ce({props:{icon:qt,class:"mr-3 "}}),i=new on({props:{integration:{...s[2].find(It),id:s[9]}}}),u=new ze({props:{options:[{label:"Never",value:!1},{label:"5 mins before",value:5},{label:"10 mins before",value:10},{label:"15 mins before",value:15},{label:"30 mins before",value:30},{label:"1 hour before",value:60}],value:s[1].notification}}),u.$on("change",s[12]),p=new ze({props:{options:[{label:"Next one week",value:7},{label:"Next two weeks",value:14},{label:"Next one month",value:30}],value:s[1].time_period}}),p.$on("change",s[13]);let M=s[3]&&Mt(s);return G=new Re({props:{class:"flex-center mb-1 mt-2 self-center",$$slots:{default:[el]},$$scope:{ctx:s}}}),G.$on("click",s[18]),{c(){e=C("div"),t=C("span"),H(n.$$.fragment),l=Q(`
    Settings`),r=j(),H(i.$$.fragment),o=j(),a=C("div"),c=C("span"),c.textContent="Send notifications",f=j(),H(u.$$.fragment),d=j(),_=C("div"),m=C("span"),m.textContent="Show events for",k=j(),H(p.$$.fragment),b=j(),M&&M.c(),O=j(),H(G.$$.fragment),y(t,"class","flex-center self-start text-lg font-bold mb-1"),y(c,"class","w-32 text-sm"),y(a,"class","mt-2 flex items-center gap-3"),y(m,"class","w-32 text-sm"),y(_,"class","flex items-center gap-3"),y(e,"class","flex h-full flex-col gap-4 overflow-auto px-3 py-2")},m(D,x){S(D,e,x),h(e,t),T(n,t,null),h(t,l),h(e,r),T(i,e,null),h(e,o),h(e,a),h(a,c),h(a,f),T(u,a,null),h(e,d),h(e,_),h(_,m),h(_,k),T(p,_,null),h(e,b),M&&M.m(e,null),h(e,O),T(G,e,null),v=!0},p(D,[x]){const A={};x&4&&(A.integration={...D[2].find(It),id:D[9]}),i.$set(A);const B={};x&2&&(B.value=D[1].notification),u.$set(B);const W={};x&2&&(W.value=D[1].time_period),p.$set(W),D[3]?M?(M.p(D,x),x&8&&g(M,1)):(M=Mt(D),M.c(),g(M,1),M.m(e,O)):M&&(Z(),$(M,1,1,()=>{M=null}),U());const L={};x&4194304&&(L.$$scope={dirty:x,ctx:D}),G.$set(L)},i(D){v||(g(n.$$.fragment,D),g(i.$$.fragment,D),g(u.$$.fragment,D),g(p.$$.fragment,D),g(M),g(G.$$.fragment,D),D&&pe(()=>{v&&(w&&w.end(1),P=Ie(e,se,{delay:200,duration:200}),P.start())}),v=!0)},o(D){$(n.$$.fragment,D),$(i.$$.fragment,D),$(u.$$.fragment,D),$(p.$$.fragment,D),$(M),$(G.$$.fragment,D),P&&P.invalidate(),D&&(w=Se(e,se,{duration:200})),v=!1},d(D){D&&E(e),N(n),N(i),N(u),N(p),M&&M.d(),N(G),D&&w&&w.end()}}}const It=s=>s.id==="google_calendar";function nl(s,e,t){let n,l,r;ne(s,Wt,v=>t(2,l=v));const{calendarConfig:i,isGoogleCalendarIntegrated:o,updatingEvents:a,google_calendar_events:c,widgetId:f,integrationId:u}=$e("stores");ne(s,i,v=>t(1,n=v)),ne(s,o,v=>t(3,r=v));const d=v=>{const M=n.unselected_calenders,D=M.findIndex(x=>x===v);D===-1?M.push(v):M.splice(D,1),ve(i,n.unselected_calenders=M,n),we({updatingEvents:a,calendarConfig:i,isGoogleCalendarIntegrated:o,google_calendar_events:c,widgetId:f})};let _=!1;const m=Be();return[_,n,l,r,i,o,a,c,f,u,d,m,v=>{ve(i,n.notification=v.detail,n),we({updatingEvents:a,calendarConfig:i,isGoogleCalendarIntegrated:o,google_calendar_events:c,widgetId:f})},v=>{console.log(v.detail),ve(i,n.time_period=v.detail,n),we({updatingEvents:a,calendarConfig:i,isGoogleCalendarIntegrated:o,google_calendar_events:c,widgetId:f})},async()=>{t(0,_=!0);const v=await ye.get("/integration/google_calendar/get_all_calendars",{params:{widgetId:f==="calendar"?"":f}}).catch(()=>{t(0,_=!1)});v!=null&&v.data&&ve(i,n.google_calendar_ids=v.data.calendars,n),t(0,_=!1)},(v,M)=>M===v.id,(v,M)=>M===v.id,v=>d(v.id),()=>m("close")]}class ll extends he{constructor(e){super(),be(this,e,nl,tl,ke,{})}}function rl(s){let e,t,n,l,r,i;return t=new Ce({props:{icon:Te,class:"animate-spin text-lg"}}),{c(){e=C("div"),H(t.$$.fragment),n=Q(`
      Updating event`),y(e,"class","flex-center h-64 flex-col gap-3 text-base")},m(o,a){S(o,e,a),T(t,e,null),h(e,n),i=!0},p:te,i(o){i||(g(t.$$.fragment,o),o&&pe(()=>{i&&(r&&r.end(1),l=Ie(e,se,{delay:200,duration:200}),l.start())}),i=!0)},o(o){$(t.$$.fragment,o),l&&l.invalidate(),o&&(r=Se(e,se,{duration:200})),i=!1},d(o){o&&E(e),N(t),o&&r&&r.end()}}}function il(s){let e,t,n,l,r,i,o,a,c,f,u,d,_,m,k,p,b,O,G,P,w,v,M,D,x,A,B,W,L,q,V,ie,le,re;n=new Ce({props:{icon:Nt}});function X(I){s[18](I)}let R={placeholder:"Summary",size:"md",class:"w-full"};s[1]!==void 0&&(R.value=s[1]),c=new At({props:R}),fe.push(()=>ue(c,"value",X));function ae(I){s[19](I)}let oe={};s[2]!==void 0&&(oe.value=s[2]),b=new xt({props:oe}),fe.push(()=>ue(b,"value",ae));function ce(I){s[20](I)}let z={round:!0,filled:!0};s[8]!==void 0&&(z.checked=s[8]),v=new Ye({props:z}),fe.push(()=>ue(v,"checked",ce));let F=!s[8]&&St(s),J=s[11]&&Et(s);W=new De({props:{icon:Xe,size:"xl",$$slots:{default:[ol]},$$scope:{ctx:s}}}),W.$on("click",s[26]),q=new Re({props:{disabled:s[6],$$slots:{default:[cl]},$$scope:{ctx:s}}}),q.$on("click",s[15]);let K=s[7]&&Yt(s);return{c(){e=C("div"),t=C("span"),H(n.$$.fragment),l=Q(`
        Update Event`),r=j(),i=C("div"),o=C("span"),o.textContent="Title",a=j(),H(c.$$.fragment),u=j(),d=C("div"),_=C("span"),_.textContent="When",m=j(),k=C("div"),p=C("div"),H(b.$$.fragment),G=j(),P=C("div"),w=Q("All day "),H(v.$$.fragment),D=j(),F&&F.c(),x=j(),J&&J.c(),A=j(),B=C("div"),H(W.$$.fragment),L=j(),H(q.$$.fragment),V=j(),K&&K.c(),y(t,"class","flex-center mb-2 gap-3 text-lg"),y(o,"class","w-16 shrink-0"),y(i,"class","flex items-center justify-start"),y(_,"class","mt-1 w-16"),y(P,"class","flex-center ml-6 gap-3"),y(p,"class","flex items-center"),y(k,"class","flex flex-col items-start"),y(d,"class","flex items-start justify-start"),y(B,"class","mt-4 flex w-full items-center justify-center gap-4"),y(e,"class","flex h-full w-full flex-col gap-5")},m(I,ee){S(I,e,ee),h(e,t),T(n,t,null),h(t,l),h(e,r),h(e,i),h(i,o),h(i,a),T(c,i,null),h(e,u),h(e,d),h(d,_),h(d,m),h(d,k),h(k,p),T(b,p,null),h(p,G),h(p,P),h(P,w),T(v,P,null),h(k,D),F&&F.m(k,null),h(e,x),J&&J.m(e,null),h(e,A),h(e,B),T(W,B,null),h(B,L),T(q,B,null),h(e,V),K&&K.m(e,null),re=!0},p(I,ee){const Oe={};!f&&ee[0]&2&&(f=!0,Oe.value=I[1],de(()=>f=!1)),c.$set(Oe);const Ge={};!O&&ee[0]&4&&(O=!0,Ge.value=I[2],de(()=>O=!1)),b.$set(Ge);const Ae={};!M&&ee[0]&256&&(M=!0,Ae.checked=I[8],de(()=>M=!1)),v.$set(Ae),I[8]?F&&(Z(),$(F,1,1,()=>{F=null}),U()):F?(F.p(I,ee),ee[0]&256&&g(F,1)):(F=St(I),F.c(),g(F,1),F.m(k,null)),I[11]?J?(J.p(I,ee),ee[0]&2048&&g(J,1)):(J=Et(I),J.c(),g(J,1),J.m(e,A)):J&&(Z(),$(J,1,1,()=>{J=null}),U());const He={};ee[1]&8&&(He.$$scope={dirty:ee,ctx:I}),W.$set(He);const Ee={};ee[0]&64&&(Ee.disabled=I[6]),ee[1]&8&&(Ee.$$scope={dirty:ee,ctx:I}),q.$set(Ee),I[7]?K?(K.p(I,ee),ee[0]&128&&g(K,1)):(K=Yt(I),K.c(),g(K,1),K.m(e,null)):K&&(Z(),$(K,1,1,()=>{K=null}),U())},i(I){re||(g(n.$$.fragment,I),g(c.$$.fragment,I),g(b.$$.fragment,I),g(v.$$.fragment,I),g(F),g(J),g(W.$$.fragment,I),g(q.$$.fragment,I),g(K),I&&pe(()=>{re&&(le&&le.end(1),ie=Ie(e,se,{delay:200,duration:200}),ie.start())}),re=!0)},o(I){$(n.$$.fragment,I),$(c.$$.fragment,I),$(b.$$.fragment,I),$(v.$$.fragment,I),$(F),$(J),$(W.$$.fragment,I),$(q.$$.fragment,I),$(K),ie&&ie.invalidate(),I&&(le=Se(e,se,{duration:200})),re=!1},d(I){I&&E(e),N(n),N(c),N(b),N(v),F&&F.d(),J&&J.d(),N(W),N(q),K&&K.d(),I&&le&&le.end()}}}function St(s){let e,t,n,l,r,i,o,a,c,f,u,d,_,m=s[17](s[9])+"",k,p;function b(w){s[21](w)}let O={};s[0]!==void 0&&(O.value=s[0]),t=new Ve({props:O}),fe.push(()=>ue(t,"value",b));function G(w){s[22](w)}let P={};return s[3]!==void 0&&(P.value=s[3]),o=new Ve({props:P}),fe.push(()=>ue(o,"value",G)),o.$on("change",s[23]),d=new De({props:{icon:Ht,tooltip:"Duration",size:"md"}}),{c(){e=C("div"),H(t.$$.fragment),l=j(),r=C("span"),r.textContent="to",i=j(),H(o.$$.fragment),f=j(),u=C("span"),H(d.$$.fragment),_=j(),k=Q(m),y(r,"class","mx-3"),y(e,"class","mt-4 flex items-center justify-start"),y(u,"class","mt-3 flex items-center justify-start gap-2 text-sm")},m(w,v){S(w,e,v),T(t,e,null),h(e,l),h(e,r),h(e,i),T(o,e,null),S(w,f,v),S(w,u,v),T(d,u,null),h(u,_),h(u,k),p=!0},p(w,v){const M={};!n&&v[0]&1&&(n=!0,M.value=w[0],de(()=>n=!1)),t.$set(M);const D={};!a&&v[0]&8&&(a=!0,D.value=w[3],de(()=>a=!1)),o.$set(D),(!p||v[0]&512)&&m!==(m=w[17](w[9])+"")&&me(k,m)},i(w){p||(g(t.$$.fragment,w),g(o.$$.fragment,w),w&&pe(()=>{p&&(c||(c=Me(e,xe,{},!0)),c.run(1))}),g(d.$$.fragment,w),p=!0)},o(w){$(t.$$.fragment,w),$(o.$$.fragment,w),w&&(c||(c=Me(e,xe,{},!1)),c.run(0)),$(d.$$.fragment,w),p=!1},d(w){w&&E(e),N(t),N(o),w&&c&&c.end(),w&&E(f),w&&E(u),N(d)}}}function Et(s){let e,t,n,l;const r=[al,sl],i=[];function o(a,c){return a[14]?0:1}return e=o(s),t=i[e]=r[e](s),{c(){t.c(),n=_e()},m(a,c){i[e].m(a,c),S(a,n,c),l=!0},p(a,c){t.p(a,c)},i(a){l||(g(t),l=!0)},o(a){$(t),l=!1},d(a){i[e].d(a),a&&E(n)}}}function sl(s){let e,t,n,l,r,i;function o(c){s[25](c)}let a={size:"lg",round:!0,filled:!0};return s[5]!==void 0&&(a.value=s[5]),l=new Ye({props:a}),fe.push(()=>ue(l,"value",o)),{c(){e=C("div"),t=C("span"),t.textContent="Add Google Meet link",n=j(),H(l.$$.fragment),y(t,"class","flex-center gap-2"),y(e,"class","mt-2 flex items-center gap-4")},m(c,f){S(c,e,f),h(e,t),h(e,n),T(l,e,null),i=!0},p(c,f){const u={};!r&&f[0]&32&&(r=!0,u.value=c[5],de(()=>r=!1)),l.$set(u)},i(c){i||(g(l.$$.fragment,c),i=!0)},o(c){$(l.$$.fragment,c),i=!1},d(c){c&&E(e),N(l)}}}function al(s){let e,t,n,l,r,i;function o(c){s[24](c)}let a={size:"lg",round:!0,filled:!0};return s[4]!==void 0&&(a.value=s[4]),l=new Ye({props:a}),fe.push(()=>ue(l,"value",o)),{c(){e=C("div"),t=C("span"),t.textContent="Remove Google Meet",n=j(),H(l.$$.fragment),y(t,"class","flex-center gap-2"),y(e,"class","mt-2 flex items-center gap-4")},m(c,f){S(c,e,f),h(e,t),h(e,n),T(l,e,null),i=!0},p(c,f){const u={};!r&&f[0]&16&&(r=!0,u.value=c[4],de(()=>r=!1)),l.$set(u)},i(c){i||(g(l.$$.fragment,c),i=!0)},o(c){$(l.$$.fragment,c),i=!1},d(c){c&&E(e),N(l)}}}function ol(s){let e;return{c(){e=Q("Back")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function cl(s){let e;return{c(){e=Q("Confirm")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function Yt(s){let e,t,n,l,r,i;return t=new Ce({props:{icon:Tt}}),{c(){e=C("div"),H(t.$$.fragment),n=j(),l=C("span"),r=Q(s[7]),y(e,"class","curved-half flex w-max items-center justify-center gap-2 self-center bg-red-400 px-4 py-1.5 text-sm")},m(o,a){S(o,e,a),T(t,e,null),h(e,n),h(e,l),h(l,r),i=!0},p(o,a){(!i||a[0]&128)&&me(r,o[7])},i(o){i||(g(t.$$.fragment,o),i=!0)},o(o){$(t.$$.fragment,o),i=!1},d(o){o&&E(e),N(t)}}}function fl(s){let e,t,n,l,r,i;const o=[il,rl],a=[];function c(f,u){return f[6]?1:0}return t=c(s),n=a[t]=o[t](s),{c(){e=C("div"),n.c(),y(e,"class","transition-container px-3 py-3")},m(f,u){S(f,e,u),a[t].m(e,null),i=!0},p(f,u){let d=t;t=c(f),t===d?a[t].p(f,u):(Z(),$(a[d],1,1,()=>{a[d]=null}),U(),n=a[t],n?n.p(f,u):(n=a[t]=o[t](f),n.c()),g(n,1),n.m(e,null))},i(f){i||(g(n),f&&pe(()=>{i&&(r&&r.end(1),l=Ie(e,se,{delay:200,duration:200}),l.start())}),i=!0)},o(f){$(n),l&&l.invalidate(),f&&(r=Se(e,se,{duration:200})),i=!1},d(f){f&&E(e),a[t].d(),f&&r&&r.end()}}}let Ot="";function ul(s=null){const e=s?new Date(s):new Date,t=new Date(Math.ceil(e.getTime()/(15*60*1e3))*15*60*1e3),n=[{label:new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t),value:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/^24/,"00").padStart(5,"0")}];for(let l=0;l<24*4-1;l++){t.setMinutes(t.getMinutes()+15);const r=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(t),i=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/^24/,"00").padStart(5,"0");n.push({label:r,value:i})}return n}function dl(s,e,t){let n,l;const{dashy_events:r,eventToUpdate:i,google_calendar_events:o,isGoogleCalendarIntegrated:a,selectedMonthEvents:c,widgetId:f}=$e("stores");ne(s,i,X=>t(10,n=X)),ne(s,a,X=>t(11,l=X));let u=(n==null?void 0:n.summary)||"",d=n!=null&&n.start?new Date(n==null?void 0:n.start):new Date,_=Y(n==null?void 0:n.start).format("HH:mm"),m=Y(n==null?void 0:n.end).format("HH:mm"),k=n==null?void 0:n.meeting,p=!1,b=!1,O=!1,G=!1,P=n==null?void 0:n.allDay,w=n!=null&&n.allDay?0:Y(n==null?void 0:n.end).diff(Y(n==null?void 0:n.start),"minutes");Be();const v=async()=>{if(u===""){t(7,G="Event name can't be empty");return}if(u.length>255){t(7,G="Event name is too long");return}const X=Y(d).format("YYYY-MM-DD"),R=Y(X+" "+_,"YYYY-MM-DD HH:mm").toISOString(),ae=m>_?Y(X+" "+m,"YYYY-MM-DD HH:mm").toISOString():Y(X+" "+m,"YYYY-MM-DD HH:mm").add(1,"day").toISOString(),oe=Y(X).format("YYYY-MM-DD");if(t(6,O=!0),Math.random().toString(36).substr(2,9),!l)r.update(ce=>{const z=ce.findIndex(J=>J.id===(n==null?void 0:n.id)),F={...ce[z],summary:u,start:P?oe:R,end:P?oe:ae,allDay:P,event_url:Ot};return ce[z]=F,ce}),i.set(null);else try{const ce=await ye.patch("/integration/google_calendar/update_event",{title:u,start:P?oe:R,end:P?oe:ae,allDay:P,id:n==null?void 0:n.id,...k?{removeMeeting:p}:{},...b?{createMeeting:b}:{},calendarId:n==null?void 0:n.calendar_id},{params:{widgetId:f==="calendar"?"":f}});if(!ce||!ce.data.success)return;ce.data.success&&(o.update(z=>{const F=z.findIndex(J=>J.id===(n==null?void 0:n.id));return z[F]=ce.data.event,z}),c.update(z=>{const F=z.findIndex(J=>J.id===(n==null?void 0:n.id));return z[F]=ce.data.event,z}),i.set(null))}catch{t(6,O=!1)}};ul(Y(d).startOf("day").toISOString());const M=()=>{t(3,m=Y(_,"HH:mm").add(w,"minutes").format("HH:mm"))},D=(X,R)=>{const ae=Y(X,"HH:mm"),oe=Y(R,"HH:mm");return oe.isBefore(ae)&&oe.add(1,"day"),oe.diff(ae,"minutes")},x=X=>{const R=Math.floor(X/60),ae=X%60;return!R&&!ae?"0 minute":R===0?`${ae} minute${ae>1?"s":""}`:ae===0?`${R} hour${R>1?"s":""}`:`${R} hour${R>1?"s":""} ${ae} minute${ae>1?"s":""}`};function A(X){u=X,t(1,u)}function B(X){d=X,t(2,d)}function W(X){P=X,t(8,P)}function L(X){_=X,t(0,_)}function q(X){m=X,t(3,m)}const V=()=>{t(9,w=D(_,m))};function ie(X){p=X,t(4,p)}function le(X){b=X,t(5,b)}const re=()=>ve(i,n=null,n);return s.$$.update=()=>{s.$$.dirty[0]&1&&_&&M()},[_,u,d,m,p,b,O,G,P,w,n,l,i,a,k,v,D,x,A,B,W,L,q,V,ie,le,re]}class _l extends he{constructor(e){super(),be(this,e,dl,fl,ke,{},null,[-1,-1])}}function ml(s){let e,t,n,l,r,i,o,a,c;const f=[bl,hl],u=[];function d(_,m){return _[3]?0:1}return n=d(s),l=u[n]=f[n](s),{c(){e=C("div"),t=C("div"),l.c(),y(t,"class","max-h-[25rem] transition")},m(_,m){S(_,e,m),h(e,t),u[n].m(t,null),o=!0,a||(c=qe(Qt.call(null,e)),a=!0)},p(_,m){let k=n;n=d(_),n===k?u[n].p(_,m):(Z(),$(u[k],1,1,()=>{u[k]=null}),U(),l=u[n],l?l.p(_,m):(l=u[n]=f[n](_),l.c()),g(l,1),l.m(t,null))},i(_){o||(g(l),_&&pe(()=>{o&&(i&&i.end(1),r=Ie(t,se,{delay:200,duration:200}),r.start())}),o=!0)},o(_){$(l),r&&r.invalidate(),_&&(i=Se(t,se,{duration:200})),o=!1},d(_){_&&E(e),u[n].d(),_&&i&&i.end(),a=!1,c()}}}function pl(s){let e,t;return e=new ll({}),e.$on("close",s[23]),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function gl(s){let e,t;return e=new _l({}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function $l(s){let e,t;return e=new bn({}),e.$on("close",s[22]),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function hl(s){let e,t;return e=new Lt({props:{addEvent:s[25]}}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p(n,l){const r={};l[0]&1&&(r.addEvent=n[25]),e.$set(r)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function bl(s){let e,t,n,l;const r=[wl,vl,kl],i=[];function o(a,c){return a[4]==="date"?0:a[4]==="month"?1:a[4]==="upcoming"?2:-1}return~(e=o(s))&&(t=i[e]=r[e](s)),{c(){t&&t.c(),n=_e()},m(a,c){~e&&i[e].m(a,c),S(a,n,c),l=!0},p(a,c){let f=e;e=o(a),e===f?~e&&i[e].p(a,c):(t&&(Z(),$(i[f],1,1,()=>{i[f]=null}),U()),~e?(t=i[e],t?t.p(a,c):(t=i[e]=r[e](a),t.c()),g(t,1),t.m(n.parentNode,n)):t=null)},i(a){l||(g(t),l=!0)},o(a){$(t),l=!1},d(a){~e&&i[e].d(a),a&&E(n)}}}function kl(s){let e,t;return e=new Lt({props:{addEvent:s[24]}}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p(n,l){const r={};l[0]&1&&(r.addEvent=n[24]),e.$set(r)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function vl(s){let e,t;return e=new Xn({}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function wl(s){let e,t;return e=new Hn({props:{filterDate:Cl}}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Gt(s){let e,t,n,l,r,i,o,a,c,f,u;n=new De({props:{icon:Jt,class:"ml-1 text-2xl",tooltip:"Add event"}}),n.$on("click",s[26]);const d=[Dl,yl],_=[];function m(k,p){return k[3]?0:1}return i=m(s),o=_[i]=d[i](s),c=new De({props:{tooltip:"Settings",icon:Kt,class:"text-xl"}}),c.$on("click",s[32]),{c(){e=C("div"),t=C("div"),H(n.$$.fragment),l=j(),r=C("div"),o.c(),a=j(),H(c.$$.fragment),y(r,"class","mr-2 flex items-center gap-4"),y(t,"class","mb-1 flex items-center justify-between px-1"),y(e,"class","flex h-full w-full flex-col px-2 py-2")},m(k,p){S(k,e,p),h(e,t),T(n,t,null),h(t,l),h(t,r),_[i].m(r,null),h(r,a),T(c,r,null),u=!0},p(k,p){let b=i;i=m(k),i===b?_[i].p(k,p):(Z(),$(_[b],1,1,()=>{_[b]=null}),U(),o=_[i],o?o.p(k,p):(o=_[i]=d[i](k),o.c()),g(o,1),o.m(r,a))},i(k){u||(g(n.$$.fragment,k),g(o),g(c.$$.fragment,k),k&&pe(()=>{u&&(f||(f=Me(e,it,{duration:400},!0)),f.run(1))}),u=!0)},o(k){$(n.$$.fragment,k),$(o),$(c.$$.fragment,k),k&&(f||(f=Me(e,it,{duration:400},!1)),f.run(0)),u=!1},d(k){k&&E(e),N(n),_[i].d(),N(c),k&&f&&f.end()}}}function yl(s){let e,t,n;return{c(){e=C("button"),e.innerHTML='<img src="/apps/google_calendar.png" alt="Google Calendar" class="h-6 w-6"/>',y(e,"class","flex items-center gap-3 opacity-70 transition hover:opacity-100")},m(l,r){S(l,e,r),t||(n=[qe(Ze.call(null,e,"Sync with <br/> Google Calendar")),Ue(e,"click",s[31])],t=!0)},p:te,i:te,o:te,d(l){l&&E(e),t=!1,et(n)}}}function Dl(s){let e,t,n,l,r,i,o,a,c,f,u,d,_;function m(p){s[27](p)}let k={options:s[21]};return s[4]!==void 0&&(k.value=s[4]),e=new ze({props:k}),fe.push(()=>ue(e,"value",m)),e.$on("pointerdown",s[28]),f=new De({props:{tooltip:"Refresh events",icon:s[8]?Te:Qe,class:s[8]?"animate-spin text-xl":"text-xl"}}),f.$on("click",s[30]),{c(){H(e.$$.fragment),n=j(),l=C("button"),r=C("img"),c=j(),H(f.$$.fragment),Le(r.src,i="/apps/Meet.svg")||y(r,"src",i),y(r,"alt","Meeting"),y(r,"class",o="h-[1.4rem] w-[1.4rem] "+(s[7]?"opacity-100":"opacity-50")),y(l,"class","flex items-center")},m(p,b){T(e,p,b),S(p,n,b),S(p,l,b),h(l,r),S(p,c,b),T(f,p,b),u=!0,d||(_=[Ue(l,"click",s[29]),qe(a=Ze.call(null,l,s[7]?"Show all events":"Show meetings only"))],d=!0)},p(p,b){const O={};!t&&b[0]&16&&(t=!0,O.value=p[4],de(()=>t=!1)),e.$set(O),(!u||b[0]&128&&o!==(o="h-[1.4rem] w-[1.4rem] "+(p[7]?"opacity-100":"opacity-50")))&&y(r,"class",o),a&&Xt(a.update)&&b[0]&128&&a.update.call(null,p[7]?"Show all events":"Show meetings only");const G={};b[0]&256&&(G.icon=p[8]?Te:Qe),b[0]&256&&(G.class=p[8]?"animate-spin text-xl":"text-xl"),f.$set(G)},i(p){u||(g(e.$$.fragment,p),g(f.$$.fragment,p),u=!0)},o(p){$(e.$$.fragment,p),$(f.$$.fragment,p),u=!1},d(p){N(e,p),p&&E(n),p&&E(l),p&&E(c),N(f,p),d=!1,et(_)}}}function Ml(s){let e,t,n,l,r,i;const o=[$l,gl,pl,ml],a=[];function c(u,d){return u[0]?0:u[2]?1:u[1]?2:3}n=c(s),l=a[n]=o[n](s);let f=(s[5]||s[6])&&!s[0]&&!s[1]&&!s[2]&&Gt(s);return{c(){e=C("div"),t=C("div"),l.c(),r=j(),f&&f.c(),y(t,"class","transition-container flex h-max w-[24rem] items-start justify-start py-2 px-2"),y(e,"class","h-max w-max")},m(u,d){S(u,e,d),h(e,t),a[n].m(t,null),h(e,r),f&&f.m(e,null),i=!0},p(u,d){let _=n;n=c(u),n===_?a[n].p(u,d):(Z(),$(a[_],1,1,()=>{a[_]=null}),U(),l=a[n],l?l.p(u,d):(l=a[n]=o[n](u),l.c()),g(l,1),l.m(t,null)),(u[5]||u[6])&&!u[0]&&!u[1]&&!u[2]?f?(f.p(u,d),d[0]&103&&g(f,1)):(f=Gt(u),f.c(),g(f,1),f.m(e,null)):f&&(Z(),$(f,1,1,()=>{f=null}),U())},i(u){i||(g(l),g(f),i=!0)},o(u){$(l),$(f),i=!1},d(u){u&&E(e),a[n].d(),f&&f.d()}}}let Cl=null;function Il(s,e,t){let n,l,r,i,o,a,c,f;ne(s,tt,R=>t(9,f=R));const{eventToUpdate:u,isGoogleCalendarIntegrated:d,onlyMeetings:_,selectedView:m,updatingEvents:k,calendarConfig:p,google_calendar_events:b,widgetId:O,integrationId:G}=$e("stores");ne(s,u,R=>t(2,n=R)),ne(s,d,R=>t(3,l=R)),ne(s,_,R=>t(7,a=R)),ne(s,m,R=>t(4,r=R)),ne(s,k,R=>t(8,c=R));let P=!1,w=!1;const v=$e("appActive");ne(s,v,R=>t(6,o=R));const M=$e("appView");ne(s,M,R=>t(5,i=R));const D=[{label:"Upcoming",value:"upcoming"},{label:"Monthly view",value:"month"}],x=()=>t(0,P=!1),A=()=>t(1,w=!1),B=()=>t(0,P=!0),W=()=>t(0,P=!0),L=()=>t(0,P=!P);function q(R){r=R,m.set(r)}return[P,w,n,l,r,i,o,a,c,f,u,d,_,m,k,p,b,O,G,v,M,D,x,A,B,W,L,q,()=>{M.set(!0)},()=>ve(_,a=!a,a),()=>we({updatingEvents:k,calendarConfig:p,isGoogleCalendarIntegrated:d,google_calendar_events:b,widgetId:O}),()=>{Pt({user:jt.currentUser,currentProfile:f,integration:"google_calendar",integration_id:G})},()=>t(1,w=!w)]}class Sl extends he{constructor(e){super(),be(this,e,Il,Ml,ke,{},null,[-1,-1])}}function El(s,e,t){let n,l=te,r=()=>(l(),l=je(_,G=>t(5,n=G)),_),i,o=te,a=()=>(o(),o=je(m,G=>t(6,i=G)),m),c,f=te,u=()=>(f(),f=je(d,G=>t(7,c=G)),d);s.$$.on_destroy.push(()=>l()),s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>f());let{calendarEvents:d}=e;u();let{calendarConfig:_}=e;r();let{isGoogleCalendarIntegrated:m}=e;a();let{google_calendar_events:k}=e,{dashy_events:p}=e;const b=async()=>{const G=c,P=n.notification;if(G&&G.length>0&&P){if(!P)return;const w=new Date,v=G.filter(M=>{const D=Y(M.start).diff(w),x=D>0&&D<P*6e4,A=M.allDay&&Y(M.start).isSame(w,"day");return!M.notified&&(x||A)});if(v.length===0)return;v.forEach(M=>{var A;let D=i?(A=n.google_calendar_ids.find(B=>B.id===M.calendar_id))==null?void 0:A.isOwner:!0;const x={id:M.id,title:M.summary,body:M.meeting?"Click to join the meeting now!":M.allDay?"All day":"Event starting soon!",app:"calendar",...M.meeting?{icon:`/apps/${M.meeting_provider}.svg`}:{faIcon:{icon:"faCalendar",type:"solid"}},...D?{action:"launchUrl"}:{},actionData:M.meeting?M.meeting_url:M.event_url,...M.allDay?{}:{dueIn:M.start},timestamp:Date.now(),expiry:M.allDay?Y().endOf("day").toISOString():M.end};Zt(x),ge(m)?k.update(B=>B.map(W=>(W.id===M.id&&(W.notified=!0),W))):p.update(B=>B.map(W=>(W.id===M.id&&(W.notified=!0),W)))})}},O=setInterval(()=>{b()},1e3*10);return Fe(()=>{clearInterval(O)}),s.$$set=G=>{"calendarEvents"in G&&u(t(0,d=G.calendarEvents)),"calendarConfig"in G&&r(t(1,_=G.calendarConfig)),"isGoogleCalendarIntegrated"in G&&a(t(2,m=G.isGoogleCalendarIntegrated)),"google_calendar_events"in G&&t(3,k=G.google_calendar_events),"dashy_events"in G&&t(4,p=G.dashy_events)},[d,_,m,k,p]}class Yl extends he{constructor(e){super(),be(this,e,El,null,ke,{calendarEvents:0,calendarConfig:1,isGoogleCalendarIntegrated:2,google_calendar_events:3,dashy_events:4})}}function Ol(s,e,t){let n,l;const{updatingEvents:r,calendarConfig:i,google_calendar_events:o,isGoogleCalendarIntegrated:a,widgetId:c}=$e("stores");ne(s,a,d=>t(2,l=d));let f=l;const u=()=>{n&&n(),f!==l&&(f=l,i.update(_=>(_.google_calendar_ids=[],_.unselected_calenders=[],_.primaryCalendar="",l||(_.google_calendar=!1),_)),o.set([])),we({updatingEvents:r,calendarConfig:i,isGoogleCalendarIntegrated:a,google_calendar_events:o,widgetId:c});const d=setInterval(()=>{we({updatingEvents:r,calendarConfig:i,isGoogleCalendarIntegrated:a,google_calendar_events:o,widgetId:c})},1e3*60*10);return()=>{clearInterval(d)}};return Fe(()=>{n==null||n()}),s.$$.update=()=>{s.$$.dirty&6&&t(1,n=l?u():n==null?void 0:n()),s.$$.dirty&4&&(l||(o.set([]),i.update(d=>(d.google_calendar_ids=[],d.unselected_calenders=[],d.primaryCalendar="",l||(d.google_calendar=!1),d))))},[a,n,l]}class Gl extends he{constructor(e){super(),be(this,e,Ol,null,ke,{})}}function Al(s){let e,t;return e=new ln({props:{customText:"Integrations are only available for Dashy Pro users. Upgrade now to use this widget.",iconImg:"/apps/google_calendar.png",name:"Google Calendar",embeddedInsideApp:!0}}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Hl(s){let e,t,n,l;const r=[Nl,Tl],i=[];function o(a,c){return a[6]?0:1}return e=o(s),t=i[e]=r[e](s),{c(){t.c(),n=_e()},m(a,c){i[e].m(a,c),S(a,n,c),l=!0},p(a,c){let f=e;e=o(a),e===f?i[e].p(a,c):(Z(),$(i[f],1,1,()=>{i[f]=null}),U(),t=i[e],t?t.p(a,c):(t=i[e]=r[e](a),t.c()),g(t,1),t.m(n.parentNode,n))},i(a){l||(g(t),l=!0)},o(a){$(t),l=!1},d(a){i[e].d(a),a&&E(n)}}}function Tl(s){let e,t;return e=new rn({}),{c(){H(e.$$.fragment)},m(n,l){T(e,n,l),t=!0},p:te,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Nl(s){let e,t,n,l,r,i;return e=new Sl({}),n=new Yl({props:{isGoogleCalendarIntegrated:s[4],calendarConfig:s[3],google_calendar_events:s[1],dashy_events:s[2],calendarEvents:s[5]}}),r=new Gl({}),{c(){H(e.$$.fragment),t=j(),H(n.$$.fragment),l=j(),H(r.$$.fragment)},m(o,a){T(e,o,a),S(o,t,a),T(n,o,a),S(o,l,a),T(r,o,a),i=!0},p:te,i(o){i||(g(e.$$.fragment,o),g(n.$$.fragment,o),g(r.$$.fragment,o),i=!0)},o(o){$(e.$$.fragment,o),$(n.$$.fragment,o),$(r.$$.fragment,o),i=!1},d(o){N(e,o),o&&E(t),N(n,o),o&&E(l),N(r,o)}}}function Pl(s){let e,t,n,l;const r=[Hl,Al],i=[];function o(a,c){return 0}return e=o(),t=i[e]=r[e](s),{c(){t.c(),n=_e()},m(a,c){i[e].m(a,c),S(a,n,c),l=!0},p(a,[c]){t.p(a,c)},i(a){l||(g(t),l=!0)},o(a){$(t),l=!1},d(a){i[e].d(a),a&&E(n)}}}function jl(s,e,t){let n,l=te,r=()=>(l(),l=je(u,A=>t(6,n=A)),u);s.$$.on_destroy.push(()=>l());let{config:i}=e;const o={path:`user_data/{uid}/profiles/{currentProfile}/apps/${i.id}`,currentProfile:tt,uid:Ut},a=i.id==="calendar"?"google_calendar":`google_calendar_${i.id}`,{create:c,createPersist:f,isFetched:u,start:d,stop:_}=nn(o);r();const m=f("gc_events",[]),k=c("dashy_events",[]),p=st(!1),b=c("onlyMeetings",!1),O=c("config",{primaryCalendar:"",google_calendar:!1,google_calendar_ids:[],unselected_calenders:[],time_period:7,notification:5}),G=Ke([en],([A])=>{const B=A==null?void 0:A[a];return B?B.id:!1}),P=f("selectedMonth",Y().format("YYYY-MM")+"-01"),w=f("selectedMonthEvents",[]),v=f("selectedView","upcoming"),M=st(null),D=Ke([k,m,G,O,b],([A,B,W,L,q])=>W?B.filter(V=>(V==null?void 0:V.calendar_id)&&!L.unselected_calenders.includes(V.calendar_id)&&(q?V.meeting:!0)):A),x=Ke([D,O],([A,B])=>{const W=A.filter(V=>new Date(V.end)<new Date),L=A.filter(V=>new Date(V.end)>Y().add(B.time_period,"days").toDate()),q=A.filter(V=>new Date(V.end)<Y().add(B.time_period,"days").toDate()&&new Date(V.end)>new Date);return{past_events:W.length,future_events:L.length,upcoming_events:q.length}});return d(),tn("stores",{google_calendar_events:m,dashy_events:k,updatingEvents:p,onlyMeetings:b,calendarConfig:O,isGoogleCalendarIntegrated:G,selectedMonth:P,selectedMonthEvents:w,selectedView:v,eventToUpdate:M,events:D,event_stats:x,widgetId:i.id,integrationId:a}),s.$$set=A=>{"config"in A&&t(7,i=A.config)},[u,m,k,O,G,D,n,i,c,f,d,_,p,b,P,w,v,M,x]}class Fl extends he{constructor(e){super(),be(this,e,jl,Pl,ke,{config:7,create:8,createPersist:9,calendarStoresReady:0,start:10,stop:11,google_calendar_events:1,dashy_events:2,updatingEvents:12,onlyMeetings:13,calendarConfig:3,isGoogleCalendarIntegrated:4,selectedMonth:14,selectedMonthEvents:15,selectedView:16,eventToUpdate:17,events:5,event_stats:18})}get create(){return this.$$.ctx[8]}get createPersist(){return this.$$.ctx[9]}get calendarStoresReady(){return this.$$.ctx[0]}get start(){return this.$$.ctx[10]}get stop(){return this.$$.ctx[11]}get google_calendar_events(){return this.$$.ctx[1]}get dashy_events(){return this.$$.ctx[2]}get updatingEvents(){return this.$$.ctx[12]}get onlyMeetings(){return this.$$.ctx[13]}get calendarConfig(){return this.$$.ctx[3]}get isGoogleCalendarIntegrated(){return this.$$.ctx[4]}get selectedMonth(){return this.$$.ctx[14]}get selectedMonthEvents(){return this.$$.ctx[15]}get selectedView(){return this.$$.ctx[16]}get eventToUpdate(){return this.$$.ctx[17]}get events(){return this.$$.ctx[5]}get event_stats(){return this.$$.ctx[18]}}export{Fl as default};
