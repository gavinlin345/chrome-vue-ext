import{S as Ae,i as Ee,s as Me,U as Xe,q as A,V as O,c as N,r as h,u as M,L as g,m as U,t as m,a as _,D,d as Y,b as R,ah as on,K,cr as pn,aj as mn,aY as st,E as ge,a5 as de,p as j,au as _n,R as Te,T as dt,aX as gn,aa as xe,v as ee,x as te,Z as we,a6 as an,aZ as $n,ad as bn,a1 as ye,aR as De,a_ as kn,a8 as Ne,a9 as et,a$ as lt,o as qe,b0 as je,ac as hn,aG as vn,J as Le,n as $e,b1 as ct,a7 as We,af as Be,ag as Fe,N as wn,O as ke,P as he,b3 as yn,W as ve,bh as Tn,b5 as kt,b6 as ht,b7 as vt,a3 as nt,ar as rt,ab as pt,F as wt,H as An,b4 as yt,y as fn,_ as it,B as Tt,ak as Qe,aD as cn,b8 as un,ao as En,an as ut,al as Mn,aq as At,am as Dn,Q as Cn,ae as In,a2 as Sn,aP as Nn,e as dn,av as Un,aw as Yn,ax as jn,ay as On,az as Ke,aB as Pn}from"./overlayscrollbars.js";import{C as Oe}from"./Chip.js";import{C as Rn,T as Vn,D as Ln,R as Bn,A as Fn}from"./Title.js";import{C as Hn}from"./Card.js";import{I as zn}from"./IntegrationItem.js";import"./DatePicker.js";import"./TimePicker.js";function Jn(l){let e;return{c(){e=K("Connect")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function Zn(l){let e,t,n,i,s,o,a,r,c;return r=new Xe({props:{class:"mt-3 text-base px-4",$$slots:{default:[Jn]},$$scope:{ctx:l}}}),r.$on("click",l[2]),{c(){e=A("div"),t=A("div"),t.innerHTML=`<img src="/apps/microsoft_outlook.png" class="w-[max] h-[2.5rem] object-cover" alt="Todosit logo"/> 
    <span class="text-2xl font-semibold">Outlook Calendar</span>`,n=O(),i=A("span"),i.innerHTML="Connect your Outlook Calendar account to view and manage your events. <br/>",s=O(),o=A("span"),o.textContent="Dashy does not store any of your data.",a=O(),N(r.$$.fragment),h(t,"class","flex-center flex-col gap-6"),h(i,"class","text-base text-center mt-1"),h(o,"class","text-base text-center"),h(e,"class","w-[24rem] h-[24.75rem] px-6 py-4 flex flex-col gap-3 justify-center items-center")},m(f,u){M(f,e,u),g(e,t),g(e,n),g(e,i),g(e,s),g(e,o),g(e,a),U(r,e,null),c=!0},p(f,[u]){const d={};u&8&&(d.$$scope={dirty:u,ctx:f}),r.$set(d)},i(f){c||(m(r.$$.fragment,f),c=!0)},o(f){_(r.$$.fragment,f),c=!1},d(f){f&&D(e),Y(r)}}}function Gn(l,e,t){let n;R(l,on,o=>t(1,n=o));let{widgetId:i=""}=e;const s=()=>{pn({user:mn.currentUser,currentProfile:n,integration:"outlook_calendar",integration_id:i==="outlook_calendar"?"outlook_calendar":`outlook_calendar_${i}`})};return l.$$set=o=>{"widgetId"in o&&t(0,i=o.widgetId)},[i,n,s]}class qn extends Ae{constructor(e){super(),Ee(this,e,Gn,Zn,Me,{widgetId:0})}}function Wn(l,e,t){let n,i,s,o;R(l,st,d=>t(3,s=d));const{minutesBeforeReminder:a,sendNotifications:r,events:c}=ge("stores");R(l,a,d=>t(5,n=d)),R(l,r,d=>t(4,o=d)),R(l,c,d=>t(6,i=d));const f=d=>{let $=[];de(c,i=i.map(p=>(p.reminderSent||j(p.startTime).isBefore(j(d).add(n,"minutes"))&&($.push(p),p.reminderSent=!0),p)),i),$.length>0&&$.forEach(p=>{u(p)})},u=d=>{const $={id:d.id,title:d.subject||"Untitled event",body:d.isMeeting?"Click to join the meeting now!":d.isAllDay?"All day":`Event starting in ${n} minutes!`,app:"outlook_calendar",...d.isMeeting?{icon:`/apps/${d.meetingProvider}.svg`}:{icon:"/apps/microsoft_outlook.png"},action:"launchUrl",actionData:d.isMeeting?d.meetingUrl:d.url,...d.isAllDay?{}:{dueIn:d.startTime},timestamp:Date.now(),expiry:d.isAllDay?j().endOf("day").toISOString():d.endTime};_n($)};return l.$$.update=()=>{l.$$.dirty&24&&o&&f(s)},[a,r,c,s,o]}class Xn extends Ae{constructor(e){super(),Ee(this,e,Wn,null,Me,{})}}const{window:Kn}=$n;function Et(l,e,t){const n=l.slice();return n[30]=e[t],n}function Mt(l,e,t){const n=l.slice();return n[33]=e[t],n}function Dt(l){let e,t,n,i,s,o;e=new Te({props:{icon:bn,class:"text-lg",tooltip:"Edit Event"}}),e.$on("click",l[24]);const a=[xn,Qn],r=[];function c(f,u){return f[1]?0:1}return n=c(l),i=r[n]=a[n](l),{c(){N(e.$$.fragment),t=O(),i.c(),s=ye()},m(f,u){U(e,f,u),M(f,t,u),r[n].m(f,u),M(f,s,u),o=!0},p(f,u){let d=n;n=c(f),n===d?r[n].p(f,u):(ee(),_(r[d],1,1,()=>{r[d]=null}),te(),i=r[n],i?i.p(f,u):(i=r[n]=a[n](f),i.c()),m(i,1),i.m(s.parentNode,s))},i(f){o||(m(e.$$.fragment,f),m(i),o=!0)},o(f){_(e.$$.fragment,f),_(i),o=!1},d(f){Y(e,f),f&&D(t),r[n].d(f),f&&D(s)}}}function Qn(l){let e,t,n,i,s;return t=new Te({props:{icon:hn,class:"text-lg",tooltip:"Delete Event"}}),i=new vn({props:{trigger:"click",placement:"bottom-end",origin:"top right",offset:[0,10],$$slots:{default:[tl,({close:o})=>({36:o}),({close:o})=>[0,o?32:0]]},$$scope:{ctx:l}}}),{c(){e=A("div"),N(t.$$.fragment),n=O(),N(i.$$.fragment)},m(o,a){M(o,e,a),U(t,e,null),M(o,n,a),U(i,o,a),s=!0},p(o,a){const r={};a[1]&96&&(r.$$scope={dirty:a,ctx:o}),i.$set(r)},i(o){s||(m(t.$$.fragment,o),m(i.$$.fragment,o),s=!0)},o(o){_(t.$$.fragment,o),_(i.$$.fragment,o),s=!1},d(o){o&&D(e),Y(t),o&&D(n),Y(i,o)}}}function xn(l){let e,t;return e=new De({props:{icon:Le,class:"text-lg animate-spin"}}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p:$e,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function el(l){let e;return{c(){e=K("Yes, delete event")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function tl(l){let e,t,n,i,s;function o(){return l[25](l[36])}return i=new Xe({props:{$$slots:{default:[el]},$$scope:{ctx:l}}}),i.$on("click",o),{c(){e=A("div"),t=A("span"),t.textContent="Are you sure?",n=O(),N(i.$$.fragment),h(t,"class","text-base font-semibold"),h(e,"class","flex flex-col gap-2 p-2")},m(a,r){M(a,e,r),g(e,t),g(e,n),U(i,e,null),s=!0},p(a,r){l=a;const c={};r[1]&64&&(c.$$scope={dirty:r,ctx:l}),i.$set(c)},i(a){s||(m(i.$$.fragment,a),s=!0)},o(a){_(i.$$.fragment,a),s=!1},d(a){a&&D(e),Y(i)}}}function Ct(l){let e,t=l[6]?"Now live":`In ${l[4]}`,n;return{c(){e=A("span"),n=K(t),h(e,"class","text-base")},m(i,s){M(i,e,s),g(e,n)},p(i,s){s[0]&80&&t!==(t=i[6]?"Now live":`In ${i[4]}`)&&we(n,t)},d(i){i&&D(e)}}}function nl(l){let e,t,n,i,s,o,a,r,c;n=new De({props:{class:"text-lg",icon:ct}}),s=new Oe({props:{class:"flex-center py-1 flex gap-2 text-xs",$$slots:{default:[il]},$$scope:{ctx:l}}}),s.$on("click",l[15]);let f=l[2]&&It();return{c(){e=A("div"),t=A("div"),N(n.$$.fragment),i=O(),N(s.$$.fragment),o=O(),f&&f.c(),h(t,"class","flex-center shrink-0"),h(e,"class","flex items-center justify-start gap-3 mt-4")},m(u,d){M(u,e,d),g(e,t),U(n,t,null),g(e,i),U(s,e,null),g(e,o),f&&f.m(e,null),a=!0,r||(c=Ne(et.call(null,t,"Meeting")),r=!0)},p(u,d){const $={};d[1]&64&&($.$$scope={dirty:d,ctx:u}),s.$set($),u[2]?f?(f.p(u,d),d[0]&4&&m(f,1)):(f=It(),f.c(),m(f,1),f.m(e,null)):f&&(ee(),_(f,1,1,()=>{f=null}),te())},i(u){a||(m(n.$$.fragment,u),m(s.$$.fragment,u),m(f),a=!0)},o(u){_(n.$$.fragment,u),_(s.$$.fragment,u),_(f),a=!1},d(u){u&&D(e),Y(n),Y(s),f&&f.d(),r=!1,c()}}}function ll(l){let e,t,n,i,s,o,a,r,c;return o=new Oe({props:{class:"flex-center py-1 flex gap-2 text-xs",$$slots:{default:[sl]},$$scope:{ctx:l}}}),o.$on("click",l[26]),{c(){var f;e=A("div"),t=A("div"),n=A("img"),s=O(),N(o.$$.fragment),We(n.src,i=`/apps/${(f=l[0])==null?void 0:f.meetingProvider}.svg`)||h(n,"src",i),h(n,"class","w-4"),h(n,"alt","Meeting provider icon"),h(t,"class","flex-center shrink-0"),h(e,"class","flex items-center justify-start gap-3 mt-4")},m(f,u){M(f,e,u),g(e,t),g(t,n),g(e,s),U(o,e,null),a=!0,r||(c=Ne(et.call(null,t,"Meeting")),r=!0)},p(f,u){var $;(!a||u[0]&1&&!We(n.src,i=`/apps/${($=f[0])==null?void 0:$.meetingProvider}.svg`))&&h(n,"src",i);const d={};u[1]&64&&(d.$$scope={dirty:u,ctx:f}),o.$set(d)},i(f){a||(m(o.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),a=!1},d(f){f&&D(e),Y(o),r=!1,c()}}}function il(l){let e;return{c(){e=K("Add meeting")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function It(l){let e,t;return e=new De({props:{icon:Le,class:"text-lg animate-spin"}}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p:$e,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function sl(l){let e;return{c(){e=K("Join meeting")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function St(l){let e,t,n,i,s,o,a,r,c,f;n=new De({props:{class:"text-lg",icon:kn}});const u=[ol,rl],d=[];function $(p,k){var y;return((y=p[0])==null?void 0:y.attendees.length)>0?0:1}return o=$(l),a=d[o]=u[o](l),{c(){e=A("div"),t=A("div"),N(n.$$.fragment),i=O(),s=A("div"),a.c(),h(t,"class","flex-center shrink-0 mt-1"),h(s,"class","flex flex-wrap gap-2"),h(e,"class","flex items-center justify-start gap-3 mt-4")},m(p,k){M(p,e,k),g(e,t),U(n,t,null),g(e,i),g(e,s),d[o].m(s,null),r=!0,c||(f=Ne(et.call(null,t,"Attendees")),c=!0)},p(p,k){let y=o;o=$(p),o===y?d[o].p(p,k):(ee(),_(d[y],1,1,()=>{d[y]=null}),te(),a=d[o],a?a.p(p,k):(a=d[o]=u[o](p),a.c()),m(a,1),a.m(s,null))},i(p){r||(m(n.$$.fragment,p),m(a),r=!0)},o(p){_(n.$$.fragment,p),_(a),r=!1},d(p){p&&D(e),Y(n),d[o].d(),c=!1,f()}}}function rl(l){let e,t;return e=new Oe({props:{class:"flex-center py-1 flex gap-2 text-xs",$$slots:{default:[al]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p(n,i){const s={};i[1]&64&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ol(l){var a;let e=[],t=new Map,n,i,s=(a=l[0])==null?void 0:a.attendees;const o=r=>r[33];for(let r=0;r<s.length;r+=1){let c=Mt(l,s,r),f=o(c);t.set(f,e[r]=Nt(f,c))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();n=ye()},m(r,c){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,c);M(r,n,c),i=!0},p(r,c){var f;c[0]&1&&(s=(f=r[0])==null?void 0:f.attendees,ee(),e=Be(e,c,o,1,r,s,t,n.parentNode,Fe,Nt,n,Mt),te())},i(r){if(!i){for(let c=0;c<s.length;c+=1)m(e[c]);i=!0}},o(r){for(let c=0;c<e.length;c+=1)_(e[c]);i=!1},d(r){for(let c=0;c<e.length;c+=1)e[c].d(r);r&&D(n)}}}function al(l){let e;return{c(){e=K("Add attendees")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function fl(l){var n,i;let e=(((n=l[33])==null?void 0:n.name)||((i=l[33])==null?void 0:i.email))+"",t;return{c(){t=K(e)},m(s,o){M(s,t,o)},p(s,o){var a,r;o[0]&1&&e!==(e=(((a=s[33])==null?void 0:a.name)||((r=s[33])==null?void 0:r.email))+"")&&we(t,e)},d(s){s&&D(t)}}}function Nt(l,e){var s,o;let t,n,i;return n=new Oe({props:{class:"text-xs py-1",tooltip:{title:e[33].email,styles:"max-width: unset"},title:`${(s=e[33])==null?void 0:s.name}, ${(o=e[33])==null?void 0:o.email}`,$$slots:{default:[fl]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=ye(),N(n.$$.fragment),this.first=t},m(a,r){M(a,t,r),U(n,a,r),i=!0},p(a,r){var f,u;e=a;const c={};r[0]&1&&(c.tooltip={title:e[33].email,styles:"max-width: unset"}),r[0]&1&&(c.title=`${(f=e[33])==null?void 0:f.name}, ${(u=e[33])==null?void 0:u.email}`),r[0]&1|r[1]&64&&(c.$$scope={dirty:r,ctx:e}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),i=!1},d(a){a&&D(t),Y(n,a)}}}function Ut(l){let e,t,n,i,s,o,a,r,c,f;n=new De({props:{class:"text-lg",icon:lt}});const u=[ul,cl],d=[];function $(p,k){var y;return((y=p[0])==null?void 0:y.locations.length)>0?0:1}return o=$(l),a=d[o]=u[o](l),{c(){e=A("div"),t=A("div"),N(n.$$.fragment),i=O(),s=A("div"),a.c(),h(t,"class","flex-center shrink-0 mt-1"),h(s,"class","flex flex-wrap gap-2"),h(e,"class","flex items-start justify-start gap-3 mt-4")},m(p,k){M(p,e,k),g(e,t),U(n,t,null),g(e,i),g(e,s),d[o].m(s,null),r=!0,c||(f=Ne(et.call(null,t,"Location")),c=!0)},p(p,k){let y=o;o=$(p),o===y?d[o].p(p,k):(ee(),_(d[y],1,1,()=>{d[y]=null}),te(),a=d[o],a?a.p(p,k):(a=d[o]=u[o](p),a.c()),m(a,1),a.m(s,null))},i(p){r||(m(n.$$.fragment,p),m(a),r=!0)},o(p){_(n.$$.fragment,p),_(a),r=!1},d(p){p&&D(e),Y(n),d[o].d(),c=!1,f()}}}function cl(l){let e,t;return e=new Oe({props:{class:"flex-center py-1 flex gap-2 text-xs",$$slots:{default:[dl]},$$scope:{ctx:l}}}),e.$on("click",l[28]),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p(n,i){const s={};i[1]&64&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ul(l){var a;let e=[],t=new Map,n,i,s=(a=l[0])==null?void 0:a.locations;const o=r=>r[30];for(let r=0;r<s.length;r+=1){let c=Et(l,s,r),f=o(c);t.set(f,e[r]=Yt(f,c))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();n=ye()},m(r,c){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,c);M(r,n,c),i=!0},p(r,c){var f;c[0]&1&&(s=(f=r[0])==null?void 0:f.locations,ee(),e=Be(e,c,o,1,r,s,t,n.parentNode,Fe,Yt,n,Et),te())},i(r){if(!i){for(let c=0;c<s.length;c+=1)m(e[c]);i=!0}},o(r){for(let c=0;c<e.length;c+=1)_(e[c]);i=!1},d(r){for(let c=0;c<e.length;c+=1)e[c].d(r);r&&D(n)}}}function dl(l){let e;return{c(){e=K("Add location")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function pl(l){let e=l[30]+"",t;return{c(){t=K(e)},m(n,i){M(n,t,i)},p(n,i){i[0]&1&&e!==(e=n[30]+"")&&we(t,e)},d(n){n&&D(t)}}}function Yt(l,e){let t,n,i;return n=new Oe({props:{class:"text-xs py-1 shrink-0",title:e[30],$$slots:{default:[pl]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=ye(),N(n.$$.fragment),this.first=t},m(s,o){M(s,t,o),U(n,s,o),i=!0},p(s,o){e=s;const a={};o[0]&1&&(a.title=e[30]),o[0]&1|o[1]&64&&(a.$$scope={dirty:o,ctx:e}),n.$set(a)},i(s){i||(m(n.$$.fragment,s),i=!0)},o(s){_(n.$$.fragment,s),i=!1},d(s){s&&D(t),Y(n,s)}}}function jt(l){var n;let e,t=((n=l[0])==null?void 0:n.body)+"";return{c(){e=A("span"),h(e,"class","text-sm mt-5 outlook-event-body overflow-hidden border px-3 py-2 curved")},m(i,s){M(i,e,s),e.innerHTML=t},p(i,s){var o;s[0]&1&&t!==(t=((o=i[0])==null?void 0:o.body)+"")&&(e.innerHTML=t)},d(i){i&&D(e)}}}function ml(l){var pe,_e,Ye,Pe,He,Re,ze,Ve,Je;let e,t,n,i,s,o,a,r,c,f,u,d,$=(((pe=l[0])==null?void 0:pe.subject)||"Untitled Event")+"",p,k,y,v,w,T=j((_e=l[0])==null?void 0:_e.startTime).format("ddd, MMM Do YYYY")+"",q,G,B=(Ye=l[0])!=null&&Ye.isAllDay?"All day":`${j((Pe=l[0])==null?void 0:Pe.startTime).format("h:mm a")} - ${j((He=l[0])==null?void 0:He.endTime).format("h:mm a")}`,J,V,H,Z,X,P,ne,oe,le,Q;n=new Te({props:{icon:dt,class:"text-xl"}}),n.$on("click",l[13]),r=new Te({props:{icon:gn,class:"text-lg",tooltip:"View event"}}),r.$on("click",l[23]);let C=l[3]&&Dt(l),F=(l[5]||l[6])&&!((Re=l[0])!=null&&Re.isAllDay)&&Ct(l);const ce=[ll,nl],re=[];function L(z,me){var Ie,Ue,be,ae,I;return(Ie=z[0])!=null&&Ie.isMeeting&&((Ue=z[0])!=null&&Ue.meetingUrl)&&((be=z[0])==null?void 0:be.meetingProvider)==="skypeForConsumer"||((ae=z[0])==null?void 0:ae.meetingProvider)==="skypeForBusiness"||((I=z[0])==null?void 0:I.meetingProvider)==="teamsForBusiness"?0:z[3]?1:-1}~(H=L(l))&&(Z=re[H]=ce[H](l));let b=(((ze=l[0])==null?void 0:ze.attendees.length)>0||l[3])&&St(l),E=(((Ve=l[0])==null?void 0:Ve.locations.length)>0||l[3])&&Ut(l),W=((Je=l[0])==null?void 0:Je.body)&&jt(l);return{c(){e=A("div"),t=A("div"),N(n.$$.fragment),i=O(),s=A("span"),s.textContent="View all events",o=O(),a=A("div"),N(r.$$.fragment),c=O(),C&&C.c(),f=O(),u=A("div"),d=A("span"),p=K($),k=O(),y=A("div"),F&&F.c(),v=O(),w=A("span"),q=K(T),G=K(", "),J=K(B),V=O(),Z&&Z.c(),X=O(),b&&b.c(),P=O(),E&&E.c(),ne=O(),W&&W.c(),h(s,"class","text-base"),h(a,"class","flex gap-5 shrink-0 ml-auto"),h(t,"class","flex justify-start items-center gap-3"),h(d,"class","text-xl font-bold max-line-2"),h(y,"class","mr-1 flex items-center justify-start gap-3"),h(w,"class","text-sm mt-1"),h(u,"class","flex flex-col mt-4"),h(e,"class","h-[20rem] flex flex-col px-3 py-2 overflow-overlay scrollbar")},m(z,me){M(z,e,me),g(e,t),U(n,t,null),g(t,i),g(t,s),g(t,o),g(t,a),U(r,a,null),g(a,c),C&&C.m(a,null),g(e,f),g(e,u),g(u,d),g(d,p),g(u,k),g(u,y),F&&F.m(y,null),g(u,v),g(u,w),g(w,q),g(w,G),g(w,J),g(u,V),~H&&re[H].m(u,null),g(u,X),b&&b.m(u,null),g(u,P),E&&E.m(u,null),g(u,ne),W&&W.m(u,null),oe=!0,le||(Q=xe(Kn,"keydown",l[22]),le=!0)},p(z,me){var Ue,be,ae,I,x,ie,fe,Ce,ue;z[3]?C?(C.p(z,me),me[0]&8&&m(C,1)):(C=Dt(z),C.c(),m(C,1),C.m(a,null)):C&&(ee(),_(C,1,1,()=>{C=null}),te()),(!oe||me[0]&1)&&$!==($=(((Ue=z[0])==null?void 0:Ue.subject)||"Untitled Event")+"")&&we(p,$),(z[5]||z[6])&&!((be=z[0])!=null&&be.isAllDay)?F?F.p(z,me):(F=Ct(z),F.c(),F.m(y,null)):F&&(F.d(1),F=null),(!oe||me[0]&1)&&T!==(T=j((ae=z[0])==null?void 0:ae.startTime).format("ddd, MMM Do YYYY")+"")&&we(q,T),(!oe||me[0]&1)&&B!==(B=(I=z[0])!=null&&I.isAllDay?"All day":`${j((x=z[0])==null?void 0:x.startTime).format("h:mm a")} - ${j((ie=z[0])==null?void 0:ie.endTime).format("h:mm a")}`)&&we(J,B);let Ie=H;H=L(z),H===Ie?~H&&re[H].p(z,me):(Z&&(ee(),_(re[Ie],1,1,()=>{re[Ie]=null}),te()),~H?(Z=re[H],Z?Z.p(z,me):(Z=re[H]=ce[H](z),Z.c()),m(Z,1),Z.m(u,X)):Z=null),((fe=z[0])==null?void 0:fe.attendees.length)>0||z[3]?b?(b.p(z,me),me[0]&9&&m(b,1)):(b=St(z),b.c(),m(b,1),b.m(u,P)):b&&(ee(),_(b,1,1,()=>{b=null}),te()),((Ce=z[0])==null?void 0:Ce.locations.length)>0||z[3]?E?(E.p(z,me),me[0]&9&&m(E,1)):(E=Ut(z),E.c(),m(E,1),E.m(u,ne)):E&&(ee(),_(E,1,1,()=>{E=null}),te()),(ue=z[0])!=null&&ue.body?W?W.p(z,me):(W=jt(z),W.c(),W.m(u,null)):W&&(W.d(1),W=null)},i(z){oe||(m(n.$$.fragment,z),m(r.$$.fragment,z),m(C),m(Z),m(b),m(E),oe=!0)},o(z){_(n.$$.fragment,z),_(r.$$.fragment,z),_(C),_(Z),_(b),_(E),oe=!1},d(z){z&&D(e),Y(n),Y(r),C&&C.d(),F&&F.d(),~H&&re[H].d(),b&&b.d(),E&&E.d(),W&&W.d(),le=!1,Q()}}}function _l(l,e,t){let n,i,s,o,a,r,c,f,u,d,$,p;R(l,st,C=>t(20,d=C));const{selectedEvent:k,events:y,isEdit:v,calendars:w,widgetId:T,monthlyEvents:q}=ge("stores");R(l,k,C=>t(18,f=C)),R(l,y,C=>t(17,c=C)),R(l,v,C=>t(7,p=C)),R(l,w,C=>t(19,u=C)),R(l,q,C=>t(21,$=C));let G=!1,B=!1;function J(){k.set(null)}const V=()=>{i&&(t(1,G=!0),qe.delete("/integration/outlook_calendar/event",{params:{id:i.id,widgetId:T==="outlook_calendar"?"":T}}).then(()=>{je("Event deleted","success"),y.update(C=>C.filter(F=>F.id!==i.id)),J()}).catch(C=>{je("Failed to delete event","error"),console.error(C),t(1,G=!1)}))},H=()=>{t(2,B=!0);const C={calendarId:i.calendarId,subject:i.subject,startTime:i.startTime,endTime:i.endTime,isAllDay:i.isAllDay,isMeeting:!0,timezone:"UTC"};qe.patch("/integration/outlook_calendar/event",{...C,id:f},{params:{widgetId:T==="outlook_calendar"?"":T}}).then(({data:F})=>{de(y,c=c.map(ce=>ce.id===F.event.id?F.event:ce),c),de(y,c=c.sort((ce,re)=>j(ce.startTime).diff(j(re.startTime))),c),t(2,B=!1),je("Meeting added successfully","success")}).catch(()=>{je("Failed to add meeting","error"),t(2,B=!1)})},Z=C=>{C.key==="Escape"&&J()},X=C=>(C.stopPropagation(),window.open(i==null?void 0:i.url,"_blank")),P=()=>{de(v,p=!0,p)},ne=C=>{C(),V()},oe=C=>(C.stopPropagation(),window.open(i==null?void 0:i.meetingUrl,"_blank")),le=()=>{k.set(i.id),v.set(!0)},Q=()=>{k.set(i.id),v.set(!0)};return l.$$.update=()=>{var C;l.$$.dirty[0]&2097152&&t(16,n=Object.keys($).map(F=>$[F].events).flat()),l.$$.dirty[0]&458753&&t(0,i=(c.find(F=>F.id===f)||n.find(F=>F.id===f))??i??null),l.$$.dirty[0]&1048577&&t(6,s=i&&j(i.startTime).isBefore(d)&&j(i.endTime).isAfter(d)),l.$$.dirty[0]&1048577&&t(5,o=i&&j(i.startTime).isBefore(j().add(6,"hours"))&&j(i.startTime).isAfter(d)),l.$$.dirty[0]&1048577&&t(4,a=i&&an(j(i.startTime).valueOf()-d.getTime(),{short:!1})),l.$$.dirty[0]&524289&&t(3,r=(C=u.find(F=>F.id===(i==null?void 0:i.calendarId)))==null?void 0:C.canEdit)},[i,G,B,r,a,o,s,p,k,y,v,w,q,J,V,H,n,c,f,u,d,$,Z,X,P,ne,oe,le,Q]}class gl extends Ae{constructor(e){super(),Ee(this,e,_l,ml,Me,{},null,[-1,-1])}}function Ot(l,e,t){const n=l.slice();return n[1]=e[t],n}function Pt(l){let e,t=[],n=new Map,i,s=l[0];const o=a=>a[1];for(let a=0;a<s.length;a+=1){let r=Ot(l,s,a),c=o(r);n.set(c,t[a]=Rt(c,r))}return{c(){e=A("div");for(let a=0;a<t.length;a+=1)t[a].c();h(e,"class","flex flex-wrap gap-2")},m(a,r){M(a,e,r);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);i=!0},p(a,r){r&1&&(s=a[0],ee(),t=Be(t,r,o,1,a,s,n,e,Fe,Rt,null,Ot),te())},i(a){if(!i){for(let r=0;r<s.length;r+=1)m(t[r]);i=!0}},o(a){for(let r=0;r<t.length;r+=1)_(t[r]);i=!1},d(a){a&&D(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function $l(l){let e=l[1]+"",t,n,i,s,o,a,r,c;s=new De({props:{icon:Tn}});function f(){return l[4](l[1])}return{c(){t=K(e),n=O(),i=A("button"),N(s.$$.fragment),o=O(),h(i,"class","text-xs ml-1 flex-center")},m(u,d){M(u,t,d),M(u,n,d),M(u,i,d),U(s,i,null),M(u,o,d),a=!0,r||(c=xe(i,"click",f),r=!0)},p(u,d){l=u,(!a||d&1)&&e!==(e=l[1]+"")&&we(t,e)},i(u){a||(m(s.$$.fragment,u),a=!0)},o(u){_(s.$$.fragment,u),a=!1},d(u){u&&D(t),u&&D(n),u&&D(i),Y(s),u&&D(o),r=!1,c()}}}function Rt(l,e){let t,n,i;return n=new Oe({props:{class:"text-xs py-1 flex-center gap-1",$$slots:{default:[$l]},$$scope:{ctx:e}}}),{key:l,first:null,c(){t=ye(),N(n.$$.fragment),this.first=t},m(s,o){M(s,t,o),U(n,s,o),i=!0},p(s,o){e=s;const a={};o&129&&(a.$$scope={dirty:o,ctx:e}),n.$set(a)},i(s){i||(m(n.$$.fragment,s),i=!0)},o(s){_(n.$$.fragment,s),i=!1},d(s){s&&D(t),Y(n,s)}}}function bl(l){let e,t,n,i,s,o,a,r,c,f,u,d;s=new De({props:{class:"text-xl",icon:lt}});function $(y){l[2](y)}let p={placeholder:"Type location and press enter",size:"md",class:"w-full py-2 px-2.5",maxLength:255};l[1]!==void 0&&(p.value=l[1]),a=new wn({props:p}),ke.push(()=>he(a,"value",$)),a.$on("keydown",l[3]);let k=l[0].length>0&&Pt(l);return{c(){e=A("div"),t=A("div"),n=A("div"),i=A("div"),N(s.$$.fragment),o=O(),N(a.$$.fragment),c=O(),k&&k.c(),h(i,"class","w-8 h-8 flex items-center justify-start shrink-0"),h(n,"class","flex items-center justify-start gap-4"),h(t,"class","flex flex-col gap-3"),h(e,"class","flex flex-col gap-3")},m(y,v){M(y,e,v),g(e,t),g(t,n),g(n,i),U(s,i,null),g(n,o),U(a,n,null),g(e,c),k&&k.m(e,null),f=!0,u||(d=Ne(yn.call(null,e)),u=!0)},p(y,[v]){const w={};!r&&v&2&&(r=!0,w.value=y[1],ve(()=>r=!1)),a.$set(w),y[0].length>0?k?(k.p(y,v),v&1&&m(k,1)):(k=Pt(y),k.c(),m(k,1),k.m(e,null)):k&&(ee(),_(k,1,1,()=>{k=null}),te())},i(y){f||(m(s.$$.fragment,y),m(a.$$.fragment,y),m(k),f=!0)},o(y){_(s.$$.fragment,y),_(a.$$.fragment,y),_(k),f=!1},d(y){y&&D(e),Y(s),Y(a),k&&k.d(),u=!1,d()}}}function kl(l,e,t){let{locations:n=[]}=e,i="";function s(r){i=r,t(1,i)}const o=r=>{r.key==="Enter"&&t(0,n=[...n,i])},a=r=>{t(0,n=n.filter(c=>c!==r))};return l.$$set=r=>{"locations"in r&&t(0,n=r.locations)},[n,i,s,o,a]}class hl extends Ae{constructor(e){super(),Ee(this,e,kl,bl,Me,{locations:0})}}function Vt(l){let e,t,n;function i(o){l[36](o)}let s={};return l[9]!==void 0&&(s.repeat=l[9]),e=new Bn({props:s}),ke.push(()=>he(e,"repeat",i)),{c(){N(e.$$.fragment)},m(o,a){U(e,o,a),n=!0},p(o,a){const r={};!t&&a[0]&512&&(t=!0,r.repeat=o[9],ve(()=>t=!1)),e.$set(r)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){Y(e,o)}}}function Lt(l){let e,t,n,i;function s(r){l[37](r)}function o(r){l[38](r)}let a={};return l[11]!==void 0&&(a.attendees=l[11]),l[12]!==void 0&&(a.sendNotifications=l[12]),e=new Fn({props:a}),ke.push(()=>he(e,"attendees",s)),ke.push(()=>he(e,"sendNotifications",o)),{c(){N(e.$$.fragment)},m(r,c){U(e,r,c),i=!0},p(r,c){const f={};!t&&c[0]&2048&&(t=!0,f.attendees=r[11],ve(()=>t=!1)),!n&&c[0]&4096&&(n=!0,f.sendNotifications=r[12],ve(()=>n=!1)),e.$set(f)},i(r){i||(m(e.$$.fragment,r),i=!0)},o(r){_(e.$$.fragment,r),i=!1},d(r){Y(e,r)}}}function Bt(l){let e,t,n;function i(o){l[39](o)}let s={};return l[14]!==void 0&&(s.locations=l[14]),e=new hl({props:s}),ke.push(()=>he(e,"locations",i)),{c(){N(e.$$.fragment)},m(o,a){U(e,o,a),n=!0},p(o,a){const r={};!t&&a[0]&16384&&(t=!0,r.locations=o[14],ve(()=>t=!1)),e.$set(r)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){Y(e,o)}}}function Ft(l){let e,t;return e=new Te({props:{icon:l[5]?ct:yt,class:"text-xl",tooltip:l[5]?"Remove meeting":"Add meeting"}}),e.$on("click",l[40]),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p(n,i){const s={};i[0]&32&&(s.icon=n[5]?ct:yt),i[0]&32&&(s.tooltip=n[5]?"Remove meeting":"Add meeting"),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Ht(l){let e,t;return e=new Te({props:{icon:l[8]?"tabler:repeat":"tabler:repeat-off",class:"text-xl",tooltip:l[8]?"Don't repeat event":"Repeat Event"}}),e.$on("click",l[43]),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p(n,i){const s={};i[0]&256&&(s.icon=n[8]?"tabler:repeat":"tabler:repeat-off"),i[0]&256&&(s.tooltip=n[8]?"Don't repeat event":"Repeat Event"),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function vl(l){let e,t;return e=new Xe({props:{class:"py-2 px-4",disabled:l[6]||!l[15],$$slots:{default:[yl]},$$scope:{ctx:l}}}),e.$on("click",l[44]),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p(n,i){const s={};i[0]&32832&&(s.disabled=n[6]||!n[15]),i[0]&131072|i[1]&1048576&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function wl(l){let e,t;return e=new Xe({props:{class:"py-2 px-4",$$slots:{default:[Tl]},$$scope:{ctx:l}}}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p(n,i){const s={};i[1]&1048576&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function yl(l){let e=l[17]?"Update":"Add",t,n;return{c(){t=K(e),n=K(" event")},m(i,s){M(i,t,s),M(i,n,s)},p(i,s){s[0]&131072&&e!==(e=i[17]?"Update":"Add")&&we(t,e)},d(i){i&&D(t),i&&D(n)}}}function Tl(l){let e,t,n;return t=new De({props:{icon:Le,class:"ml-2 animate-spin"}}),{c(){e=K("Adding "),N(t.$$.fragment)},m(i,s){M(i,e,s),U(t,i,s),n=!0},p:$e,i(i){n||(m(t.$$.fragment,i),n=!0)},o(i){_(t.$$.fragment,i),n=!1},d(i){i&&D(e),Y(t,i)}}}function Al(l){var Ze,_t;let e,t,n,i,s,o,a=l[17]?"editing":"adding",r,c,f,u,d,$,p,k,y,v,w,T,q,G,B,J,V,H,Z,X,P,ne,oe,le,Q,C,F,ce,re,L,b,E,W,pe,_e,Ye,Pe;n=new Te({props:{icon:dt,class:"text-xl"}}),n.$on("click",l[23]);function He(S){l[29](S)}let Re={availbleCalendars:l[16],isHidden:l[16].length===1||l[17]};l[15]!==void 0&&(Re.calendarId=l[15]),k=new Rn({props:Re}),ke.push(()=>he(k,"calendarId",He));function ze(S){l[30](S)}let Ve={};l[4]!==void 0&&(Ve.subject=l[4]),w=new Vn({props:Ve}),ke.push(()=>he(w,"subject",ze));function Je(S){l[31](S)}function z(S){l[32](S)}function me(S){l[33](S)}function Ie(S){l[34](S)}function Ue(S){l[35](S)}let be={};l[1]!==void 0&&(be.startDate=l[1]),l[0]!==void 0&&(be.startTime=l[0]),l[3]!==void 0&&(be.endTime=l[3]),l[2]!==void 0&&(be.isAllDay=l[2]),l[7]!==void 0&&(be.duration=l[7]),G=new Ln({props:be}),ke.push(()=>he(G,"startDate",Je)),ke.push(()=>he(G,"startTime",z)),ke.push(()=>he(G,"endTime",me)),ke.push(()=>he(G,"isAllDay",Ie)),ke.push(()=>he(G,"duration",Ue));let ae=l[8]&&Vt(l),I=l[10]&&Lt(l),x=l[13]&&Bt(l),ie=!(l[17]&&((Ze=l[24])!=null&&Ze.isMeeting)&&((_t=l[24])!=null&&_t.meetingUrl))&&Ft(l);F=new Te({props:{icon:l[10]?kt:ht,class:"text-xl",tooltip:l[10]?"Remove guests":"Add guests"}}),F.$on("click",l[41]),re=new Te({props:{icon:l[13]?lt:vt,class:"text-xl",tooltip:l[13]?"Remove location":"Add location"}}),re.$on("click",l[42]);let fe=!l[17]&&Ht(l);const Ce=[wl,vl],ue=[];function Se(S,se){return S[6]?0:1}return W=Se(l),pe=ue[W]=Ce[W](l),{c(){e=A("div"),t=A("div"),N(n.$$.fragment),i=O(),s=A("span"),o=K("Exit "),r=K(a),c=K(" event"),f=O(),u=A("div"),d=A("div"),$=A("div"),p=A("div"),N(k.$$.fragment),v=O(),N(w.$$.fragment),q=O(),N(G.$$.fragment),X=O(),ae&&ae.c(),P=O(),I&&I.c(),ne=O(),x&&x.c(),oe=O(),le=A("div"),Q=A("div"),ie&&ie.c(),C=O(),N(F.$$.fragment),ce=O(),N(re.$$.fragment),L=O(),fe&&fe.c(),b=O(),E=A("div"),pe.c(),h(s,"class","text-base"),h(t,"class","flex justify-start items-center gap-3"),h(p,"class","flex flex-col gap-4"),h(d,"class","flex flex-col h-full overflow-hidden"),nt(d,"opacity-50",l[6]),h(Q,"class","flex flex-center gap-7 py-2 px-6 border curved w-max shrink-0"),nt(Q,"opacity-50",l[6]),h(E,"class","flex items-center justify-center gap-4 shrink-0"),h(le,"class","flex flex-row gap-2 justify-between items-center"),h(u,"class","flex flex-col mt-4 gap-4 h-full overflow-hidden"),h(e,"class","flex flex-col px-3 py-2 relative overflow-hidden h-full")},m(S,se){M(S,e,se),g(e,t),U(n,t,null),g(t,i),g(t,s),g(s,o),g(s,r),g(s,c),g(e,f),g(e,u),g(u,d),g(d,$),g($,p),U(k,p,null),g(p,v),U(w,p,null),g(p,q),U(G,p,null),g(p,X),ae&&ae.m(p,null),g(p,P),I&&I.m(p,null),g(p,ne),x&&x.m(p,null),g(u,oe),g(u,le),g(le,Q),ie&&ie.m(Q,null),g(Q,C),U(F,Q,null),g(Q,ce),U(re,Q,null),g(Q,L),fe&&fe.m(Q,null),g(le,b),g(le,E),ue[W].m(E,null),_e=!0,Ye||(Pe=[xe(window,"keydown",l[28]),Ne(rt.call(null,$))],Ye=!0)},p(S,se){var $t,bt;(!_e||se[0]&131072)&&a!==(a=S[17]?"editing":"adding")&&we(r,a);const tt={};se[0]&65536&&(tt.availbleCalendars=S[16]),se[0]&196608&&(tt.isHidden=S[16].length===1||S[17]),!y&&se[0]&32768&&(y=!0,tt.calendarId=S[15],ve(()=>y=!1)),k.$set(tt);const gt={};!T&&se[0]&16&&(T=!0,gt.subject=S[4],ve(()=>T=!1)),w.$set(gt);const Ge={};!B&&se[0]&2&&(B=!0,Ge.startDate=S[1],ve(()=>B=!1)),!J&&se[0]&1&&(J=!0,Ge.startTime=S[0],ve(()=>J=!1)),!V&&se[0]&8&&(V=!0,Ge.endTime=S[3],ve(()=>V=!1)),!H&&se[0]&4&&(H=!0,Ge.isAllDay=S[2],ve(()=>H=!1)),!Z&&se[0]&128&&(Z=!0,Ge.duration=S[7],ve(()=>Z=!1)),G.$set(Ge),S[8]?ae?(ae.p(S,se),se[0]&256&&m(ae,1)):(ae=Vt(S),ae.c(),m(ae,1),ae.m(p,P)):ae&&(ee(),_(ae,1,1,()=>{ae=null}),te()),S[10]?I?(I.p(S,se),se[0]&1024&&m(I,1)):(I=Lt(S),I.c(),m(I,1),I.m(p,ne)):I&&(ee(),_(I,1,1,()=>{I=null}),te()),S[13]?x?(x.p(S,se),se[0]&8192&&m(x,1)):(x=Bt(S),x.c(),m(x,1),x.m(p,null)):x&&(ee(),_(x,1,1,()=>{x=null}),te()),(!_e||se[0]&64)&&nt(d,"opacity-50",S[6]),S[17]&&(($t=S[24])!=null&&$t.isMeeting)&&((bt=S[24])!=null&&bt.meetingUrl)?ie&&(ee(),_(ie,1,1,()=>{ie=null}),te()):ie?(ie.p(S,se),se[0]&131072&&m(ie,1)):(ie=Ft(S),ie.c(),m(ie,1),ie.m(Q,C));const ot={};se[0]&1024&&(ot.icon=S[10]?kt:ht),se[0]&1024&&(ot.tooltip=S[10]?"Remove guests":"Add guests"),F.$set(ot);const at={};se[0]&8192&&(at.icon=S[13]?lt:vt),se[0]&8192&&(at.tooltip=S[13]?"Remove location":"Add location"),re.$set(at),S[17]?fe&&(ee(),_(fe,1,1,()=>{fe=null}),te()):fe?(fe.p(S,se),se[0]&131072&&m(fe,1)):(fe=Ht(S),fe.c(),m(fe,1),fe.m(Q,null)),(!_e||se[0]&64)&&nt(Q,"opacity-50",S[6]);let ft=W;W=Se(S),W===ft?ue[W].p(S,se):(ee(),_(ue[ft],1,1,()=>{ue[ft]=null}),te(),pe=ue[W],pe?pe.p(S,se):(pe=ue[W]=Ce[W](S),pe.c()),m(pe,1),pe.m(E,null))},i(S){_e||(m(n.$$.fragment,S),m(k.$$.fragment,S),m(w.$$.fragment,S),m(G.$$.fragment,S),m(ae),m(I),m(x),m(ie),m(F.$$.fragment,S),m(re.$$.fragment,S),m(fe),m(pe),_e=!0)},o(S){_(n.$$.fragment,S),_(k.$$.fragment,S),_(w.$$.fragment,S),_(G.$$.fragment,S),_(ae),_(I),_(x),_(ie),_(F.$$.fragment,S),_(re.$$.fragment,S),_(fe),_(pe),_e=!1},d(S){S&&D(e),Y(n),Y(k),Y(w),Y(G),ae&&ae.d(),I&&I.d(),x&&x.d(),ie&&ie.d(),Y(F),Y(re),fe&&fe.d(),ue[W].d(),Ye=!1,pt(Pe)}}}function El(l,e,t){var be,ae;let n,i,s,o,a,r;const{isCreate:c,isEdit:f,selectedEvent:u,events:d,calendars:$,widgetId:p,monthlyEvents:k}=ge("stores");R(l,f,I=>t(17,r=I)),R(l,u,I=>t(47,o=I)),R(l,d,I=>t(46,s=I)),R(l,$,I=>t(27,a=I)),R(l,k,I=>t(45,i=I));const y=()=>{c.set(!1),f.set(!1)};let v=new Date,w=!1,T=wt(),q=wt(60),G="",B=!1,J=!1,V=60,H=!1,Z=null,X=!1,P=[],ne=!1,oe=!1,le=[],Q=((be=a.find(I=>I.isDefaultCalendar&&I.canEdit))==null?void 0:be.id)??((ae=a.filter(I=>I.canEdit)[0])==null?void 0:ae.id)??null,C=r&&o?s.find(I=>I.id===o):null;C&&(v=new Date(C.startTime),T=j(C.startTime).format("HH:mm"),q=j(C.endTime).format("HH:mm"),G=C.subject,w=C.isAllDay,B=C.isMeeting,V=An(T,q),le=C.locations,P=C.attendees);const F=I=>{const x=j(v).format("YYYY-MM-DD")+" "+T;t(3,q=j(x).add(V,"minutes").format("HH:mm"))},ce=()=>{if(!Q)return;t(6,J=!0);const I={calendarId:Q,subject:G,startTime:w?j(v).toISOString().split("T")[0]+"T00:00:00.000Z":j(j(v).format("YYYY-MM-DD")+" "+T).toISOString(),endTime:w?j(v).add(1,"day").toISOString().split("T")[0]+"T00:00:00.000Z":j(j(v).format("YYYY-MM-DD")+" "+T).add(V,"minutes").toISOString(),isAllDay:w,isMeeting:B,locations:le,repeat:Z,attendees:P,sendNotifications:ne,timezone:"UTC"};console.log(v),qe.post("/integration/outlook_calendar/event",{...I,startDate:j(v).subtract(1,"day").format("YYYY-MM-DD")},{params:{widgetId:p==="outlook_calendar"?"":p}}).then(({data:x})=>{var fe,Ce,ue;de(d,s=[...s,x.event].sort((Se,Ze)=>j(Se.startTime).diff(j(Ze.startTime))),s);const ie=j(x.event.startTime).format("YYYY-MM");(fe=i[ie])!=null&&fe.events&&de(k,i={...i,[ie]:{events:[...(Ce=i[ie])==null?void 0:Ce.events,x.event].sort((Se,Ze)=>j(Se.startTime).diff(j(Ze.startTime))),lastUpdated:(ue=i[ie])==null?void 0:ue.lastUpdated}},i),t(6,J=!1),je("Event added successfully","success"),y()}).catch(()=>{je("Failed to add event","error"),t(6,J=!1)})},re=()=>{t(6,J=!0);const I={calendarId:Q,subject:G,startTime:w?j(v).toISOString().split("T")[0]+"T00:00:00.000Z":j(j(v).format("YYYY-MM-DD")+" "+T).toISOString(),endTime:w?j(v).add(1,"day").toISOString().split("T")[0]+"T00:00:00.000Z":j(j(v).format("YYYY-MM-DD")+" "+T).add(V,"minutes").toISOString(),isAllDay:w,isMeeting:B,locations:le,repeat:Z,attendees:P,sendNotifications:ne,timezone:"UTC"};qe.patch("/integration/outlook_calendar/event",{...I,id:o},{params:{widgetId:p==="outlook_calendar"?"":p}}).then(({data:x})=>{var fe,Ce;de(d,s=s.map(ue=>ue.id===x.event.id?x.event:ue).sort((ue,Se)=>j(ue.startTime).diff(j(Se.startTime))),s);const ie=j(x.event.startTime).format("YYYY-MM");(fe=i[ie])!=null&&fe.events&&de(k,i={...i,[ie]:{events:i[ie].events.map(ue=>ue.id===x.event.id?x.event:ue).sort((ue,Se)=>j(ue.startTime).diff(j(Se.startTime))),lastUpdated:(Ce=i[ie])==null?void 0:Ce.lastUpdated}},i),t(6,J=!1),je("Event updated successfully","success"),y()}).catch(()=>{je("Failed to update event","error"),t(6,J=!1)})},L=I=>{I.key==="Escape"&&y()};function b(I){Q=I,t(15,Q)}function E(I){G=I,t(4,G)}function W(I){v=I,t(1,v)}function pe(I){T=I,t(0,T)}function _e(I){q=I,t(3,q)}function Ye(I){w=I,t(2,w)}function Pe(I){V=I,t(7,V)}function He(I){Z=I,t(9,Z)}function Re(I){P=I,t(11,P)}function ze(I){ne=I,t(12,ne)}function Ve(I){le=I,t(14,le)}const Je=()=>t(5,B=!B),z=()=>{t(10,X=!X),t(11,P=X&&r?C.attendees:[])},me=()=>{t(13,oe=!oe),t(14,le=oe&&r?C.locations:[])},Ie=()=>(t(8,H=!H),t(9,Z=null)),Ue=()=>r?re():ce();return l.$$.update=()=>{l.$$.dirty[0]&134217728&&t(16,n=a.filter(I=>I.canEdit)),l.$$.dirty[0]&1&&F()},[T,v,w,q,G,B,J,V,H,Z,X,P,ne,oe,le,Q,n,r,f,u,d,$,k,y,C,ce,re,a,L,b,E,W,pe,_e,Ye,Pe,He,Re,ze,Ve,Je,z,me,Ie,Ue]}class Ml extends Ae{constructor(e){super(),Ee(this,e,El,Al,Me,{},null,[-1,-1])}}function zt(l){let e,t,n,i;return t=new Oe({props:{class:"text-xs",$$slots:{default:[Dl]},$$scope:{ctx:l}}}),t.$on("click",l[8]),{c(){e=A("div"),N(t.$$.fragment),h(e,"class","mr-1 flex items-center justify-end")},m(s,o){M(s,e,o),U(t,e,null),i=!0},p(s,o){const a={};o&2058&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){i||(m(t.$$.fragment,s),s&&fn(()=>{i&&(n||(n=it(e,Tt,{duration:200},!0)),n.run(1))}),i=!0)},o(s){_(t.$$.fragment,s),s&&(n||(n=it(e,Tt,{duration:200},!1)),n.run(0)),i=!1},d(s){s&&D(e),Y(t),s&&n&&n.end()}}}function Dl(l){let e=l[3]?"Now live":`In ${l[1]}`,t;return{c(){t=K(e)},m(n,i){M(n,t,i)},p(n,i){i&10&&e!==(e=n[3]?"Now live":`In ${n[1]}`)&&we(t,e)},d(n){n&&D(t)}}}function Jt(l){var n,i,s;let e,t=(((n=l[0])==null?void 0:n.meetingProvider)==="skypeForConsumer"||((i=l[0])==null?void 0:i.meetingProvider)==="skypeForBusiness"||((s=l[0])==null?void 0:s.meetingProvider)==="teamsForBusiness")&&Zt(l);return{c(){t&&t.c(),e=ye()},m(o,a){t&&t.m(o,a),M(o,e,a)},p(o,a){var r,c,f;((r=o[0])==null?void 0:r.meetingProvider)==="skypeForConsumer"||((c=o[0])==null?void 0:c.meetingProvider)==="skypeForBusiness"||((f=o[0])==null?void 0:f.meetingProvider)==="teamsForBusiness"?t?t.p(o,a):(t=Zt(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(o){t&&t.d(o),o&&D(e)}}}function Zt(l){let e,t,n,i,s;return{c(){var o;e=A("button"),t=A("img"),We(t.src,n=`/apps/${(o=l[0])==null?void 0:o.meetingProvider}.svg`)||h(t,"src",n),h(t,"class","w-6"),h(t,"alt","Meeting provider icon"),h(e,"class","flex-center flex gap-2 text-xs mr-1")},m(o,a){M(o,e,a),g(e,t),i||(s=[Ne(et.call(null,e,"Join meeting")),xe(e,"click",l[9])],i=!0)},p(o,a){var r;a&1&&!We(t.src,n=`/apps/${(r=o[0])==null?void 0:r.meetingProvider}.svg`)&&h(t,"src",n)},d(o){o&&D(e),i=!1,pt(s)}}}function Cl(l){var q,G,B,J;let e,t,n=(l[0].subject||"Untitled event")+"",i,s,o,a,r,c=j(l[0].startTime).format("ddd, MMM D")+"",f,u,d=(q=l[0])!=null&&q.isAllDay?"All day":`${l[5]} - ${l[6]}`,$,p,k,y,v,w=(l[2]||l[3])&&!((G=l[0])!=null&&G.isAllDay)&&zt(l),T=((B=l[0])==null?void 0:B.isMeeting)&&((J=l[0])==null?void 0:J.meetingUrl)&&Jt(l);return{c(){e=A("div"),t=A("span"),i=K(n),o=O(),a=A("div"),r=A("span"),f=K(c),u=K(", "),$=K(d),p=O(),k=A("div"),w&&w.c(),y=O(),T&&T.c(),h(t,"class","max-line-1 text-left font-semibold"),h(t,"title",s=l[0].subject),h(r,"class","max-line-1 text-start text-xs font-[400]"),h(a,"class","flex items-center gap-4 opacity-70"),h(e,"class","flex flex-col gap-0.5"),h(k,"class","flex items-center justify-end gap-3")},m(V,H){M(V,e,H),g(e,t),g(t,i),g(e,o),g(e,a),g(a,r),g(r,f),g(r,u),g(r,$),M(V,p,H),M(V,k,H),w&&w.m(k,null),g(k,y),T&&T.m(k,null),v=!0},p(V,H){var Z,X,P,ne;(!v||H&1)&&n!==(n=(V[0].subject||"Untitled event")+"")&&we(i,n),(!v||H&1&&s!==(s=V[0].subject))&&h(t,"title",s),(!v||H&1)&&c!==(c=j(V[0].startTime).format("ddd, MMM D")+"")&&we(f,c),(!v||H&1)&&d!==(d=(Z=V[0])!=null&&Z.isAllDay?"All day":`${V[5]} - ${V[6]}`)&&we($,d),(V[2]||V[3])&&!((X=V[0])!=null&&X.isAllDay)?w?(w.p(V,H),H&13&&m(w,1)):(w=zt(V),w.c(),m(w,1),w.m(k,y)):w&&(ee(),_(w,1,1,()=>{w=null}),te()),(P=V[0])!=null&&P.isMeeting&&((ne=V[0])!=null&&ne.meetingUrl)?T?T.p(V,H):(T=Jt(V),T.c(),T.m(k,null)):T&&(T.d(1),T=null)},i(V){v||(m(w),v=!0)},o(V){_(w),v=!1},d(V){V&&D(e),V&&D(p),V&&D(k),w&&w.d(),T&&T.d()}}}function Il(l){let e,t;return e=new Hn({props:{class:"px-3 py-2 flex gap-4 justify-between items-center",$$slots:{default:[Cl]},$$scope:{ctx:l}}}),e.$on("click",l[10]),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p(n,[i]){const s={};i&2063&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Sl(l,e,t){let n,i,s,o;R(l,st,p=>t(7,o=p));let{event:a}=e;const{selectedEvent:r}=ge("stores"),c=j(a.startTime).format("h:mm A"),f=j(a.endTime).format("h:mm A"),u=p=>(p.stopPropagation(),window.open(a==null?void 0:a.url,"_blank")),d=p=>(p.stopPropagation(),window.open(a==null?void 0:a.meetingUrl,"_blank")),$=()=>r.set(a.id);return l.$$set=p=>{"event"in p&&t(0,a=p.event)},l.$$.update=()=>{l.$$.dirty&129&&t(3,n=j(a.startTime).isBefore(o)&&j(a.endTime).isAfter(o)),l.$$.dirty&129&&t(2,i=j(a.startTime).isBefore(j().add(6,"hours"))&&j(a.startTime).isAfter(o)),l.$$.dirty&129&&t(1,s=an(j(a.startTime).valueOf()-o.getTime(),{short:!0}))},[a,s,i,n,r,c,f,o,u,d,$]}class mt extends Ae{constructor(e){super(),Ee(this,e,Sl,Il,Me,{event:0})}}function Gt(l,e,t){const n=l.slice();return n[15]=e[t],n}function Nl(l){let e,t,n=[],i=new Map,s,o,a,r=l[3][l[2]].events.sort(Wt);const c=f=>f[15].id;for(let f=0;f<r.length;f+=1){let u=Gt(l,r,f),d=c(u);i.set(d,n[f]=qt(d,u))}return{c(){e=A("div"),t=A("div");for(let f=0;f<n.length;f+=1)n[f].c();h(t,"class","flex flex-col gap-2 h-full"),cn(e,"width","100%")},m(f,u){M(f,e,u),g(e,t);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(t,null);s=!0,o||(a=Ne(rt.call(null,e)),o=!0)},p(f,u){u&12&&(r=f[3][f[2]].events.sort(Wt),ee(),n=Be(n,u,c,1,f,r,i,t,Fe,qt,null,Gt),te())},i(f){if(!s){for(let u=0;u<r.length;u+=1)m(n[u]);s=!0}},o(f){for(let u=0;u<n.length;u+=1)_(n[u]);s=!1},d(f){f&&D(e);for(let u=0;u<n.length;u+=1)n[u].d();o=!1,a()}}}function Ul(l){let e,t,n,i,s,o,a;return t=new De({props:{icon:un,class:"text-5xl shrink-0"}}),o=new Xe({props:{class:"mt-4",$$slots:{default:[jl]},$$scope:{ctx:l}}}),o.$on("click",l[11]),{c(){e=A("div"),N(t.$$.fragment),n=O(),i=A("span"),i.textContent="No events within this month",s=O(),N(o.$$.fragment),h(i,"class","text-lg flex-center gap-4 mt-6"),h(e,"class","flex-center flex-col w-full h-full")},m(r,c){M(r,e,c),U(t,e,null),g(e,n),g(e,i),g(e,s),U(o,e,null),a=!0},p(r,c){const f={};c&262144&&(f.$$scope={dirty:c,ctx:r}),o.$set(f)},i(r){a||(m(t.$$.fragment,r),m(o.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(o.$$.fragment,r),a=!1},d(r){r&&D(e),Y(t),Y(o)}}}function Yl(l){let e,t,n,i,s,o,a,r;return a=new De({props:{icon:Le,class:"animate-spin text-2xl"}}),{c(){e=A("div"),t=A("img"),i=O(),s=A("span"),o=K("Looking for events "),N(a.$$.fragment),We(t.src,n="/apps/microsoft_outlook.png")||h(t,"src",n),h(t,"class","w-10 h-10"),h(t,"alt","Google Calendar logo"),h(s,"class","text-lg flex-center gap-4 mt-6"),h(e,"class","flex-center flex-col w-full h-full")},m(c,f){M(c,e,f),g(e,t),g(e,i),g(e,s),g(s,o),U(a,s,null),r=!0},p:$e,i(c){r||(m(a.$$.fragment,c),r=!0)},o(c){_(a.$$.fragment,c),r=!1},d(c){c&&D(e),Y(a)}}}function qt(l,e){let t,n,i;return n=new mt({props:{event:e[15]}}),{key:l,first:null,c(){t=ye(),N(n.$$.fragment),this.first=t},m(s,o){M(s,t,o),U(n,s,o),i=!0},p(s,o){e=s;const a={};o&12&&(a.event=e[15]),n.$set(a)},i(s){i||(m(n.$$.fragment,s),i=!0)},o(s){_(n.$$.fragment,s),i=!1},d(s){s&&D(t),Y(n,s)}}}function jl(l){let e;return{c(){e=K("Add event")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function Ol(l){let e,t,n,i,s,o,a,r,c,f,u;function d(T){l[9](T)}let $={options:l[7]};l[0]!==void 0&&($.value=l[0]),n=new Qe({props:$}),ke.push(()=>he(n,"value",d));function p(T){l[10](T)}let k={options:l[8]};l[1]!==void 0&&(k.value=l[1]),o=new Qe({props:k}),ke.push(()=>he(o,"value",p));const y=[Yl,Ul,Nl],v=[];function w(T,q){return T[3][T[2]]===void 0?0:T[3][T[2]].events.length===0?1:2}return c=w(l),f=v[c]=y[c](l),{c(){e=A("div"),t=A("div"),N(n.$$.fragment),s=O(),N(o.$$.fragment),r=O(),f.c(),h(t,"class","flex flex-row gap-2 mb-3"),h(e,"class","flex items-start justify-start h-full flex-col overflow-hidden w-full")},m(T,q){M(T,e,q),g(e,t),U(n,t,null),g(t,s),U(o,t,null),g(e,r),v[c].m(e,null),u=!0},p(T,[q]){const G={};!i&&q&1&&(i=!0,G.value=T[0],ve(()=>i=!1)),n.$set(G);const B={};!a&&q&2&&(a=!0,B.value=T[1],ve(()=>a=!1)),o.$set(B);let J=c;c=w(T),c===J?v[c].p(T,q):(ee(),_(v[J],1,1,()=>{v[J]=null}),te(),f=v[c],f?f.p(T,q):(f=v[c]=y[c](T),f.c()),m(f,1),f.m(e,null))},i(T){u||(m(n.$$.fragment,T),m(o.$$.fragment,T),m(f),u=!0)},o(T){_(n.$$.fragment,T),_(o.$$.fragment,T),_(f),u=!1},d(T){T&&D(e),Y(n),Y(o),v[c].d()}}}const Wt=(l,e)=>l.startTime.localeCompare(e.startTime);function Pl(l,e,t){let n,i;const{monthlyEvents:s,selectedMonth:o,isCreate:a}=ge("stores");R(l,s,v=>t(3,i=v)),R(l,o,v=>t(2,n=v)),ge("appView");const{fetchMonthlyEvents:r}=ge("utils");let c=n.split("-")[1],f=n.split("-")[0];const u=()=>{var v;((v=i[n])==null?void 0:v.lastUpdated)>Date.now()-1e3*60*10||r()},d=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],$=[{label:"2021",value:"2021"},{label:"2022",value:"2022"},{label:"2023",value:"2023"},{label:"2024",value:"2024"},{label:"2025",value:"2025"},{label:"2026",value:"2026"},{label:"2027",value:"2027"},{label:"2028",value:"2028"},{label:"2029",value:"2029"},{label:"2030",value:"2030"}];function p(v){c=v,t(0,c)}function k(v){f=v,t(1,f)}const y=()=>a.set(!0);return l.$$.update=()=>{l.$$.dirty&3&&de(o,n=`${f}-${c}`,n),l.$$.dirty&4&&n&&u()},[c,f,n,i,s,o,a,d,$,p,k,y]}class Rl extends Ae{constructor(e){super(),Ee(this,e,Pl,Ol,Me,{})}}function Vl(l){let e,t,n,i,s,o,a,r,c,f,u;t=new Te({props:{icon:En,class:"text-2xl",tooltip:"Add event"}}),t.$on("click",l[9]);function d(p){l[10](p)}let $={class:"ml-auto",options:[{label:"Upcoming",value:"upcoming"},{label:"Monthly view",value:"month"}]};return l[0]!==void 0&&($.value=l[0]),i=new Qe({props:$}),ke.push(()=>he(i,"value",d)),a=new Te({props:{tooltip:"Refresh events",icon:l[1]?Le:ut,class:l[1]?"animate-spin text-xl":"text-xl"}}),a.$on("click",l[11]),c=new Te({props:{tooltip:"Settings",icon:Mn,class:"text-xl"}}),c.$on("click",l[12]),{c(){e=A("div"),N(t.$$.fragment),n=O(),N(i.$$.fragment),o=O(),N(a.$$.fragment),r=O(),N(c.$$.fragment),h(e,"class","flex items-center shrink-0 justify-start py-1 px-2 mt-2.5 gap-4")},m(p,k){M(p,e,k),U(t,e,null),g(e,n),U(i,e,null),g(e,o),U(a,e,null),g(e,r),U(c,e,null),u=!0},p(p,[k]){const y={};!s&&k&1&&(s=!0,y.value=p[0],ve(()=>s=!1)),i.$set(y);const v={};k&2&&(v.icon=p[1]?Le:ut),k&2&&(v.class=p[1]?"animate-spin text-xl":"text-xl"),a.$set(v)},i(p){u||(m(t.$$.fragment,p),m(i.$$.fragment,p),m(a.$$.fragment,p),m(c.$$.fragment,p),p&&fn(()=>{u&&(f||(f=it(e,At,{duration:400},!0)),f.run(1))}),u=!0)},o(p){_(t.$$.fragment,p),_(i.$$.fragment,p),_(a.$$.fragment,p),_(c.$$.fragment,p),p&&(f||(f=it(e,At,{duration:400},!1)),f.run(0)),u=!1},d(p){p&&D(e),Y(t),Y(i),Y(a),Y(c),p&&f&&f.end()}}}function Ll(l,e,t){let n,i,s;const{isCreate:o,selectedView:a,isUpdating:r,isSettings:c}=ge("stores");R(l,a,y=>t(0,n=y)),R(l,r,y=>t(1,i=y)),R(l,c,y=>t(2,s=y));const{fetchUpcomingEvents:f,fetchMonthlyEvents:u}=ge("utils"),d=()=>o.set(!0);function $(y){n=y,a.set(n)}return[n,i,s,o,a,r,c,f,u,d,$,()=>n==="upcoming"?f():u(),()=>de(c,s=!0,s)]}class Bl extends Ae{constructor(e){super(),Ee(this,e,Ll,Vl,Me,{})}}function Xt(l,e,t){const n=l.slice();return n[25]=e[t],n}function Fl(l){let e,t;return e=new Te({props:{icon:ut,class:"ml-2",tooltip:"Refresh calendars"}}),e.$on("click",l[16]),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p:$e,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Hl(l){let e,t;return e=new In({props:{class:"ml-2 text-lg"}}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p:$e,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Kt(l,e){let t,n,i,s,o=e[25].name+"",a,r,c;function f(){return e[23](e[25])}return n=new Cn({props:{round:!0,filled:!0,size:"1.15",checked:!e[7].includes(e[25].id),disabled:e[6].filter(e[22]).length===1}}),n.$on("change",f),{key:l,first:null,c(){t=A("div"),N(n.$$.fragment),i=O(),s=A("span"),a=K(o),r=O(),h(s,"class","text-sm"),h(t,"class","flex items-center gap-3"),this.first=t},m(u,d){M(u,t,d),U(n,t,null),g(t,i),g(t,s),g(s,a),g(t,r),c=!0},p(u,d){e=u;const $={};d&192&&($.checked=!e[7].includes(e[25].id)),d&192&&($.disabled=e[6].filter(e[22]).length===1),n.$set($),(!c||d&64)&&o!==(o=e[25].name+"")&&we(a,o)},i(u){c||(m(n.$$.fragment,u),c=!0)},o(u){_(n.$$.fragment,u),c=!1},d(u){u&&D(t),Y(n)}}}function zl(l){let e,t,n,i,s,o,a,r,c,f,u,d,$,p,k,y,v,w,T,q,G,B,J,V,H,Z,X=[],P=new Map,ne,oe,le;n=new Te({props:{icon:dt,class:"text-xl"}}),n.$on("click",l[19]),a=new zn({props:{integration:{...l[1].find(Qt),id:l[17]}}}),d=new Qe({props:{options:[{label:"Never",value:!1},{label:"5 mins before",value:5},{label:"10 mins before",value:10},{label:"15 mins before",value:15},{label:"30 mins before",value:30}],value:l[2]?l[3]:!1}}),d.$on("change",l[20]),v=new Qe({props:{options:[{label:"Next one day",value:1},{label:"Next three days",value:3},{label:"Next five days",value:5},{label:"Next one week",value:7},{label:"Next two weeks",value:14},{label:"Next one month",value:30},{label:"Next three months",value:90}],value:l[4]}}),v.$on("change",l[21]);const Q=[Hl,Fl],C=[];function F(L,b){return L[5]?0:1}B=F(l),J=C[B]=Q[B](l);let ce=l[6];const re=L=>L[25].id;for(let L=0;L<ce.length;L+=1){let b=Xt(l,ce,L),E=re(b);P.set(E,X[L]=Kt(E,b))}return{c(){e=A("div"),t=A("div"),N(n.$$.fragment),i=O(),s=A("span"),s.textContent="Exit Settings",o=O(),N(a.$$.fragment),r=O(),c=A("div"),f=A("span"),f.textContent="Send notifications",u=O(),N(d.$$.fragment),$=O(),p=A("div"),k=A("span"),k.textContent="Show events for",y=O(),N(v.$$.fragment),w=O(),T=A("div"),q=A("span"),G=K(`Available Calendars

      `),J.c(),V=O(),H=A("div"),Z=A("div");for(let L=0;L<X.length;L+=1)X[L].c();h(s,"class","text-base"),h(t,"class","flex justify-start items-center gap-3 mb-2"),h(f,"class","w-32 text-sm"),h(c,"class","mt-2 flex items-center gap-3"),h(k,"class","w-32 text-sm"),h(p,"class","flex items-center gap-3"),h(q,"class","mb-2 flex items-center gap-2 font-medium"),h(Z,"class","flex h-full flex-col gap-3"),h(T,"class","mt-2 flex flex-col gap-2 h-full overflow-hidden"),h(e,"class","flex h-full flex-col overflow-hidden gap-4 px-3 py-2")},m(L,b){M(L,e,b),g(e,t),U(n,t,null),g(t,i),g(t,s),g(e,o),U(a,e,null),g(e,r),g(e,c),g(c,f),g(c,u),U(d,c,null),g(e,$),g(e,p),g(p,k),g(p,y),U(v,p,null),g(e,w),g(e,T),g(T,q),g(q,G),C[B].m(q,null),g(T,V),g(T,H),g(H,Z);for(let E=0;E<X.length;E+=1)X[E]&&X[E].m(Z,null);ne=!0,oe||(le=[xe(window,"keydown",l[18]),Ne(rt.call(null,H))],oe=!0)},p(L,[b]){const E={};b&2&&(E.integration={...L[1].find(Qt),id:L[17]}),a.$set(E);const W={};b&12&&(W.value=L[2]?L[3]:!1),d.$set(W);const pe={};b&16&&(pe.value=L[4]),v.$set(pe);let _e=B;B=F(L),B===_e?C[B].p(L,b):(ee(),_(C[_e],1,1,()=>{C[_e]=null}),te(),J=C[B],J?J.p(L,b):(J=C[B]=Q[B](L),J.c()),m(J,1),J.m(q,null)),b&16576&&(ce=L[6],ee(),X=Be(X,b,re,1,L,ce,P,Z,Fe,Kt,null,Xt),te())},i(L){if(!ne){m(n.$$.fragment,L),m(a.$$.fragment,L),m(d.$$.fragment,L),m(v.$$.fragment,L),m(J);for(let b=0;b<ce.length;b+=1)m(X[b]);ne=!0}},o(L){_(n.$$.fragment,L),_(a.$$.fragment,L),_(d.$$.fragment,L),_(v.$$.fragment,L),_(J);for(let b=0;b<X.length;b+=1)_(X[b]);ne=!1},d(L){L&&D(e),Y(n),Y(a),Y(d),Y(v),C[B].d();for(let b=0;b<X.length;b+=1)X[b].d();oe=!1,pt(le)}}}const Qt=l=>l.id==="outlook_calendar";function Jl(l,e,t){let n,i,s,o,a,r,c,f;R(l,Dn,P=>t(1,i=P));const{isSettings:u,widgetId:d,minutesBeforeReminder:$,calendars:p,sendNotifications:k,upcomingViewLimit:y,isUpdating:v,unselectedCalenders:w}=ge("stores");R(l,u,P=>t(0,n=P)),R(l,$,P=>t(3,o=P)),R(l,p,P=>t(6,c=P)),R(l,k,P=>t(2,s=P)),R(l,y,P=>t(4,a=P)),R(l,v,P=>t(5,r=P)),R(l,w,P=>t(7,f=P));const{fetchUpcomingEvents:T,getCalendars:q}=ge("utils"),G=d==="outlook_calendar"?"outlook_calendar":`outlook_calendar_${d}`;return[n,i,s,o,a,r,c,f,u,$,p,k,y,v,w,T,q,G,P=>{P.key==="Escape"&&de(u,n=!1,n)},()=>de(u,n=!1,n),P=>{P.detail===!1?k.set(!1):(k.set(!0),de($,o=P.detail,o))},P=>{P.detail>a?(y.set(P.detail),T()):y.set(P.detail)},P=>!f.includes(P.id),P=>{f.includes(P.id)?w.update(ne=>ne.filter(oe=>oe!==P.id)):w.update(ne=>[...ne,P.id])}]}class Zl extends Ae{constructor(e){super(),Ee(this,e,Jl,zl,Me,{})}}function xt(l,e,t){const n=l.slice();return n[16]=e[t],n}function en(l,e,t){const n=l.slice();return n[16]=e[t],n}function Gl(l){let e,t,n,i=[],s=new Map,o,a,r,c=l[2].length>0&&tn(l),f=l[1];const u=d=>d[16].id;for(let d=0;d<f.length;d+=1){let $=xt(l,f,d),p=u($);s.set(p,i[d]=sn(p,$))}return{c(){e=A("div"),t=A("div"),c&&c.c(),n=O();for(let d=0;d<i.length;d+=1)i[d].c();h(t,"class","flex flex-col gap-2 transition-height h-full")},m(d,$){M(d,e,$),g(e,t),c&&c.m(t,null),g(t,n);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(t,null);o=!0,a||(r=Ne(rt.call(null,e)),a=!0)},p(d,$){d[2].length>0?c?(c.p(d,$),$&4&&m(c,1)):(c=tn(d),c.c(),m(c,1),c.m(t,n)):c&&(ee(),_(c,1,1,()=>{c=null}),te()),$&2&&(f=d[1],ee(),i=Be(i,$,u,1,d,f,s,t,Fe,sn,null,xt),te())},i(d){if(!o){m(c);for(let $=0;$<f.length;$+=1)m(i[$]);o=!0}},o(d){_(c);for(let $=0;$<i.length;$+=1)_(i[$]);o=!1},d(d){d&&D(e),c&&c.d();for(let $=0;$<i.length;$+=1)i[$].d();a=!1,r()}}}function ql(l){let e,t,n,i;const s=[Xl,Wl],o=[];function a(r,c){return r[3]?0:1}return t=a(l),n=o[t]=s[t](l),{c(){e=A("div"),n.c(),h(e,"class","flex items-center flex-col justify-center h-full")},m(r,c){M(r,e,c),o[t].m(e,null),i=!0},p(r,c){let f=t;t=a(r),t===f?o[t].p(r,c):(ee(),_(o[f],1,1,()=>{o[f]=null}),te(),n=o[t],n?n.p(r,c):(n=o[t]=s[t](r),n.c()),m(n,1),n.m(e,null))},i(r){i||(m(n),i=!0)},o(r){_(n),i=!1},d(r){r&&D(e),o[t].d()}}}function tn(l){let e,t,n=[],i=new Map,s,o,a,r=l[2];const c=u=>u[16].id;for(let u=0;u<r.length;u+=1){let d=en(l,r,u),$=c(d);i.set($,n[u]=nn($,d))}let f=l[1].length>0&&ln();return{c(){e=A("span"),e.textContent="Today",t=O();for(let u=0;u<n.length;u+=1)n[u].c();s=O(),f&&f.c(),o=ye(),h(e,"class","ml-1.5 mt-1 text-start text-[0.9rem] font-medium")},m(u,d){M(u,e,d),M(u,t,d);for(let $=0;$<n.length;$+=1)n[$]&&n[$].m(u,d);M(u,s,d),f&&f.m(u,d),M(u,o,d),a=!0},p(u,d){d&4&&(r=u[2],ee(),n=Be(n,d,c,1,u,r,i,s.parentNode,Fe,nn,s,en),te()),u[1].length>0?f||(f=ln(),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i(u){if(!a){for(let d=0;d<r.length;d+=1)m(n[d]);a=!0}},o(u){for(let d=0;d<n.length;d+=1)_(n[d]);a=!1},d(u){u&&D(e),u&&D(t);for(let d=0;d<n.length;d+=1)n[d].d(u);u&&D(s),f&&f.d(u),u&&D(o)}}}function nn(l,e){let t,n,i;return n=new mt({props:{event:e[16]}}),{key:l,first:null,c(){t=ye(),N(n.$$.fragment),this.first=t},m(s,o){M(s,t,o),U(n,s,o),i=!0},p(s,o){e=s;const a={};o&4&&(a.event=e[16]),n.$set(a)},i(s){i||(m(n.$$.fragment,s),i=!0)},o(s){_(n.$$.fragment,s),i=!1},d(s){s&&D(t),Y(n,s)}}}function ln(l){let e;return{c(){e=A("span"),e.textContent="Upcoming",h(e,"class","ml-1.5 mt-1 text-start text-[0.9rem] font-medium")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function sn(l,e){let t,n,i;return n=new mt({props:{event:e[16]}}),{key:l,first:null,c(){t=ye(),N(n.$$.fragment),this.first=t},m(s,o){M(s,t,o),U(n,s,o),i=!0},p(s,o){e=s;const a={};o&2&&(a.event=e[16]),n.$set(a)},i(s){i||(m(n.$$.fragment,s),i=!0)},o(s){_(n.$$.fragment,s),i=!1},d(s){s&&D(t),Y(n,s)}}}function Wl(l){let e,t,n,i,s,o;e=new De({props:{icon:un,class:"text-5xl shrink-0"}});function a(f,u){if(f[4]===1)return ni;if(f[4]<7)return ti;if(f[4]===7)return ei;if(f[4]===14)return xl;if(f[4]===30)return Ql;if(f[4]===90)return Kl}let r=a(l),c=r&&r(l);return s=new Xe({props:{class:"mt-4",$$slots:{default:[li]},$$scope:{ctx:l}}}),s.$on("click",l[11]),{c(){N(e.$$.fragment),t=O(),n=A("span"),c&&c.c(),i=O(),N(s.$$.fragment),h(n,"class","text-lg flex-center gap-4 mt-6")},m(f,u){U(e,f,u),M(f,t,u),M(f,n,u),c&&c.m(n,null),M(f,i,u),U(s,f,u),o=!0},p(f,u){r===(r=a(f))&&c?c.p(f,u):(c&&c.d(1),c=r&&r(f),c&&(c.c(),c.m(n,null)));const d={};u&2097152&&(d.$$scope={dirty:u,ctx:f}),s.$set(d)},i(f){o||(m(e.$$.fragment,f),m(s.$$.fragment,f),o=!0)},o(f){_(e.$$.fragment,f),_(s.$$.fragment,f),o=!1},d(f){Y(e,f),f&&D(t),f&&D(n),c&&c.d(),f&&D(i),Y(s,f)}}}function Xl(l){let e,t,n,i,s,o,a;return o=new De({props:{icon:Le,class:"animate-spin text-2xl"}}),{c(){e=A("img"),n=O(),i=A("span"),s=K("Looking for events "),N(o.$$.fragment),We(e.src,t="/apps/microsoft_outlook.png")||h(e,"src",t),h(e,"class","w-10 h-10"),h(e,"alt","Google Calendar logo"),h(i,"class","text-lg flex-center gap-4 mt-6")},m(r,c){M(r,e,c),M(r,n,c),M(r,i,c),g(i,s),U(o,i,null),a=!0},p:$e,i(r){a||(m(o.$$.fragment,r),a=!0)},o(r){_(o.$$.fragment,r),a=!1},d(r){r&&D(e),r&&D(n),r&&D(i),Y(o)}}}function Kl(l){let e;return{c(){e=K("No events within the next three months  ")},m(t,n){M(t,e,n)},p:$e,d(t){t&&D(e)}}}function Ql(l){let e;return{c(){e=K("No events within the next month  ")},m(t,n){M(t,e,n)},p:$e,d(t){t&&D(e)}}}function xl(l){let e;return{c(){e=K("No events within the next two weeks  ")},m(t,n){M(t,e,n)},p:$e,d(t){t&&D(e)}}}function ei(l){let e;return{c(){e=K("No events within the next week  ")},m(t,n){M(t,e,n)},p:$e,d(t){t&&D(e)}}}function ti(l){let e,t,n;return{c(){e=K("No events within the next "),t=K(l[4]),n=K(" days  ")},m(i,s){M(i,e,s),M(i,t,s),M(i,n,s)},p(i,s){s&16&&we(t,i[4])},d(i){i&&D(e),i&&D(t),i&&D(n)}}}function ni(l){let e;return{c(){e=K("No events today  ")},m(t,n){M(t,e,n)},p:$e,d(t){t&&D(e)}}}function li(l){let e;return{c(){e=K("Add event")},m(t,n){M(t,e,n)},d(t){t&&D(e)}}}function ii(l){let e,t,n,i;const s=[ql,Gl],o=[];function a(r,c){return r[0].length===0?0:1}return e=a(l),t=o[e]=s[e](l),{c(){t.c(),n=ye()},m(r,c){o[e].m(r,c),M(r,n,c),i=!0},p(r,[c]){let f=e;e=a(r),e===f?o[e].p(r,c):(ee(),_(o[f],1,1,()=>{o[f]=null}),te(),t=o[e],t?t.p(r,c):(t=o[e]=s[e](r),t.c()),m(t,1),t.m(n.parentNode,n))},i(r){i||(m(t),i=!0)},o(r){_(t),i=!1},d(r){o[e].d(r),r&&D(n)}}}function si(l,e,t){let n,i,s,o,a,r,c;R(l,st,w=>t(9,o=w)),ge("appView");const{events:f,calendars:u,upcomingViewLimit:d,isCreate:$,lastUpdated:p,isUpdating:k,widgetId:y}=ge("stores");R(l,f,w=>t(10,a=w)),R(l,d,w=>t(4,c=w)),R(l,k,w=>t(3,r=w));const v=()=>$.set(!0);return l.$$.update=()=>{l.$$.dirty&1536&&t(0,n=a.filter(w=>w.isAllDay?j(w.endTime).isAfter(o,"day"):j(w.endTime).isAfter(o))),l.$$.dirty&513&&t(2,i=n.filter(w=>j(w.startTime).isSame(o,"day")).sort((w,T)=>w.startTime.localeCompare(T.startTime))),l.$$.dirty&513&&t(1,s=n.filter(w=>j(w.startTime).isAfter(o,"day")).sort((w,T)=>w.startTime.localeCompare(T.startTime)))},[n,s,i,r,c,f,d,$,k,o,a,v]}class ri extends Ae{constructor(e){super(),Ee(this,e,si,ii,Me,{})}}function oi(l){let e,t,n,i,s;const o=[di,ui,ci],a=[];function r(f,u){return f[5]?0:f[0]==="upcoming"?1:2}e=r(l),t=a[e]=o[e](l);let c=(l[1]||l[6])&&rn();return{c(){t.c(),n=O(),c&&c.c(),i=ye()},m(f,u){a[e].m(f,u),M(f,n,u),c&&c.m(f,u),M(f,i,u),s=!0},p(f,u){let d=e;e=r(f),e!==d&&(ee(),_(a[d],1,1,()=>{a[d]=null}),te(),t=a[e],t||(t=a[e]=o[e](f),t.c()),m(t,1),t.m(n.parentNode,n)),f[1]||f[6]?c?u[0]&66&&m(c,1):(c=rn(),c.c(),m(c,1),c.m(i.parentNode,i)):c&&(ee(),_(c,1,1,()=>{c=null}),te())},i(f){s||(m(t),m(c),s=!0)},o(f){_(t),_(c),s=!1},d(f){a[e].d(f),f&&D(n),c&&c.d(f),f&&D(i)}}}function ai(l){let e,t;return e=new Zl({}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p:$e,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function fi(l){let e,t;return e=new Ml({}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p:$e,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ci(l){let e,t;return e=new Rl({}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ui(l){let e,t;return e=new ri({}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function di(l){let e,t;return e=new gl({}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function rn(l){let e,t;return e=new Bl({}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function pi(l){let e,t,n,i,s;const o=[fi,ai,oi],a=[];function r(c,f){return c[2]||c[3]?0:c[4]?1:2}return t=r(l),n=a[t]=o[t](l),{c(){e=A("div"),n.c(),h(e,"class",i="w-[24rem] flex-col justify-between flex px-2 py-2 overflow-hidden "+(l[1]?"h-[40rem]":"h-[24.75rem]")),cn(e,"transition","height 0.2s ease-in-out, max-height 0.2s ease-in-out, min-height 0.2s ease-in-out")},m(c,f){M(c,e,f),a[t].m(e,null),s=!0},p(c,f){let u=t;t=r(c),t===u?a[t].p(c,f):(ee(),_(a[u],1,1,()=>{a[u]=null}),te(),n=a[t],n?n.p(c,f):(n=a[t]=o[t](c),n.c()),m(n,1),n.m(e,null)),(!s||f[0]&2&&i!==(i="w-[24rem] flex-col justify-between flex px-2 py-2 overflow-hidden "+(c[1]?"h-[40rem]":"h-[24.75rem]")))&&h(e,"class",i)},i(c){s||(m(n),s=!0)},o(c){_(n),s=!1},d(c){c&&D(e),a[t].d()}}}function mi(l,e,t){let n,i,s,o,a,r,c,f,u,d,$,p,k;const{events:y,calendars:v,monthlyEvents:w,upcomingViewLimit:T,selectedView:q,lastUpdated:G,isUpdating:B,unselectedCalenders:J,widgetId:V,selectedMonth:H,isCreate:Z,isEdit:X,isSettings:P,selectedEvent:ne}=ge("stores");R(l,y,b=>t(23,o=b)),R(l,v,b=>t(20,n=b)),R(l,T,b=>t(24,a=b)),R(l,q,b=>t(0,r=b)),R(l,G,b=>t(25,c=b)),R(l,J,b=>t(22,s=b)),R(l,H,b=>t(21,i=b)),R(l,Z,b=>t(2,u=b)),R(l,X,b=>t(3,d=b)),R(l,P,b=>t(4,$=b)),R(l,ne,b=>t(5,p=b));const oe=ge("alwaysAppView");R(l,oe,b=>t(1,f=b));const le=ge("appActive");R(l,le,b=>t(6,k=b));const Q=C();Sn(()=>{Q()}),Nn(async()=>{j(c).add(5,"minutes").isAfter(j())||(n.length===0&&await re(),r==="upcoming"?F():ce())});function C(){const b=setInterval(()=>{r==="upcoming"?F():ce()},3e5);return()=>clearInterval(b)}const F=async()=>{B.set(!0);let b=await L({start:j().startOf("day").toISOString(),end:j().add(a,"days").endOf("day").toISOString(),calendars:n.map(E=>E.id).filter(E=>!s.includes(E))});b&&(b=b.map(E=>{const W=o.find(pe=>pe.id===E.id);return W&&(E.reminderSent=W.reminderSent),E}),de(y,o=b,o)),B.set(!1),G.set(j().valueOf())},ce=async()=>{B.set(!0);try{const b=await L({start:j(i).startOf("month").toISOString(),end:j(i).endOf("month").toISOString(),calendars:n.map(E=>E.id).filter(E=>!s.includes(E))});b&&w.update(E=>(E[i]={events:b,lastUpdated:j().valueOf()},E)),B.set(!1),G.set(j().valueOf())}catch(b){console.error(b),B.set(!1)}},re=async()=>{B.set(!0);try{const{data:b}=await qe.get("/integration/outlook_calendar/list_calendars",{params:{widgetId:V==="outlook_calendar"?"":V}});B.set(!1),de(v,n=b.calendars,n)}catch(b){console.error(b),B.set(!1)}},L=async({start:b,end:E,calendars:W})=>{const{data:pe}=await qe.get("/integration/outlook_calendar/list_events",{params:{start:b,end:E,calendars:W.join(","),widgetId:V==="outlook_calendar"?"":V}});return pe.events};return dn("utils",{getEvents:L,getCalendars:re,fetchUpcomingEvents:F,fetchMonthlyEvents:ce}),[r,f,u,d,$,p,k,y,v,T,q,G,J,H,Z,X,P,ne,oe,le]}class _i extends Ae{constructor(e){super(),Ee(this,e,mi,pi,Me,{},null,[-1,-1])}}function gi(l){let e,t;return e=new Pn({}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p:$e,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function $i(l){let e,t,n,i;const s=[ki,bi],o=[];function a(r,c){return r[1]?0:1}return e=a(l),t=o[e]=s[e](l),{c(){t.c(),n=ye()},m(r,c){o[e].m(r,c),M(r,n,c),i=!0},p(r,c){let f=e;e=a(r),e===f?o[e].p(r,c):(ee(),_(o[f],1,1,()=>{o[f]=null}),te(),t=o[e],t?t.p(r,c):(t=o[e]=s[e](r),t.c()),m(t,1),t.m(n.parentNode,n))},i(r){i||(m(t),i=!0)},o(r){_(t),i=!1},d(r){o[e].d(r),r&&D(n)}}}function bi(l){let e,t;return e=new qn({props:{widgetId:l[0].id}}),{c(){N(e.$$.fragment)},m(n,i){U(e,n,i),t=!0},p(n,i){const s={};i[0]&1&&(s.widgetId=n[0].id),e.$set(s)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ki(l){let e,t,n,i;return e=new _i({}),n=new Xn({}),{c(){N(e.$$.fragment),t=O(),N(n.$$.fragment)},m(s,o){U(e,s,o),M(s,t,o),U(n,s,o),i=!0},p:$e,i(s){i||(m(e.$$.fragment,s),m(n.$$.fragment,s),i=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),i=!1},d(s){Y(e,s),s&&D(t),Y(n,s)}}}function hi(l){let e,t,n,i;const s=[$i,gi],o=[];function a(r,c){return r[2]?0:1}return e=a(l),t=o[e]=s[e](l),{c(){t.c(),n=ye()},m(r,c){o[e].m(r,c),M(r,n,c),i=!0},p(r,c){let f=e;e=a(r),e===f?o[e].p(r,c):(ee(),_(o[f],1,1,()=>{o[f]=null}),te(),t=o[e],t?t.p(r,c):(t=o[e]=s[e](r),t.c()),m(t,1),t.m(n.parentNode,n))},i(r){i||(m(t),i=!0)},o(r){_(t),i=!1},d(r){o[e].d(r),r&&D(n)}}}function vi(l,e,t){let n,i,s,o,a,r,c,f,u,d,$,{config:p}=e;const k={path:`user_data/{uid}/profiles/{currentProfile}/apps/${p.id}`,currentProfile:on,uid:Un},y=p.id==="outlook_calendar"?"outlook_calendar":`outlook_calendar_${p.id}`,{create:v,createPersist:w,isFetched:T,start:q,stop:G}=On(k);R(l,T,E=>t(2,$=E));const B=w("lastUpdated",1696020917e3),J=w("events",[]);R(l,J,E=>t(22,u=E));const V=w("monthlyEvents",{});R(l,V,E=>t(21,f=E));const H=Ke(!1),Z=w("calendars",[]);R(l,Z,E=>t(20,c=E));const X=v("unselectedCalenders",[]);R(l,X,E=>t(19,r=E));const P=v("selectedView","upcoming");R(l,P,E=>t(18,a=E));const ne=v("upcomingViewLimit",7),oe=v("selectedMonth",j().format("YYYY-MM")),le=Ke(null);R(l,le,E=>t(14,n=E));const Q=Ke(!1);R(l,Q,E=>t(16,s=E));const C=Ke(!1);R(l,C,E=>t(15,i=E));const F=Ke(!1);R(l,F,E=>t(17,o=E));const ce=v("minutesBeforeReminder",5),re=v("sendNotifications",!0),L=Yn([jn],([E])=>{const W=E==null?void 0:E[y];return W?W.id:!1});R(l,L,E=>t(1,d=E));const b=()=>{de(J,u=[],u),de(V,f={},f),de(Z,c=[],c),de(X,r=[],r),de(P,a="upcoming",a),de(F,o=!1,o),de(Q,s=!1,s),de(C,i=!1,i),de(le,n=null,n),B.set(1696020917e3)};return q(),dn("stores",{lastUpdated:B,events:J,isUpdating:H,calendars:Z,unselectedCalenders:X,selectedView:P,upcomingViewLimit:ne,selectedMonth:oe,selectedEvent:le,isEdit:Q,isCreate:C,isIntegrated:L,widgetId:p.id,integrationId:y,monthlyEvents:V,isSettings:F,minutesBeforeReminder:ce,sendNotifications:re}),l.$$set=E=>{"config"in E&&t(0,p=E.config)},l.$$.update=()=>{l.$$.dirty[0]&6&&$&&!d&&b()},[p,d,$,T,J,V,Z,X,P,le,Q,C,F,L]}class Ci extends Ae{constructor(e){super(),Ee(this,e,vi,hi,Me,{config:0},null,[-1,-1])}}export{Ci as default};
