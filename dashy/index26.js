import{ee as x,ef as je,eg as Qt,eh as un,ei as rt,ej as ra,S as Re,i as Ae,s as Ne,q as G,V as X,r as Y,u as B,L as U,v as ne,a as N,x as re,t as R,D as M,ek as Ts,K as _e,I as en,J as En,c as q,m as H,n as Z,d as K,U as wn,dk as vt,Z as tn,el as ks,aD as de,a3 as Ye,a8 as kt,aa as gt,aQ as Cn,ab as Tn,em as Ke,aI as Lr,a1 as ge,Q as ia,ck as Ss,as as Rs,E as Me,b as ue,p as ae,ak as Dr,O as Ve,P as Je,R as Oe,ac as As,ao as Ns,W as Qe,y as St,_ as De,aq as $e,bG as Os,af as We,bZ as ot,b_ as at,b$ as st,c0 as lt,e7 as Ps,en as kn,aG as $r,N as oa,a5 as it,aV as aa,bh as Is,cM as Ls,aP as Ds,o as sa,aB as la,eo as $s,aL as Bs,ag as ua,bF as Ms,a9 as ca,ep as Fs,an as xs,aw as Us,ax as js,e as qs,ay as Hs,bf as Ks,aA as Vs,ah as Ws,av as Gs}from"./overlayscrollbars.js";import{D as zs}from"./DatePicker.js";var fa={},Sn={},Yn={},da={};Object.defineProperty(da,"__esModule",{value:!0});var nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.Failcode=void 0;nn.Failcode={TYPE_INCORRECT:"TYPE_INCORRECT",VALUE_INCORRECT:"VALUE_INCORRECT",KEY_INCORRECT:"KEY_INCORRECT",CONTENT_INCORRECT:"CONTENT_INCORRECT",ARGUMENT_INCORRECT:"ARGUMENT_INCORRECT",RETURN_INCORRECT:"RETURN_INCORRECT",CONSTRAINT_FAILED:"CONSTRAINT_FAILED",PROPERTY_MISSING:"PROPERTY_MISSING",PROPERTY_PRESENT:"PROPERTY_PRESENT",NOTHING_EXPECTED:"NOTHING_EXPECTED"};var Rn={},Ze={},Ys=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.ValidationError=void 0;var Xs=function(t){Ys(e,t);function e(r){var n=t.call(this,r.message)||this;return n.name="ValidationError",n.code=r.code,r.details!==void 0&&(n.details=r.details),Object.setPrototypeOf(n,e.prototype),n}return e}(Error);Ze.ValidationError=Xs;var ce={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});var cn=function(t){return function(e){switch(e.tag){case"literal":return'"'.concat(String(e.value),'"');case"string":return"string";case"brand":return e.brand;case"constraint":return e.name||cn(t)(e.underlying);case"union":return e.alternatives.map(cn(t)).join(" | ");case"intersect":return e.intersectees.map(cn(t)).join(" & ")}return"`${".concat(Le(!1,t)(e),"}`")}},fn=function(t){return function(e){switch(e.tag){case"literal":return String(e.value);case"brand":return"${".concat(e.brand,"}");case"constraint":return e.name?"${".concat(e.name,"}"):fn(t)(e.underlying);case"union":if(e.alternatives.length===1){var r=e.alternatives[0];return fn(t)(r.reflect)}break;case"intersect":if(e.intersectees.length===1){var r=e.intersectees[0];return fn(t)(r.reflect)}break}return"${".concat(Le(!1,t)(e),"}")}},Le=function(t,e){return function(r){var n=function(s){return t?"(".concat(s,")"):s};if(e.has(r))return n("CIRCULAR ".concat(r.tag));e.add(r);try{switch(r.tag){case"unknown":case"never":case"void":case"boolean":case"number":case"bigint":case"string":case"symbol":case"function":return r.tag;case"literal":{var i=r.value;return typeof i=="string"?'"'.concat(i,'"'):String(i)}case"template":{if(r.strings.length===0)return'""';if(r.strings.length===1)return'"'.concat(r.strings[0],'"');if(r.strings.length===2&&r.strings.every(function(s){return s===""})){var a=r.runtypes[0];return cn(e)(a.reflect)}var l=!1,u=r.strings.reduce(function(s,c,f){var d=s+c,h=r.runtypes[f];if(h){var m=fn(e)(h.reflect);return!l&&m.startsWith("$")&&(l=!0),d+m}else return d},"");return l?"`".concat(u,"`"):'"'.concat(u,'"')}case"array":return"".concat(ri(r)).concat(Le(!0,e)(r.element),"[]");case"dictionary":return"{ [_: ".concat(r.key,"]: ").concat(Le(!1,e)(r.value)," }");case"record":{var o=Object.keys(r.fields);return o.length?"{ ".concat(o.map(function(s){return"".concat(ri(r)).concat(s).concat(Js(r,s),": ").concat(r.fields[s].tag==="optional"?Le(!1,e)(r.fields[s].underlying):Le(!1,e)(r.fields[s]),";")}).join(" ")," }"):"{}"}case"tuple":return"[".concat(r.components.map(Le(!1,e)).join(", "),"]");case"union":return n("".concat(r.alternatives.map(Le(!0,e)).join(" | ")));case"intersect":return n("".concat(r.intersectees.map(Le(!0,e)).join(" & ")));case"optional":return Le(t,e)(r.underlying)+" | undefined";case"constraint":return r.name||Le(t,e)(r.underlying);case"instanceof":return r.ctor.name;case"brand":return Le(t,e)(r.entity)}}finally{e.delete(r)}throw Error("impossible")}};Rt.default=Le(!1,new Set);function Js(t,e){var r=t.isPartial,n=t.fields;return r||e!==void 0&&n[e].tag==="optional"?"?":""}function ri(t){var e=t.isReadonly;return e?"readonly ":""}(function(t){var e=x&&x.__assign||function(){return e=Object.assign||function(o){for(var s,c=1,f=arguments.length;c<f;c++){s=arguments[c];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(o[d]=s[d])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.FAILURE=t.SUCCESS=t.enumerableKeysOf=t.typeOf=t.hasKey=void 0;var r=nn,n=Rt;function i(o,s){return typeof s=="object"&&s!==null&&o in s}t.hasKey=i;var a=function(o){var s,c,f;return typeof o=="object"?o===null?"null":Array.isArray(o)?"array":((s=o.constructor)===null||s===void 0?void 0:s.name)==="Object"?"object":(f=(c=o.constructor)===null||c===void 0?void 0:c.name)!==null&&f!==void 0?f:typeof o:typeof o};t.typeOf=a;var l=function(o){return typeof o=="object"&&o!==null?Reflect.ownKeys(o).filter(function(s){var c,f;return(f=(c=o.propertyIsEnumerable)===null||c===void 0?void 0:c.call(o,s))!==null&&f!==void 0?f:!0}):[]};t.enumerableKeysOf=l;function u(o){return{success:!0,value:o}}t.SUCCESS=u,t.FAILURE=Object.assign(function(o,s,c){return e({success:!1,code:o,message:s},c?{details:c}:{})},{TYPE_INCORRECT:function(o,s){var c="Expected ".concat(o.tag==="template"?"string ".concat((0,n.default)(o)):(0,n.default)(o),", but was ").concat((0,t.typeOf)(s));return(0,t.FAILURE)(r.Failcode.TYPE_INCORRECT,c)},VALUE_INCORRECT:function(o,s,c){return(0,t.FAILURE)(r.Failcode.VALUE_INCORRECT,"Expected ".concat(o," ").concat(String(s),", but was ").concat(String(c)))},KEY_INCORRECT:function(o,s,c){return(0,t.FAILURE)(r.Failcode.KEY_INCORRECT,"Expected ".concat((0,n.default)(o)," key to be ").concat((0,n.default)(s),", but was ").concat((0,t.typeOf)(c)))},CONTENT_INCORRECT:function(o,s){var c=JSON.stringify(s,null,2).replace(/^ *null,\n/gm,""),f=`Validation failed:
`.concat(c,`.
Object should match `).concat((0,n.default)(o));return(0,t.FAILURE)(r.Failcode.CONTENT_INCORRECT,f,s)},ARGUMENT_INCORRECT:function(o){return(0,t.FAILURE)(r.Failcode.ARGUMENT_INCORRECT,o)},RETURN_INCORRECT:function(o){return(0,t.FAILURE)(r.Failcode.RETURN_INCORRECT,o)},CONSTRAINT_FAILED:function(o,s){var c=s?": ".concat(s):"";return(0,t.FAILURE)(r.Failcode.CONSTRAINT_FAILED,"Failed constraint check for ".concat((0,n.default)(o)).concat(c))},PROPERTY_MISSING:function(o){var s="Expected ".concat((0,n.default)(o),", but was missing");return(0,t.FAILURE)(r.Failcode.PROPERTY_MISSING,s)},PROPERTY_PRESENT:function(o){var s="Expected nothing, but was ".concat((0,t.typeOf)(o));return(0,t.FAILURE)(r.Failcode.PROPERTY_PRESENT,s)},NOTHING_EXPECTED:function(o){var s="Expected nothing, but was ".concat((0,t.typeOf)(o));return(0,t.FAILURE)(r.Failcode.NOTHING_EXPECTED,s)}})})(ce);var Qs=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){l={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},Zs=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.Contract=void 0;var el=Ze,tl=ce;function nl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length-1,n=t.slice(0,r),i=t[r];return{enforce:function(a){return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];if(l.length<n.length){var o="Expected ".concat(n.length," arguments but only received ").concat(l.length),s=tl.FAILURE.ARGUMENT_INCORRECT(o);throw new el.ValidationError(s)}for(var c=0;c<n.length;c++)n[c].check(l[c]);return i.check(a.apply(void 0,Zs([],Qs(l),!1)))}}}}Rn.Contract=nl;var An={},rl=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){l={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a},il=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(An,"__esModule",{value:!0});An.AsyncContract=void 0;var ii=Ze,oi=ce;function ol(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length-1,n=t.slice(0,r),i=t[r];return{enforce:function(a){return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];if(l.length<n.length){var o="Expected ".concat(n.length," arguments but only received ").concat(l.length),s=oi.FAILURE.ARGUMENT_INCORRECT(o);throw new ii.ValidationError(s)}for(var c=0;c<n.length;c++)n[c].check(l[c]);var f=a.apply(void 0,il([],rl(l),!1));if(!(f instanceof Promise)){var o="Expected function to return a promise, but instead got ".concat(f),s=oi.FAILURE.RETURN_INCORRECT(o);throw new ii.ValidationError(s)}return f.then(i.check)}}}}An.AsyncContract=ol;var bt={},al=x&&x.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sl=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(u){l={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return a};Object.defineProperty(bt,"__esModule",{value:!0});bt.when=bt.match=void 0;function ll(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){var n,i;try{for(var a=al(t),l=a.next();!l.done;l=a.next()){var u=sl(l.value,2),o=u[0],s=u[1];if(o.guard(r))return s(r)}}catch(c){n={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new Error("No alternatives were matched")}}bt.match=ll;function ul(t,e){return[t,e]}bt.when=ul;var Lt={},qe={},ai;function he(){if(ai)return qe;ai=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.innerValidate=qe.create=qe.isRuntype=void 0;var t=Mr(),e=Rt,r=Ze,n=ce,i=Symbol(),a=function(s){return(0,n.hasKey)(i,s)};qe.isRuntype=a;function l(s,c){return c[i]=!0,c.check=f,c.assert=f,c._innerValidate=function(C,y){return y.has(C,c)?(0,n.SUCCESS)(C):s(C,y)},c.validate=function(C){return c._innerValidate(C,o())},c.guard=d,c.Or=h,c.And=m,c.optional=v,c.nullable=_,c.withConstraint=T,c.withGuard=k,c.withBrand=g,c.reflect=c,c.toString=function(){return"Runtype<".concat((0,e.default)(c),">")},c;function f(C){var y=c.validate(C);if(y.success)return y.value;throw new r.ValidationError(y)}function d(C){return c.validate(C).success}function h(C){return(0,t.Union)(c,C)}function m(C){return(0,t.Intersect)(c,C)}function v(){return(0,t.Optional)(c)}function _(){return(0,t.Union)(c,t.Null)}function T(C,y){return(0,t.Constraint)(c,C,y)}function k(C,y){return(0,t.Constraint)(c,C,y)}function g(C){return(0,t.Brand)(C,c)}}qe.create=l;function u(s,c,f){return s._innerValidate(c,f)}qe.innerValidate=u;function o(){var s=new WeakMap,c=function(d,h){if(!(d===null||typeof d!="object")){var m=s.get(d);s.set(d,m?m.set(h,!0):new WeakMap().set(h,!0))}},f=function(d,h){var m=s.get(d),v=m&&m.get(h)||!1;return c(d,h),v};return{has:f}}return qe}var si;function Br(){if(si)return Lt;si=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.Unknown=void 0;var t=he(),e=ce,r={tag:"unknown"};return Lt.Unknown=(0,t.create)(function(n){return(0,e.SUCCESS)(n)},r),Lt}var Dt={},li;function cl(){if(li)return Dt;li=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.Never=void 0;var t=he(),e=ce,r={tag:"never"};return Dt.Never=(0,t.create)(e.FAILURE.NOTHING_EXPECTED,r),Dt}var $t={},ui;function fl(){if(ui)return $t;ui=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.Void=void 0;var t=Br();return $t.Void=t.Unknown,$t}var Xn={},Bt={},ci;function ha(){if(ci)return Bt;ci=1;var t=x&&x.__values||function(i){var a=typeof Symbol=="function"&&Symbol.iterator,l=a&&i[a],u=0;if(l)return l.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&u>=i.length&&(i=void 0),{value:i&&i[u++],done:!i}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.Union=void 0;var e=he(),r=ce;function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var l=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return function(c){for(var f=0;f<i.length;f++)if(i[f].guard(c))return o[f](c)}},u={tag:"union",alternatives:i,match:l};return(0,e.create)(function(o,s){var c,f,d,h,m,v,_,T;if(typeof o!="object"||o===null){try{for(var k=t(i),g=k.next();!g.done;g=k.next()){var C=g.value;if((0,e.innerValidate)(C,o,s).success)return(0,r.SUCCESS)(o)}}catch(E){c={error:E}}finally{try{g&&!g.done&&(f=k.return)&&f.call(k)}finally{if(c)throw c.error}}return r.FAILURE.TYPE_INCORRECT(u,o)}var y={};try{for(var I=t(i),A=I.next();!A.done;A=I.next()){var C=A.value;if(C.reflect.tag==="record"){var P=function(S){var D=C.reflect.fields[S];D.tag==="literal"&&(y[S]?y[S].every(function(j){return j!==D.value})&&y[S].push(D.value):y[S]=[D.value])};for(var O in C.reflect.fields)P(O)}}}catch(E){d={error:E}}finally{try{A&&!A.done&&(h=I.return)&&h.call(I)}finally{if(d)throw d.error}}for(var O in y)if(y[O].length===i.length)try{for(var V=(m=void 0,t(i)),z=V.next();!z.done;z=V.next()){var C=z.value;if(C.reflect.tag==="record"){var J=C.reflect.fields[O];if(J.tag==="literal"&&(0,r.hasKey)(O,o)&&o[O]===J.value)return(0,e.innerValidate)(C,o,s)}}}catch(S){m={error:S}}finally{try{z&&!z.done&&(v=V.return)&&v.call(V)}finally{if(m)throw m.error}}try{for(var p=t(i),w=p.next();!w.done;w=p.next()){var b=w.value;if((0,e.innerValidate)(b,o,s).success)return(0,r.SUCCESS)(o)}}catch(E){_={error:E}}finally{try{w&&!w.done&&(T=p.return)&&T.call(p)}finally{if(_)throw _.error}}return r.FAILURE.TYPE_INCORRECT(u,o)},u)}return Bt.Union=n,Bt}var fi;function pa(){return fi||(fi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Nullish=t.Null=t.Undefined=t.Literal=t.literal=void 0;var e=he(),r=ce,n=ha();function i(l){return Array.isArray(l)?String(l.map(String)):typeof l=="bigint"?String(l)+"n":String(l)}t.literal=i;function a(l){var u={tag:"literal",value:l};return(0,e.create)(function(o){return o===l?(0,r.SUCCESS)(o):r.FAILURE.VALUE_INCORRECT("literal","`".concat(i(l),"`"),"`".concat(i(o),"`"))},u)}t.Literal=a,t.Undefined=a(void 0),t.Null=a(null),t.Nullish=(0,n.Union)(t.Null,t.Undefined)}(Xn)),Xn}var Mt={},di;function dl(){if(di)return Mt;di=1;var t=x&&x.__read||function(g,C){var y=typeof Symbol=="function"&&g[Symbol.iterator];if(!y)return g;var I=y.call(g),A,P=[],O;try{for(;(C===void 0||C-- >0)&&!(A=I.next()).done;)P.push(A.value)}catch(V){O={error:V}}finally{try{A&&!A.done&&(y=I.return)&&y.call(I)}finally{if(O)throw O.error}}return P},e=x&&x.__spreadArray||function(g,C,y){if(y||arguments.length===2)for(var I=0,A=C.length,P;I<A;I++)(P||!(I in C))&&(P||(P=Array.prototype.slice.call(C,0,I)),P[I]=C[I]);return g.concat(P||Array.prototype.slice.call(C))},r=x&&x.__values||function(g){var C=typeof Symbol=="function"&&Symbol.iterator,y=C&&g[C],I=0;if(y)return y.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&I>=g.length&&(g=void 0),{value:g&&g[I++],done:!g}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.Template=void 0;var n=he(),i=Rt,a=ce,l=pa(),u=function(g){return g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},o=function(g){if(0<g.length&&Array.isArray(g[0])){var C=t(g),y=C[0],I=C.slice(1);return[Array.from(y),I]}else{var A=g,y=A.reduce(function(V,z){return(0,n.isRuntype)(z)?V.push(""):V.push(V.pop()+String(z)),V},[""]),I=A.filter(n.isRuntype);return[y,I]}},s=function(g,C){for(var y=0;y<C.length;)switch(C[y].reflect.tag){case"literal":{var I=C[y];C.splice(y,1);var A=String(I.value);g.splice(y,2,g[y]+A+g[y+1]);break}case"template":{var P=C[y];C.splice.apply(C,e([y,1],t(P.runtypes),!1));var O=P.strings;if(O.length===1)g.splice(y,2,g[y]+O[0]+g[y+1]);else{var V=O[0],z=O.slice(1,-1),J=O[O.length-1];g.splice.apply(g,e(e([y,2,g[y]+V],t(z),!1),[J+g[y+1]],!1))}break}case"union":{var p=C[y];if(p.alternatives.length===1)try{var w=f(p);C.splice(y,1);var A=String(w.value);g.splice(y,2,g[y]+A+g[y+1]);break}catch{y++;break}else{y++;break}}case"intersect":{var b=C[y];if(b.intersectees.length===1)try{var E=f(b);C.splice(y,1);var A=String(E.value);g.splice(y,2,g[y]+A+g[y+1]);break}catch{y++;break}else{y++;break}}default:y++;break}},c=function(g){var C=t(o(g),2),y=C[0],I=C[1];return s(y,I),[y,I]},f=function(g){switch(g.reflect.tag){case"literal":return g;case"brand":return f(g.reflect.entity);case"union":if(g.reflect.alternatives.length===1)return f(g.reflect.alternatives[0]);break;case"intersect":if(g.reflect.intersectees.length===1)return f(g.reflect.intersectees[0]);break}throw void 0},d=function(g){return g},h={string:[function(g){return globalThis.String(g)},".*"],number:[function(g){return globalThis.Number(g)},"[+-]?(?:\\d*\\.\\d+|\\d+\\.\\d*|\\d+)(?:[Ee][+-]?\\d+)?","0[Bb][01]+","0[Oo][0-7]+","0[Xx][0-9A-Fa-f]+"],bigint:[function(g){return globalThis.BigInt(g)},"-?[1-9]d*"],boolean:[function(g){return g!=="false"},"true","false"],null:[function(){return null},"null"],undefined:[function(){},"undefined"]},m=function(g){switch(g.tag){case"literal":{var C=t(h[(0,a.typeOf)(g.value)]||[d],1),y=C[0];return y}case"brand":return m(g.entity);case"constraint":return m(g.underlying);case"union":return g.alternatives.map(m);case"intersect":return g.intersectees.map(m);default:var I=t(h[g.tag]||[d],1),A=I[0];return A}},v=function(g,C){return function(y){var I,A,P,O,V=m(g);if(Array.isArray(V))switch(g.tag){case"union":try{for(var z=r(g.alternatives),J=z.next();!J.done;J=z.next()){var p=J.value,w=v(p.reflect,C)(y);if(w.success)return w}}catch(j){I={error:j}}finally{try{J&&!J.done&&(A=z.return)&&A.call(z)}finally{if(I)throw I.error}}return a.FAILURE.TYPE_INCORRECT(g,y);case"intersect":try{for(var b=r(g.intersectees),E=b.next();!E.done;E=b.next()){var S=E.value,w=v(S.reflect,C)(y);if(!w.success)return w}}catch(j){P={error:j}}finally{try{E&&!E.done&&(O=b.return)&&O.call(b)}finally{if(P)throw P.error}}return(0,a.SUCCESS)(y);default:throw Error("impossible")}else{var D=V,w=(0,n.innerValidate)(g,D(y),C);return!w.success&&w.code==="VALUE_INCORRECT"&&g.tag==="literal"?a.FAILURE.VALUE_INCORRECT("literal",'"'.concat((0,l.literal)(g.value),'"'),'"'.concat(y,'"')):w}}},_=function(g){switch(g.tag){case"literal":return u(String(g.value));case"brand":return _(g.entity);case"constraint":return _(g.underlying);case"union":return g.alternatives.map(_).join("|");case"template":return g.strings.map(u).reduce(function(I,A,P){var O=I+A,V=g.runtypes[P];return V?O+"(?:".concat(_(V.reflect),")"):O},"");default:var C=t(h[g.tag]||[void 0,".*"]),y=C.slice(1);return y.join("|")}},T=function(g){var C=g.strings.map(u).reduce(function(y,I,A){var P=y+I,O=g.runtypes[A];return O?P+"(".concat(_(O.reflect),")"):P},"");return new RegExp("^".concat(C,"$"),"su")};function k(){for(var g=[],C=0;C<arguments.length;C++)g[C]=arguments[C];var y=t(c(g),2),I=y[0],A=y[1],P={tag:"template",strings:I,runtypes:A},O=T(P),V=function(z,J){var p=z.match(O);if(p){for(var w=p.slice(1),b=0;b<A.length;b++){var E=A[b],S=w[b],D=v(E.reflect,J)(S);if(!D.success)return D}return(0,a.SUCCESS)(z)}else return a.FAILURE.VALUE_INCORRECT("string","".concat((0,i.default)(P)),'"'.concat((0,l.literal)(z),'"'))};return(0,n.create)(function(z,J){if(typeof z!="string")return a.FAILURE.TYPE_INCORRECT(P,z);var p=V(z,J);if(p.success)return(0,a.SUCCESS)(z);var w=a.FAILURE.VALUE_INCORRECT("string","".concat((0,i.default)(P)),'"'.concat(z,'"'));return w.message!==p.message&&(w.message+=" (inner: ".concat(p.message,")")),w},P)}return Mt.Template=k,Mt}var Ft={},hi;function hl(){if(hi)return Ft;hi=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.Boolean=void 0;var t=he(),e=ce,r={tag:"boolean"};return Ft.Boolean=(0,t.create)(function(n){return typeof n=="boolean"?(0,e.SUCCESS)(n):e.FAILURE.TYPE_INCORRECT(r,n)},r),Ft}var xt={},pi;function pl(){if(pi)return xt;pi=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.Number=void 0;var t=he(),e=ce,r={tag:"number"};return xt.Number=(0,t.create)(function(n){return typeof n=="number"?(0,e.SUCCESS)(n):e.FAILURE.TYPE_INCORRECT(r,n)},r),xt}var Ut={},mi;function ml(){if(mi)return Ut;mi=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.BigInt=void 0;var t=he(),e=ce,r={tag:"bigint"};return Ut.BigInt=(0,t.create)(function(n){return typeof n=="bigint"?(0,e.SUCCESS)(n):e.FAILURE.TYPE_INCORRECT(r,n)},r),Ut}var jt={},vi;function ma(){if(vi)return jt;vi=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.String=void 0;var t=he(),e=ce,r={tag:"string"};return jt.String=(0,t.create)(function(n){return typeof n=="string"?(0,e.SUCCESS)(n):e.FAILURE.TYPE_INCORRECT(r,n)},r),jt}var qt={},gi;function vl(){if(gi)return qt;gi=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.Symbol=void 0;var t=he(),e=ce,r=function(a){var l={tag:"symbol",key:a};return(0,t.create)(function(u){if(typeof u!="symbol")return e.FAILURE.TYPE_INCORRECT(l,u);var o=globalThis.Symbol.keyFor(u);return o!==a?e.FAILURE.VALUE_INCORRECT("symbol key",i(a),i(o)):(0,e.SUCCESS)(u)},l)},n={tag:"symbol"};qt.Symbol=(0,t.create)(function(a){return typeof a=="symbol"?(0,e.SUCCESS)(a):e.FAILURE.TYPE_INCORRECT(n,a)},Object.assign(r,n));var i=function(a){return a===void 0?"undefined":'"'.concat(a,'"')};return qt}var Ht={},bi;function gl(){if(bi)return Ht;bi=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.Array=void 0;var t=he(),e=ce;function r(a,l){var u={tag:"array",isReadonly:l,element:a};return i((0,t.create)(function(o,s){if(!Array.isArray(o))return e.FAILURE.TYPE_INCORRECT(u,o);var c=(0,e.enumerableKeysOf)(o),f=c.map(function(h){return(0,t.innerValidate)(a,o[h],s)}),d=c.reduce(function(h,m){var v=f[m];return v.success||(h[m]=v.details||v.message),h},[]);return(0,e.enumerableKeysOf)(d).length!==0?e.FAILURE.CONTENT_INCORRECT(u,d):(0,e.SUCCESS)(o)},u))}function n(a){return r(a,!1)}Ht.Array=n;function i(a){return a.asReadonly=l,a;function l(){return r(a.element,!0)}}return Ht}var Kt={},yi;function bl(){if(yi)return Kt;yi=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.Tuple=void 0;var t=he(),e=ce;function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a={tag:"tuple",components:n};return(0,t.create)(function(l,u){if(!Array.isArray(l))return e.FAILURE.TYPE_INCORRECT(a,l);if(l.length!==n.length)return e.FAILURE.CONSTRAINT_FAILED(a,"Expected length ".concat(n.length,", but was ").concat(l.length));var o=(0,e.enumerableKeysOf)(l),s=o.map(function(f){return(0,t.innerValidate)(n[f],l[f],u)}),c=o.reduce(function(f,d){var h=s[d];return h.success||(f[d]=h.details||h.message),f},[]);return(0,e.enumerableKeysOf)(c).length!==0?e.FAILURE.CONTENT_INCORRECT(a,c):(0,e.SUCCESS)(l)},a)}return Kt.Tuple=r,Kt}var He={},_i;function yl(){if(_i)return He;_i=1;var t=x&&x.__read||function(o,s){var c=typeof Symbol=="function"&&o[Symbol.iterator];if(!c)return o;var f=c.call(o),d,h=[],m;try{for(;(s===void 0||s-- >0)&&!(d=f.next()).done;)h.push(d.value)}catch(v){m={error:v}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(m)throw m.error}}return h},e=x&&x.__spreadArray||function(o,s,c){if(c||arguments.length===2)for(var f=0,d=s.length,h;f<d;f++)(h||!(f in s))&&(h||(h=Array.prototype.slice.call(s,0,f)),h[f]=s[f]);return o.concat(h||Array.prototype.slice.call(s))};Object.defineProperty(He,"__esModule",{value:!0}),He.Partial=He.Record=He.InternalRecord=void 0;var r=he(),n=ce;function i(o,s,c){var f={tag:"record",isPartial:s,isReadonly:c,fields:o};return u((0,r.create)(function(d,h){if(d==null)return n.FAILURE.TYPE_INCORRECT(f,d);var m=(0,n.enumerableKeysOf)(o);if(m.length!==0&&typeof d!="object")return n.FAILURE.TYPE_INCORRECT(f,d);var v=e([],t(new Set(e(e([],t(m),!1),t((0,n.enumerableKeysOf)(d)),!1))),!1),_=v.reduce(function(k,g){var C=(0,n.hasKey)(g,o),y=(0,n.hasKey)(g,d);if(C){var I=o[g],A=s||I.reflect.tag==="optional";if(y){var P=d[g];A&&P===void 0?k[g]=(0,n.SUCCESS)(P):k[g]=(0,r.innerValidate)(I,P,h)}else A?k[g]=(0,n.SUCCESS)(void 0):k[g]=n.FAILURE.PROPERTY_MISSING(I.reflect)}else if(y){var P=d[g];k[g]=(0,n.SUCCESS)(P)}else throw new Error("impossible");return k},{}),T=v.reduce(function(k,g){var C=_[g];return C.success||(k[g]=C.details||C.message),k},{});return(0,n.enumerableKeysOf)(T).length!==0?n.FAILURE.CONTENT_INCORRECT(f,T):(0,n.SUCCESS)(d)},f))}He.InternalRecord=i;function a(o){return i(o,!1,!1)}He.Record=a;function l(o){return i(o,!0,!1)}He.Partial=l;function u(o){return o.asPartial=s,o.asReadonly=c,o.pick=f,o.omit=d,o.extend=h,o;function s(){return i(o.fields,!0,o.isReadonly)}function c(){return i(o.fields,o.isPartial,!0)}function f(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];var _={};return m.forEach(function(T){_[T]=o.fields[T]}),i(_,o.isPartial,o.isReadonly)}function d(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];var _={},T=(0,n.enumerableKeysOf)(o.fields);return T.forEach(function(k){m.includes(k)||(_[k]=o.fields[k])}),i(_,o.isPartial,o.isReadonly)}function h(m){return i(Object.assign({},o.fields,m),o.isPartial,o.isReadonly)}}return He}var Vt={},tt={},Ei;function va(){if(Ei)return tt;Ei=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.Guard=tt.Constraint=void 0;var t=he(),e=ce,r=Br();function n(a,l,u){var o=u&&u.name,s=u&&u.args,c={tag:"constraint",underlying:a,constraint:l,name:o,args:s};return(0,t.create)(function(f){var d=a.validate(f);if(!d.success)return d;var h=l(d.value);return typeof h=="string"?e.FAILURE.CONSTRAINT_FAILED(c,h):h?(0,e.SUCCESS)(d.value):e.FAILURE.CONSTRAINT_FAILED(c)},c)}tt.Constraint=n;var i=function(a,l){return r.Unknown.withGuard(a,l)};return tt.Guard=i,tt}var wi;function _l(){if(wi)return Vt;wi=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.Dictionary=void 0;var t=he(),e=ma(),r=va(),n=Rt,i=ce,a=(0,r.Constraint)(e.String,function(u){return!isNaN(+u)},{name:"number"});function l(u,o){var s=o===void 0||o==="string"?e.String:o==="number"?a:o,c=(0,n.default)(s),f={tag:"dictionary",key:c,value:u};return(0,t.create)(function(d,h){if(d==null||typeof d!="object"||Object.getPrototypeOf(d)!==Object.prototype&&(!Array.isArray(d)||c==="string"))return i.FAILURE.TYPE_INCORRECT(f,d);var m=/^(?:NaN|-?\d+(?:\.\d+)?)$/,v=(0,i.enumerableKeysOf)(d),_=v.reduce(function(k,g){var C=typeof g=="string"&&m.test(g),y=C?globalThis.Number(g):g;return(C?!s.guard(y)&&!s.guard(g):!s.guard(y))?k[g]=i.FAILURE.KEY_INCORRECT(f,s.reflect,y):k[g]=(0,t.innerValidate)(u,d[g],h),k},{}),T=v.reduce(function(k,g){var C=_[g];return C.success||(k[g]=C.details||C.message),k},{});return(0,i.enumerableKeysOf)(T).length!==0?i.FAILURE.CONTENT_INCORRECT(f,T):(0,i.SUCCESS)(d)},f)}return Vt.Dictionary=l,Vt}var Wt={},Ci;function El(){if(Ci)return Wt;Ci=1;var t=x&&x.__values||function(i){var a=typeof Symbol=="function"&&Symbol.iterator,l=a&&i[a],u=0;if(l)return l.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&u>=i.length&&(i=void 0),{value:i&&i[u++],done:!i}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.Intersect=void 0;var e=he(),r=ce;function n(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var l={tag:"intersect",intersectees:i};return(0,e.create)(function(u,o){var s,c;try{for(var f=t(i),d=f.next();!d.done;d=f.next()){var h=d.value,m=(0,e.innerValidate)(h,u,o);if(!m.success)return m}}catch(v){s={error:v}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}return(0,r.SUCCESS)(u)},l)}return Wt.Intersect=n,Wt}var Gt={},Ti;function wl(){if(Ti)return Gt;Ti=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.Optional=void 0;var t=he(),e=ce;function r(n){var i={tag:"optional",underlying:n};return(0,t.create)(function(a){return a===void 0?(0,e.SUCCESS)(a):n.validate(a)},i)}return Gt.Optional=r,Gt}var zt={},ki;function Cl(){if(ki)return zt;ki=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.Function=void 0;var t=he(),e=ce,r={tag:"function"};return zt.Function=(0,t.create)(function(n){return typeof n=="function"?(0,e.SUCCESS)(n):e.FAILURE.TYPE_INCORRECT(r,n)},r),zt}var Yt={},Si;function Tl(){if(Si)return Yt;Si=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.InstanceOf=void 0;var t=he(),e=ce;function r(n){var i={tag:"instanceof",ctor:n};return(0,t.create)(function(a){return a instanceof n?(0,e.SUCCESS)(a):e.FAILURE.TYPE_INCORRECT(i,a)},i)}return Yt.InstanceOf=r,Yt}var Xt={},Ri;function kl(){if(Ri)return Xt;Ri=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.Lazy=void 0;var t=he();function e(r){var n={get tag(){return a().tag}},i;function a(){if(!i){i=r();for(var l in i)l!=="tag"&&(n[l]=i[l])}return i}return(0,t.create)(function(l){return a().validate(l)},n)}return Xt.Lazy=e,Xt}var Jt={},Ai;function Sl(){if(Ai)return Jt;Ai=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.Brand=void 0;var t=he();function e(r,n){var i={tag:"brand",brand:r,entity:n};return(0,t.create)(function(a){return n.validate(a)},i)}return Jt.Brand=e,Jt}var yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.checked=yt.check=void 0;var Rl=Ze,Al=ce,Rr=new WeakMap;function Nl(t,e,r){var n=Rr.get(t)||new Map;Rr.set(t,n);var i=n.get(e)||[];n.set(e,i),i.push(r)}yt.check=Nl;function Ol(t,e,r){var n=Rr.get(t),i=n&&n.get(e);if(i)return i;for(var a=[],l=0;l<r;l++)a.push(l);return a}function Pl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===0)throw new Error("No runtype provided to `@checked`. Please remove the decorator.");return function(r,n,i){var a=i.value,l=(r.name||r.constructor.name+".prototype")+(typeof n=="string"?'["'.concat(n,'"]'):"[".concat(String(n),"]")),u=Ol(r,n,t.length);if(u.length!==t.length)throw new Error("Number of `@checked` runtypes and @check parameters not matched.");if(u.length>a.length)throw new Error("Number of `@checked` runtypes exceeds actual parameter length.");i.value=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return t.forEach(function(c,f){var d=u[f],h=c.validate(o[d]);if(!h.success){var m="".concat(l,", argument #").concat(d,": ").concat(h.message),v=Al.FAILURE.ARGUMENT_INCORRECT(m);throw new Rl.ValidationError(v)}}),a.apply(this,o)}}}yt.checked=Pl;var Ni;function Mr(){return Ni||(Ni=1,function(t){var e=x&&x.__createBinding||(Object.create?function(a,l,u,o){o===void 0&&(o=u),Object.defineProperty(a,o,{enumerable:!0,get:function(){return l[u]}})}:function(a,l,u,o){o===void 0&&(o=u),a[o]=l[u]}),r=x&&x.__exportStar||function(a,l){for(var u in a)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&e(l,a,u)};Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceOf=t.Nullish=t.Null=t.Undefined=t.Literal=void 0,r(da,t),r(nn,t),r(Rn,t),r(An,t),r(bt,t),r(Ze,t),r(Br(),t),r(cl(),t),r(fl(),t);var n=pa();Object.defineProperty(t,"Literal",{enumerable:!0,get:function(){return n.Literal}}),Object.defineProperty(t,"Undefined",{enumerable:!0,get:function(){return n.Undefined}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return n.Null}}),Object.defineProperty(t,"Nullish",{enumerable:!0,get:function(){return n.Nullish}}),r(dl(),t),r(hl(),t),r(pl(),t),r(ml(),t),r(ma(),t),r(vl(),t),r(gl(),t),r(bl(),t),r(yl(),t),r(_l(),t),r(ha(),t),r(El(),t),r(wl(),t),r(Cl(),t);var i=Tl();Object.defineProperty(t,"InstanceOf",{enumerable:!0,get:function(){return i.InstanceOf}}),r(kl(),t),r(va(),t),r(Sl(),t),r(yt,t)}(Yn)),Yn}var Ue={},Fr={exports:{}},ga=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},Il=ga,xr=Object.prototype.toString,Ur=function(t){return function(e){var r=xr.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function ut(t){return t=t.toLowerCase(),function(r){return Ur(r)===t}}function jr(t){return Array.isArray(t)}function mn(t){return typeof t>"u"}function Ll(t){return t!==null&&!mn(t)&&t.constructor!==null&&!mn(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var ba=ut("ArrayBuffer");function Dl(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ba(t.buffer),e}function $l(t){return typeof t=="string"}function Bl(t){return typeof t=="number"}function ya(t){return t!==null&&typeof t=="object"}function dn(t){if(Ur(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var Ml=ut("Date"),Fl=ut("File"),xl=ut("Blob"),Ul=ut("FileList");function qr(t){return xr.call(t)==="[object Function]"}function jl(t){return ya(t)&&qr(t.pipe)}function ql(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||xr.call(t)===e||qr(t.toString)&&t.toString()===e)}var Hl=ut("URLSearchParams");function Kl(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Vl(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Hr(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),jr(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Ar(){var t={};function e(i,a){dn(t[a])&&dn(i)?t[a]=Ar(t[a],i):dn(i)?t[a]=Ar({},i):jr(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)Hr(arguments[r],e);return t}function Wl(t,e,r){return Hr(e,function(i,a){r&&typeof i=="function"?t[a]=Il(i,r):t[a]=i}),t}function Gl(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function zl(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function Yl(t,e,r){var n,i,a,l={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)a=n[i],l[a]||(e[a]=t[a],l[a]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function Xl(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function Jl(t){if(!t)return null;var e=t.length;if(mn(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var Ql=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Ee={isArray:jr,isArrayBuffer:ba,isBuffer:Ll,isFormData:ql,isArrayBufferView:Dl,isString:$l,isNumber:Bl,isObject:ya,isPlainObject:dn,isUndefined:mn,isDate:Ml,isFile:Fl,isBlob:xl,isFunction:qr,isStream:jl,isURLSearchParams:Hl,isStandardBrowserEnv:Vl,forEach:Hr,merge:Ar,extend:Wl,trim:Kl,stripBOM:Gl,inherits:zl,toFlatObject:Yl,kindOf:Ur,kindOfTest:ut,endsWith:Xl,toArray:Jl,isTypedArray:Ql,isFileList:Ul},ht=Ee;function Oi(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var _a=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ht.isURLSearchParams(r))i=r.toString();else{var a=[];ht.forEach(r,function(o,s){o===null||typeof o>"u"||(ht.isArray(o)?s=s+"[]":o=[o],ht.forEach(o,function(f){ht.isDate(f)?f=f.toISOString():ht.isObject(f)&&(f=JSON.stringify(f)),a.push(Oi(s)+"="+Oi(f))}))}),i=a.join("&")}if(i){var l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Zl=Ee;function Nn(){this.handlers=[]}Nn.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Nn.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Nn.prototype.forEach=function(e){Zl.forEach(this.handlers,function(n){n!==null&&e(n)})};var eu=Nn,tu=Ee,nu=function(e,r){tu.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},Ea=Ee;function _t(t,e,r,n,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Ea.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var wa=_t.prototype,Ca={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){Ca[t]={value:t}});Object.defineProperties(_t,Ca);Object.defineProperty(wa,"isAxiosError",{value:!0});_t.from=function(t,e,r,n,i,a){var l=Object.create(wa);return Ea.toFlatObject(t,l,function(o){return o!==Error.prototype}),_t.call(l,t.message,e,r,n,i),l.name=t.name,a&&Object.assign(l,a),l};var At=_t,Ta={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Be=Ee;function ru(t,e){e=e||new FormData;var r=[];function n(a){return a===null?"":Be.isDate(a)?a.toISOString():Be.isArrayBuffer(a)||Be.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function i(a,l){if(Be.isPlainObject(a)||Be.isArray(a)){if(r.indexOf(a)!==-1)throw Error("Circular reference detected in "+l);r.push(a),Be.forEach(a,function(o,s){if(!Be.isUndefined(o)){var c=l?l+"."+s:s,f;if(o&&!l&&typeof o=="object"){if(Be.endsWith(s,"{}"))o=JSON.stringify(o);else if(Be.endsWith(s,"[]")&&(f=Be.toArray(o))){f.forEach(function(d){!Be.isUndefined(d)&&e.append(c,n(d))});return}}i(o,c)}}),r.pop()}else e.append(l,n(a))}return i(t),e}var ka=ru,Jn,Pi;function iu(){if(Pi)return Jn;Pi=1;var t=At;return Jn=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},Jn}var Qn,Ii;function ou(){if(Ii)return Qn;Ii=1;var t=Ee;return Qn=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,l,u,o){var s=[];s.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&s.push("expires="+new Date(a).toGMTString()),t.isString(l)&&s.push("path="+l),t.isString(u)&&s.push("domain="+u),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Qn}var au=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},su=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},lu=au,uu=su,Sa=function(e,r){return e&&!lu(r)?uu(e,r):r},Zn,Li;function cu(){if(Li)return Zn;Li=1;var t=Ee,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Zn=function(n){var i={},a,l,u;return n&&t.forEach(n.split(`
`),function(s){if(u=s.indexOf(":"),a=t.trim(s.substr(0,u)).toLowerCase(),l=t.trim(s.substr(u+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([l]):i[a]=i[a]?i[a]+", "+l:l}}),i},Zn}var er,Di;function fu(){if(Di)return er;Di=1;var t=Ee;return er=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(l){var u=l;return r&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(u){var o=t.isString(u)?a(u):u;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}(),er}var tr,$i;function On(){if($i)return tr;$i=1;var t=At,e=Ee;function r(n){t.call(this,n??"canceled",t.ERR_CANCELED),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),tr=r,tr}var nr,Bi;function du(){return Bi||(Bi=1,nr=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),nr}var rr,Mi;function Fi(){if(Mi)return rr;Mi=1;var t=Ee,e=iu(),r=ou(),n=_a,i=Sa,a=cu(),l=fu(),u=Ta,o=At,s=On(),c=du();return rr=function(d){return new Promise(function(m,v){var _=d.data,T=d.headers,k=d.responseType,g;function C(){d.cancelToken&&d.cancelToken.unsubscribe(g),d.signal&&d.signal.removeEventListener("abort",g)}t.isFormData(_)&&t.isStandardBrowserEnv()&&delete T["Content-Type"];var y=new XMLHttpRequest;if(d.auth){var I=d.auth.username||"",A=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";T.Authorization="Basic "+btoa(I+":"+A)}var P=i(d.baseURL,d.url);y.open(d.method.toUpperCase(),n(P,d.params,d.paramsSerializer),!0),y.timeout=d.timeout;function O(){if(y){var J="getAllResponseHeaders"in y?a(y.getAllResponseHeaders()):null,p=!k||k==="text"||k==="json"?y.responseText:y.response,w={data:p,status:y.status,statusText:y.statusText,headers:J,config:d,request:y};e(function(E){m(E),C()},function(E){v(E),C()},w),y=null}}if("onloadend"in y?y.onloadend=O:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(O)},y.onabort=function(){y&&(v(new o("Request aborted",o.ECONNABORTED,d,y)),y=null)},y.onerror=function(){v(new o("Network Error",o.ERR_NETWORK,d,y,y)),y=null},y.ontimeout=function(){var p=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",w=d.transitional||u;d.timeoutErrorMessage&&(p=d.timeoutErrorMessage),v(new o(p,w.clarifyTimeoutError?o.ETIMEDOUT:o.ECONNABORTED,d,y)),y=null},t.isStandardBrowserEnv()){var V=(d.withCredentials||l(P))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;V&&(T[d.xsrfHeaderName]=V)}"setRequestHeader"in y&&t.forEach(T,function(p,w){typeof _>"u"&&w.toLowerCase()==="content-type"?delete T[w]:y.setRequestHeader(w,p)}),t.isUndefined(d.withCredentials)||(y.withCredentials=!!d.withCredentials),k&&k!=="json"&&(y.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&y.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(g=function(J){y&&(v(!J||J&&J.type?new s:J),y.abort(),y=null)},d.cancelToken&&d.cancelToken.subscribe(g),d.signal&&(d.signal.aborted?g():d.signal.addEventListener("abort",g))),_||(_=null);var z=c(P);if(z&&["http","https","file"].indexOf(z)===-1){v(new o("Unsupported protocol "+z+":",o.ERR_BAD_REQUEST,d));return}y.send(_)})},rr}var ir,xi;function hu(){return xi||(xi=1,ir=null),ir}var ve=Ee,Ui=nu,ji=At,pu=Ta,mu=ka,vu={"Content-Type":"application/x-www-form-urlencoded"};function qi(t,e){!ve.isUndefined(t)&&ve.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function gu(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Fi()),t}function bu(t,e,r){if(ve.isString(t))try{return(e||JSON.parse)(t),ve.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Pn={transitional:pu,adapter:gu(),transformRequest:[function(e,r){if(Ui(r,"Accept"),Ui(r,"Content-Type"),ve.isFormData(e)||ve.isArrayBuffer(e)||ve.isBuffer(e)||ve.isStream(e)||ve.isFile(e)||ve.isBlob(e))return e;if(ve.isArrayBufferView(e))return e.buffer;if(ve.isURLSearchParams(e))return qi(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=ve.isObject(e),i=r&&r["Content-Type"],a;if((a=ve.isFileList(e))||n&&i==="multipart/form-data"){var l=this.env&&this.env.FormData;return mu(a?{"files[]":e}:e,l&&new l)}else if(n||i==="application/json")return qi(r,"application/json"),bu(e);return e}],transformResponse:[function(e){var r=this.transitional||Pn.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&ve.isString(e)&&e.length)try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?ji.from(l,ji.ERR_BAD_RESPONSE,this,null,this.response):l}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hu()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ve.forEach(["delete","get","head"],function(e){Pn.headers[e]={}});ve.forEach(["post","put","patch"],function(e){Pn.headers[e]=ve.merge(vu)});var Kr=Pn,yu=Ee,_u=Kr,Eu=function(e,r,n){var i=this||_u;return yu.forEach(n,function(l){e=l.call(i,e,r)}),e},or,Hi;function Ra(){return Hi||(Hi=1,or=function(e){return!!(e&&e.__CANCEL__)}),or}var Ki=Ee,ar=Eu,wu=Ra(),Cu=Kr,Tu=On();function sr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tu}var ku=function(e){sr(e),e.headers=e.headers||{},e.data=ar.call(e,e.data,e.headers,e.transformRequest),e.headers=Ki.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ki.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||Cu.adapter;return r(e).then(function(i){return sr(e),i.data=ar.call(e,i.data,i.headers,e.transformResponse),i},function(i){return wu(i)||(sr(e),i&&i.response&&(i.response.data=ar.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Ie=Ee,Aa=function(e,r){r=r||{};var n={};function i(c,f){return Ie.isPlainObject(c)&&Ie.isPlainObject(f)?Ie.merge(c,f):Ie.isPlainObject(f)?Ie.merge({},f):Ie.isArray(f)?f.slice():f}function a(c){if(Ie.isUndefined(r[c])){if(!Ie.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function l(c){if(!Ie.isUndefined(r[c]))return i(void 0,r[c])}function u(c){if(Ie.isUndefined(r[c])){if(!Ie.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function o(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var s={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:o};return Ie.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var d=s[f]||a,h=d(f);Ie.isUndefined(h)&&d!==o||(n[f]=h)}),n},lr,Vi;function Na(){return Vi||(Vi=1,lr={version:"0.27.2"}),lr}var Su=Na().version,Ge=At,Vr={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Vr[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Wi={};Vr.transitional=function(e,r,n){function i(a,l){return"[Axios v"+Su+"] Transitional option '"+a+"'"+l+(n?". "+n:"")}return function(a,l,u){if(e===!1)throw new Ge(i(l," has been removed"+(r?" in "+r:"")),Ge.ERR_DEPRECATED);return r&&!Wi[l]&&(Wi[l]=!0,console.warn(i(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,l,u):!0}};function Ru(t,e,r){if(typeof t!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],l=e[a];if(l){var u=t[a],o=u===void 0||l(u,a,t);if(o!==!0)throw new Ge("option "+a+" must be "+o,Ge.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ge("Unknown option "+a,Ge.ERR_BAD_OPTION)}}var Au={assertOptions:Ru,validators:Vr},Oa=Ee,Nu=_a,Gi=eu,zi=ku,In=Aa,Ou=Sa,Pa=Au,pt=Pa.validators;function Et(t){this.defaults=t,this.interceptors={request:new Gi,response:new Gi}}Et.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=In(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Pa.assertOptions(n,{silentJSONParsing:pt.transitional(pt.boolean),forcedJSONParsing:pt.transitional(pt.boolean),clarifyTimeoutError:pt.transitional(pt.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(a=a&&h.synchronous,i.unshift(h.fulfilled,h.rejected))});var l=[];this.interceptors.response.forEach(function(h){l.push(h.fulfilled,h.rejected)});var u;if(!a){var o=[zi,void 0];for(Array.prototype.unshift.apply(o,i),o=o.concat(l),u=Promise.resolve(r);o.length;)u=u.then(o.shift(),o.shift());return u}for(var s=r;i.length;){var c=i.shift(),f=i.shift();try{s=c(s)}catch(d){f(d);break}}try{u=zi(s)}catch(d){return Promise.reject(d)}for(;l.length;)u=u.then(l.shift(),l.shift());return u};Et.prototype.getUri=function(e){e=In(this.defaults,e);var r=Ou(e.baseURL,e.url);return Nu(r,e.params,e.paramsSerializer)};Oa.forEach(["delete","get","head","options"],function(e){Et.prototype[e]=function(r,n){return this.request(In(n||{},{method:e,url:r,data:(n||{}).data}))}});Oa.forEach(["post","put","patch"],function(e){function r(n){return function(a,l,u){return this.request(In(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Et.prototype[e]=r(),Et.prototype[e+"Form"]=r(!0)});var Pu=Et,ur,Yi;function Iu(){if(Yi)return ur;Yi=1;var t=On();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(l){n=l});var i=this;this.promise.then(function(a){if(i._listeners){var l,u=i._listeners.length;for(l=0;l<u;l++)i._listeners[l](a);i._listeners=null}}),this.promise.then=function(a){var l,u=new Promise(function(o){i.subscribe(o),l=o}).then(a);return u.cancel=function(){i.unsubscribe(l)},u},r(function(l){i.reason||(i.reason=new t(l),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(l){n=l});return{token:i,cancel:n}},ur=e,ur}var cr,Xi;function Lu(){return Xi||(Xi=1,cr=function(e){return function(n){return e.apply(null,n)}}),cr}var fr,Ji;function Du(){if(Ji)return fr;Ji=1;var t=Ee;return fr=function(r){return t.isObject(r)&&r.isAxiosError===!0},fr}var Qi=Ee,$u=ga,hn=Pu,Bu=Aa,Mu=Kr;function Ia(t){var e=new hn(t),r=$u(hn.prototype.request,e);return Qi.extend(r,hn.prototype,e),Qi.extend(r,e),r.create=function(i){return Ia(Bu(t,i))},r}var Pe=Ia(Mu);Pe.Axios=hn;Pe.CanceledError=On();Pe.CancelToken=Iu();Pe.isCancel=Ra();Pe.VERSION=Na().version;Pe.toFormData=ka;Pe.AxiosError=At;Pe.Cancel=Pe.CanceledError;Pe.all=function(e){return Promise.all(e)};Pe.spread=Lu();Pe.isAxiosError=Du();Fr.exports=Pe;Fr.exports.default=Pe;var Fu=Fr.exports,xu=Fu;function Uu(t){return t.toLowerCase()}var ju=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],qu=/[^A-Z0-9]+/gi;function Wr(t,e){e===void 0&&(e={});for(var r=e.splitRegexp,n=r===void 0?ju:r,i=e.stripRegexp,a=i===void 0?qu:i,l=e.transform,u=l===void 0?Uu:l,o=e.delimiter,s=o===void 0?" ":o,c=Zi(Zi(t,n,"$1\0$2"),a,"\0"),f=0,d=c.length;c.charAt(f)==="\0";)f++;for(;c.charAt(d-1)==="\0";)d--;return c.slice(f,d).split("\0").map(u).join(s)}function Zi(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(n,i){return n.replace(i,r)},t)}function La(t,e){var r=t.charAt(0),n=t.substr(1).toLowerCase();return e>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function Hu(t,e){return e===void 0&&(e={}),Wr(t,je({delimiter:"",transform:La},e))}function Ku(t,e){return e===0?t.toLowerCase():La(t,e)}function Vu(t,e){return e===void 0&&(e={}),Hu(t,je({transform:Ku},e))}function Wu(t,e){return e===void 0&&(e={}),Wr(t,je({delimiter:"."},e))}function Gu(t,e){return e===void 0&&(e={}),Wu(t,je({delimiter:"_"},e))}function zu(t){return t.charAt(0).toUpperCase()+t.substr(1)}function Yu(t){return zu(t.toLowerCase())}function Xu(t,e){return e===void 0&&(e={}),Wr(t,je({delimiter:" ",transform:Yu},e))}function Ju(t,e){return e===void 0&&(e={}),Xu(t,je({delimiter:"-"},e))}var Qu=function(t,e){return function(r,n){return t(r,je(je({},e),n))}},Zu=function(t,e){var r=typeof e=="function"?e:function(n){return e.includes(n)};return function(n,i){return r(n,i)?n:t(n,i)}},pn=function(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams},mt=function(t){return typeof FormData<"u"&&t instanceof FormData},Da=function(t){if(t==null)return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype},ec=function(t){return Array.isArray(t)||Da(t)||mt(t)||pn(t)},eo=function(t){var e,r;return t==null?!1:((r=(e=Object.getPrototypeOf(t))===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="AxiosHeaders"},$a={snake:Gu,camel:Vu,header:Ju},Ba=function(t,e,r){var n,i,a,l,u,o;if(!ec(t))return t;if((mt(t)||pn(t))&&(!t.entries||r&&!t.delete)){var s=mt(t)?"FormData":"URLSearchParams",c=mt(t)?"https://github.com/jimmywarting/FormData":"https://github.com/jerrybendy/url-search-params-polyfill";return typeof navigator<"u"&&navigator.product==="ReactNative"?console.warn("Be careful that ".concat(s," cannot be transformed on React Native. If you intentionally implemented, ignore this kind of warning: https://facebook.github.io/react-native/docs/debugging.html")):(t.entries||console.warn("You must use polyfill of ".concat(s,".prototype.entries() on Internet Explorer or Safari: ").concat(c)),r&&!t.delete&&console.warn("You must use polyfill of ".concat(s,".prototype.delete() on Internet Explorer or Safari: ").concat(c))),t}var f=Object.getPrototypeOf(t),d=r?t:f?new f.constructor:Object.create(null),h;if(mt(t)||pn(t)){if(h=t.entries(),r){h=un([],rt(h),!1);try{for(var m=Qt(h),v=m.next();!v.done;v=m.next()){var _=rt(v.value,1),T=_[0];t.delete(T)}}catch(O){n={error:O}}finally{try{v&&!v.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}}}else if(h=Object.entries(t),r&&!Array.isArray(t))try{for(var k=Qt(h),g=k.next();!g.done;g=k.next()){var C=rt(g.value,1),T=C[0];delete t[T]}}catch(O){a={error:O}}finally{try{g&&!g.done&&(l=k.return)&&l.call(k)}finally{if(a)throw a.error}}try{for(var y=Qt(h),I=y.next();!I.done;I=y.next()){var A=rt(I.value,2),T=A[0],P=A[1];mt(d)||pn(d)?d.append(e(T),P):T!=="__proto__"&&(d[e(typeof T=="string"?T:"".concat(T))]=Ba(P,e,r))}}catch(O){u={error:O}}finally{try{I&&!I.done&&(o=y.return)&&o.call(y)}finally{if(u)throw u.error}}return d},tc=function(t,e,r){return e=Qu(e,je({stripRegexp:/[^A-Z0-9[\]]+/gi},r==null?void 0:r.caseOptions)),r!=null&&r.preservedKeys&&(e=Zu(e,r.preservedKeys)),Ba(t,e,(r==null?void 0:r.overwrite)||!1)},nc=function(t){return function(e,r){return tc(e,t,r)}},rc=function(t,e){return nc((e==null?void 0:e[t])||$a[t])},Gr=function(t){var e,r,n=Object.keys($a),i={};try{for(var a=Qt(n),l=a.next();!l.done;l=a.next()){var u=l.value;i[u]=rc(u,t)}}catch(o){e={error:o}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},ic=function(t){var e=Gr(t==null?void 0:t.caseFunctions).snake;return function(r){return r.params&&(r.params=e(r.params,t)),r}},oc=function(t){var e=Gr(t==null?void 0:t.caseFunctions),r=e.snake,n=e.header;return function(i,a){return Ma(a,n,t,["common","delete","get","head","post","put","patch"]),r(i,t)}},ac=function(t){var e=Gr(t==null?void 0:t.caseFunctions).camel;return function(r,n){return Ma(n,e,t),e(r,t)}},Ma=function(t,e,r,n){var i,a,l,u;if(!(r!=null&&r.ignoreHeaders||!Da(t)&&!eo(t)))try{for(var o=Qt(Object.entries(t)),s=o.next();!s.done;s=o.next()){var c=rt(s.value,2),f=c[0],d=c[1];e(d,je({overwrite:!0},r)),!(n||[]).includes(f)&&(eo(t)?(t.delete(f),t.set(Object.keys(e((l={},l[f]=null,l),r))[0],d,!0)):(delete t[f],t[Object.keys(e((u={},u[f]=null,u),r))[0]]=d))}}catch(h){i={error:h}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}},sc=function(t,e){var r,n,i;return t.defaults.transformRequest=un([((r=e==null?void 0:e.caseMiddleware)===null||r===void 0?void 0:r.requestTransformer)||oc(e)],rt(Array.isArray(t.defaults.transformRequest)?t.defaults.transformRequest:t.defaults.transformRequest!==void 0?[t.defaults.transformRequest]:[]),!1),t.defaults.transformResponse=un(un([],rt(Array.isArray(t.defaults.transformResponse)?t.defaults.transformResponse:t.defaults.transformResponse!==void 0?[t.defaults.transformResponse]:[]),!1),[((n=e==null?void 0:e.caseMiddleware)===null||n===void 0?void 0:n.responseTransformer)||ac(e)],!1),t.interceptors.request.use(((i=e==null?void 0:e.caseMiddleware)===null||i===void 0?void 0:i.requestInterceptor)||ic(e)),t};const lc=Object.freeze(Object.defineProperty({__proto__:null,default:sc},Symbol.toStringTag,{value:"Module"})),uc=ra(lc);var rn={};function cc(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function Fa(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var fc=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dc=function(t){fc(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),cc(a,i.prototype),Fa(a),a}return e}(Error),hc=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};function pc(t,e){e===void 0&&(e=Error);function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!(this instanceof r))return new(r.bind.apply(r,hc([void 0],n,!1)));e.apply(this,n),Object.defineProperty(this,"name",{value:t.name||e.name,enumerable:!1,configurable:!0}),t.apply(this,n),Fa(this,r)}return Object.defineProperties(r,{prototype:{value:Object.create(e.prototype,{constructor:{value:r,writable:!0,configurable:!0}})}})}const mc=Object.freeze(Object.defineProperty({__proto__:null,CustomError:dc,customErrorFactory:pc},Symbol.toStringTag,{value:"Module"})),vc=ra(mc);var gc=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(rn,"__esModule",{value:!0});rn.TodoistRequestError=void 0;var bc=vc,yc=[401,403],_c=function(t){gc(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.message=r,a.httpStatusCode=n,a.responseData=i,a.isAuthenticationError=function(){return a.httpStatusCode?yc.includes(a.httpStatusCode):!1},Object.defineProperty(a,"name",{value:"TodoistRequestError"}),a}return e}(bc.CustomError);rn.TodoistRequestError=_c;var zr={},Ln={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.default=wc;let ln;const Ec=new Uint8Array(16);function wc(){if(!ln&&(ln=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ln))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ln(Ec)}var et={},ct={},$n={};Object.defineProperty($n,"__esModule",{value:!0});$n.default=void 0;var Cc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;$n.default=Cc;Object.defineProperty(ct,"__esModule",{value:!0});ct.default=void 0;var Tc=kc($n);function kc(t){return t&&t.__esModule?t:{default:t}}function Sc(t){return typeof t=="string"&&Tc.default.test(t)}var Rc=Sc;ct.default=Rc;Object.defineProperty(et,"__esModule",{value:!0});et.default=void 0;et.unsafeStringify=xa;var Ac=Nc(ct);function Nc(t){return t&&t.__esModule?t:{default:t}}const ye=[];for(let t=0;t<256;++t)ye.push((t+256).toString(16).slice(1));function xa(t,e=0){return(ye[t[e+0]]+ye[t[e+1]]+ye[t[e+2]]+ye[t[e+3]]+"-"+ye[t[e+4]]+ye[t[e+5]]+"-"+ye[t[e+6]]+ye[t[e+7]]+"-"+ye[t[e+8]]+ye[t[e+9]]+"-"+ye[t[e+10]]+ye[t[e+11]]+ye[t[e+12]]+ye[t[e+13]]+ye[t[e+14]]+ye[t[e+15]]).toLowerCase()}function Oc(t,e=0){const r=xa(t,e);if(!(0,Ac.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Pc=Oc;et.default=Pc;Object.defineProperty(Ln,"__esModule",{value:!0});Ln.default=void 0;var Ic=Dc(Dn),Lc=et;function Dc(t){return t&&t.__esModule?t:{default:t}}let to,dr,hr=0,pr=0;function $c(t,e,r){let n=e&&r||0;const i=e||new Array(16);t=t||{};let a=t.node||to,l=t.clockseq!==void 0?t.clockseq:dr;if(a==null||l==null){const d=t.random||(t.rng||Ic.default)();a==null&&(a=to=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),l==null&&(l=dr=(d[6]<<8|d[7])&16383)}let u=t.msecs!==void 0?t.msecs:Date.now(),o=t.nsecs!==void 0?t.nsecs:pr+1;const s=u-hr+(o-pr)/1e4;if(s<0&&t.clockseq===void 0&&(l=l+1&16383),(s<0||u>hr)&&t.nsecs===void 0&&(o=0),o>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");hr=u,pr=o,dr=l,u+=122192928e5;const c=((u&268435455)*1e4+o)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=c&255;const f=u/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=l>>>8|128,i[n++]=l&255;for(let d=0;d<6;++d)i[n+d]=a[d];return e||(0,Lc.unsafeStringify)(i)}var Bc=$c;Ln.default=Bc;var Bn={},Xe={},on={};Object.defineProperty(on,"__esModule",{value:!0});on.default=void 0;var Mc=Fc(ct);function Fc(t){return t&&t.__esModule?t:{default:t}}function xc(t){if(!(0,Mc.default)(t))throw TypeError("Invalid UUID");let e;const r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Uc=xc;on.default=Uc;Object.defineProperty(Xe,"__esModule",{value:!0});Xe.URL=Xe.DNS=void 0;Xe.default=Vc;var jc=et,qc=Hc(on);function Hc(t){return t&&t.__esModule?t:{default:t}}function Kc(t){t=unescape(encodeURIComponent(t));const e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}const Ua="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Xe.DNS=Ua;const ja="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Xe.URL=ja;function Vc(t,e,r){function n(i,a,l,u){var o;if(typeof i=="string"&&(i=Kc(i)),typeof a=="string"&&(a=(0,qc.default)(a)),((o=a)===null||o===void 0?void 0:o.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+i.length);if(s.set(a),s.set(i,a.length),s=r(s),s[6]=s[6]&15|e,s[8]=s[8]&63|128,l){u=u||0;for(let c=0;c<16;++c)l[u+c]=s[c];return l}return(0,jc.unsafeStringify)(s)}try{n.name=t}catch{}return n.DNS=Ua,n.URL=ja,n}var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.default=void 0;function Wc(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Gc(zc(Yc(t),t.length*8))}function Gc(t){const e=[],r=t.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){const a=t[i>>5]>>>i%32&255,l=parseInt(n.charAt(a>>>4&15)+n.charAt(a&15),16);e.push(l)}return e}function qa(t){return(t+64>>>9<<4)+14+1}function zc(t,e){t[e>>5]|=128<<e%32,t[qa(e)-1]=e;let r=1732584193,n=-271733879,i=-1732584194,a=271733878;for(let l=0;l<t.length;l+=16){const u=r,o=n,s=i,c=a;r=we(r,n,i,a,t[l],7,-680876936),a=we(a,r,n,i,t[l+1],12,-389564586),i=we(i,a,r,n,t[l+2],17,606105819),n=we(n,i,a,r,t[l+3],22,-1044525330),r=we(r,n,i,a,t[l+4],7,-176418897),a=we(a,r,n,i,t[l+5],12,1200080426),i=we(i,a,r,n,t[l+6],17,-1473231341),n=we(n,i,a,r,t[l+7],22,-45705983),r=we(r,n,i,a,t[l+8],7,1770035416),a=we(a,r,n,i,t[l+9],12,-1958414417),i=we(i,a,r,n,t[l+10],17,-42063),n=we(n,i,a,r,t[l+11],22,-1990404162),r=we(r,n,i,a,t[l+12],7,1804603682),a=we(a,r,n,i,t[l+13],12,-40341101),i=we(i,a,r,n,t[l+14],17,-1502002290),n=we(n,i,a,r,t[l+15],22,1236535329),r=Ce(r,n,i,a,t[l+1],5,-165796510),a=Ce(a,r,n,i,t[l+6],9,-1069501632),i=Ce(i,a,r,n,t[l+11],14,643717713),n=Ce(n,i,a,r,t[l],20,-373897302),r=Ce(r,n,i,a,t[l+5],5,-701558691),a=Ce(a,r,n,i,t[l+10],9,38016083),i=Ce(i,a,r,n,t[l+15],14,-660478335),n=Ce(n,i,a,r,t[l+4],20,-405537848),r=Ce(r,n,i,a,t[l+9],5,568446438),a=Ce(a,r,n,i,t[l+14],9,-1019803690),i=Ce(i,a,r,n,t[l+3],14,-187363961),n=Ce(n,i,a,r,t[l+8],20,1163531501),r=Ce(r,n,i,a,t[l+13],5,-1444681467),a=Ce(a,r,n,i,t[l+2],9,-51403784),i=Ce(i,a,r,n,t[l+7],14,1735328473),n=Ce(n,i,a,r,t[l+12],20,-1926607734),r=Te(r,n,i,a,t[l+5],4,-378558),a=Te(a,r,n,i,t[l+8],11,-2022574463),i=Te(i,a,r,n,t[l+11],16,1839030562),n=Te(n,i,a,r,t[l+14],23,-35309556),r=Te(r,n,i,a,t[l+1],4,-1530992060),a=Te(a,r,n,i,t[l+4],11,1272893353),i=Te(i,a,r,n,t[l+7],16,-155497632),n=Te(n,i,a,r,t[l+10],23,-1094730640),r=Te(r,n,i,a,t[l+13],4,681279174),a=Te(a,r,n,i,t[l],11,-358537222),i=Te(i,a,r,n,t[l+3],16,-722521979),n=Te(n,i,a,r,t[l+6],23,76029189),r=Te(r,n,i,a,t[l+9],4,-640364487),a=Te(a,r,n,i,t[l+12],11,-421815835),i=Te(i,a,r,n,t[l+15],16,530742520),n=Te(n,i,a,r,t[l+2],23,-995338651),r=ke(r,n,i,a,t[l],6,-198630844),a=ke(a,r,n,i,t[l+7],10,1126891415),i=ke(i,a,r,n,t[l+14],15,-1416354905),n=ke(n,i,a,r,t[l+5],21,-57434055),r=ke(r,n,i,a,t[l+12],6,1700485571),a=ke(a,r,n,i,t[l+3],10,-1894986606),i=ke(i,a,r,n,t[l+10],15,-1051523),n=ke(n,i,a,r,t[l+1],21,-2054922799),r=ke(r,n,i,a,t[l+8],6,1873313359),a=ke(a,r,n,i,t[l+15],10,-30611744),i=ke(i,a,r,n,t[l+6],15,-1560198380),n=ke(n,i,a,r,t[l+13],21,1309151649),r=ke(r,n,i,a,t[l+4],6,-145523070),a=ke(a,r,n,i,t[l+11],10,-1120210379),i=ke(i,a,r,n,t[l+2],15,718787259),n=ke(n,i,a,r,t[l+9],21,-343485551),r=ze(r,u),n=ze(n,o),i=ze(i,s),a=ze(a,c)}return[r,n,i,a]}function Yc(t){if(t.length===0)return[];const e=t.length*8,r=new Uint32Array(qa(e));for(let n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function ze(t,e){const r=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(r>>16)<<16|r&65535}function Xc(t,e){return t<<e|t>>>32-e}function Fn(t,e,r,n,i,a){return ze(Xc(ze(ze(e,t),ze(n,a)),i),r)}function we(t,e,r,n,i,a,l){return Fn(e&r|~e&n,t,e,i,a,l)}function Ce(t,e,r,n,i,a,l){return Fn(e&n|r&~n,t,e,i,a,l)}function Te(t,e,r,n,i,a,l){return Fn(e^r^n,t,e,i,a,l)}function ke(t,e,r,n,i,a,l){return Fn(r^(e|~n),t,e,i,a,l)}var Jc=Wc;Mn.default=Jc;Object.defineProperty(Bn,"__esModule",{value:!0});Bn.default=void 0;var Qc=Ha(Xe),Zc=Ha(Mn);function Ha(t){return t&&t.__esModule?t:{default:t}}const ef=(0,Qc.default)("v3",48,Zc.default);var tf=ef;Bn.default=tf;var xn={},Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.default=void 0;const nf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var rf={randomUUID:nf};Un.default=rf;Object.defineProperty(xn,"__esModule",{value:!0});xn.default=void 0;var no=Ka(Un),of=Ka(Dn),af=et;function Ka(t){return t&&t.__esModule?t:{default:t}}function sf(t,e,r){if(no.default.randomUUID&&!e&&!t)return no.default.randomUUID();t=t||{};const n=t.random||(t.rng||of.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,af.unsafeStringify)(n)}var lf=sf;xn.default=lf;var jn={},qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.default=void 0;function uf(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function mr(t,e){return t<<e|t>>>32-e}function cf(t){const e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const l=unescape(encodeURIComponent(t));t=[];for(let u=0;u<l.length;++u)t.push(l.charCodeAt(u))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const n=t.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let l=0;l<i;++l){const u=new Uint32Array(16);for(let o=0;o<16;++o)u[o]=t[l*64+o*4]<<24|t[l*64+o*4+1]<<16|t[l*64+o*4+2]<<8|t[l*64+o*4+3];a[l]=u}a[i-1][14]=(t.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(t.length-1)*8&4294967295;for(let l=0;l<i;++l){const u=new Uint32Array(80);for(let h=0;h<16;++h)u[h]=a[l][h];for(let h=16;h<80;++h)u[h]=mr(u[h-3]^u[h-8]^u[h-14]^u[h-16],1);let o=r[0],s=r[1],c=r[2],f=r[3],d=r[4];for(let h=0;h<80;++h){const m=Math.floor(h/20),v=mr(o,5)+uf(m,s,c,f)+d+e[m]+u[h]>>>0;d=f,f=c,c=mr(s,30)>>>0,s=o,o=v}r[0]=r[0]+o>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+c>>>0,r[3]=r[3]+f>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var ff=cf;qn.default=ff;Object.defineProperty(jn,"__esModule",{value:!0});jn.default=void 0;var df=Va(Xe),hf=Va(qn);function Va(t){return t&&t.__esModule?t:{default:t}}const pf=(0,df.default)("v5",80,hf.default);var mf=pf;jn.default=mf;var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.default=void 0;var vf="00000000-0000-0000-0000-000000000000";Hn.default=vf;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.default=void 0;var gf=bf(ct);function bf(t){return t&&t.__esModule?t:{default:t}}function yf(t){if(!(0,gf.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var _f=yf;Kn.default=_f;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return l.default}});var e=c(Ln),r=c(Bn),n=c(xn),i=c(jn),a=c(Hn),l=c(Kn),u=c(ct),o=c(et),s=c(on);function c(f){return f&&f.__esModule?f:{default:f}}})(zr);var Yr={exports:{}},Fe={},Wa={exports:{}};(function(t){function e(r){return r&&r.__esModule?r:{default:r}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Wa);var Ef=Wa.exports,vr={exports:{}},gr={exports:{}},ro;function Vn(){return ro||(ro=1,function(t){function e(r){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(gr)),gr.exports}var io;function wf(){return io||(io=1,function(t){var e=Vn().default;function r(){t.exports=r=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var n={},i=Object.prototype,a=i.hasOwnProperty,l=Object.defineProperty||function(b,E,S){b[E]=S.value},u=typeof Symbol=="function"?Symbol:{},o=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",c=u.toStringTag||"@@toStringTag";function f(b,E,S){return Object.defineProperty(b,E,{value:S,enumerable:!0,configurable:!0,writable:!0}),b[E]}try{f({},"")}catch{f=function(S,D,j){return S[D]=j}}function d(b,E,S,D){var j=E&&E.prototype instanceof v?E:v,F=Object.create(j.prototype),L=new J(D||[]);return l(F,"_invoke",{value:P(b,S,L)}),F}function h(b,E,S){try{return{type:"normal",arg:b.call(E,S)}}catch(D){return{type:"throw",arg:D}}}n.wrap=d;var m={};function v(){}function _(){}function T(){}var k={};f(k,o,function(){return this});var g=Object.getPrototypeOf,C=g&&g(g(p([])));C&&C!==i&&a.call(C,o)&&(k=C);var y=T.prototype=v.prototype=Object.create(k);function I(b){["next","throw","return"].forEach(function(E){f(b,E,function(S){return this._invoke(E,S)})})}function A(b,E){function S(j,F,L,$){var W=h(b[j],b,F);if(W.type!=="throw"){var Q=W.arg,se=Q.value;return se&&e(se)=="object"&&a.call(se,"__await")?E.resolve(se.__await).then(function(be){S("next",be,L,$)},function(be){S("throw",be,L,$)}):E.resolve(se).then(function(be){Q.value=be,L(Q)},function(be){return S("throw",be,L,$)})}$(W.arg)}var D;l(this,"_invoke",{value:function(F,L){function $(){return new E(function(W,Q){S(F,L,W,Q)})}return D=D?D.then($,$):$()}})}function P(b,E,S){var D="suspendedStart";return function(j,F){if(D==="executing")throw new Error("Generator is already running");if(D==="completed"){if(j==="throw")throw F;return w()}for(S.method=j,S.arg=F;;){var L=S.delegate;if(L){var $=O(L,S);if($){if($===m)continue;return $}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(D==="suspendedStart")throw D="completed",S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);D="executing";var W=h(b,E,S);if(W.type==="normal"){if(D=S.done?"completed":"suspendedYield",W.arg===m)continue;return{value:W.arg,done:S.done}}W.type==="throw"&&(D="completed",S.method="throw",S.arg=W.arg)}}}function O(b,E){var S=E.method,D=b.iterator[S];if(D===void 0)return E.delegate=null,S==="throw"&&b.iterator.return&&(E.method="return",E.arg=void 0,O(b,E),E.method==="throw")||S!=="return"&&(E.method="throw",E.arg=new TypeError("The iterator does not provide a '"+S+"' method")),m;var j=h(D,b.iterator,E.arg);if(j.type==="throw")return E.method="throw",E.arg=j.arg,E.delegate=null,m;var F=j.arg;return F?F.done?(E[b.resultName]=F.value,E.next=b.nextLoc,E.method!=="return"&&(E.method="next",E.arg=void 0),E.delegate=null,m):F:(E.method="throw",E.arg=new TypeError("iterator result is not an object"),E.delegate=null,m)}function V(b){var E={tryLoc:b[0]};1 in b&&(E.catchLoc=b[1]),2 in b&&(E.finallyLoc=b[2],E.afterLoc=b[3]),this.tryEntries.push(E)}function z(b){var E=b.completion||{};E.type="normal",delete E.arg,b.completion=E}function J(b){this.tryEntries=[{tryLoc:"root"}],b.forEach(V,this),this.reset(!0)}function p(b){if(b){var E=b[o];if(E)return E.call(b);if(typeof b.next=="function")return b;if(!isNaN(b.length)){var S=-1,D=function j(){for(;++S<b.length;)if(a.call(b,S))return j.value=b[S],j.done=!1,j;return j.value=void 0,j.done=!0,j};return D.next=D}}return{next:w}}function w(){return{value:void 0,done:!0}}return _.prototype=T,l(y,"constructor",{value:T,configurable:!0}),l(T,"constructor",{value:_,configurable:!0}),_.displayName=f(T,c,"GeneratorFunction"),n.isGeneratorFunction=function(b){var E=typeof b=="function"&&b.constructor;return!!E&&(E===_||(E.displayName||E.name)==="GeneratorFunction")},n.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,T):(b.__proto__=T,f(b,c,"GeneratorFunction")),b.prototype=Object.create(y),b},n.awrap=function(b){return{__await:b}},I(A.prototype),f(A.prototype,s,function(){return this}),n.AsyncIterator=A,n.async=function(b,E,S,D,j){j===void 0&&(j=Promise);var F=new A(d(b,E,S,D),j);return n.isGeneratorFunction(E)?F:F.next().then(function(L){return L.done?L.value:F.next()})},I(y),f(y,c,"Generator"),f(y,o,function(){return this}),f(y,"toString",function(){return"[object Generator]"}),n.keys=function(b){var E=Object(b),S=[];for(var D in E)S.push(D);return S.reverse(),function j(){for(;S.length;){var F=S.pop();if(F in E)return j.value=F,j.done=!1,j}return j.done=!0,j}},n.values=p,J.prototype={constructor:J,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!E)for(var S in this)S.charAt(0)==="t"&&a.call(this,S)&&!isNaN(+S.slice(1))&&(this[S]=void 0)},stop:function(){this.done=!0;var E=this.tryEntries[0].completion;if(E.type==="throw")throw E.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var S=this;function D(Q,se){return L.type="throw",L.arg=E,S.next=Q,se&&(S.method="next",S.arg=void 0),!!se}for(var j=this.tryEntries.length-1;j>=0;--j){var F=this.tryEntries[j],L=F.completion;if(F.tryLoc==="root")return D("end");if(F.tryLoc<=this.prev){var $=a.call(F,"catchLoc"),W=a.call(F,"finallyLoc");if($&&W){if(this.prev<F.catchLoc)return D(F.catchLoc,!0);if(this.prev<F.finallyLoc)return D(F.finallyLoc)}else if($){if(this.prev<F.catchLoc)return D(F.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<F.finallyLoc)return D(F.finallyLoc)}}}},abrupt:function(E,S){for(var D=this.tryEntries.length-1;D>=0;--D){var j=this.tryEntries[D];if(j.tryLoc<=this.prev&&a.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var F=j;break}}F&&(E==="break"||E==="continue")&&F.tryLoc<=S&&S<=F.finallyLoc&&(F=null);var L=F?F.completion:{};return L.type=E,L.arg=S,F?(this.method="next",this.next=F.finallyLoc,m):this.complete(L)},complete:function(E,S){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&S&&(this.next=S),m},finish:function(E){for(var S=this.tryEntries.length-1;S>=0;--S){var D=this.tryEntries[S];if(D.finallyLoc===E)return this.complete(D.completion,D.afterLoc),z(D),m}},catch:function(E){for(var S=this.tryEntries.length-1;S>=0;--S){var D=this.tryEntries[S];if(D.tryLoc===E){var j=D.completion;if(j.type==="throw"){var F=j.arg;z(D)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(E,S,D){return this.delegate={iterator:p(E),resultName:S,nextLoc:D},this.method==="next"&&(this.arg=void 0),m}},n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(vr)),vr.exports}var br,oo;function Cf(){if(oo)return br;oo=1;var t=wf()();br=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}return br}var yr={exports:{}},ao;function Tf(){return ao||(ao=1,function(t){function e(n,i,a,l,u,o,s){try{var c=n[o](s),f=c.value}catch(d){a(d);return}c.done?i(f):Promise.resolve(f).then(l,u)}function r(n){return function(){var i=this,a=arguments;return new Promise(function(l,u){var o=n.apply(i,a);function s(f){e(o,l,u,s,c,"next",f)}function c(f){e(o,l,u,s,c,"throw",f)}s(void 0)})}}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(yr)),yr.exports}var _r={exports:{}},Er={exports:{}},wr={exports:{}},so;function kf(){return so||(so=1,function(t){var e=Vn().default;function r(n,i){if(e(n)!=="object"||n===null)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var l=a.call(n,i||"default");if(e(l)!=="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(wr)),wr.exports}var lo;function Sf(){return lo||(lo=1,function(t){var e=Vn().default,r=kf();function n(i){var a=r(i,"string");return e(a)==="symbol"?a:String(a)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(Er)),Er.exports}var uo;function Rf(){return uo||(uo=1,function(t){var e=Sf();function r(n,i,a){return i=e(i),i in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(_r)),_r.exports}var Cr,co;function Af(){if(co)return Cr;co=1;const t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);return Cr=e=>!t.has(e&&e.code),Cr}var an=Ef;Object.defineProperty(Fe,"__esModule",{value:!0});Fe.isNetworkError=Xr;Fe.isRetryableError=Wn;Fe.isSafeRequestError=Ya;Fe.isIdempotentRequestError=Jr;Fe.isNetworkOrIdempotentRequestError=Qr;Fe.exponentialDelay=Xa;Fe.default=ft;Fe.namespace=void 0;var vn=an(Cf()),Nf=an(Vn()),Ga=an(Tf()),Of=an(Rf()),Pf=an(Af());function fo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ho(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fo(Object(r),!0).forEach(function(n){(0,Of.default)(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fo(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var gn="axios-retry";Fe.namespace=gn;function Xr(t){return!t.response&&!!t.code&&t.code!=="ECONNABORTED"&&(0,Pf.default)(t)}var za=["get","head","options"],If=za.concat(["put","delete"]);function Wn(t){return t.code!=="ECONNABORTED"&&(!t.response||t.response.status>=500&&t.response.status<=599)}function Ya(t){return t.config?Wn(t)&&za.indexOf(t.config.method)!==-1:!1}function Jr(t){return t.config?Wn(t)&&If.indexOf(t.config.method)!==-1:!1}function Qr(t){return Xr(t)||Jr(t)}function Lf(){return 0}function Xa(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100,r=Math.pow(2,t)*e,n=r*.2*Math.random();return r+n}function po(t){var e=t[gn]||{};return e.retryCount=e.retryCount||0,t[gn]=e,e}function Df(t,e){return ho(ho({},e),t[gn])}function $f(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}function Bf(t,e,r,n){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,Ga.default)(vn.default.mark(function t(e,r,n,i){var a,l;return vn.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a=n.retryCount<e&&r(i),(0,Nf.default)(a)!=="object"){o.next=12;break}return o.prev=2,o.next=5,a;case 5:return l=o.sent,o.abrupt("return",l!==!1);case 9:return o.prev=9,o.t0=o.catch(2),o.abrupt("return",!1);case 12:return o.abrupt("return",a);case 13:case"end":return o.stop()}},t,null,[[2,9]])})),Nr.apply(this,arguments)}function ft(t,e){var r=t.interceptors.request.use(function(i){var a=po(i);return a.lastRequestTime=Date.now(),i}),n=t.interceptors.response.use(null,function(){var i=(0,Ga.default)(vn.default.mark(function a(l){var u,o,s,c,f,d,h,m,v,_,T,k,g,C,y,I;return vn.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(u=l.config,u){P.next=3;break}return P.abrupt("return",Promise.reject(l));case 3:return o=Df(u,e),s=o.retries,c=s===void 0?3:s,f=o.retryCondition,d=f===void 0?Qr:f,h=o.retryDelay,m=h===void 0?Lf:h,v=o.shouldResetTimeout,_=v===void 0?!1:v,T=o.onRetry,k=T===void 0?function(){}:T,g=po(u),P.next=7,Bf(c,d,g,l);case 7:if(!P.sent){P.next=20;break}if(g.retryCount+=1,C=m(g.retryCount,l),$f(t,u),!(!_&&u.timeout&&g.lastRequestTime)){P.next=17;break}if(y=Date.now()-g.lastRequestTime,I=u.timeout-y-C,!(I<=0)){P.next=16;break}return P.abrupt("return",Promise.reject(l));case 16:u.timeout=I;case 17:return u.transformRequest=[function(O){return O}],k(g.retryCount,l,u),P.abrupt("return",new Promise(function(O){return setTimeout(function(){return O(t(u))},C)}));case 20:return P.abrupt("return",Promise.reject(l));case 21:case"end":return P.stop()}},a)}));return function(a){return i.apply(this,arguments)}}());return{requestInterceptorId:r,responseInterceptorId:n}}ft.isNetworkError=Xr;ft.isSafeRequestError=Ya;ft.isIdempotentRequestError=Jr;ft.isNetworkOrIdempotentRequestError=Qr;ft.exponentialDelay=Xa;ft.isRetryableError=Wn;const Ja=Fe.default;Yr.exports=Ja;Yr.exports.default=Ja;var Mf=Yr.exports,Zt=x&&x.__assign||function(){return Zt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zt.apply(this,arguments)},Ff=x&&x.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(c){try{s(n.next(c))}catch(f){l(f)}}function o(c){try{s(n.throw(c))}catch(f){l(f)}}function s(c){c.done?a(c.value):i(c.value).then(u,o)}s((n=n.apply(t,e||[])).next())})},xf=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(s){return function(c){return o([s,c])}}function o(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(s[0]===6&&r.label<a[1]){r.label=a[1],a=s;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(s);break}a[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],i=0}finally{n=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Zr=x&&x.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.request=Ue.isSuccess=Ue.paramsSerializer=void 0;var Uf=Zr(xu),jf=Zr(uc),qf=rn,Hf=zr,Kf=Zr(Mf);function Qa(t){var e=new URLSearchParams;return Object.keys(t).forEach(function(r){var n=t[r];Array.isArray(n)?e.append(r,n.join(",")):e.append(r,String(n))}),e.toString()}Ue.paramsSerializer=Qa;var Vf={"Content-Type":"application/json"};function Wf(t){return"Bearer ".concat(t)}function Gf(t){return!t.response&&t.code!=="ECONNABORTED"}function zf(t){return t===1?0:500}function Or(t){return!!(t!=null&&t.isAxiosError)}function Yf(t,e){var r=new qf.TodoistRequestError(t.message);return r.stack=Or(t)&&e?e.stack:t.stack,Or(t)&&t.response&&(r.httpStatusCode=t.response.status,r.responseData=t.response.data),r}function Xf(t,e,r){var n=e?{Authorization:Wf(e)}:void 0,i=r?{"X-Request-Id":r}:void 0,a=Zt(Zt(Zt({},Vf),n),i);return{baseURL:t,headers:a}}function Jf(t,e,r){var n=Xf(t,e,r),i=(0,jf.default)(Uf.default.create(n));return(0,Kf.default)(i,{retries:3,retryCondition:Gf,retryDelay:zf}),i}function Qf(t){return t.status>=200&&t.status<300}Ue.isSuccess=Qf;function Zf(t,e,r,n,i,a){return Ff(this,void 0,void 0,function(){var l,u,o,s;return xf(this,function(c){switch(c.label){case 0:l=new Error,c.label=1;case 1:switch(c.trys.push([1,9,,10]),t==="POST"&&!a&&(a=(0,Hf.v4)()),u=Jf(e,n,a),o=t,o){case"GET":return[3,2];case"POST":return[3,4];case"DELETE":return[3,6]}return[3,8];case 2:return[4,u.get(r,{params:i,paramsSerializer:Qa})];case 3:return[2,c.sent()];case 4:return[4,u.post(r,i)];case 5:return[2,c.sent()];case 6:return[4,u.delete(r)];case 7:return[2,c.sent()];case 8:return[3,10];case 9:throw s=c.sent(),!Or(s)&&!(s instanceof Error)?new Error("An unknown error occurred during the request"):Yf(s,l);case 10:return[2]}})})}Ue.request=Zf;var Gn={},nt=x&&x.__assign||function(){return nt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nt.apply(this,arguments)};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.getTaskFromQuickAddResponse=void 0;var ed="https://todoist.com/showTask";function td(t){return"".concat(ed,"?id=").concat(t.id)}function nd(t){var e,r=t.due?nt(nt({isRecurring:t.due.isRecurring,string:t.due.string,date:t.due.date},t.due.timezone!==null&&{datetime:t.due.date}),t.due.timezone!==null&&{timezone:t.due.timezone}):void 0,n=nt(nt(nt({id:t.id,order:t.childOrder,content:t.content,description:t.description,projectId:t.projectId,sectionId:t.sectionId?t.sectionId:void 0,isCompleted:t.checked,labels:t.labels,priority:t.priority,commentCount:0,createdAt:t.addedAt,url:td(t),creatorId:(e=t.addedByUid)!==null&&e!==void 0?e:""},r!==void 0&&{due:r}),t.parentId!==null&&{parentId:t.parentId}),t.responsibleUid!==null&&{assigneeId:t.responsibleUid});return n}Gn.getTaskFromQuickAddResponse=nd;var ei={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ENDPOINT_REVOKE_TOKEN=t.ENDPOINT_GET_TOKEN=t.ENDPOINT_AUTHORIZATION=t.ENDPOINT_SYNC_QUICK_ADD=t.ENDPOINT_REST_PROJECT_COLLABORATORS=t.ENDPOINT_REST_TASK_REOPEN=t.ENDPOINT_REST_TASK_CLOSE=t.ENDPOINT_REST_COMMENTS=t.ENDPOINT_REST_LABELS_SHARED_REMOVE=t.ENDPOINT_REST_LABELS_SHARED_RENAME=t.ENDPOINT_REST_LABELS_SHARED=t.ENDPOINT_REST_LABELS=t.ENDPOINT_REST_SECTIONS=t.ENDPOINT_REST_PROJECTS=t.ENDPOINT_REST_TASKS=t.getAuthBaseUri=t.getSyncBaseUri=t.getRestBaseUri=void 0;var e="https://api.todoist.com",r="/rest/v2/",n="/sync/v9/",i="https://todoist.com",a="/oauth/";function l(s){return s===void 0&&(s=e),new URL(r,s).toString()}t.getRestBaseUri=l;function u(s){return s===void 0&&(s=e),new URL(n,s).toString()}t.getSyncBaseUri=u;function o(s){return s===void 0&&(s=i),new URL(a,s).toString()}t.getAuthBaseUri=o,t.ENDPOINT_REST_TASKS="tasks",t.ENDPOINT_REST_PROJECTS="projects",t.ENDPOINT_REST_SECTIONS="sections",t.ENDPOINT_REST_LABELS="labels",t.ENDPOINT_REST_LABELS_SHARED=t.ENDPOINT_REST_LABELS+"/shared",t.ENDPOINT_REST_LABELS_SHARED_RENAME=t.ENDPOINT_REST_LABELS_SHARED+"/rename",t.ENDPOINT_REST_LABELS_SHARED_REMOVE=t.ENDPOINT_REST_LABELS_SHARED+"/remove",t.ENDPOINT_REST_COMMENTS="comments",t.ENDPOINT_REST_TASK_CLOSE="close",t.ENDPOINT_REST_TASK_REOPEN="reopen",t.ENDPOINT_REST_PROJECT_COLLABORATORS="collaborators",t.ENDPOINT_SYNC_QUICK_ADD="quick/add",t.ENDPOINT_AUTHORIZATION="authorize",t.ENDPOINT_GET_TOKEN="access_token",t.ENDPOINT_REVOKE_TOKEN="access_tokens/revoke"})(ei);var le={},zn={},Za={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.User=t.Comment=t.Attachment=t.Label=t.Section=t.Project=t.Task=t.DueDate=t.Int=void 0;var e=Mr();t.Int=e.Number.withConstraint(function(r){return Number.isInteger(r)||"".concat(r," is not a valid entity id. Should be a string")}),t.DueDate=(0,e.Record)({isRecurring:e.Boolean,string:e.String,date:e.String}).And((0,e.Partial)({datetime:e.String.Or(e.Null),timezone:e.String.Or(e.Null)})),t.Task=(0,e.Record)({id:e.String,order:t.Int,content:e.String,description:e.String,projectId:e.String,isCompleted:e.Boolean,labels:(0,e.Array)(e.String),priority:t.Int,commentCount:t.Int,createdAt:e.String,url:e.String,creatorId:e.String}).And((0,e.Partial)({due:t.DueDate.Or(e.Null),assigneeId:e.String.Or(e.Null),assignerId:e.String.Or(e.Null),parentId:e.String.Or(e.Null),sectionId:e.String.Or(e.Null)})),t.Project=(0,e.Record)({id:e.String,name:e.String,color:e.String,commentCount:t.Int,isShared:e.Boolean,isFavorite:e.Boolean,url:e.String,isInboxProject:e.Boolean,isTeamInbox:e.Boolean,order:t.Int,viewStyle:e.String}).And((0,e.Partial)({parentId:e.String.Or(e.Null)})),t.Section=(0,e.Record)({id:e.String,order:t.Int,name:e.String,projectId:e.String}),t.Label=(0,e.Record)({id:e.String,order:t.Int,name:e.String,color:e.String,isFavorite:e.Boolean}),t.Attachment=(0,e.Record)({resourceType:e.String}).And((0,e.Partial)({fileName:e.String.Or(e.Null),fileSize:t.Int.Or(e.Null),fileType:e.String.Or(e.Null),fileUrl:e.String.Or(e.Null),fileDuration:t.Int.Or(e.Null),uploadState:(0,e.Union)((0,e.Literal)("pending"),(0,e.Literal)("completed")).Or(e.Null),image:e.String.Or(e.Null),imageWidth:t.Int.Or(e.Null),imageHeight:t.Int.Or(e.Null),url:e.String.Or(e.Null),title:e.String.Or(e.Null)})),t.Comment=(0,e.Record)({id:e.String,content:e.String,postedAt:e.String}).And((0,e.Partial)({taskId:e.String.Or(e.Null),projectId:e.String.Or(e.Null),attachment:t.Attachment.Or(e.Null)})),t.User=(0,e.Record)({id:e.String,name:e.String,email:e.String})})(Za);var es={};Object.defineProperty(es,"__esModule",{value:!0});(function(t){var e=x&&x.__createBinding||(Object.create?function(n,i,a,l){l===void 0&&(l=a);var u=Object.getOwnPropertyDescriptor(i,a);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,l,u)}:function(n,i,a,l){l===void 0&&(l=a),n[l]=i[a]}),r=x&&x.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Za,t),r(rn,t),r(es,t)})(zn);Object.defineProperty(le,"__esModule",{value:!0});le.validateUserArray=le.validateUser=le.validateCommentArray=le.validateComment=le.validateLabelArray=le.validateLabel=le.validateSectionArray=le.validateSection=le.validateProjectArray=le.validateProject=le.validateTaskArray=le.validateTask=void 0;var Nt=zn;function ts(t){return Nt.Task.check(t)}le.validateTask=ts;function rd(t){return t.map(ts)}le.validateTaskArray=rd;function ns(t){return Nt.Project.check(t)}le.validateProject=ns;function id(t){return t.map(ns)}le.validateProjectArray=id;function rs(t){return Nt.Section.check(t)}le.validateSection=rs;function od(t){return t.map(rs)}le.validateSectionArray=od;function is(t){return Nt.Label.check(t)}le.validateLabel=is;function ad(t){return t.map(is)}le.validateLabelArray=ad;function os(t){return Nt.Comment.check(t)}le.validateComment=os;function sd(t){return t.map(os)}le.validateCommentArray=sd;function as(t){return Nt.User.check(t)}le.validateUser=as;function ld(t){return t.map(as)}le.validateUserArray=ld;var ie=x&&x.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(c){try{s(n.next(c))}catch(f){l(f)}}function o(c){try{s(n.throw(c))}catch(f){l(f)}}function s(c){c.done?a(c.value):i(c.value).then(u,o)}s((n=n.apply(t,e||[])).next())})},oe=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(s){return function(c){return o([s,c])}}function o(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(s[0]===6&&r.label<a[1]){r.label=a[1],a=s;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(s);break}a[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],i=0}finally{n=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.TodoistApi=void 0;var pe=Mr(),ee=Ue,ud=Gn,te=ei,fe=le;function me(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.join("/")}var cd=function(){function t(e,r){this.authToken=e,this.restApiBase=(0,te.getRestBaseUri)(r),this.syncApiBase=(0,te.getSyncBaseUri)(r)}return t.prototype.getTask=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return pe.String.check(e),[4,(0,ee.request)("GET",this.restApiBase,me(te.ENDPOINT_REST_TASKS,e),this.authToken)];case 1:return r=n.sent(),[2,(0,fe.validateTask)(r.data)]}})})},t.prototype.getTasks=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return[4,(0,ee.request)("GET",this.restApiBase,te.ENDPOINT_REST_TASKS,this.authToken,e)];case 1:return r=n.sent(),[2,(0,fe.validateTaskArray)(r.data)]}})})},t.prototype.addTask=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return[4,(0,ee.request)("POST",this.restApiBase,te.ENDPOINT_REST_TASKS,this.authToken,e,r)];case 1:return n=i.sent(),[2,(0,fe.validateTask)(n.data)]}})})},t.prototype.quickAddTask=function(e){return ie(this,void 0,void 0,function(){var r,n;return oe(this,function(i){switch(i.label){case 0:return[4,(0,ee.request)("POST",this.syncApiBase,te.ENDPOINT_SYNC_QUICK_ADD,this.authToken,e)];case 1:return r=i.sent(),n=(0,ud.getTaskFromQuickAddResponse)(r.data),[2,(0,fe.validateTask)(n)]}})})},t.prototype.updateTask=function(e,r,n){return ie(this,void 0,void 0,function(){var i;return oe(this,function(a){switch(a.label){case 0:return pe.String.check(e),[4,(0,ee.request)("POST",this.restApiBase,me(te.ENDPOINT_REST_TASKS,e),this.authToken,r,n)];case 1:return i=a.sent(),[2,(0,fe.validateTask)(i.data)]}})})},t.prototype.closeTask=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return pe.String.check(e),[4,(0,ee.request)("POST",this.restApiBase,me(te.ENDPOINT_REST_TASKS,e,te.ENDPOINT_REST_TASK_CLOSE),this.authToken,void 0,r)];case 1:return n=i.sent(),[2,(0,ee.isSuccess)(n)]}})})},t.prototype.reopenTask=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return pe.String.check(e),[4,(0,ee.request)("POST",this.restApiBase,me(te.ENDPOINT_REST_TASKS,e,te.ENDPOINT_REST_TASK_REOPEN),this.authToken,void 0,r)];case 1:return n=i.sent(),[2,(0,ee.isSuccess)(n)]}})})},t.prototype.deleteTask=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return pe.String.check(e),[4,(0,ee.request)("DELETE",this.restApiBase,me(te.ENDPOINT_REST_TASKS,e),this.authToken,void 0,r)];case 1:return n=i.sent(),[2,(0,ee.isSuccess)(n)]}})})},t.prototype.getProject=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return pe.String.check(e),[4,(0,ee.request)("GET",this.restApiBase,me(te.ENDPOINT_REST_PROJECTS,e),this.authToken)];case 1:return r=n.sent(),[2,(0,fe.validateProject)(r.data)]}})})},t.prototype.getProjects=function(){return ie(this,void 0,void 0,function(){var e;return oe(this,function(r){switch(r.label){case 0:return[4,(0,ee.request)("GET",this.restApiBase,te.ENDPOINT_REST_PROJECTS,this.authToken)];case 1:return e=r.sent(),[2,(0,fe.validateProjectArray)(e.data)]}})})},t.prototype.addProject=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return[4,(0,ee.request)("POST",this.restApiBase,te.ENDPOINT_REST_PROJECTS,this.authToken,e,r)];case 1:return n=i.sent(),[2,(0,fe.validateProject)(n.data)]}})})},t.prototype.updateProject=function(e,r,n){return ie(this,void 0,void 0,function(){var i;return oe(this,function(a){switch(a.label){case 0:return pe.String.check(e),[4,(0,ee.request)("POST",this.restApiBase,me(te.ENDPOINT_REST_PROJECTS,e),this.authToken,r,n)];case 1:return i=a.sent(),[2,(0,fe.validateProject)(i.data)]}})})},t.prototype.deleteProject=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return pe.String.check(e),[4,(0,ee.request)("DELETE",this.restApiBase,me(te.ENDPOINT_REST_PROJECTS,e),this.authToken,void 0,r)];case 1:return n=i.sent(),[2,(0,ee.isSuccess)(n)]}})})},t.prototype.getProjectCollaborators=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return pe.String.check(e),[4,(0,ee.request)("GET",this.restApiBase,me(te.ENDPOINT_REST_PROJECTS,e,te.ENDPOINT_REST_PROJECT_COLLABORATORS),this.authToken)];case 1:return r=n.sent(),[2,(0,fe.validateUserArray)(r.data)]}})})},t.prototype.getSections=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return[4,(0,ee.request)("GET",this.restApiBase,te.ENDPOINT_REST_SECTIONS,this.authToken,e?{projectId:e}:void 0)];case 1:return r=n.sent(),[2,(0,fe.validateSectionArray)(r.data)]}})})},t.prototype.getSection=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return pe.String.check(e),[4,(0,ee.request)("GET",this.restApiBase,me(te.ENDPOINT_REST_SECTIONS,e),this.authToken)];case 1:return r=n.sent(),[2,(0,fe.validateSection)(r.data)]}})})},t.prototype.addSection=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return[4,(0,ee.request)("POST",this.restApiBase,te.ENDPOINT_REST_SECTIONS,this.authToken,e,r)];case 1:return n=i.sent(),[2,(0,fe.validateSection)(n.data)]}})})},t.prototype.updateSection=function(e,r,n){return ie(this,void 0,void 0,function(){var i;return oe(this,function(a){switch(a.label){case 0:return pe.String.check(e),[4,(0,ee.request)("POST",this.restApiBase,me(te.ENDPOINT_REST_SECTIONS,e),this.authToken,r,n)];case 1:return i=a.sent(),[2,(0,fe.validateSection)(i.data)]}})})},t.prototype.deleteSection=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return pe.String.check(e),[4,(0,ee.request)("DELETE",this.restApiBase,me(te.ENDPOINT_REST_SECTIONS,e),this.authToken,void 0,r)];case 1:return n=i.sent(),[2,(0,ee.isSuccess)(n)]}})})},t.prototype.getLabel=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return pe.String.check(e),[4,(0,ee.request)("GET",this.restApiBase,me(te.ENDPOINT_REST_LABELS,e),this.authToken)];case 1:return r=n.sent(),[2,(0,fe.validateLabel)(r.data)]}})})},t.prototype.getLabels=function(){return ie(this,void 0,void 0,function(){var e;return oe(this,function(r){switch(r.label){case 0:return[4,(0,ee.request)("GET",this.restApiBase,te.ENDPOINT_REST_LABELS,this.authToken)];case 1:return e=r.sent(),[2,(0,fe.validateLabelArray)(e.data)]}})})},t.prototype.addLabel=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return[4,(0,ee.request)("POST",this.restApiBase,te.ENDPOINT_REST_LABELS,this.authToken,e,r)];case 1:return n=i.sent(),[2,(0,fe.validateLabel)(n.data)]}})})},t.prototype.updateLabel=function(e,r,n){return ie(this,void 0,void 0,function(){var i;return oe(this,function(a){switch(a.label){case 0:return pe.String.check(e),[4,(0,ee.request)("POST",this.restApiBase,me(te.ENDPOINT_REST_LABELS,e),this.authToken,r,n)];case 1:return i=a.sent(),[2,(0,fe.validateLabel)(i.data)]}})})},t.prototype.deleteLabel=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return pe.String.check(e),[4,(0,ee.request)("DELETE",this.restApiBase,me(te.ENDPOINT_REST_LABELS,e),this.authToken,void 0,r)];case 1:return n=i.sent(),[2,(0,ee.isSuccess)(n)]}})})},t.prototype.getSharedLabels=function(){return ie(this,void 0,void 0,function(){var e;return oe(this,function(r){switch(r.label){case 0:return[4,(0,ee.request)("GET",this.restApiBase,te.ENDPOINT_REST_LABELS_SHARED,this.authToken)];case 1:return e=r.sent(),[2,e.data]}})})},t.prototype.renameSharedLabel=function(e){return ie(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,(0,ee.request)("POST",this.restApiBase,te.ENDPOINT_REST_LABELS_SHARED_RENAME,this.authToken,e)];case 1:return r.sent(),[2]}})})},t.prototype.removeSharedLabel=function(e){return ie(this,void 0,void 0,function(){return oe(this,function(r){switch(r.label){case 0:return[4,(0,ee.request)("POST",this.restApiBase,te.ENDPOINT_REST_LABELS_SHARED_REMOVE,this.authToken,e)];case 1:return r.sent(),[2]}})})},t.prototype.getComments=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return[4,(0,ee.request)("GET",this.restApiBase,te.ENDPOINT_REST_COMMENTS,this.authToken,e)];case 1:return r=n.sent(),[2,(0,fe.validateCommentArray)(r.data)]}})})},t.prototype.getComment=function(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return pe.String.check(e),[4,(0,ee.request)("GET",this.restApiBase,me(te.ENDPOINT_REST_COMMENTS,e),this.authToken)];case 1:return r=n.sent(),[2,(0,fe.validateComment)(r.data)]}})})},t.prototype.addComment=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return[4,(0,ee.request)("POST",this.restApiBase,te.ENDPOINT_REST_COMMENTS,this.authToken,e,r)];case 1:return n=i.sent(),[2,(0,fe.validateComment)(n.data)]}})})},t.prototype.updateComment=function(e,r,n){return ie(this,void 0,void 0,function(){var i;return oe(this,function(a){switch(a.label){case 0:return pe.String.check(e),[4,(0,ee.request)("POST",this.restApiBase,me(te.ENDPOINT_REST_COMMENTS,e),this.authToken,r,n)];case 1:return i=a.sent(),[2,(0,fe.validateComment)(i.data)]}})})},t.prototype.deleteComment=function(e,r){return ie(this,void 0,void 0,function(){var n;return oe(this,function(i){switch(i.label){case 0:return pe.String.check(e),[4,(0,ee.request)("DELETE",this.restApiBase,me(te.ENDPOINT_REST_COMMENTS,e),this.authToken,void 0,r)];case 1:return n=i.sent(),[2,(0,ee.isSuccess)(n)]}})})},t}();Sn.TodoistApi=cd;var xe={},ss=x&&x.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(c){try{s(n.next(c))}catch(f){l(f)}}function o(c){try{s(n.throw(c))}catch(f){l(f)}}function s(c){c.done?a(c.value):i(c.value).then(u,o)}s((n=n.apply(t,e||[])).next())})},ls=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(s){return function(c){return o([s,c])}}function o(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(s[0]===6&&r.label<a[1]){r.label=a[1],a=s;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(s);break}a[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(c){s=[6,c],i=0}finally{n=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(xe,"__esModule",{value:!0});xe.revokeAuthToken=xe.getAuthToken=xe.getAuthorizationUrl=xe.getAuthStateParameter=void 0;var Pr=Ue,fd=zr,dd=zn,wt=ei;function hd(){return(0,fd.v4)()}xe.getAuthStateParameter=hd;function pd(t,e,r,n){if(!(e!=null&&e.length))throw new Error("At least one scope value should be passed for permissions.");var i=e.join(",");return"".concat((0,wt.getAuthBaseUri)(n)).concat(wt.ENDPOINT_AUTHORIZATION,"?client_id=").concat(t,"&scope=").concat(i,"&state=").concat(r)}xe.getAuthorizationUrl=pd;function md(t,e){var r;return ss(this,void 0,void 0,function(){var n;return ls(this,function(i){switch(i.label){case 0:return[4,(0,Pr.request)("POST",(0,wt.getAuthBaseUri)(e),wt.ENDPOINT_GET_TOKEN,void 0,t)];case 1:if(n=i.sent(),n.status!==200||!(!((r=n.data)===null||r===void 0)&&r.accessToken))throw new dd.TodoistRequestError("Authentication token exchange failed.",n.status,n.data);return[2,n.data]}})})}xe.getAuthToken=md;function vd(t,e){return ss(this,void 0,void 0,function(){var r;return ls(this,function(n){switch(n.label){case 0:return[4,(0,Pr.request)("POST",(0,wt.getSyncBaseUri)(e),wt.ENDPOINT_REVOKE_TOKEN,void 0,t)];case 1:return r=n.sent(),[2,(0,Pr.isSuccess)(r)]}})})}xe.revokeAuthToken=vd;var us={},cs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getColorByKey=t.getColorByName=t.getColorById=t.defaultColor=t.colors=t.taupe=t.gray=t.charcoal=t.salmon=t.magenta=t.lavender=t.violet=t.grape=t.blue=t.lightBlue=t.skyBlue=t.turquoise=t.mintGreen=t.green=t.limeGreen=t.oliveGreen=t.yellow=t.orange=t.red=t.berryRed=void 0,t.berryRed={id:30,key:"berry_red",displayName:"Berry Red",name:"Berry Red",hexValue:"#b8255f",value:"#b8255f"},t.red={id:31,key:"red",displayName:"Red",name:"Red",hexValue:"#db4035",value:"#db4035"},t.orange={id:32,key:"orange",displayName:"Orange",name:"Orange",hexValue:"#ff9933",value:"#ff9933"},t.yellow={id:33,key:"yellow",displayName:"Yellow",name:"Yellow",hexValue:"#fad000",value:"#fad000"},t.oliveGreen={id:34,key:"olive_green",displayName:"Olive Green",name:"Olive Green",hexValue:"#afb83b",value:"#afb83b"},t.limeGreen={id:35,key:"lime_green",displayName:"Lime Green",name:"Lime Green",hexValue:"#7ecc49",value:"#7ecc49"},t.green={id:36,key:"green",displayName:"Green",name:"Green",hexValue:"#299438",value:"#299438"},t.mintGreen={id:37,key:"mint_green",displayName:"Mint Green",name:"Mint Green",hexValue:"#6accbc",value:"#6accbc"},t.turquoise={id:38,key:"turquoise",displayName:"Turquoise",name:"Turquoise",hexValue:"#158fad",value:"#158fad"},t.skyBlue={id:39,key:"sky_blue",displayName:"Sky Blue",name:"Sky Blue",hexValue:"#14aaf5",value:"#14aaf5"},t.lightBlue={id:40,key:"light_blue",displayName:"Light Blue",name:"Light Blue",hexValue:"#96c3eb",value:"#96c3eb"},t.blue={id:41,key:"blue",displayName:"Blue",name:"Blue",hexValue:"#4073ff",value:"#4073ff"},t.grape={id:42,key:"grape",displayName:"Grape",name:"Grape",hexValue:"#884dff",value:"#884dff"},t.violet={id:43,key:"violet",displayName:"Violet",name:"Violet",hexValue:"#af38eb",value:"#af38eb"},t.lavender={id:44,key:"lavender",displayName:"Lavender",name:"Lavender",hexValue:"#eb96eb",value:"#eb96eb"},t.magenta={id:45,key:"magenta",displayName:"Magenta",name:"Magenta",hexValue:"#e05194",value:"#e05194"},t.salmon={id:46,key:"salmon",displayName:"Salmon",name:"Salmon",hexValue:"#ff8d85",value:"#ff8d85"},t.charcoal={id:47,key:"charcoal",displayName:"Charcoal",name:"Charcoal",hexValue:"#808080",value:"#808080"},t.gray={id:48,key:"gray",displayName:"Gray",name:"Gray",hexValue:"#b8b8b8",value:"#b8b8b8"},t.taupe={id:49,key:"taupe",displayName:"Taupe",name:"Taupe",hexValue:"#ccac93",value:"#ccac93"},t.colors=[t.berryRed,t.red,t.orange,t.yellow,t.oliveGreen,t.limeGreen,t.green,t.mintGreen,t.turquoise,t.skyBlue,t.lightBlue,t.blue,t.grape,t.violet,t.lavender,t.magenta,t.salmon,t.charcoal,t.gray,t.taupe],t.defaultColor=t.charcoal;function e(i){var a=t.colors.find(function(l){return l.id===i});return a??t.defaultColor}t.getColorById=e;function r(i){var a=t.colors.find(function(l){return l.name===i});return a??t.defaultColor}t.getColorByName=r;function n(i){var a=t.colors.find(function(l){return l.key===i});return a??t.defaultColor}t.getColorByKey=n})(cs);var Ct={},bn=x&&x.__assign||function(){return bn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},bn.apply(this,arguments)};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.getSanitizedTasks=Ct.getSanitizedContent=void 0;var gd=/(^|[\s!?,;>:]+)(?:\*\*|__|!!)(.+?)(\*\*|__|!!)(?=$|[\s!?,;><:]+)/gi,bd=/(^|[\s!?,;>:]+)(?:\*|_|!)(.+?)(\*|_|!)(?=$|[\s!?,;><:]+)/gi,yd=/(^|[\s!?,;>:]+)(?:\*\*\*|___|!!!)(.+?)(\*\*\*|___|!!!)(?=$|[\s!?,;><:]+)/gi,_d=/```([\s\S]*?)```/gi,Ed=/`([^`]+)`/gi,wd=/((?:(?:onenote:)?[\w-]+):\/\/[^\s]+)\s+[[(]([^)]+)[\])]/gi,Cd=/\[(.+?)\]\((.+?)\)/gi,Td=/\[\[gmail=(.+?),\s*(.+?)\]\]/gi,kd=/\[\[outlook=(.+?),\s*(.+?)\]\]/gi,Sd=/\[\[thunderbird\n(.+)\n(.+)\n\s*\]\]/gi,mo="* ",vo=":";function Rd(t){if(!t.includes("!")&&!t.includes("*")&&!t.includes("_"))return t;function e(r,n,i){return"".concat(n).concat(i)}return t=t.replace(yd,e),t=t.replace(gd,e),t=t.replace(bd,e),t}function Ad(t){function e(r,n){return n}return t=t.replace(_d,e),t=t.replace(Ed,e),t}function Nd(t){return t.startsWith(mo)&&(t=t.slice(mo.length)),t.endsWith(vo)&&(t=t.slice(0,t.length-vo.length)),t}function Od(t){if(!t.includes("[")||!t.includes("]"))return t;function e(r,n){return n}return t.replace(Cd,e)}function Pd(t){if(!t.includes("(")||!t.includes(")"))return t;function e(r,n,i){return i}return t.replace(wd,e)}function Id(t){return t.includes("gmail")&&(t=t.replace(Td,function(e,r,n){return n})),t.includes("outlook")&&(t=t.replace(kd,function(e,r,n){return n})),t.includes("thunderbird")&&(t=t.replace(Sd,function(e,r){return r})),t}function fs(t){return t=Rd(t),t=Ad(t),t=Nd(t),t=Od(t),t=Pd(t),t=Id(t),t}Ct.getSanitizedContent=fs;function Ld(t){return t.map(function(e){return bn(bn({},e),{sanitizedContent:fs(e.content)})})}Ct.getSanitizedTasks=Ld;(function(t){var e=x&&x.__createBinding||(Object.create?function(n,i,a,l){l===void 0&&(l=a);var u=Object.getOwnPropertyDescriptor(i,a);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,l,u)}:function(n,i,a,l){l===void 0&&(l=a),n[l]=i[a]}),r=x&&x.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(cs,t),r(Ct,t)})(us);(function(t){var e=x&&x.__createBinding||(Object.create?function(n,i,a,l){l===void 0&&(l=a);var u=Object.getOwnPropertyDescriptor(i,a);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,l,u)}:function(n,i,a,l){l===void 0&&(l=a),n[l]=i[a]}),r=x&&x.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Sn,t),r(Ue,t),r(xe,t),r(zn,t),r(us,t)})(fa);function Dd(t){let e;return{c(){e=_e("Successfully connected to your Todoist account! Please wait while we fetch your projects and tasks.")},m(r,n){B(r,e,n)},d(r){r&&M(e)}}}function $d(t){let e,r,n;return{c(){e=_e("Connect your Todoist account to view and manage your tasks directly from Dashy. "),r=G("br"),n=_e(" We don't store any of your data.")},m(i,a){B(i,e,a),B(i,r,a),B(i,n,a)},d(i){i&&M(e),i&&M(r),i&&M(n)}}}function Bd(t){let e,r;return e=new en({props:{icon:En,class:"animate-spin text-2xl mt-1.5 mb-2"}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Md(t){let e,r;return e=new wn({props:{class:"mt-1",$$slots:{default:[Fd]},$$scope:{ctx:t}}}),e.$on("click",t[2]),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){const a={};i&8&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Fd(t){let e;return{c(){e=_e("Connect")},m(r,n){B(r,e,n)},d(r){r&&M(e)}}}function xd(t){let e,r,n,i,a,l,u,o;function s(v,_){return v[0]?Dd:$d}let c=s(t),f=c(t);const d=[Md,Bd],h=[];function m(v,_){return v[0]?1:0}return l=m(t),u=h[l]=d[l](t),{c(){e=G("div"),r=G("div"),r.innerHTML='<img src="/apps/todoist_standard.png" class="w-[max] h-[2rem]" alt="Todosit logo"/>',n=X(),i=G("span"),f.c(),a=X(),u.c(),Y(r,"class","flex-center"),Y(i,"class","text-sm text-center"),Y(e,"class","w-[24rem] px-4 py-4 flex flex-col gap-4 items-center")},m(v,_){B(v,e,_),U(e,r),U(e,n),U(e,i),f.m(i,null),U(e,a),h[l].m(e,null),o=!0},p(v,[_]){c!==(c=s(v))&&(f.d(1),f=c(v),f&&(f.c(),f.m(i,null)));let T=l;l=m(v),l===T?h[l].p(v,_):(ne(),N(h[T],1,1,()=>{h[T]=null}),re(),u=h[l],u?u.p(v,_):(u=h[l]=d[l](v),u.c()),R(u,1),u.m(e,null))},i(v){o||(R(u),o=!0)},o(v){N(u),o=!1},d(v){v&&M(e),f.d(),h[l].d()}}}function Ud(t,e,r){let{loading:n=!1}=e,{widgetId:i=""}=e;const a=()=>{Ts({integration_id:i==="todoist"?"todoist":`todoist_${i}`})};return t.$$set=l=>{"loading"in l&&r(0,n=l.loading),"widgetId"in l&&r(1,i=l.widgetId)},[n,i,a]}class ds extends Re{constructor(e){super(),Ae(this,e,Ud,xd,Ne,{loading:0,widgetId:1})}}function jd(t){let e,r,n,i,a;return{c(){e=G("div"),r=G("iconify-icon"),n=X(),i=G("span"),a=_e(t[0]),vt(r,"icon","ic:baseline-task-alt"),vt(r,"class","text-xl"),Y(i,"class","text-sm"),Y(e,"class","flex-center w-full border-light curved-half flex-row px-3 py-2.5 gap-3")},m(l,u){B(l,e,u),U(e,r),U(e,n),U(e,i),U(i,a)},p(l,[u]){u&1&&tn(a,l[0])},i:Z,o:Z,d(l){l&&M(e)}}}function qd(t,e,r){let{text:n="No tasks yet!"}=e;return t.$$set=i=>{"text"in i&&r(0,n=i.text)},[n]}class sn extends Re{constructor(e){super(),Ae(this,e,qd,jd,Ne,{text:0})}}var hs={exports:{}};(function(t){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */"classList"in document.createElement("_")||function(e){if("Element"in e){var r="classList",n="prototype",i=e.Element[n],a=Object,l=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},u=Array[n].indexOf||function(m){for(var v=0,_=this.length;v<_;v++)if(v in this&&this[v]===m)return v;return-1},o=function(m,v){this.name=m,this.code=DOMException[m],this.message=v},s=function(m,v){if(v==="")throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(v))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return u.call(m,v)},c=function(m){for(var v=l.call(m.getAttribute("class")||""),_=v?v.split(/\s+/):[],T=0,k=_.length;T<k;T++)this.push(_[T]);this._updateClassName=function(){m.setAttribute("class",this.toString())}},f=c[n]=[],d=function(){return new c(this)};if(o[n]=Error[n],f.item=function(m){return this[m]||null},f.contains=function(m){return m+="",s(this,m)!==-1},f.add=function(){var m=arguments,v=0,_=m.length,T,k=!1;do T=m[v]+"",s(this,T)===-1&&(this.push(T),k=!0);while(++v<_);k&&this._updateClassName()},f.remove=function(){var m=arguments,v=0,_=m.length,T,k=!1,g;do for(T=m[v]+"",g=s(this,T);g!==-1;)this.splice(g,1),k=!0,g=s(this,T);while(++v<_);k&&this._updateClassName()},f.toggle=function(m,v){m+="";var _=this.contains(m),T=_?v!==!0&&"remove":v!==!1&&"add";return T&&this[T](m),v===!0||v===!1?v:!_},f.toString=function(){return this.join(" ")},a.defineProperty){var h={get:d,enumerable:!0,configurable:!0};try{a.defineProperty(i,r,h)}catch(m){m.number===-2146823252&&(h.enumerable=!1,a.defineProperty(i,r,h))}}else a[n].__defineGetter__&&i.__defineGetter__(r,d)}}(self);/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */(function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{new Blob;return}catch{}var r=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(i){var a=function(A){return Object.prototype.toString.call(A).match(/^\[object\s(.*)\]$/)[1]},l=function(){this.data=[]},u=function(P,O,V){this.data=P,this.size=P.length,this.type=O,this.encoding=V},o=l.prototype,s=u.prototype,c=i.FileReaderSync,f=function(A){this.code=this[this.name=A]},d="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),h=d.length,m=i.URL||i.webkitURL||i,v=m.createObjectURL,_=m.revokeObjectURL,T=m,k=i.btoa,g=i.atob,C=i.ArrayBuffer,y=i.Uint8Array,I=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(u.fake=s.fake=!0;h--;)f.prototype[d[h]]=h+1;return m.createObjectURL||(T=i.URL=function(A){var P=document.createElementNS("http://www.w3.org/1999/xhtml","a"),O;return P.href=A,"origin"in P||(P.protocol.toLowerCase()==="data:"?P.origin=null:(O=A.match(I),P.origin=O&&O[1])),P}),T.createObjectURL=function(A){var P=A.type,O;if(P===null&&(P="application/octet-stream"),A instanceof u)return O="data:"+P,A.encoding==="base64"?O+";base64,"+A.data:A.encoding==="URI"?O+","+decodeURIComponent(A.data):k?O+";base64,"+k(A.data):O+","+encodeURIComponent(A.data);if(v)return v.call(m,A)},T.revokeObjectURL=function(A){A.substring(0,5)!=="data:"&&_&&_.call(m,A)},o.append=function(A){var P=this.data;if(y&&(A instanceof C||A instanceof y)){for(var O="",V=new y(A),z=0,J=V.length;z<J;z++)O+=String.fromCharCode(V[z]);P.push(O)}else if(a(A)==="Blob"||a(A)==="File")if(c){var p=new c;P.push(p.readAsBinaryString(A))}else throw new f("NOT_READABLE_ERR");else A instanceof u?A.encoding==="base64"&&g?P.push(g(A.data)):A.encoding==="URI"?P.push(decodeURIComponent(A.data)):A.encoding==="raw"&&P.push(A.data):(typeof A!="string"&&(A+=""),P.push(unescape(encodeURIComponent(A))))},o.getBlob=function(A){return arguments.length||(A=null),new u(this.data.join(""),A,"raw")},o.toString=function(){return"[object BlobBuilder]"},s.slice=function(A,P,O){var V=arguments.length;return V<3&&(O=null),new u(this.data.slice(A,V>1?P:this.data.length),O,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=0,delete this.data},l}(e);e.Blob=function(i,a){var l=a&&a.type||"",u=new r;if(i)for(var o=0,s=i.length;o<s;o++)Uint8Array&&i[o]instanceof Uint8Array?u.append(i[o].buffer):u.append(i[o]);var c=u.getBlob(l);return!c.slice&&c.webkitSlice&&(c.slice=c.webkitSlice),c};var n=Object.getPrototypeOf||function(i){return i.__proto__};e.Blob.prototype=n(new e.Blob)})(typeof self<"u"&&self||typeof window<"u"&&window||x.content||x),function(e,r){var n=typeof process<"u"&&process&&process.versions&&process.versions.electron;n?e.MediumEditor=r:t.exports=r}(x,function(){function e(r,n){return this.init(r,n)}return e.extensions={},function(r){function n(o,s){var c,f=Array.prototype.slice.call(arguments,2);s=s||{};for(var d=0;d<f.length;d++){var h=f[d];if(h)for(c in h)h.hasOwnProperty(c)&&typeof h[c]<"u"&&(o||s.hasOwnProperty(c)===!1)&&(s[c]=h[c])}return s}var i=!1;try{var a=document.createElement("div"),l=document.createTextNode(" ");a.appendChild(l),i=a.contains(l)}catch{}var u={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:r.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(o){return!!(u.isMac&&o.metaKey||!u.isMac&&o.ctrlKey)},isKey:function(o,s){var c=u.getKeyCode(o);return Array.isArray(s)===!1?c===s:s.indexOf(c)!==-1},getKeyCode:function(o){var s=o.which;return s===null&&(s=o.charCode!==null?o.charCode:o.keyCode),s},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var s=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,s)},defaults:function(){var s=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,s)},createLink:function(o,s,c,f){var d=o.createElement("a");return u.moveTextRangeIntoElement(s[0],s[s.length-1],d),d.setAttribute("href",c),f&&(f==="_blank"&&d.setAttribute("rel","noopener noreferrer"),d.setAttribute("target",f)),d},findOrCreateMatchingTextNodes:function(o,s,c){for(var f=o.createTreeWalker(s,NodeFilter.SHOW_ALL,null,!1),d=[],h=0,m=!1,v=null,_=null;(v=f.nextNode())!==null;)if(!(v.nodeType>3))if(v.nodeType===3){if(!m&&c.start<h+v.nodeValue.length&&(m=!0,_=u.splitStartNodeIfNeeded(v,c.start,h)),m&&u.splitEndNodeIfNeeded(v,_,c.end,h),m&&h===c.end)break;if(m&&h>c.end+1)throw new Error("PerformLinking overshot the target!");m&&d.push(_||v),h+=v.nodeValue.length,_!==null&&(h+=_.nodeValue.length,f.nextNode()),_=null}else v.tagName.toLowerCase()==="img"&&(!m&&c.start<=h&&(m=!0),m&&d.push(v));return d},splitStartNodeIfNeeded:function(o,s,c){return s!==c?o.splitText(s-c):null},splitEndNodeIfNeeded:function(o,s,c,f){var d,h;d=f+o.nodeValue.length+(s?s.nodeValue.length:0)-1,h=c-f-(s?o.nodeValue.length:0),d>=c&&f!==d&&h!==0&&(s||o).splitText(h)},splitByBlockElements:function(o){if(o.nodeType!==3&&o.nodeType!==1)return[];var s=[],c=e.util.blockContainerElementNames.join(",");if(o.nodeType===3||o.querySelectorAll(c).length===0)return[o];for(var f=0;f<o.childNodes.length;f++){var d=o.childNodes[f];if(d.nodeType===3)s.push(d);else if(d.nodeType===1){var h=d.querySelectorAll(c);h.length===0?s.push(d):s=s.concat(e.util.splitByBlockElements(d))}}return s},findAdjacentTextNodeWithContent:function(s,c,f){var d=!1,h,m=f.createNodeIterator(s,NodeFilter.SHOW_TEXT,null,!1);for(h=m.nextNode();h;){if(h===c)d=!0;else if(d&&h.nodeType===3&&h.nodeValue&&h.nodeValue.trim().length>0)break;h=m.nextNode()}return h},findPreviousSibling:function(o){if(!o||u.isMediumEditorElement(o))return!1;for(var s=o.previousSibling;!s&&!u.isMediumEditorElement(o.parentNode);)o=o.parentNode,s=o.previousSibling;return s},isDescendant:function(s,c,f){if(!s||!c)return!1;if(s===c)return!!f;if(s.nodeType!==1)return!1;if(i||c.nodeType!==3)return s.contains(c);for(var d=c.parentNode;d!==null;){if(d===s)return!0;d=d.parentNode}return!1},isElement:function(s){return!!(s&&s.nodeType===1)},throttle:function(o,s){var c=50,f,d,h,m=null,v=0,_=function(){v=Date.now(),m=null,h=o.apply(f,d),m||(f=d=null)};return!s&&s!==0&&(s=c),function(){var T=Date.now(),k=s-(T-v);return f=this,d=arguments,k<=0||k>s?(m&&(clearTimeout(m),m=null),v=T,h=o.apply(f,d),m||(f=d=null)):m||(m=setTimeout(_,k)),h}},traverseUp:function(o,s){if(!o)return!1;do{if(o.nodeType===1){if(s(o))return o;if(u.isMediumEditorElement(o))return!1}o=o.parentNode}while(o);return!1},htmlEntities:function(o){return String(o).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(o,s){var c,f,d,h,m,v,_,T=!1,k=["insertHTML",!1,s];if(!e.util.isEdge&&o.queryCommandSupported("insertHTML"))try{return o.execCommand.apply(o,k)}catch{}if(c=o.getSelection(),c.rangeCount){if(f=c.getRangeAt(0),_=f.commonAncestorContainer,u.isMediumEditorElement(_)&&!_.firstChild)f.selectNode(_.appendChild(o.createTextNode("")));else if(_.nodeType===3&&f.startOffset===0&&f.endOffset===_.nodeValue.length||_.nodeType!==3&&_.innerHTML===f.toString()){for(;!u.isMediumEditorElement(_)&&_.parentNode&&_.parentNode.childNodes.length===1&&!u.isMediumEditorElement(_.parentNode);)_=_.parentNode;f.selectNode(_)}for(f.deleteContents(),d=o.createElement("div"),d.innerHTML=s,h=o.createDocumentFragment();d.firstChild;)m=d.firstChild,v=h.appendChild(m);f.insertNode(h),v&&(f=f.cloneRange(),f.setStartAfter(v),f.collapse(!0),e.selection.selectRange(o,f)),T=!0}return o.execCommand.callListeners&&o.execCommand.callListeners(k,T),T},execFormatBlock:function(o,s){var c=u.getTopBlockContainer(e.selection.getSelectionStart(o)),f;if(s==="blockquote"){if(c&&(f=Array.prototype.slice.call(c.childNodes),f.some(function(d){return u.isBlockContainer(d)})))return o.execCommand("outdent",!1,null);if(u.isIE)return o.execCommand("indent",!1,s)}if(c&&s===c.nodeName.toLowerCase()&&(s="p"),u.isIE&&(s="<"+s+">"),c&&c.nodeName.toLowerCase()==="blockquote"){if(u.isIE&&s==="<p>")return o.execCommand("outdent",!1,s);if((u.isFF||u.isEdge)&&s==="p")return f=Array.prototype.slice.call(c.childNodes),f.some(function(d){return!u.isBlockContainer(d)})&&o.execCommand("formatBlock",!1,s),o.execCommand("outdent",!1,s)}return o.execCommand("formatBlock",!1,s)},setTargetBlank:function(o,s){var c,f=s||!1;if(o.nodeName.toLowerCase()==="a")o.target="_blank",o.rel="noopener noreferrer";else for(o=o.getElementsByTagName("a"),c=0;c<o.length;c+=1)(f===!1||f===o[c].attributes.href.value)&&(o[c].target="_blank",o[c].rel="noopener noreferrer")},removeTargetBlank:function(o,s){var c;if(o.nodeName.toLowerCase()==="a")o.removeAttribute("target"),o.removeAttribute("rel");else for(o=o.getElementsByTagName("a"),c=0;c<o.length;c+=1)s===o[c].attributes.href.value&&(o[c].removeAttribute("target"),o[c].removeAttribute("rel"))},addClassToAnchors:function(o,s){var c=s.split(" "),f,d;if(o.nodeName.toLowerCase()==="a")for(d=0;d<c.length;d+=1)o.classList.add(c[d]);else{var h=o.getElementsByTagName("a");if(h.length===0){var m=u.getClosestTag(o,"a");o=m?[m]:[]}else o=h;for(f=0;f<o.length;f+=1)for(d=0;d<c.length;d+=1)o[f].classList.add(c[d])}},isListItem:function(o){if(!o)return!1;if(o.nodeName.toLowerCase()==="li")return!0;for(var s=o.parentNode,c=s.nodeName.toLowerCase();c==="li"||!u.isBlockContainer(s)&&c!=="div";){if(c==="li")return!0;if(s=s.parentNode,s)c=s.nodeName.toLowerCase();else return!1}return!1},cleanListDOM:function(o,s){if(s.nodeName.toLowerCase()==="li"){var c=s.parentElement;c.parentElement.nodeName.toLowerCase()==="p"&&(u.unwrap(c.parentElement,o),e.selection.moveCursor(o,s.firstChild,s.firstChild.textContent.length))}},splitOffDOMTree:function(o,s,c){for(var f=s,d=null,h=!c;f!==o;){var m=f.parentNode,v=m.cloneNode(!1),_=h?f:m.firstChild,T;for(d&&(h?v.appendChild(d):T=d),d=v;_;){var k=_.nextSibling;_===f?(_.hasChildNodes()?_=_.cloneNode(!1):_.parentNode.removeChild(_),_.textContent&&d.appendChild(_),_=h?k:null):(_.parentNode.removeChild(_),(_.hasChildNodes()||_.textContent)&&d.appendChild(_),_=k)}T&&d.appendChild(T),f=m}return d},moveTextRangeIntoElement:function(o,s,c){if(!o||!s)return!1;var f=u.findCommonRoot(o,s);if(!f)return!1;if(s===o){var d=o.parentNode,h=o.nextSibling;return d.removeChild(o),c.appendChild(o),h?d.insertBefore(c,h):d.appendChild(c),c.hasChildNodes()}for(var m=[],v,_,T,k=0;k<f.childNodes.length;k++)if(T=f.childNodes[k],!v)u.isDescendant(T,o,!0)&&(v=T);else if(u.isDescendant(T,s,!0)){_=T;break}else m.push(T);var g=_.nextSibling,C=f.ownerDocument.createDocumentFragment();return v===o?(v.parentNode.removeChild(v),C.appendChild(v)):C.appendChild(u.splitOffDOMTree(v,o)),m.forEach(function(y){y.parentNode.removeChild(y),C.appendChild(y)}),_===s?(_.parentNode.removeChild(_),C.appendChild(_)):C.appendChild(u.splitOffDOMTree(_,s,!0)),c.appendChild(C),_.parentNode===f?f.insertBefore(c,_):g?f.insertBefore(c,g):f.appendChild(c),c.hasChildNodes()},depthOfNode:function(o){for(var s=0,c=o;c.parentNode!==null;)c=c.parentNode,s++;return s},findCommonRoot:function(o,s){for(var c=u.depthOfNode(o),f=u.depthOfNode(s),d=o,h=s;c!==f;)c>f?(d=d.parentNode,c-=1):(h=h.parentNode,f-=1);for(;d!==h;)d=d.parentNode,h=h.parentNode;return d},isElementAtBeginningOfBlock:function(o){for(var s,c;!u.isBlockContainer(o)&&!u.isMediumEditorElement(o);){for(c=o;c=c.previousSibling;)if(s=c.nodeType===3?c.nodeValue:c.textContent,s.length>0)return!1;o=o.parentNode}return!0},isMediumEditorElement:function(o){return o&&o.getAttribute&&!!o.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(o){return u.traverseUp(o,function(s){return u.isMediumEditorElement(s)})},isBlockContainer:function(o){return o&&o.nodeType!==3&&u.blockContainerElementNames.indexOf(o.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(o){return u.traverseUp(o,function(s){return u.isBlockContainer(s)||u.isMediumEditorElement(s)})},getTopBlockContainer:function(o){var s=u.isBlockContainer(o)?o:!1;return u.traverseUp(o,function(c){return u.isBlockContainer(c)&&(s=c),!s&&u.isMediumEditorElement(c)?(s=c,!0):!1}),s},getFirstSelectableLeafNode:function(o){for(;o&&o.firstChild;)o=o.firstChild;if(o=u.traverseUp(o,function(c){return u.emptyElementNames.indexOf(c.nodeName.toLowerCase())===-1}),o.nodeName.toLowerCase()==="table"){var s=o.querySelector("th, td");s&&(o=s)}return o},getFirstTextNode:function(o){return u.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),u._getFirstTextNode(o)},_getFirstTextNode:function(o){if(o.nodeType===3)return o;for(var s=0;s<o.childNodes.length;s++){var c=u._getFirstTextNode(o.childNodes[s]);if(c!==null)return c}return null},ensureUrlHasProtocol:function(o){return o.indexOf("://")===-1?"http://"+o:o},warn:function(){r.console!==void 0&&typeof r.console.warn=="function"&&r.console.warn.apply(r.console,arguments)},deprecated:function(o,s,c){var f=o+" is deprecated, please use "+s+" instead.";c&&(f+=" Will be removed in "+c),u.warn(f)},deprecatedMethod:function(o,s,c,f){u.deprecated(o,s,f),typeof this[s]=="function"&&this[s].apply(this,c)},cleanupAttrs:function(o,s){s.forEach(function(c){o.removeAttribute(c)})},cleanupTags:function(o,s){s.indexOf(o.nodeName.toLowerCase())!==-1&&o.parentNode.removeChild(o)},unwrapTags:function(o,s){s.indexOf(o.nodeName.toLowerCase())!==-1&&e.util.unwrap(o,document)},getClosestTag:function(o,s){return u.traverseUp(o,function(c){return c.nodeName.toLowerCase()===s.toLowerCase()})},unwrap:function(o,s){for(var c=s.createDocumentFragment(),f=Array.prototype.slice.call(o.childNodes),d=0;d<f.length;d++)c.appendChild(f[d]);c.childNodes.length?o.parentNode.replaceChild(c,o):o.parentNode.removeChild(o)},guid:function(){function o(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}};e.util=u}(window),function(){var r=function(n){e.util.extend(this,n)};r.extend=function(n){var i=this,a;n&&n.hasOwnProperty("constructor")?a=n.constructor:a=function(){return i.apply(this,arguments)},e.util.extend(a,i);var l=function(){this.constructor=a};return l.prototype=i.prototype,a.prototype=new l,n&&e.util.extend(a.prototype,n),a},r.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(n){return this.base.options[n]}},["execAction","on","off","subscribe","trigger"].forEach(function(n){r.prototype[n]=function(){return this.base[n].apply(this.base,arguments)}}),e.Extension=r}(),function(){function r(i){return e.util.isBlockContainer(i)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(i,a){var l=a.getSelection(),u,o;return l.rangeCount===0?!1:(u=l.getRangeAt(0),o=u.commonAncestorContainer,e.util.traverseUp(o,i))},getSelectionElement:function(i){return this.findMatchingSelectionParent(function(a){return e.util.isMediumEditorElement(a)},i)},exportSelection:function(i,a){if(!i)return null;var l=null,u=a.getSelection();if(u.rangeCount>0){var o=u.getRangeAt(0),s=o.cloneRange(),c;s.selectNodeContents(i),s.setEnd(o.startContainer,o.startOffset),c=s.toString().length,l={start:c,end:c+o.toString().length},this.doesRangeStartWithImages(o,a)&&(l.startsWithImage=!0);var f=this.getTrailingImageCount(i,l,o.endContainer,o.endOffset);if(f&&(l.trailingImageCount=f),c!==0){var d=this.getIndexRelativeToAdjacentEmptyBlocks(a,i,o.startContainer,o.startOffset);d!==-1&&(l.emptyBlocksIndex=d)}}return l},importSelection:function(i,a,l,u){if(!(!i||!a)){var o=l.createRange();o.setStart(a,0),o.collapse(!0);var s=a,c=[],f=0,d=!1,h=!1,m=0,v=!1,_,T=!1,k=null;for((u||i.startsWithImage||typeof i.emptyBlocksIndex<"u")&&(T=!0);!v&&s;){if(s.nodeType>3){s=c.pop();continue}if(s.nodeType===3&&!h)_=f+s.length,!d&&i.start>=f&&i.start<=_&&(T||i.start<_?(o.setStart(s,i.start-f),d=!0):k=s),d&&i.end>=f&&i.end<=_&&(i.trailingImageCount?h=!0:(o.setEnd(s,i.end-f),v=!0)),f=_;else{if(i.trailingImageCount&&h&&(s.nodeName.toLowerCase()==="img"&&m++,m===i.trailingImageCount)){for(var g=0;s.parentNode.childNodes[g]!==s;)g++;o.setEnd(s.parentNode,g+1),v=!0}if(!v&&s.nodeType===1)for(var C=s.childNodes.length-1;C>=0;)c.push(s.childNodes[C]),C-=1}v||(s=c.pop())}!d&&k&&(o.setStart(k,k.length),o.setEnd(k,k.length)),typeof i.emptyBlocksIndex<"u"&&(o=this.importSelectionMoveCursorPastBlocks(l,a,i.emptyBlocksIndex,o)),u&&(o=this.importSelectionMoveCursorPastAnchor(i,o)),this.selectRange(l,o)}},importSelectionMoveCursorPastAnchor:function(i,a){var l=function(f){return f.nodeName.toLowerCase()==="a"};if(i.start===i.end&&a.startContainer.nodeType===3&&a.startOffset===a.startContainer.nodeValue.length&&e.util.traverseUp(a.startContainer,l)){for(var u=a.startContainer,o=a.startContainer.parentNode;o!==null&&o.nodeName.toLowerCase()!=="a";)o.childNodes[o.childNodes.length-1]!==u?o=null:(u=o,o=o.parentNode);if(o!==null&&o.nodeName.toLowerCase()==="a"){for(var s=null,c=0;s===null&&c<o.parentNode.childNodes.length;c++)o.parentNode.childNodes[c]===o&&(s=c);a.setStart(o.parentNode,s+1),a.collapse(!0)}}return a},importSelectionMoveCursorPastBlocks:function(i,a,l,u){var o=i.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,r,!1),s=u.startContainer,c,f,d=0;for(l=l||1,s.nodeType===3&&e.util.isBlockContainer(s.previousSibling)?c=s.previousSibling:c=e.util.getClosestBlockContainer(s);o.nextNode();)if(!f)c===o.currentNode&&(f=o.currentNode);else if(f=o.currentNode,d++,d===l||f.textContent.length>0)break;return f||(f=c),u.setStart(e.util.getFirstSelectableLeafNode(f),0),u},getIndexRelativeToAdjacentEmptyBlocks:function(i,a,l,u){if(l.textContent.length>0&&u>0)return-1;var o=l;if(o.nodeType!==3&&(o=l.childNodes[u]),o){if(!e.util.isElementAtBeginningOfBlock(o))return-1;var s=e.util.findPreviousSibling(o);if(s){if(s.nodeValue)return-1}else return-1}for(var c=e.util.getClosestBlockContainer(l),f=i.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,r,!1),d=0;f.nextNode();){var h=f.currentNode.textContent==="";if((h||d>0)&&(d+=1),f.currentNode===c)return d;h||(d=0)}return d},doesRangeStartWithImages:function(i,a){if(i.startOffset!==0||i.startContainer.nodeType!==1)return!1;if(i.startContainer.nodeName.toLowerCase()==="img")return!0;var l=i.startContainer.querySelector("img");if(!l)return!1;for(var u=a.createTreeWalker(i.startContainer,NodeFilter.SHOW_ALL,null,!1);u.nextNode();){var o=u.currentNode;if(o===l)break;if(o.nodeValue)return!1}return!0},getTrailingImageCount:function(i,a,l,u){if(u===0||l.nodeType!==1||l.nodeName.toLowerCase()!=="img"&&!l.querySelector("img"))return 0;for(var o=l.childNodes[u-1];o.hasChildNodes();)o=o.lastChild;for(var s=i,c=[],f=0,d=!1,h=!1,m=!1,v,_=0;!m&&s;){if(s.nodeType>3){s=c.pop();continue}if(s.nodeType===3&&!h)_=0,v=f+s.length,!d&&a.start>=f&&a.start<=v&&(d=!0),d&&a.end>=f&&a.end<=v&&(h=!0),f=v;else if(s.nodeName.toLowerCase()==="img"&&_++,s===o)m=!0;else if(s.nodeType===1)for(var T=s.childNodes.length-1;T>=0;)c.push(s.childNodes[T]),T-=1;m||(s=c.pop())}return _},selectionContainsContent:function(i){var a=i.getSelection();if(!a||a.isCollapsed||!a.rangeCount)return!1;if(a.toString().trim()!=="")return!0;var l=this.getSelectedParentElement(a.getRangeAt(0));return!!(l&&(l.nodeName.toLowerCase()==="img"||l.nodeType===1&&l.querySelector("img")))},selectionInContentEditableFalse:function(i){var a,l=this.findMatchingSelectionParent(function(u){var o=u&&u.getAttribute("contenteditable");return o==="true"&&(a=!0),u.nodeName!=="#text"&&o==="false"},i);return!a&&l},getSelectionHtml:function(a){var l,u="",o=a.getSelection(),s,c;if(o.rangeCount){for(c=a.createElement("div"),l=0,s=o.rangeCount;l<s;l+=1)c.appendChild(o.getRangeAt(l).cloneContents());u=c.innerHTML}return u},getCaretOffsets:function(a,l){var u,o;return l||(l=window.getSelection().getRangeAt(0)),u=l.cloneRange(),o=l.cloneRange(),u.selectNodeContents(a),u.setEnd(l.endContainer,l.endOffset),o.selectNodeContents(a),o.setStart(l.endContainer,l.endOffset),{left:u.toString().length,right:o.toString().length}},rangeSelectsSingleNode:function(i){var a=i.startContainer;return a===i.endContainer&&a.hasChildNodes()&&i.endOffset===i.startOffset+1},getSelectedParentElement:function(i){return i?this.rangeSelectsSingleNode(i)&&i.startContainer.childNodes[i.startOffset].nodeType!==3?i.startContainer.childNodes[i.startOffset]:i.startContainer.nodeType===3?i.startContainer.parentNode:i.startContainer:null},getSelectedElements:function(i){var a=i.getSelection(),l,u,o;if(!a.rangeCount||a.isCollapsed||!a.getRangeAt(0).commonAncestorContainer)return[];if(l=a.getRangeAt(0),l.commonAncestorContainer.nodeType===3){for(u=[],o=l.commonAncestorContainer;o.parentNode&&o.parentNode.childNodes.length===1;)u.push(o.parentNode),o=o.parentNode;return u}return[].filter.call(l.commonAncestorContainer.getElementsByTagName("*"),function(s){return typeof a.containsNode=="function"?a.containsNode(s,!0):!0})},selectNode:function(i,a){var l=a.createRange();l.selectNodeContents(i),this.selectRange(a,l)},select:function(i,a,l,u,o){var s=i.createRange();return s.setStart(a,l),u?s.setEnd(u,o):s.collapse(!0),this.selectRange(i,s),s},clearSelection:function(i,a){a?i.getSelection().collapseToStart():i.getSelection().collapseToEnd()},moveCursor:function(i,a,l){this.select(i,a,l)},getSelectionRange:function(i){var a=i.getSelection();return a.rangeCount===0?null:a.getRangeAt(0)},selectRange:function(i,a){var l=i.getSelection();l.removeAllRanges(),l.addRange(a)},getSelectionStart:function(i){var a=i.getSelection().anchorNode,l=a&&a.nodeType===3?a.parentNode:a;return l}};e.selection=n}(),function(){function r(i,a){return i?i.some(function(l){if(typeof l.getInteractionElements!="function")return!1;var u=l.getInteractionElements();return u?(Array.isArray(u)||(u=[u]),u.some(function(o){return e.util.isDescendant(o,a,!0)})):!1}):!1}var n=function(i){this.base=i,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(i,a,l,u){var o=this.base.options.contentWindow,s=this.base.options.ownerDocument;i=e.util.isElement(i)||[o,s].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,function(c){c.addEventListener(a,l,u),this.events.push([c,a,l,u])}.bind(this))},detachDOMEvent:function(i,a,l,u){var o,s,c=this.base.options.contentWindow,f=this.base.options.ownerDocument;i&&(i=e.util.isElement(i)||[c,f].indexOf(i)>-1?[i]:i,Array.prototype.forEach.call(i,function(d){o=this.indexOfListener(d,a,l,u),o!==-1&&(s=this.events.splice(o,1)[0],s[0].removeEventListener(s[1],s[2],s[3]))}.bind(this)))},indexOfListener:function(i,a,l,u){var o,s,c;for(o=0,s=this.events.length;o<s;o=o+1)if(c=this.events[o],c[0]===i&&c[1]===a&&c[2]===l&&c[3]===u)return o;return-1},detachAllDOMEvents:function(){for(var i=this.events.pop();i;)i[0].removeEventListener(i[1],i[2],i[3]),i=this.events.pop()},detachAllEventsFromElement:function(i){for(var a=this.events.filter(function(s){return s&&s[0].getAttribute&&s[0].getAttribute("medium-editor-index")===i.getAttribute("medium-editor-index")}),l=0,u=a.length;l<u;l++){var o=a[l];this.detachDOMEvent(o[0],o[1],o[2],o[3])}},attachAllEventsToElement:function(i){this.listeners.editableInput&&(this.contentCache[i.getAttribute("medium-editor-index")]=i.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(a){this.attachDOMEvent(i,a.name,a.handler.bind(this))},this)},enableCustomEvent:function(i){this.disabledEvents[i]!==void 0&&delete this.disabledEvents[i]},disableCustomEvent:function(i){this.disabledEvents[i]=!0},attachCustomEvent:function(i,a){this.setupListener(i),this.customEvents[i]||(this.customEvents[i]=[]),this.customEvents[i].push(a)},detachCustomEvent:function(i,a){var l=this.indexOfCustomListener(i,a);l!==-1&&this.customEvents[i].splice(l,1)},indexOfCustomListener:function(i,a){return!this.customEvents[i]||!this.customEvents[i].length?-1:this.customEvents[i].indexOf(a)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(i,a,l){this.customEvents[i]&&!this.disabledEvents[i]&&this.customEvents[i].forEach(function(u){u(a,l)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(i){i.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(i){this.handleDocumentExecCommand(i)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var i=this.options.ownerDocument;if(!(!this.execCommandListener||!i.execCommand.listeners)){var a=i.execCommand.listeners.indexOf(this.execCommandListener);a!==-1&&i.execCommand.listeners.splice(a,1),i.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var i=this.options.ownerDocument;if(!i.execCommand.listeners){var a=function(u,o){i.execCommand.listeners&&i.execCommand.listeners.forEach(function(s){s({command:u[0],value:u[2],args:u,result:o})})},l=function(){var u=i.execCommand.orig.apply(this,arguments);if(!i.execCommand.listeners)return u;var o=Array.prototype.slice.call(arguments);return a(o,u),u};l.orig=i.execCommand,l.listeners=[],l.callListeners=a,i.execCommand=l}},unwrapExecCommand:function(){var i=this.options.ownerDocument;i.execCommand.orig&&(i.execCommand=i.execCommand.orig)},setupListener:function(i){if(!this.listeners[i]){switch(i){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(a){this.contentCache[a.getAttribute("medium-editor-index")]=a.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[i]=!0}},attachToEachElement:function(i,a){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(l){this.attachDOMEvent(l,i,a.bind(this))},this),this.eventsCache.push({name:i,handler:a})},cleanupElement:function(i){var a=i.getAttribute("medium-editor-index");a&&(this.detachAllEventsFromElement(i),this.contentCache&&delete this.contentCache[a])},focusElement:function(i){i.focus(),this.updateFocus(i,{target:i,type:"focus"})},updateFocus:function(i,a){var l=this.base.getFocusedElement(),u;l&&a.type==="click"&&this.lastMousedownTarget&&(e.util.isDescendant(l,this.lastMousedownTarget,!0)||r(this.base.extensions,this.lastMousedownTarget))&&(u=l),u||this.base.elements.some(function(s){return!u&&e.util.isDescendant(s,i,!0)&&(u=s),!!u},this);var o=!e.util.isDescendant(l,i,!0)&&!r(this.base.extensions,i);u!==l&&(l&&o&&(l.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",a,l)),u&&(u.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",a,u))),o&&this.triggerCustomEvent("externalInteraction",a)},updateInput:function(i,a){if(this.contentCache){var l=i.getAttribute("medium-editor-index"),u=i.innerHTML;u!==this.contentCache[l]&&this.triggerCustomEvent("editableInput",a,i),this.contentCache[l]=u}},handleDocumentSelectionChange:function(i){if(i.currentTarget&&i.currentTarget.activeElement){var a=i.currentTarget.activeElement,l;this.base.elements.some(function(u){return e.util.isDescendant(u,a,!0)?(l=u,!0):!1},this),l&&this.updateInput(l,{target:a,currentTarget:l})}},handleDocumentExecCommand:function(){var i=this.base.getFocusedElement();i&&this.updateInput(i,{target:i,currentTarget:i})},handleBodyClick:function(i){this.updateFocus(i.target,i)},handleBodyFocus:function(i){this.updateFocus(i.target,i)},handleBodyMousedown:function(i){this.lastMousedownTarget=i.target},handleInput:function(i){this.updateInput(i.currentTarget,i)},handleClick:function(i){this.triggerCustomEvent("editableClick",i,i.currentTarget)},handleBlur:function(i){this.triggerCustomEvent("editableBlur",i,i.currentTarget)},handleKeypress:function(i){if(this.triggerCustomEvent("editableKeypress",i,i.currentTarget),this.keypressUpdateInput){var a={target:i.target,currentTarget:i.currentTarget};setTimeout(function(){this.updateInput(a.currentTarget,a)}.bind(this),0)}},handleKeyup:function(i){this.triggerCustomEvent("editableKeyup",i,i.currentTarget)},handleMouseover:function(i){this.triggerCustomEvent("editableMouseover",i,i.currentTarget)},handleDragging:function(i){this.triggerCustomEvent("editableDrag",i,i.currentTarget)},handleDrop:function(i){this.triggerCustomEvent("editableDrop",i,i.currentTarget)},handlePaste:function(i){this.triggerCustomEvent("editablePaste",i,i.currentTarget)},handleKeydown:function(i){if(this.triggerCustomEvent("editableKeydown",i,i.currentTarget),e.util.isKey(i,e.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.ENTER)||i.ctrlKey&&e.util.isKey(i,e.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",i,i.currentTarget);if(e.util.isKey(i,e.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",i,i.currentTarget);if(e.util.isKey(i,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",i,i.currentTarget)}},e.Events=n}(),function(){var r=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){r.isBuiltInButton(n)?e.Extension.call(this,this.defaults[n]):e.Extension.call(this,n)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action=="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria=="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames=="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var n=this.document.createElement("button"),i=this.contentDefault,a=this.getAria(),l=this.getEditorOption("buttonLabels");return n.classList.add("medium-editor-action"),n.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(u){n.classList.add(u)}),n.setAttribute("data-action",this.getAction()),a&&(n.setAttribute("title",a),n.setAttribute("aria-label",a)),this.attrs&&Object.keys(this.attrs).forEach(function(u){n.setAttribute(u,this.attrs[u])},this),l==="fontawesome"&&this.contentFA&&(i=this.contentFA),n.innerHTML=i,n},handleClick:function(n){n.preventDefault(),n.stopPropagation();var i=this.getAction();i&&this.execAction(i)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var n=null;return this.useQueryState&&(n=this.base.queryCommandState(this.getAction())),n},isAlreadyApplied:function(n){var i=!1,a=this.getTagNames(),l,u;return this.knownState===!1||this.knownState===!0?this.knownState:(a&&a.length>0&&(i=a.indexOf(n.nodeName.toLowerCase())!==-1),!i&&this.style&&(l=this.style.value.split("|"),u=this.window.getComputedStyle(n,null).getPropertyValue(this.style.prop),l.forEach(function(o){this.knownState||(i=u.indexOf(o)!==-1,(i||this.style.prop!=="text-decoration")&&(this.knownState=i))},this)),i)}});r.isBuiltInButton=function(n){return typeof n=="string"&&e.extensions.button.prototype.defaults.hasOwnProperty(n)},e.extensions.button=r}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var r=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var n=this.base.getExtensionByName("toolbar");n&&n.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var n=this.base.getExtensionByName("toolbar");n&&n.hideToolbarDefaultActions()},setToolbarPosition:function(){var n=this.base.getExtensionByName("toolbar");n&&n.setToolbarPosition()}});e.extensions.form=r}(),function(){var r=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(n){n.preventDefault(),n.stopPropagation();var i=e.selection.getSelectionRange(this.document);return i.startContainer.nodeName.toLowerCase()==="a"||i.endContainer.nodeName.toLowerCase()==="a"||e.util.getClosestTag(e.selection.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(n){e.util.isKey(n,e.util.keyCode.K)&&e.util.isMetaCtrlKey(n)&&!n.shiftKey&&this.handleClick(n)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var n=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return n.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),n.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&n.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&n.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),n.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(n){var i=this.getInput(),a=this.getAnchorTargetCheckbox(),l=this.getAnchorButtonCheckbox();if(n=n||{value:""},typeof n=="string"&&(n={value:n}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),i.value=n.value,i.focus(),a&&(a.checked=n.target==="_blank"),l){var u=n.buttonClass?n.buttonClass.split(" "):[];l.checked=u.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var n=this.getAnchorTargetCheckbox(),i=this.getAnchorButtonCheckbox(),a={value:this.getInput().value.trim()};return this.linkValidation&&(a.value=this.checkLinkFormat(a.value)),a.target="_self",n&&n.checked&&(a.target="_blank"),i&&i.checked&&(a.buttonClass=this.customClassOption),a},doFormSave:function(){var n=this.getFormOpts();this.completeFormSave(n)},completeFormSave:function(n){this.base.restoreSelection(),this.execAction(this.action,n),this.base.checkSelection()},ensureEncodedUri:function(n){return n===decodeURI(n)?encodeURI(n):n},ensureEncodedUriComponent:function(n){return n===decodeURIComponent(n)?encodeURIComponent(n):n},ensureEncodedParam:function(n){var i=n.split("="),a=i[0],l=i[1];return a+(l===void 0?"":"="+this.ensureEncodedUriComponent(l))},ensureEncodedQuery:function(n){return n.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(n){var i=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,a=i.test(n),l="",u=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,o=n.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),s=o[1],c=o[2],f=o[3];if(u.test(n))return"tel:"+n;if(!a){var d=s.split("/")[0];(d.match(/.+(\.|:).+/)||d==="localhost")&&(l="http://")}return l+this.ensureEncodedUri(s)+(c===void 0?"":"?"+this.ensureEncodedQuery(c))+(f===void 0?"":"#"+f)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(n){var i=n.querySelector(".medium-editor-toolbar-close"),a=n.querySelector(".medium-editor-toolbar-save"),l=n.querySelector(".medium-editor-toolbar-input");this.on(n,"click",this.handleFormClick.bind(this)),this.on(l,"keyup",this.handleTextboxKeyup.bind(this)),this.on(i,"click",this.handleCloseClick.bind(this)),this.on(a,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var n=this.document,i=n.createElement("div");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),i.innerHTML=this.getTemplate(),this.attachFormEvents(i),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(n){if(n.keyCode===e.util.keyCode.ENTER){n.preventDefault(),this.doFormSave();return}n.keyCode===e.util.keyCode.ESCAPE&&(n.preventDefault(),this.doFormCancel())},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault(),this.doFormSave()},handleCloseClick:function(n){n.preventDefault(),this.doFormCancel()}});e.extensions.anchor=r}(),function(){var r=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var n=this.document.createElement("div");return n.id="medium-editor-anchor-preview-"+this.getEditorId(),n.className="medium-editor-anchor-preview",n.innerHTML=this.getTemplate(),this.on(n,"click",this.handleClick.bind(this)),n},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(n){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||n.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=n.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=n.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=n,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(n){n=n||this.activeAnchor;var i=this.window.innerWidth,a=this.anchorPreview.offsetHeight,l=n.getBoundingClientRect(),u=this.diffLeft,o=this.diffTop,s=this.getEditorOption("elementsContainer"),c=["absolute","fixed"].indexOf(window.getComputedStyle(s).getPropertyValue("position"))>-1,f={},d,h,m,v,_;d=this.anchorPreview.offsetWidth/2;var T=this.base.getExtensionByName("toolbar");T&&(u=T.diffLeft,o=T.diffTop),h=u-d,c?(v=s.getBoundingClientRect(),["top","left"].forEach(function(k){f[k]=l[k]-v[k]}),f.width=l.width,f.height=l.height,l=f,i=v.width,_=s.scrollTop):_=this.window.pageYOffset,m=l.left+l.width/2,_+=a+l.top+l.height-o-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(_)+"px",this.anchorPreview.style.right="initial",m<d?(this.anchorPreview.style.left=h+d+"px",this.anchorPreview.style.right="initial"):i-m<d?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=h+m+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(n){var i=this.base.getExtensionByName("anchor"),a=this.activeAnchor;i&&a&&(n.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(a){var l={value:a.attributes.href.value,target:a.getAttribute("target"),buttonClass:a.getAttribute("class")};i.showForm(l),a=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(n){var i=e.util.getClosestTag(n.target,"a");if(i!==!1){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML)))return!0;var a=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&a&&a.isDisplayed&&a.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=new Date().getTime(),this.hovering=!0},handlePreviewMouseout:function(n){(!n.relatedTarget||!/anchor-preview/.test(n.relatedTarget.className))&&(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var n=new Date().getTime()-this.lastOver;n>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=new Date().getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=r}(),function(){var r,n,i,a,l;r=[" ","	",`
`,"\r"," "," "," "," "," ","\u2028","\u2029"],n="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",i="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+n+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+n+"))",a=new RegExp("^("+n+")$","i"),l=new RegExp(i,"gi");function u(s){return!e.util.getClosestTag(s,"a")}var o=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var s=0,c=0;c<this.window._mediumEditors.length;c++){var f=this.window._mediumEditors[c];f!==null&&f.getExtensionByName("autoLink")!==void 0&&s++}return s===1},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(s,c){this.performLinking(c)},onKeypress:function(s){this.disableEventHandling||e.util.isKey(s,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var c=this.base.exportSelection();this.performLinking(s.target)&&this.base.importSelection(c,!0)}catch(f){window.console&&window.console.error("Failed to perform linking",f),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(s){var c=e.util.splitByBlockElements(s),f=!1;c.length===0&&(c=[s]);for(var d=0;d<c.length;d++)f=this.removeObsoleteAutoLinkSpans(c[d])||f,f=this.performLinkingWithinElement(c[d])||f;return this.base.events.updateInput(s,{target:s,currentTarget:s}),f},removeObsoleteAutoLinkSpans:function(s){if(!s||s.nodeType===3)return!1;for(var c=s.querySelectorAll('span[data-auto-link="true"]'),f=!1,d=0;d<c.length;d++){var h=c[d].textContent;if(h.indexOf("://")===-1&&(h=e.util.ensureUrlHasProtocol(h)),c[d].getAttribute("data-href")!==h&&u(c[d])){f=!0;var m=h.replace(/\s+$/,"");if(c[d].getAttribute("data-href")===m){var v=h.length-m.length,_=e.util.splitOffDOMTree(c[d],this.splitTextBeforeEnd(c[d],v));c[d].parentNode.insertBefore(_,c[d].nextSibling)}else e.util.unwrap(c[d],this.document)}}return f},splitTextBeforeEnd:function(s,c){for(var f=this.document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null,!1),d=!0;d;)d=f.lastChild()!==null;for(var h,m,v;c>0&&v!==null;)h=f.currentNode,m=h.nodeValue,m.length>c?(v=h.splitText(m.length-c),c=0):(v=f.previousNode(),c-=m.length);return v},performLinkingWithinElement:function(s){for(var c=this.findLinkableText(s),f=!1,d=0;d<c.length;d++){var h=e.util.findOrCreateMatchingTextNodes(this.document,s,c[d]);this.shouldNotLink(h)||this.createAutoLink(h,c[d].href)}return f},shouldNotLink:function(s){for(var c=!1,f=0;f<s.length&&c===!1;f++)c=!!e.util.traverseUp(s[f],function(d){return d.nodeName.toLowerCase()==="a"||d.getAttribute&&d.getAttribute("data-auto-link")==="true"});return c},findLinkableText:function(s){for(var c=s.textContent,f=null,d=[];(f=l.exec(c))!==null;){var h=!0,m=f.index+f[0].length;h=(f.index===0||r.indexOf(c[f.index-1])!==-1)&&(m===c.length||r.indexOf(c[m])!==-1),h=h&&(f[0].indexOf("/")!==-1||a.test(f[0].split(".").pop().split("?").shift())),h&&d.push({href:f[0],start:f.index,end:m})}return d},createAutoLink:function(s,c){c=e.util.ensureUrlHasProtocol(c);var f=e.util.createLink(this.document,s,c,this.getEditorOption("targetBlank")?"_blank":null),d=this.document.createElement("span");for(d.setAttribute("data-auto-link","true"),d.setAttribute("data-href",c),f.insertBefore(d,f.firstChild);f.childNodes.length>1;)d.appendChild(f.childNodes[1])}});e.extensions.autoLink=o}(),function(){var r="medium-editor-dragover";function n(a){var l=e.util.getContainerEditorElement(a),u=Array.prototype.slice.call(l.parentElement.querySelectorAll("."+r));u.forEach(function(o){o.classList.remove(r)})}var i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(a){a.preventDefault(),a.dataTransfer.dropEffect="copy";var l=a.target.classList?a.target:a.target.parentElement;n(l),a.type==="dragover"&&l.classList.add(r)},handleDrop:function(a){a.preventDefault(),a.stopPropagation(),this.base.selectElement(a.target);var l=this.base.exportSelection();l.start=l.end,this.base.importSelection(l),a.dataTransfer.files&&Array.prototype.slice.call(a.dataTransfer.files).forEach(function(u){this.isAllowedFile(u)&&u.type.match("image")&&this.insertImageFile(u)},this),n(a.target)},isAllowedFile:function(a){return this.allowedTypes.some(function(l){return!!a.type.match(l)})},insertImageFile:function(a){if(typeof FileReader=="function"){var l=new FileReader;l.readAsDataURL(a),l.addEventListener("load",function(u){var o=this.document.createElement("img");o.src=u.target.result,e.util.insertHTMLCommand(this.document,o.outerHTML)}.bind(this))}}});e.extensions.fileDragging=i}(),function(){var r=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(n){var i=n.key.charCodeAt(0);this.keys[i]||(this.keys[i]=[]),this.keys[i].push(n)},this)},handleKeydown:function(n){var i=e.util.getKeyCode(n);if(this.keys[i]){var a=e.util.isMetaCtrlKey(n),l=!!n.shiftKey,u=!!n.altKey;this.keys[i].forEach(function(o){o.meta===a&&o.shift===l&&(o.alt===u||o.alt===void 0)&&(n.preventDefault(),n.stopPropagation(),typeof o.command=="function"?o.command.apply(this):o.command!==!1&&this.execAction(o.command))},this)}}});e.extensions.keyboardCommands=r}(),function(){var r=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(n){if(n.preventDefault(),n.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontName")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(n){var i=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=n||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var n=this.document,i=n.createElement("div"),a=n.createElement("select"),l=n.createElement("a"),u=n.createElement("a"),o;i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this));for(var s=0;s<this.fonts.length;s++)o=n.createElement("option"),o.innerHTML=this.fonts[s],o.value=this.fonts[s],a.appendChild(o);return a.className="medium-editor-toolbar-select",i.appendChild(a),this.on(a,"change",this.handleFontChange.bind(this)),u.setAttribute("href","#"),u.className="medium-editor-toobar-save",u.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(u),this.on(u,"click",this.handleSaveClick.bind(this),!0),l.setAttribute("href","#"),l.className="medium-editor-toobar-close",l.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(l),this.on(l,"click",this.handleCloseClick.bind(this)),i},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(n){n.nodeName.toLowerCase()==="font"&&n.hasAttribute("face")&&n.removeAttribute("face")})},handleFontChange:function(){var n=this.getSelect().value;n===""?this.clearFontName():this.execAction("fontName",{value:n})},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault(),this.doFormSave()},handleCloseClick:function(n){n.preventDefault(),this.doFormCancel()}});e.extensions.fontName=r}(),function(){var r=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(n){if(n.preventDefault(),n.stopPropagation(),!this.isDisplayed()){var i=this.document.queryCommandValue("fontSize")+"";this.showForm(i)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(n){var i=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),i.value=n||"",i.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var n=this.document,i=n.createElement("div"),a=n.createElement("input"),l=n.createElement("a"),u=n.createElement("a");return i.className="medium-editor-toolbar-form",i.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(i,"click",this.handleFormClick.bind(this)),a.setAttribute("type","range"),a.setAttribute("min","1"),a.setAttribute("max","7"),a.className="medium-editor-toolbar-input",i.appendChild(a),this.on(a,"change",this.handleSliderChange.bind(this)),u.setAttribute("href","#"),u.className="medium-editor-toobar-save",u.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",i.appendChild(u),this.on(u,"click",this.handleSaveClick.bind(this),!0),l.setAttribute("href","#"),l.className="medium-editor-toobar-close",l.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",i.appendChild(l),this.on(l,"click",this.handleCloseClick.bind(this)),i},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(n){n.nodeName.toLowerCase()==="font"&&n.hasAttribute("size")&&n.removeAttribute("size")})},handleSliderChange:function(){var n=this.getInput().value;n==="4"?this.clearFontSize():this.execAction("fontSize",{value:n})},handleFormClick:function(n){n.stopPropagation()},handleSaveClick:function(n){n.preventDefault(),this.doFormSave()},handleCloseClick:function(n){n.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=r}(),function(){var r="%ME_PASTEBIN%",n=null,i=null,a=function(s){s.stopPropagation()};function l(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function u(s,c,f){var d=s.clipboardData||c.clipboardData||f.dataTransfer,h={};if(!d)return h;if(d.getData){var m=d.getData("Text");m&&m.length>0&&(h["text/plain"]=m)}if(d.types)for(var v=0;v<d.types.length;v++){var _=d.types[v];h[_]=d.getData(_)}return h}var o=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(s){this.on(s,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(s,c){this.on(c,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(s,c){if(!s.defaultPrevented){var f=u(s,this.window,this.document),d=f["text/html"],h=f["text/plain"];this.window.clipboardData&&s.clipboardData===void 0&&!d&&(d=h),(d||h)&&(s.preventDefault(),this.doPaste(d,h,c))}},doPaste:function(s,c,f){var d,h="",m;if(this.cleanPastedHTML&&s)return this.cleanPaste(s);if(c){if(this.getEditorOption("disableReturn")||f&&f.getAttribute("data-disable-return"))h=e.util.htmlEntities(c);else if(d=c.split(/[\r\n]+/g),d.length>1)for(m=0;m<d.length;m+=1)d[m]!==""&&(h+="<p>"+e.util.htmlEntities(d[m])+"</p>");else h=e.util.htmlEntities(d[0]);e.util.insertHTMLCommand(this.document,h)}},handlePasteBinPaste:function(s){if(s.defaultPrevented){this.removePasteBin();return}var c=u(s,this.window,this.document),f=c["text/html"],d=c["text/plain"],h=i;if(!this.cleanPastedHTML||f){s.preventDefault(),this.removePasteBin(),this.doPaste(f,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h);return}setTimeout(function(){this.cleanPastedHTML&&(f=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(f,d,h),this.trigger("editablePaste",{currentTarget:h,target:h},h)}.bind(this),0)},handleKeydown:function(s,c){e.util.isKey(s,e.util.keyCode.V)&&e.util.isMetaCtrlKey(s)&&(s.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(c))},createPasteBin:function(s){var c,f=e.selection.getSelectionRange(this.document),d=this.window.pageYOffset;i=s,f&&(c=f.getClientRects(),c.length?d+=c[0].top:f.startContainer.getBoundingClientRect!==void 0?d+=f.startContainer.getBoundingClientRect().top:d+=f.getBoundingClientRect().top),n=f;var h=this.document.createElement("div");h.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),h.setAttribute("style","border: 1px red solid; position: absolute; top: "+d+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),h.setAttribute("contentEditable",!0),h.innerHTML=r,this.document.body.appendChild(h),this.on(h,"focus",a),this.on(h,"focusin",a),this.on(h,"focusout",a),h.focus(),e.selection.selectNode(h,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(h,"paste",this.boundHandlePaste)},removePasteBin:function(){n!==null&&(e.selection.selectRange(this.document,n),n=null),i!==null&&(i=null);var s=this.getPasteBin();s&&s&&(this.off(s,"focus",a),this.off(s,"focusin",a),this.off(s,"focusout",a),this.off(s,"paste",this.boundHandlePaste),s.parentElement.removeChild(s))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var s=this.getPasteBin();if(!s||s.firstChild&&s.firstChild.id==="mcepastebin")return!1;var c=s.innerHTML;return!c||c===r?!1:c},cleanPaste:function(s){var c,f,d,h,m=/<p|<br|<div/.test(s),v=[].concat(this.preCleanReplacements||[],l(),this.cleanReplacements||[]);for(c=0;c<v.length;c+=1)s=s.replace(v[c][0],v[c][1]);if(!m)return this.pasteHTML(s);for(d=this.document.createElement("div"),d.innerHTML="<p>"+s.split("<br><br>").join("</p><p>")+"</p>",f=d.querySelectorAll("a,p,div,br"),c=0;c<f.length;c+=1)switch(h=f[c],h.innerHTML=h.innerHTML.replace(/\n/gi," "),h.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(h);break;case"br":this.filterLineBreak(h);break}this.pasteHTML(d.innerHTML)},pasteHTML:function(s,c){c=e.util.defaults({},c,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var f,d,h,m,v=this.document.createDocumentFragment();for(v.appendChild(this.document.createElement("body")),m=v.querySelector("body"),m.innerHTML=s,this.cleanupSpans(m),f=m.querySelectorAll("*"),h=0;h<f.length;h+=1)d=f[h],d.nodeName.toLowerCase()==="a"&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(d),e.util.cleanupAttrs(d,c.cleanAttrs),e.util.cleanupTags(d,c.cleanTags),e.util.unwrapTags(d,c.unwrapTags);e.util.insertHTMLCommand(this.document,m.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(s){return s&&(s.nodeName.toLowerCase()==="p"||s.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(s){/^\s*$/.test(s.textContent)&&s.parentNode&&s.parentNode.removeChild(s)},filterLineBreak:function(s){this.isCommonBlock(s.previousElementSibling)?this.removeWithParent(s):this.isCommonBlock(s.parentNode)&&(s.parentNode.firstChild===s||s.parentNode.lastChild===s)?this.removeWithParent(s):s.parentNode&&s.parentNode.childElementCount===1&&s.parentNode.textContent===""&&this.removeWithParent(s)},removeWithParent:function(s){s&&s.parentNode&&(s.parentNode.parentNode&&s.parentNode.childElementCount===1?s.parentNode.parentNode.removeChild(s.parentNode):s.parentNode.removeChild(s))},cleanupSpans:function(s){var c,f,d,h=s.querySelectorAll(".replace-with"),m=function(v){return v&&v.nodeName!=="#text"&&v.getAttribute("contenteditable")==="false"};for(c=0;c<h.length;c+=1)f=h[c],d=this.document.createElement(f.classList.contains("bold")?"b":"i"),f.classList.contains("bold")&&f.classList.contains("italic")?d.innerHTML="<i>"+f.innerHTML+"</i>":d.innerHTML=f.innerHTML,f.parentNode.replaceChild(d,f);for(h=s.querySelectorAll("span"),c=0;c<h.length;c+=1){if(f=h[c],e.util.traverseUp(f,m))return!1;e.util.unwrap(f,this.document)}}});e.extensions.paste=o}(),function(){var r=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(n,i){this.initElement(i)},initElement:function(n){n.getAttribute("data-placeholder")||n.setAttribute("data-placeholder",this.text),this.updatePlaceholder(n)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(n,i){this.cleanupElement(i)},cleanupElement:function(n){n.getAttribute("data-placeholder")===this.text&&n.removeAttribute("data-placeholder")},showPlaceholder:function(n){n&&(e.util.isFF&&n.childNodes.length===0?(n.classList.add("medium-editor-placeholder-relative"),n.classList.remove("medium-editor-placeholder")):(n.classList.add("medium-editor-placeholder"),n.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(n){n&&(n.classList.remove("medium-editor-placeholder"),n.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(n,i){if(n.querySelector("img, blockquote, ul, ol, table")||n.textContent.replace(/^\s+|\s+$/g,"")!=="")return this.hidePlaceholder(n);i||this.showPlaceholder(n)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(n,i){var a=this.hideOnClick&&i===this.base.getFocusedElement();this.updatePlaceholder(i,a)},handleFocus:function(n,i){this.hidePlaceholder(i)},handleBlur:function(n,i){this.updatePlaceholder(i)}});e.extensions.placeholder=r}(),function(){var r=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(n,i){return this.base.extensions.forEach(function(a){if(a!==this)return n.apply(i||this,arguments)},this)},createToolbar:function(){var n=this.document.createElement("div");return n.id="medium-editor-toolbar-"+this.getEditorId(),n.className="medium-editor-toolbar",this.static?n.className+=" static-toolbar":this.relativeContainer?n.className+=" medium-editor-relative-toolbar":n.className+=" medium-editor-stalker-toolbar",n.appendChild(this.createToolbarButtons()),this.forEachExtension(function(i){i.hasForm&&n.appendChild(i.getForm())}),this.attachEventHandlers(),n},createToolbarButtons:function(){var n=this.document.createElement("ul"),i,a,l,u,o,s;return n.id="medium-editor-toolbar-actions"+this.getEditorId(),n.className="medium-editor-toolbar-actions",n.style.display="block",this.buttons.forEach(function(c){typeof c=="string"?(o=c,s=null):(o=c.name,s=c),u=this.base.addBuiltInExtension(o,s),u&&typeof u.getButton=="function"&&(a=u.getButton(this.base),i=this.document.createElement("li"),e.util.isElement(a)?i.appendChild(a):i.innerHTML=a,n.appendChild(i))},this),l=n.querySelectorAll("button"),l.length>0&&(l[0].classList.add(this.firstButtonClass),l[l.length-1].classList.add(this.lastButtonClass)),n},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(n){if(n&&n.target&&e.util.isDescendant(this.getToolbarElement(),n.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(n){n.hasForm&&n.isDisplayed()&&n.hideForm()})},multipleBlockElementsSelected:function(){var n=/<[^\/>][^>]*><\/[^>]+>/gim,i=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),a=e.selection.getSelectionHtml(this.document).replace(n,""),l=a.match(i);return!!l&&l.length>1},modifySelection:function(){var n=this.window.getSelection(),i=n.getRangeAt(0);if(this.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var a=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),i.startContainer,this.document);if(a){for(var l=0;a.nodeValue.substr(l,1).trim().length===0;)l=l+1;i=e.selection.select(this.document,a,l,i.endContainer,i.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var n=e.selection.getSelectionElement(this.window);if(!n||this.getEditorElements().indexOf(n)===-1||n.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(n){typeof n.isActive=="function"&&typeof n.setInactive=="function"&&n.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var n=[],i=null,a=e.selection.getSelectionRange(this.document),l,u=function(o){typeof o.checkState=="function"?o.checkState(l):typeof o.isActive=="function"&&typeof o.isAlreadyApplied=="function"&&typeof o.setActive=="function"&&!o.isActive()&&o.isAlreadyApplied(l)&&o.setActive()};if(a&&(this.forEachExtension(function(o){if(typeof o.queryCommandState=="function"&&(i=o.queryCommandState(),i!==null)){i&&typeof o.setActive=="function"&&o.setActive();return}n.push(o)}),l=e.selection.getSelectedParentElement(a),!!this.getEditorElements().some(function(o){return e.util.isDescendant(o,l,!0)})))for(;l&&(n.forEach(u),!e.util.isMediumEditorElement(l));)l=l.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var n=this.base.getFocusedElement(),i=this.window.getSelection();if(!n)return this;(this.static||!i.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(n):this.positionToolbar(i)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(n){this.getToolbarElement().style.left="0";var i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,a=this.window.innerWidth,l=this.getToolbarElement(),u=n.getBoundingClientRect(),o=u.top+i,s=u.left+u.width/2,c=l.offsetHeight,f=l.offsetWidth,d=f/2,h;switch(this.sticky?i>o+n.offsetHeight-c-this.stickyTopOffset?(l.style.top=o+n.offsetHeight-c+"px",l.classList.remove("medium-editor-sticky-toolbar")):i>o-c-this.stickyTopOffset?(l.classList.add("medium-editor-sticky-toolbar"),l.style.top=this.stickyTopOffset+"px"):(l.classList.remove("medium-editor-sticky-toolbar"),l.style.top=o-c+"px"):l.style.top=o-c+"px",this.align){case"left":h=u.left;break;case"right":h=u.right-f;break;case"center":h=s-d;break}h<0?h=0:h+f>a&&(h=a-Math.ceil(f)-1),l.style.left=h+"px"},positionToolbar:function(n){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var i=n.getRangeAt(0),a=i.getBoundingClientRect();(!a||a.height===0&&a.width===0&&i.startContainer===i.endContainer)&&(i.startContainer.nodeType===1&&i.startContainer.querySelector("img")?a=i.startContainer.querySelector("img").getBoundingClientRect():a=i.startContainer.getBoundingClientRect());var l=this.window.innerWidth,u=this.getToolbarElement(),o=u.offsetHeight,s=u.offsetWidth,c=s/2,f=50,d=this.diffLeft-c,h=this.getEditorOption("elementsContainer"),m=["absolute","fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position"))>-1,v={},_={},T,k;m?(k=h.getBoundingClientRect(),["top","left"].forEach(function(g){_[g]=a[g]-k[g]}),_.width=a.width,_.height=a.height,a=_,l=k.width,v.top=h.scrollTop):v.top=this.window.pageYOffset,T=a.left+a.width/2,v.top+=a.top-o,a.top<f?(u.classList.add("medium-toolbar-arrow-over"),u.classList.remove("medium-toolbar-arrow-under"),v.top+=f+a.height-this.diffTop):(u.classList.add("medium-toolbar-arrow-under"),u.classList.remove("medium-toolbar-arrow-over"),v.top+=this.diffTop),T<c?(v.left=d+c,v.right="initial"):l-T<c?(v.left="auto",v.right=0):(v.left=d+T,v.right="initial"),["top","left","right"].forEach(function(g){u.style[g]=v[g]+(isNaN(v[g])?"":"px")})}});e.extensions.toolbar=r}(),function(){var r=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(n){var i="medium-editor-dragover";n.preventDefault(),n.dataTransfer.dropEffect="copy",n.type==="dragover"?n.target.classList.add(i):n.type==="dragleave"&&n.target.classList.remove(i)},handleDrop:function(n){var i="medium-editor-dragover",a;n.preventDefault(),n.stopPropagation(),n.dataTransfer.files&&(a=Array.prototype.slice.call(n.dataTransfer.files,0),a.some(function(l){if(l.type.match("image")){var u,o;u=new FileReader,u.readAsDataURL(l),o="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+o+'" />'),u.onload=function(){var s=this.document.getElementById(o);s&&(s.removeAttribute("id"),s.removeAttribute("class"),s.src=u.result)}.bind(this)}}.bind(this))),n.target.classList.remove(i)}});e.extensions.imageDragging=r}(),function(){function r(p){var w=e.selection.getSelectionStart(this.options.ownerDocument),b=w.textContent,E=e.selection.getCaretOffsets(w);(b[E.left-1]===void 0||b[E.left-1].trim()===""||b[E.left]!==void 0&&b[E.left].trim()==="")&&p.preventDefault()}function n(p,w){if(this.options.disableReturn||w.getAttribute("data-disable-return"))p.preventDefault();else if(this.options.disableDoubleReturn||w.getAttribute("data-disable-double-return")){var b=e.selection.getSelectionStart(this.options.ownerDocument);(b&&b.textContent.trim()===""&&b.nodeName.toLowerCase()!=="li"||b.previousElementSibling&&b.previousElementSibling.nodeName.toLowerCase()!=="br"&&b.previousElementSibling.textContent.trim()==="")&&p.preventDefault()}}function i(p){var w=e.selection.getSelectionStart(this.options.ownerDocument),b=w&&w.nodeName.toLowerCase();b==="pre"&&(p.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(w)&&(p.preventDefault(),p.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function a(p){var w,b=e.selection.getSelectionStart(this.options.ownerDocument),E=b.nodeName.toLowerCase(),S=/^(\s+|<br\/?>)?$/i,D=/h\d/i;e.util.isKey(p,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&b.previousElementSibling&&D.test(E)&&e.selection.getCaretOffsets(b).left===0?e.util.isKey(p,e.util.keyCode.BACKSPACE)&&S.test(b.previousElementSibling.innerHTML)?(b.previousElementSibling.parentNode.removeChild(b.previousElementSibling),p.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(p,e.util.keyCode.ENTER)&&(w=this.options.ownerDocument.createElement("p"),w.innerHTML="<br>",b.previousElementSibling.parentNode.insertBefore(w,b),p.preventDefault()):e.util.isKey(p,e.util.keyCode.DELETE)&&b.nextElementSibling&&b.previousElementSibling&&!D.test(E)&&S.test(b.innerHTML)&&D.test(b.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,b.nextElementSibling),b.previousElementSibling.parentNode.removeChild(b),p.preventDefault()):e.util.isKey(p,e.util.keyCode.BACKSPACE)&&E==="li"&&S.test(b.innerHTML)&&!b.previousElementSibling&&!b.parentElement.previousElementSibling&&b.nextElementSibling&&b.nextElementSibling.nodeName.toLowerCase()==="li"?(w=this.options.ownerDocument.createElement("p"),w.innerHTML="<br>",b.parentElement.parentElement.insertBefore(w,b.parentElement),e.selection.moveCursor(this.options.ownerDocument,w),b.parentElement.removeChild(b),p.preventDefault()):e.util.isKey(p,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(b,"blockquote")!==!1&&e.selection.getCaretOffsets(b).left===0?(p.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p")):e.util.isKey(p,e.util.keyCode.ENTER)&&e.util.getClosestTag(b,"blockquote")!==!1&&e.selection.getCaretOffsets(b).right===0?(w=this.options.ownerDocument.createElement("p"),w.innerHTML="<br>",b.parentElement.insertBefore(w,b.nextSibling),e.selection.moveCursor(this.options.ownerDocument,w),p.preventDefault()):e.util.isKey(p,e.util.keyCode.BACKSPACE)&&e.util.isMediumEditorElement(b.parentElement)&&!b.previousElementSibling&&b.nextElementSibling&&S.test(b.innerHTML)&&(p.preventDefault(),e.selection.moveCursor(this.options.ownerDocument,b.nextSibling),b.parentElement.removeChild(b))}function l(p){var w=e.selection.getSelectionStart(this.options.ownerDocument),b;w&&(e.util.isMediumEditorElement(w)&&w.children.length===0&&!e.util.isBlockContainer(w)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),e.util.isKey(p,e.util.keyCode.ENTER)&&!e.util.isListItem(w)&&!e.util.isBlockContainer(w)&&(b=w.nodeName.toLowerCase(),b==="a"?this.options.ownerDocument.execCommand("unlink",!1,null):!p.shiftKey&&!p.ctrlKey&&this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function u(p,w){var b=w.parentNode.querySelector('textarea[medium-editor-textarea-id="'+w.getAttribute("medium-editor-textarea-id")+'"]');b&&(b.value=w.innerHTML.trim())}function o(p){p._mediumEditors||(p._mediumEditors=[null]),this.id||(this.id=p._mediumEditors.length),p._mediumEditors[this.id]=this}function s(p){!p._mediumEditors||!p._mediumEditors[this.id]||(p._mediumEditors[this.id]=null)}function c(p,w,b){var E=[];if(p||(p=[]),typeof p=="string"&&(p=w.querySelectorAll(p)),e.util.isElement(p)&&(p=[p]),b)for(var S=0;S<p.length;S++){var D=p[S];e.util.isElement(D)&&!D.getAttribute("data-medium-editor-element")&&!D.getAttribute("medium-editor-textarea-id")&&E.push(D)}else E=Array.prototype.slice.apply(p);return E}function f(p){var w=p.parentNode.querySelector('textarea[medium-editor-textarea-id="'+p.getAttribute("medium-editor-textarea-id")+'"]');w&&(w.classList.remove("medium-editor-hidden"),w.removeAttribute("medium-editor-textarea-id")),p.parentNode&&p.parentNode.removeChild(p)}function d(p,w){return Object.keys(w).forEach(function(b){p[b]===void 0&&(p[b]=w[b])}),p}function h(p,w,b){var E={window:b.options.contentWindow,document:b.options.ownerDocument,base:b};return p=d(p,E),typeof p.init=="function"&&p.init(),p.name||(p.name=w),p}function m(){return this.elements.every(function(p){return!!p.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function v(){return m.call(this)?this.options.anchorPreview!==!1:!1}function _(){return this.options.placeholder!==!1}function T(){return this.options.autoLink!==!1}function k(){return this.options.imageDragging!==!1}function g(){return this.options.keyboardCommands!==!1}function C(){return!this.options.extensions.imageDragging}function y(p){for(var w=this.options.ownerDocument.createElement("div"),b=Date.now(),E="medium-editor-"+b,S=p.attributes;this.options.ownerDocument.getElementById(E);)b++,E="medium-editor-"+b;w.className=p.className,w.id=E,w.innerHTML=p.value,p.setAttribute("medium-editor-textarea-id",E);for(var D=0,j=S.length;D<j;D++)w.hasAttribute(S[D].nodeName)||w.setAttribute(S[D].nodeName,S[D].value);return p.form&&this.on(p.form,"reset",function(F){F.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(E))}.bind(this)),p.classList.add("medium-editor-hidden"),p.parentNode.insertBefore(w,p),w}function I(p,w){if(!p.getAttribute("data-medium-editor-element")){p.nodeName.toLowerCase()==="textarea"&&(p=y.call(this,p),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=u.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),!this.options.disableEditing&&!p.getAttribute("data-disable-editing")&&(p.setAttribute("contentEditable",!0),p.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(p.getAttribute("data-disable-return")||p.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),!this.options.disableReturn&&!p.getAttribute("data-disable-return")&&this.on(p,"keyup",l.bind(this));var b=e.util.guid();p.setAttribute("data-medium-editor-element",!0),p.classList.add("medium-editor-element"),p.setAttribute("role","textbox"),p.setAttribute("aria-multiline",!0),p.setAttribute("data-medium-editor-editor-index",w),p.setAttribute("medium-editor-index",b),J[b]=p.innerHTML,this.events.attachAllEventsToElement(p)}return p}function A(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",a.bind(this)),this.subscribe("editableKeydownEnter",a.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",r.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function P(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(S){S!=="toolbar"&&this.options.extensions[S]&&this.extensions.push(h(this.options.extensions[S],S,this))},this),C.call(this)){var p=this.options.fileDragging;p||(p={},k.call(this)||(p.allowedTypes=[])),this.addBuiltInExtension("fileDragging",p)}var w={paste:!0,"anchor-preview":v.call(this),autoLink:T.call(this),keyboardCommands:g.call(this),placeholder:_.call(this)};Object.keys(w).forEach(function(S){w[S]&&this.addBuiltInExtension(S)},this);var b=this.options.extensions.toolbar;if(!b&&m.call(this)){var E=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});b=new e.extensions.toolbar(E)}b&&this.extensions.push(h(b,"toolbar",this))}function O(p,w){var b=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return w&&b.forEach(function(E){w.hasOwnProperty(E[0])&&w[E[0]]!==void 0&&e.util.deprecated(E[0],E[1],"v6.0.0")}),e.util.defaults({},w,p)}function V(p,w){var b=/^append-(.+)$/gi,E=/justify([A-Za-z]*)$/g,S,D;if(S=b.exec(p),S)return e.util.execFormatBlock(this.options.ownerDocument,S[1]);if(p==="fontSize")return w.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),D=w.value||w.size,this.options.ownerDocument.execCommand("fontSize",!1,D);if(p==="fontName")return w.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),D=w.value||w.name,this.options.ownerDocument.execCommand("fontName",!1,D);if(p==="createLink")return this.createLink(w);if(p==="image"){var j=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,j)}if(p==="html"){var F=this.options.contentWindow.getSelection().toString().trim();return e.util.insertHTMLCommand(this.options.ownerDocument,F)}if(E.exec(p)){var L=this.options.ownerDocument.execCommand(p,!1,null),$=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return $&&z.call(this,e.util.getTopBlockContainer($)),L}return D=w&&w.value,this.options.ownerDocument.execCommand(p,!1,D)}function z(p){if(p){var w,b=Array.prototype.slice.call(p.childNodes).filter(function(E){var S=E.nodeName.toLowerCase()==="div";return S&&!w&&(w=E.style.textAlign),S});b.length&&(this.saveSelection(),b.forEach(function(E){if(E.style.textAlign===w){var S=E.lastChild;if(S){e.util.unwrap(E,this.options.ownerDocument);var D=this.options.ownerDocument.createElement("BR");S.parentNode.insertBefore(D,S.nextSibling)}}},this),p.style.textAlign=w,this.restoreSelection())}}var J={};e.prototype={init:function(p,w){return this.options=O.call(this,this.defaults,w),this.origElements=p,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(o.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),this.elements.length!==0&&(this.isActive=!0,P.call(this),A.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(p){typeof p.destroy=="function"&&p.destroy()},this),this.events.destroy(),this.elements.forEach(function(p){this.options.spellcheck&&(p.innerHTML=p.innerHTML),p.removeAttribute("contentEditable"),p.removeAttribute("spellcheck"),p.removeAttribute("data-medium-editor-element"),p.classList.remove("medium-editor-element"),p.removeAttribute("role"),p.removeAttribute("aria-multiline"),p.removeAttribute("medium-editor-index"),p.removeAttribute("data-medium-editor-editor-index"),p.getAttribute("medium-editor-textarea-id")&&f(p)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,s.call(this,this.options.contentWindow))},on:function(p,w,b,E){return this.events.attachDOMEvent(p,w,b,E),this},off:function(p,w,b,E){return this.events.detachDOMEvent(p,w,b,E),this},subscribe:function(p,w){return this.events.attachCustomEvent(p,w),this},unsubscribe:function(p,w){return this.events.detachCustomEvent(p,w),this},trigger:function(p,w,b){return this.events.triggerCustomEvent(p,w,b),this},delay:function(p){var w=this;return setTimeout(function(){w.isActive&&p()},this.options.delay)},serialize:function(){var p,w,b={},E=this.elements.length;for(p=0;p<E;p+=1)w=this.elements[p].id!==""?this.elements[p].id:"element-"+p,b[w]={value:this.elements[p].innerHTML.trim()};return b},getExtensionByName:function(p){var w;return this.extensions&&this.extensions.length&&this.extensions.some(function(b){return b.name===p?(w=b,!0):!1}),w},addBuiltInExtension:function(p,w){var b=this.getExtensionByName(p),E;if(b)return b;switch(p){case"anchor":E=e.util.extend({},this.options.anchor,w),b=new e.extensions.anchor(E);break;case"anchor-preview":b=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":b=new e.extensions.autoLink;break;case"fileDragging":b=new e.extensions.fileDragging(w);break;case"fontname":b=new e.extensions.fontName(this.options.fontName);break;case"fontsize":b=new e.extensions.fontSize(w);break;case"keyboardCommands":b=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":b=new e.extensions.paste(this.options.paste);break;case"placeholder":b=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(p)&&(w?(E=e.util.defaults({},w,e.extensions.button.prototype.defaults[p]),b=new e.extensions.button(E)):b=new e.extensions.button(p))}return b&&this.extensions.push(h(b,p,this)),b},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var p=this.getExtensionByName("toolbar");return p&&p.checkState(),this},queryCommandState:function(p){var w=/^full-(.+)$/gi,b,E=null;b=w.exec(p),b&&(p=b[1]);try{E=this.options.ownerDocument.queryCommandState(p)}catch{E=null}return E},execAction:function(p,w){var b=/^full-(.+)$/gi,E,S;return E=b.exec(p),E?(this.saveSelection(),this.selectAllContents(),S=V.call(this,E[1],w),this.restoreSelection()):S=V.call(this,p,w),(p==="insertunorderedlist"||p==="insertorderedlist")&&e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),S},getSelectedParentElement:function(p){return p===void 0&&(p=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(p)},selectAllContents:function(){var p=e.selection.getSelectionElement(this.options.contentWindow);if(p){for(;p.children.length===1;)p=p.children[0];this.selectElement(p)}},selectElement:function(p){e.selection.selectNode(p,this.options.ownerDocument);var w=e.selection.getSelectionElement(this.options.contentWindow);w&&this.events.focusElement(w)},getFocusedElement:function(){var p;return this.elements.some(function(w){return!p&&w.getAttribute("data-medium-focused")&&(p=w),!!p},this),p},exportSelection:function(){var p=e.selection.getSelectionElement(this.options.contentWindow),w=this.elements.indexOf(p),b=null;return w>=0&&(b=e.selection.exportSelection(p,this.options.ownerDocument)),b!==null&&w!==0&&(b.editableElementIndex=w),b},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(p,w){if(p){var b=this.elements[p.editableElementIndex||0];e.selection.importSelection(p,b,this.options.ownerDocument,w)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(p){var w=e.selection.getSelectionElement(this.options.contentWindow),b={},E;if(this.elements.indexOf(w)!==-1){try{if(this.events.disableCustomEvent("editableInput"),p.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),E=p.url||p.value,E&&E.trim().length>0){var S=this.options.contentWindow.getSelection();if(S){var D=S.getRangeAt(0),j=D.commonAncestorContainer,F,L,$,W;if(D.endContainer.nodeType===3&&D.startContainer.nodeType!==3&&D.startOffset===0&&D.startContainer.firstChild===D.endContainer&&(j=D.endContainer),L=e.util.getClosestBlockContainer(D.startContainer),$=e.util.getClosestBlockContainer(D.endContainer),j.nodeType!==3&&j.textContent.length!==0&&L===$){var Q=L||w,se=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),F=this.exportSelection(),se.appendChild(Q.cloneNode(!0)),w===Q?e.selection.select(this.options.ownerDocument,Q.firstChild,0,Q.lastChild,Q.lastChild.nodeType===3?Q.lastChild.nodeValue.length:Q.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,Q,0,Q,Q.childNodes.length);var be=this.exportSelection();W=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,se,{start:F.start-be.start,end:F.end-be.start,editableElementIndex:F.editableElementIndex}),W.length===0&&(se=this.options.ownerDocument.createDocumentFragment(),se.appendChild(j.cloneNode(!0)),W=[se.firstChild.firstChild,se.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,W,E.trim());var Ot=(se.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,se.firstChild.innerHTML.replace(/^\s+/,"")),F.start-=Ot,F.end-=Ot,this.importSelection(F)}else this.options.ownerDocument.execCommand("createLink",!1,E);this.options.targetBlank||p.target==="_blank"?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),E):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),E),p.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),p.buttonClass)}}if(this.options.targetBlank||p.target==="_blank"||p.buttonClass){b=this.options.ownerDocument.createEvent("HTMLEvents"),b.initEvent("input",!0,!0,this.options.contentWindow);for(var Pt=0,It=this.elements.length;Pt<It;Pt+=1)this.elements[Pt].dispatchEvent(b)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",b,w)}},cleanPaste:function(p){this.getExtensionByName("paste").cleanPaste(p)},pasteHTML:function(p,w){this.getExtensionByName("paste").pasteHTML(p,w)},setContent:function(p,w){if(w=w||0,this.elements[w]){var b=this.elements[w];b.innerHTML=p,this.checkContentChanged(b)}},getContent:function(p){return p=p||0,this.elements[p]?this.elements[p].innerHTML.trim():null},checkContentChanged:function(p){p=p||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(p,{target:p,currentTarget:p})},resetContent:function(p){if(p){var w=this.elements.indexOf(p);w!==-1&&this.setContent(J[p.getAttribute("medium-editor-index")],w);return}this.elements.forEach(function(b,E){this.setContent(J[b.getAttribute("medium-editor-index")],E)},this)},addElements:function(p){var w=c(p,this.options.ownerDocument,!0);if(w.length===0)return!1;w.forEach(function(b){b=I.call(this,b,this.id),this.elements.push(b),this.trigger("addElement",{target:b,currentTarget:b},b)},this)},removeElements:function(p){var w=c(p,this.options.ownerDocument),b=w.map(function(E){return E.getAttribute("medium-editor-textarea-id")&&E.parentNode?E.parentNode.querySelector('div[medium-editor-textarea-id="'+E.getAttribute("medium-editor-textarea-id")+'"]'):E});this.elements=this.elements.filter(function(E){return b.indexOf(E)!==-1?(this.events.cleanupElement(E),E.getAttribute("medium-editor-textarea-id")&&f(E),this.trigger("removeElement",{target:E,currentTarget:E},E),!1):!0},this)}},e.getEditorFromElement=function(p){var w=p.getAttribute("data-medium-editor-editor-index"),b=p&&p.ownerDocument&&(p.ownerDocument.defaultView||p.ownerDocument.parentWindow);return b&&b._mediumEditors&&b._mediumEditors[w]?b._mediumEditors[w]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(r){var n=r.split("-"),i=n[0].split("."),a=n.length>1?n[1]:"";return{major:parseInt(i[0],10),minor:parseInt(i[1],10),revision:parseInt(i[2],10),preRelease:a,toString:function(){return[i[0],i[1],i[2]].join(".")+(a?"-"+a:"")}}},e.version=e.parseVersionString.call(this,"5.23.3"),e}())})(hs);var Hd=hs.exports;const yn=ks(Hd);function Kd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t}function Ir(t,e){return Array(e+1).join(t)}function Vd(t){return t.replace(/^\n*/,"")}function Wd(t){for(var e=t.length;e>0&&t[e-1]===`
`;)e--;return t.substring(0,e)}var Gd=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function ti(t){return ni(t,Gd)}var ps=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function ms(t){return ni(t,ps)}function zd(t){return gs(t,ps)}var vs=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Yd(t){return ni(t,vs)}function Xd(t){return gs(t,vs)}function ni(t,e){return e.indexOf(t.nodeName)>=0}function gs(t,e){return t.getElementsByTagName&&e.some(function(r){return t.getElementsByTagName(r).length})}var Se={};Se.paragraph={filter:"p",replacement:function(t){return`

`+t+`

`}};Se.lineBreak={filter:"br",replacement:function(t,e,r){return r.br+`
`}};Se.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,r){var n=Number(e.nodeName.charAt(1));if(r.headingStyle==="setext"&&n<3){var i=Ir(n===1?"=":"-",t.length);return`

`+t+`
`+i+`

`}else return`

`+Ir("#",n)+" "+t+`

`}};Se.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),`

`+t+`

`}};Se.list={filter:["ul","ol"],replacement:function(t,e){var r=e.parentNode;return r.nodeName==="LI"&&r.lastElementChild===e?`
`+t:`

`+t+`

`}};Se.listItem={filter:"li",replacement:function(t,e,r){t=t.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var n=r.bulletListMarker+"   ",i=e.parentNode;if(i.nodeName==="OL"){var a=i.getAttribute("start"),l=Array.prototype.indexOf.call(i.children,e);n=(a?Number(a)+l:l+1)+".  "}return n+t+(e.nextSibling&&!/\n$/.test(t)?`
`:"")}};Se.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,r){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Se.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,r){for(var n=e.firstChild.getAttribute("class")||"",i=(n.match(/language-(\S+)/)||[null,""])[1],a=e.firstChild.textContent,l=r.fence.charAt(0),u=3,o=new RegExp("^"+l+"{3,}","gm"),s;s=o.exec(a);)s[0].length>=u&&(u=s[0].length+1);var c=Ir(l,u);return`

`+c+i+`
`+a.replace(/\n$/,"")+`
`+c+`

`}};Se.horizontalRule={filter:"hr",replacement:function(t,e,r){return`

`+r.hr+`

`}};Se.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var r=e.getAttribute("href"),n=_n(e.getAttribute("title"));return n&&(n=' "'+n+'"'),"["+t+"]("+r+n+")"}};Se.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,r){var n=e.getAttribute("href"),i=_n(e.getAttribute("title"));i&&(i=' "'+i+'"');var a,l;switch(r.linkReferenceStyle){case"collapsed":a="["+t+"][]",l="["+t+"]: "+n+i;break;case"shortcut":a="["+t+"]",l="["+t+"]: "+n+i;break;default:var u=this.references.length+1;a="["+t+"]["+u+"]",l="["+u+"]: "+n+i}return this.references.push(l),a},references:[],append:function(t){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};Se.emphasis={filter:["em","i"],replacement:function(t,e,r){return t.trim()?r.emDelimiter+t+r.emDelimiter:""}};Se.strong={filter:["strong","b"],replacement:function(t,e,r){return t.trim()?r.strongDelimiter+t+r.strongDelimiter:""}};Se.code={filter:function(t){var e=t.previousSibling||t.nextSibling,r=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!r},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",r="`",n=t.match(/`+/gm)||[];n.indexOf(r)!==-1;)r=r+"`";return r+e+t+e+r}};Se.image={filter:"img",replacement:function(t,e){var r=_n(e.getAttribute("alt")),n=e.getAttribute("src")||"",i=_n(e.getAttribute("title")),a=i?' "'+i+'"':"";return n?"!["+r+"]("+n+a+")":""}};function _n(t){return t?t.replace(/(\n+\s*)+/g,`
`):""}function bs(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}bs.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=Tr(this.array,t,this.options))||(e=Tr(this._keep,t,this.options))||(e=Tr(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function Tr(t,e,r){for(var n=0;n<t.length;n++){var i=t[n];if(Jd(i,e,r))return i}}function Jd(t,e,r){var n=t.filter;if(typeof n=="string"){if(n===e.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof n=="function"){if(n.call(t,e,r))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Qd(t){var e=t.element,r=t.isBlock,n=t.isVoid,i=t.isPre||function(f){return f.nodeName==="PRE"};if(!(!e.firstChild||i(e))){for(var a=null,l=!1,u=null,o=go(u,e,i);o!==e;){if(o.nodeType===3||o.nodeType===4){var s=o.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!l&&s[0]===" "&&(s=s.substr(1)),!s){o=kr(o);continue}o.data=s,a=o}else if(o.nodeType===1)r(o)||o.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,l=!1):n(o)||i(o)?(a=null,l=!0):a&&(l=!1);else{o=kr(o);continue}var c=go(u,o,i);u=o,o=c}a&&(a.data=a.data.replace(/ $/,""),a.data||kr(a))}}function kr(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function go(t,e,r){return t&&t.parentNode===e||r(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var ys=typeof window<"u"?window:{};function Zd(){var t=ys.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch{}return e}function eh(){var t=function(){};return th()?t.prototype.parseFromString=function(e){var r=new window.ActiveXObject("htmlfile");return r.designMode="on",r.open(),r.write(e),r.close(),r}:t.prototype.parseFromString=function(e){var r=document.implementation.createHTMLDocument("");return r.open(),r.write(e),r.close(),r},t}function th(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch{window.ActiveXObject&&(t=!0)}return t}var nh=Zd()?ys.DOMParser:eh();function rh(t,e){var r;if(typeof t=="string"){var n=ih().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");r=n.getElementById("turndown-root")}else r=t.cloneNode(!0);return Qd({element:r,isBlock:ti,isVoid:ms,isPre:e.preformattedCode?oh:null}),r}var Sr;function ih(){return Sr=Sr||new nh,Sr}function oh(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function ah(t,e){return t.isBlock=ti(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=sh(t),t.flankingWhitespace=lh(t,e),t}function sh(t){return!ms(t)&&!Yd(t)&&/^\s*$/i.test(t.textContent)&&!zd(t)&&!Xd(t)}function lh(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var r=uh(t.textContent);return r.leadingAscii&&bo("left",t,e)&&(r.leading=r.leadingNonAscii),r.trailingAscii&&bo("right",t,e)&&(r.trailing=r.trailingNonAscii),{leading:r.leading,trailing:r.trailing}}function uh(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function bo(t,e,r){var n,i,a;return t==="left"?(n=e.previousSibling,i=/ $/):(n=e.nextSibling,i=/^ /),n&&(n.nodeType===3?a=i.test(n.nodeValue):r.preformattedCode&&n.nodeName==="CODE"?a=!1:n.nodeType===1&&!ti(n)&&(a=i.test(n.textContent))),a}var ch=Array.prototype.reduce,fh=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Tt(t){if(!(this instanceof Tt))return new Tt(t);var e={rules:Se,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(r,n){return n.isBlock?`

`:""},keepReplacement:function(r,n){return n.isBlock?`

`+n.outerHTML+`

`:n.outerHTML},defaultReplacement:function(r,n){return n.isBlock?`

`+r+`

`:r}};this.options=Kd({},e,t),this.rules=new bs(this.options)}Tt.prototype={turndown:function(t){if(!ph(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=_s.call(this,new rh(t,this.options));return dh.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return fh.reduce(function(e,r){return e.replace(r[0],r[1])},t)}};function _s(t){var e=this;return ch.call(t.childNodes,function(r,n){n=new ah(n,e.options);var i="";return n.nodeType===3?i=n.isCode?n.nodeValue:e.escape(n.nodeValue):n.nodeType===1&&(i=hh.call(e,n)),Es(r,i)},"")}function dh(t){var e=this;return this.rules.forEach(function(r){typeof r.append=="function"&&(t=Es(t,r.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function hh(t){var e=this.rules.forNode(t),r=_s.call(this,t),n=t.flankingWhitespace;return(n.leading||n.trailing)&&(r=r.trim()),n.leading+e.replacement(r,t,this.options)+n.trailing}function Es(t,e){var r=Wd(t),n=Vd(e),i=Math.max(t.length-r.length,e.length-n.length),a=`

`.substring(0,i);return r+a+n}function ph(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}function mh(t){let e,r,n;return{c(){e=G("div"),Y(e,"class","cursor-pointer text-sm todist-task-content todist-task-description overflow-overlay scrollbar border-light curved-half px-2 py-1.5 svelte-791h8t"),de(e,"width","100%"),de(e,"outline","none"),de(e,"min-height","2rem"),de(e,"max-height","10rem"),Ye(e,"max-line-2",!t[0])},m(i,a){B(i,e,a),r||(n=[kt(t[1].call(null,e)),gt(e,"pointerdown",Cn(t[4]))],r=!0)},p(i,[a]){a&1&&Ye(e,"max-line-2",!i[0])},i:Z,o:Z,d(i){i&&M(e),r=!1,Tn(n)}}}function vh(t,e,r){let{isEditing:n=!1}=e,{description:i=""}=e,{addPendingUpdate:a=s=>{}}=e;const l=new Ke.Renderer;l.link=function(s,c,f){return'<a target="_blank" href="'+s+'" title="'+c+'">'+f+"</a>"};const u=s=>{const c=new yn(s,{placeholder:{text:"Add description"},toolbar:{buttons:["bold","italic",{name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:'<span style="font-size: 0.8rem">🔗</span>',contentFA:'<iconify-icon icon="mdi:format-bold" style="vertical-align: middle; font-size: 1.25rem" ></iconify-icon>'}]},anchorPreview:!1,anchor:{formSaveLabel:'<iconify-icon icon="ic:baseline-check" style="vertical-align: middle; font-size: 1.25rem; padding-bottom: 0.2rem " ></iconify-icon>',formCloseLabel:'<iconify-icon icon="heroicons:x-mark-20-solid" style="vertical-align: middle; font-size: 1.25rem" ></iconify-icon>',placeholderText:"Make sure to add https://"}});return c.setContent(Ke(i,{mangle:!1,headerIds:!1})),c.subscribe("editableInput",f=>{const h=new Tt().turndown(c.getContent());a({description:h})}),{destroy:()=>{c.destroy()}}};function o(s){Lr.call(this,t,s)}return t.$$set=s=>{"isEditing"in s&&r(0,n=s.isEditing),"description"in s&&r(2,i=s.description),"addPendingUpdate"in s&&r(3,a=s.addPendingUpdate)},[n,u,i,a,o]}class gh extends Re{constructor(e){super(),Ae(this,e,vh,mh,Ne,{isEditing:0,description:2,addPendingUpdate:3})}}function bh(t){let e,r,n;return{c(){e=G("div"),Y(e,"class","cursor-pointer text-sm todist-task-content overflow-overlay scrollbar"),de(e,"width","100%"),de(e,"outline","none"),de(e,"min-height","0px"),de(e,"max-height","5rem"),Ye(e,"max-line-2",!t[0])},m(i,a){B(i,e,a),r||(n=[kt(t[4].call(null,e)),gt(e,"pointerdown",Cn(t[6]))],r=!0)},p(i,a){a&1&&Ye(e,"max-line-2",!i[0])},d(i){i&&M(e),r=!1,Tn(n)}}}function yh(t){let e,r=Ke(t[1],{renderer:t[3],mangle:!1,headerIds:!1})+"",n;return{c(){e=G("div"),Y(e,"class",n="cursor-pointer text-sm todist-task-content "+(t[2]?"line-through":"")),de(e,"width","100%"),de(e,"outline","none"),de(e,"min-height","0px"),de(e,"max-height","5rem"),Ye(e,"max-line-2",!t[0])},m(i,a){B(i,e,a),e.innerHTML=r},p(i,a){a&10&&r!==(r=Ke(i[1],{renderer:i[3],mangle:!1,headerIds:!1})+"")&&(e.innerHTML=r),a&4&&n!==(n="cursor-pointer text-sm todist-task-content "+(i[2]?"line-through":""))&&Y(e,"class",n),a&5&&Ye(e,"max-line-2",!i[0])},d(i){i&&M(e)}}}function _h(t){let e;function r(a,l){return a[0]?bh:yh}let n=r(t),i=n(t);return{c(){i.c(),e=ge()},m(a,l){i.m(a,l),B(a,e,l)},p(a,[l]){n===(n=r(a))&&i?i.p(a,l):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Z,o:Z,d(a){i.d(a),a&&M(e)}}}function Eh(t,e,r){let{isEditing:n=!1}=e,{title:i=""}=e,{addPendingUpdate:a=c=>{}}=e,{completed:l=!1}=e;const u=new Ke.Renderer;yn.extensions.button.extend({name:"codeButton",tagNames:["code"],contentDefault:'<span class="icon icon-code"><></span>',aria:"Code",handleClick(){const f=`<code>${this.base.options.contentWindow.getSelection().toString().trim()}</code>`;this.base.pasteHTML(f),this.base.checkContentChanged()}}),u.link=function(c,f,d){return'<a target="_blank" href="'+c+'" title="'+c+'">'+d+"</a>"};const o=c=>{const f=new yn(c,{placeholder:{text:"Task content"},toolbar:{buttons:["bold","italic",{name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:'<span style="font-size: 0.8rem">🔗</span>',contentFA:'<iconify-icon icon="mdi:format-bold" style="vertical-align: middle; font-size: 1.25rem" ></iconify-icon>'}]},anchorPreview:!1,anchor:{formSaveLabel:'<iconify-icon icon="ic:baseline-check" style="vertical-align: middle; font-size: 1.25rem; padding-bottom: 0.2rem " ></iconify-icon>',formCloseLabel:'<iconify-icon icon="heroicons:x-mark-20-solid" style="vertical-align: middle; font-size: 1.25rem" ></iconify-icon>',placeholderText:"Make sure to add https://"}});f.setContent(Ke(i,{mangle:!1,headerIds:!1})),f.subscribe("editableInput",h=>{const v=new Tt().turndown(f.getContent());a({content:v})}),c.focus();function d(h){let m=window.getSelection();m.selectAllChildren(h),m.collapseToEnd()}return d(c),{destroy:()=>{f.destroy()}}};function s(c){Lr.call(this,t,c)}return t.$$set=c=>{"isEditing"in c&&r(0,n=c.isEditing),"title"in c&&r(1,i=c.title),"addPendingUpdate"in c&&r(5,a=c.addPendingUpdate),"completed"in c&&r(2,l=c.completed)},[n,i,l,u,o,a,s]}class wh extends Re{constructor(e){super(),Ae(this,e,Eh,_h,Ne,{isEditing:0,title:1,addPendingUpdate:5,completed:2})}}function yo(t,e,r){const n=t.slice();return n[34]=e[r],n}function _o(t){let e,r,n,i,a,l;function u(f,d){return d[0]&1&&(n=null),d[0]&1&&(i=null),d[0]&1&&(a=null),n==null&&(n=!!ae(f[0].due.date).isSame(ae(),"day")),n?Sh:(i==null&&(i=!!ae(f[0].due.date).isSame(ae().add(1,"day"),"day")),i?kh:(a==null&&(a=!!ae(f[0].due.date).isSame(ae().subtract(1,"day"),"day")),a?Th:Ch))}let o=u(t,[-1,-1]),s=o(t),c=t[0].due.isRecurring&&Eo();return{c(){e=G("div"),r=G("span"),s.c(),l=X(),c&&c.c(),Y(r,"class","text-[0.7rem] pt-0.2"),Y(e,"class","flex items-start justify-start shrink-0 px-3 py-0.5 border rounded-full")},m(f,d){B(f,e,d),U(e,r),s.m(r,null),U(e,l),c&&c.m(e,null)},p(f,d){o===(o=u(f,d))&&s?s.p(f,d):(s.d(1),s=o(f),s&&(s.c(),s.m(r,null))),f[0].due.isRecurring?c||(c=Eo(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(f){f&&M(e),s.d(),c&&c.d()}}}function Ch(t){let e=ae(t[0].due.date).format("MMM D")+"",r;return{c(){r=_e(e)},m(n,i){B(n,r,i)},p(n,i){i[0]&1&&e!==(e=ae(n[0].due.date).format("MMM D")+"")&&tn(r,e)},d(n){n&&M(r)}}}function Th(t){let e;return{c(){e=_e("Yesterday")},m(r,n){B(r,e,n)},p:Z,d(r){r&&M(e)}}}function kh(t){let e;return{c(){e=_e("Tomorrow")},m(r,n){B(r,e,n)},p:Z,d(r){r&&M(e)}}}function Sh(t){let e;return{c(){e=_e("Today")},m(r,n){B(r,e,n)},p:Z,d(r){r&&M(e)}}}function Eo(t){let e;return{c(){e=G("iconify-icon"),vt(e,"icon","material-symbols:sync-rounded"),vt(e,"class","ml-1")},m(r,n){B(r,e,n)},d(r){r&&M(e)}}}function wo(t){let e,r=t[0].description&&Co(t);return{c(){e=G("div"),r&&r.c(),Y(e,"class","flex flex-row items-center justify-start w-full gap-2 mt-0.5")},m(n,i){B(n,e,i),r&&r.m(e,null)},p(n,i){n[0].description?r?r.p(n,i):(r=Co(n),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(n){n&&M(e),r&&r.d()}}}function Co(t){let e,r=Ke(t[0].description,{mangle:!1,headerIds:!1})+"";return{c(){e=G("span"),Y(e,"class","text-xs max-line-1 ml-[1.3rem] opacity-70")},m(n,i){B(n,e,i),e.innerHTML=r},p(n,i){i[0]&1&&r!==(r=Ke(n[0].description,{mangle:!1,headerIds:!1})+"")&&(e.innerHTML=r)},d(n){n&&M(e)}}}function To(t){var g,C;let e,r,n,i,a,l,u,o,s,c,f,d,h,m,v;r=new gh({props:{description:t[0].description,isEditing:t[2],addPendingUpdate:t[13]}}),a=new zs({props:{value:(g=t[0].due)!=null&&g.date?ae((C=t[0].due)==null?void 0:C.date).toDate():null,placeholder:"Set Due"}}),a.$on("change",t[21]);let _=t[0].due&&ko(t);function T(y){t[23](y)}let k={options:t[11],placeholder:"Set priority",class:"ml-2"};return t[0].priority!==void 0&&(k.value=t[0].priority),o=new Dr({props:k}),Ve.push(()=>Je(o,"value",T)),o.$on("change",t[24]),f=new Oe({props:{icon:As,class:"ml-auto shrink-0 text-[0.95rem] mr-3",tooltip:"Remove task"}}),f.$on("click",t[25]),h=new Oe({props:{icon:Ns,tooltip:"Add subtask",class:"mr-1 shrink-0"}}),h.$on("click",t[26]),{c(){e=G("div"),q(r.$$.fragment),n=X(),i=G("div"),q(a.$$.fragment),l=X(),_&&_.c(),u=X(),q(o.$$.fragment),c=X(),q(f.$$.fragment),d=X(),q(h.$$.fragment),Y(i,"class","flex flex-row items-center justify-start"),Y(e,"class","mt-2 w-full flex flex-col gap-2")},m(y,I){B(y,e,I),H(r,e,null),U(e,n),U(e,i),H(a,i,null),U(i,l),_&&_.m(i,null),U(i,u),H(o,i,null),U(i,c),H(f,i,null),U(i,d),H(h,i,null),v=!0},p(y,I){var V,z;const A={};I[0]&1&&(A.description=y[0].description),I[0]&4&&(A.isEditing=y[2]),r.$set(A);const P={};I[0]&1&&(P.value=(V=y[0].due)!=null&&V.date?ae((z=y[0].due)==null?void 0:z.date).toDate():null),a.$set(P),y[0].due?_?(_.p(y,I),I[0]&1&&R(_,1)):(_=ko(y),_.c(),R(_,1),_.m(i,u)):_&&(ne(),N(_,1,1,()=>{_=null}),re());const O={};!s&&I[0]&1&&(s=!0,O.value=y[0].priority,Qe(()=>s=!1)),o.$set(O)},i(y){v||(R(r.$$.fragment,y),R(a.$$.fragment,y),R(_),R(o.$$.fragment,y),R(f.$$.fragment,y),R(h.$$.fragment,y),y&&St(()=>{v&&(m||(m=De(e,$e,{},!0)),m.run(1))}),v=!0)},o(y){N(r.$$.fragment,y),N(a.$$.fragment,y),N(_),N(o.$$.fragment,y),N(f.$$.fragment,y),N(h.$$.fragment,y),y&&(m||(m=De(e,$e,{},!1)),m.run(0)),v=!1},d(y){y&&M(e),K(r),K(a),_&&_.d(),K(o),K(f),K(h),y&&m&&m.end()}}}function ko(t){let e,r;return e=new Oe({props:{icon:Os,class:"ml-1.5 mr-1 shrink-0",tooltip:"Remove due date"}}),e.$on("click",t[22]),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function So(t){let e,r=[],n=new Map,i,a=t[4];const l=u=>u[34].id;for(let u=0;u<a.length;u+=1){let o=yo(t,a,u),s=l(o);n.set(s,r[u]=Ro(s,o))}return{c(){e=G("div");for(let u=0;u<r.length;u+=1)r[u].c();Y(e,"class","flex flex-col gap-2 w-full mt-2")},m(u,o){B(u,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);i=!0},p(u,o){if(o[0]&18){a=u[4],ne();for(let s=0;s<r.length;s+=1)r[s].r();r=We(r,o,l,1,u,a,n,e,ot,Ro,null,yo);for(let s=0;s<r.length;s+=1)r[s].a();re()}},i(u){if(!i){for(let o=0;o<a.length;o+=1)R(r[o]);i=!0}},o(u){for(let o=0;o<r.length;o+=1)N(r[o]);i=!1},d(u){u&&M(e);for(let o=0;o<r.length;o+=1)r[o].d()}}}function Ro(t,e){let r,n,i,a,l=Z,u;return n=new dt({props:{task:e[34],level:e[1]+1}}),{key:t,first:null,c(){r=G("div"),q(n.$$.fragment),i=X(),this.first=r},m(o,s){B(o,r,s),H(n,r,null),U(r,i),u=!0},p(o,s){e=o;const c={};s[0]&16&&(c.task=e[34]),s[0]&2&&(c.level=e[1]+1),n.$set(c)},r(){a=r.getBoundingClientRect()},f(){at(r),l()},a(){l(),l=st(r,a,lt,{duration:200})},i(o){u||(R(n.$$.fragment,o),u=!0)},o(o){N(n.$$.fragment,o),u=!1},d(o){o&&M(r),K(n)}}}function Rh(t){let e,r,n,i,a,l,u,o,s,c=t[4]&&t[4].length>0&&(t[5]||t[4].filter(Ao).length>0)&&t[1]<3,f,d,h,m;n=new ia({props:{size:"sm",class:"shrink-0",checked:t[0].isCompleted}}),n.$on("click",t[19]),n.$on("change",t[20]),a=new wh({props:{title:t[0].content,isEditing:t[2],addPendingUpdate:t[13],completed:t[0].isCompleted}});let v=t[0].due&&!t[0].isCompleted&&!t[2]&&_o(t),_=t[0].description&&!t[0].isCompleted&&!t[2]&&wo(t),T=t[2]&&!t[0].isCompleted&&To(t),k=c&&So(t);return{c(){var g,C;e=G("div"),r=G("div"),q(n.$$.fragment),i=X(),q(a.$$.fragment),l=X(),v&&v.c(),u=X(),_&&_.c(),o=X(),T&&T.c(),s=X(),k&&k.c(),Y(r,"class","flex flex-row items-center justify-start w-full gap-2"),Y(e,"class","flex flex-col items-center border-light px-2 py-1.5 curved-half cursor-pointer"),de(e,"border-color",((g=t[12][t[0].priority])==null?void 0:g.border)||"var(--border-color)"),de(e,"background",((C=t[12][t[0].priority])==null?void 0:C.background)||"var(--bg)"),Y(e,"tabindex","0"),Ye(e,"hidden",t[0].isCompleted&&!t[5])},m(g,C){B(g,e,C),U(e,r),H(n,r,null),U(r,i),H(a,r,null),U(r,l),v&&v.m(r,null),U(e,u),_&&_.m(e,null),U(e,o),T&&T.m(e,null),U(e,s),k&&k.m(e,null),t[27](e),d=!0,h||(m=[gt(e,"click",Cn(t[28])),gt(e,"keydown",t[29]),kt(f=Ss.call(null,e,{onClose:t[30],nodesToIgnore:[t[3]]}))],h=!0)},p(g,C){var A,P;const y={};C[0]&1&&(y.checked=g[0].isCompleted),n.$set(y);const I={};C[0]&1&&(I.title=g[0].content),C[0]&4&&(I.isEditing=g[2]),C[0]&1&&(I.completed=g[0].isCompleted),a.$set(I),g[0].due&&!g[0].isCompleted&&!g[2]?v?v.p(g,C):(v=_o(g),v.c(),v.m(r,null)):v&&(v.d(1),v=null),g[0].description&&!g[0].isCompleted&&!g[2]?_?_.p(g,C):(_=wo(g),_.c(),_.m(e,o)):_&&(_.d(1),_=null),g[2]&&!g[0].isCompleted?T?(T.p(g,C),C[0]&5&&R(T,1)):(T=To(g),T.c(),R(T,1),T.m(e,s)):T&&(ne(),N(T,1,1,()=>{T=null}),re()),C[0]&50&&(c=g[4]&&g[4].length>0&&(g[5]||g[4].filter(Ao).length>0)&&g[1]<3),c?k?(k.p(g,C),C[0]&50&&R(k,1)):(k=So(g),k.c(),R(k,1),k.m(e,null)):k&&(ne(),N(k,1,1,()=>{k=null}),re()),(!d||C[0]&1)&&de(e,"border-color",((A=g[12][g[0].priority])==null?void 0:A.border)||"var(--border-color)"),(!d||C[0]&1)&&de(e,"background",((P=g[12][g[0].priority])==null?void 0:P.background)||"var(--bg)"),f&&Rs(f.update)&&C[0]&12&&f.update.call(null,{onClose:g[30],nodesToIgnore:[g[3]]}),(!d||C[0]&33)&&Ye(e,"hidden",g[0].isCompleted&&!g[5])},i(g){d||(R(n.$$.fragment,g),R(a.$$.fragment,g),R(T),R(k),d=!0)},o(g){N(n.$$.fragment,g),N(a.$$.fragment,g),N(T),N(k),d=!1},d(g){g&&M(e),K(n),K(a),v&&v.d(),_&&_.d(),T&&T.d(),k&&k.d(),t[27](null),h=!1,Tn(m)}}}const Ao=t=>!t.isCompleted;function Ah(t,e,r){let n,i,a,l;const{todoist:u,todoistTasks:o,tempIds:s,showCompletedTasks:c,addTask:f}=Me("stores");ue(t,o,L=>r(18,a=L)),ue(t,s,L=>r(32,i=L)),ue(t,c,L=>r(5,l=L));let{task:d}=e,{level:h=0}=e,m=null;const v=[{label:"Priority 1",value:4},{label:"Priority 2",value:3},{label:"Priority 3",value:2},{label:"Priority 4",value:1}],_={4:{border:"#d1453b",background:"#d1453b30"},3:{border:"#ffd80f",background:"#ffd80f30"},2:{border:"#246fe0",background:"#246fe030"}};let T=!1,k=null;const g=L=>{o.update($=>($=$.map(W=>W.id===d.id?{...W,...L}:W),$))},C=(L,$=null)=>{g($||L),m={...m,...L}},y=()=>{if(!m)return;const L=P(d.id);L&&u.updateTask(L,m).then($=>{o.update(W=>(W=W.map(Q=>Q.id===d.id?{...Q,...$}:Q),W)),m=null})},I=()=>{if(d.isCompleted)return;const L=P(d.id);L&&u.closeTask(L).then(()=>{var $,W;($=d.due)!=null&&$.isRecurring||o.update(Q=>(Q=Q.map(se=>se.id===d.id?{...se,isCompleted:!0,order:9999}:se),Q)),(W=d.due)!=null&&W.isRecurring&&u.getTask(L).then(Q=>{o.update(se=>(se=se.map(be=>be.id===d.id?{...be,...Q}:be),se))})})},A=()=>{if(!d.isCompleted)return;const L=P(d.id);L&&(u.reopenTask(L),u.getTask(L).then($=>{o.update(W=>(W=W.map(Q=>Q.id===d.id?{...Q,...$,isCompleted:!1}:Q),W))}))},P=L=>L.startsWith("temp-")?i&&i[L]?i[L]:null:L,O=L=>{L.stopPropagation(),Ps("https://todoist.b-cdn.net/assets/sounds/b4253d428df0737eee364cba3e266741.mp3")},V=L=>{L.detail&&T&&r(2,T=!1),L.detail?I():A()},z=L=>{const $=ae(L.detail).format("YYYY-MM-DD");C({dueDate:$},{due:{date:$,...d.due?d.due:{}}})},J=()=>{C({dueString:"no date"},{due:null})};function p(L){t.$$.not_equal(d.priority,L)&&(d.priority=L,r(0,d))}const w=L=>{C({priority:L.detail})},b=()=>{u.deleteTask(P(d.id)),o.update(L=>L.filter($=>$.id!==d.id))},E=()=>f({projectId:d.projectId,parentId:d.id,sectionId:d.sectionId});function S(L){Ve[L?"unshift":"push"](()=>{k=L,r(3,k)})}const D=()=>!d.isCompleted&&r(2,T=!0),j=L=>{L.key==="Enter"&&(d.isCompleted||r(2,T=!0))},F=L=>{L.classList.contains("medium-editor-element")||L.classList.contains("medium-editor-action")||L.closest(".medium-editor-toolbar")||L.closest("#poppers-container")||T&&(r(2,T=!1),y())};return t.$$set=L=>{"task"in L&&r(0,d=L.task),"level"in L&&r(1,h=L.level)},t.$$.update=()=>{t.$$.dirty[0]&262145&&r(4,n=a.filter(L=>L.parentId===d.id).sort((L,$)=>L.order-$.order).sort((L,$)=>L.isCompleted&&!$.isCompleted?1:!L.isCompleted&&$.isCompleted?-1:0))},[d,h,T,k,n,l,u,o,s,c,f,v,_,C,y,I,A,P,a,O,V,z,J,p,w,b,E,S,D,j,F]}class dt extends Re{constructor(e){super(),Ae(this,e,Ah,Rh,Ne,{task:0,level:1},null,[-1,-1])}}function No(t,e,r){const n=t.slice();return n[9]=e[r],n}function Oo(t){let e,r,n,i,a;const l=[Oh,Nh],u=[];function o(s,c){return s[2].length===0?0:1}return r=o(t),n=u[r]=l[r](t),{c(){e=G("div"),n.c(),Y(e,"class","flex flex-col gap-2 shrink-0 mt-3")},m(s,c){B(s,e,c),u[r].m(e,null),a=!0},p(s,c){let f=r;r=o(s),r===f?u[r].p(s,c):(ne(),N(u[f],1,1,()=>{u[f]=null}),re(),n=u[r],n?n.p(s,c):(n=u[r]=l[r](s),n.c()),R(n,1),n.m(e,null))},i(s){a||(R(n),s&&St(()=>{a&&(i||(i=De(e,$e,{duration:300},!0)),i.run(1))}),a=!0)},o(s){N(n),s&&(i||(i=De(e,$e,{duration:300},!1)),i.run(0)),a=!1},d(s){s&&M(e),u[r].d(),s&&i&&i.end()}}}function Nh(t){let e=[],r=new Map,n,i,a=t[2];const l=u=>u[9].id;for(let u=0;u<a.length;u+=1){let o=No(t,a,u),s=l(o);r.set(s,e[u]=Po(s,o))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=ge()},m(u,o){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(u,o);B(u,n,o),i=!0},p(u,o){if(o&4){a=u[2],ne();for(let s=0;s<e.length;s+=1)e[s].r();e=We(e,o,l,1,u,a,r,n.parentNode,ot,Po,n,No);for(let s=0;s<e.length;s+=1)e[s].a();re()}},i(u){if(!i){for(let o=0;o<a.length;o+=1)R(e[o]);i=!0}},o(u){for(let o=0;o<e.length;o+=1)N(e[o]);i=!1},d(u){for(let o=0;o<e.length;o+=1)e[o].d(u);u&&M(n)}}}function Oh(t){let e,r;return e=new sn({}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Po(t,e){let r,n,i,a,l=Z,u;return n=new dt({props:{task:e[9]}}),{key:t,first:null,c(){r=G("div"),q(n.$$.fragment),i=X(),this.first=r},m(o,s){B(o,r,s),H(n,r,null),U(r,i),u=!0},p(o,s){e=o;const c={};s&4&&(c.task=e[9]),n.$set(c)},r(){a=r.getBoundingClientRect()},f(){at(r),l()},a(){l(),l=st(r,a,lt,{duration:200})},i(o){u||(R(n.$$.fragment,o),u=!0)},o(o){N(n.$$.fragment,o),u=!1},d(o){o&&M(r),K(n)}}}function Ph(t){let e,r,n=ae(t[0]).format("DD MMM, dddd")+"",i,a,l,u,o,s;l=new Oe({props:{icon:kn,class:"text-base "+(t[1]?"":"rotate-180"),tooltip:{title:t[1]?"Expand":"Collapse",position:"top"}}}),l.$on("click",t[4]);let c=!t[1]&&Oo(t);return{c(){e=G("div"),r=G("span"),i=_e(n),a=X(),q(l.$$.fragment),u=X(),c&&c.c(),o=ge(),Y(r,"class","text-sm"),Y(e,"class","flex items-center justify-start gap-3 mt-3 ml-1 group no-margin svelte-byscli")},m(f,d){B(f,e,d),U(e,r),U(r,i),U(e,a),H(l,e,null),B(f,u,d),c&&c.m(f,d),B(f,o,d),s=!0},p(f,[d]){(!s||d&1)&&n!==(n=ae(f[0]).format("DD MMM, dddd")+"")&&tn(i,n);const h={};d&2&&(h.class="text-base "+(f[1]?"":"rotate-180")),d&2&&(h.tooltip={title:f[1]?"Expand":"Collapse",position:"top"}),l.$set(h),f[1]?c&&(ne(),N(c,1,1,()=>{c=null}),re()):c?(c.p(f,d),d&2&&R(c,1)):(c=Oo(f),c.c(),R(c,1),c.m(o.parentNode,o))},i(f){s||(R(l.$$.fragment,f),R(c),s=!0)},o(f){N(l.$$.fragment,f),N(c),s=!1},d(f){f&&M(e),K(l),f&&M(u),c&&c.d(f),f&&M(o)}}}function Ih(t,e,r){let n;Me("stores");let{tasks:i=[]}=e,{date:a=ae()}=e,l=!1;const u=()=>r(1,l=!l);return t.$$set=o=>{"tasks"in o&&r(3,i=o.tasks),"date"in o&&r(0,a=o.date)},t.$$.update=()=>{t.$$.dirty&9&&r(2,n=i.filter(o=>{var s,c;return o.due&&ae(((s=o.due)==null?void 0:s.datetime)||((c=o.due)==null?void 0:c.date)).isSame(a,"day")&&!o.isCompleted}).sort((o,s)=>{var d,h,m,v,_,T,k,g;const c=ae(((d=o.due)==null?void 0:d.datetime)||((h=o.due)==null?void 0:h.date)),f=ae(((m=s.due)==null?void 0:m.datetime)||((v=s.due)==null?void 0:v.date));if(c.isSame(f,"day")){if((_=o.due)!=null&&_.datetime&&((T=s.due)!=null&&T.datetime))return c.diff(f);if((k=o.due)!=null&&k.datetime)return-1;if((g=s.due)!=null&&g.datetime)return 1}return c.diff(f)})),t.$$.dirty&8&&console.log(i)},[a,l,n,i,u]}class Lh extends Re{constructor(e){super(),Ae(this,e,Ih,Ph,Ne,{tasks:3,date:0})}}function Dh(t){let e,r,n,i,a=t[0]==="today"?"No tasks for today!":t[0]==="upcoming"?"No upcoming tasks!":"Add a task to get started!",l;return{c(){e=G("div"),r=G("iconify-icon"),n=X(),i=G("span"),l=_e(a),vt(r,"icon","material-symbols:add-task"),vt(r,"class","text-2xl"),Y(i,"class","text-sm"),Y(e,"class","flex-center w-full border-light curved-half flex-col px-3 py-4 gap-2 flex-1")},m(u,o){B(u,e,o),U(e,r),U(e,n),U(e,i),U(i,l)},p(u,[o]){o&1&&a!==(a=u[0]==="today"?"No tasks for today!":u[0]==="upcoming"?"No upcoming tasks!":"Add a task to get started!")&&tn(l,a)},i:Z,o:Z,d(u){u&&M(e)}}}function $h(t,e,r){let{view:n=null}=e;return t.$$set=i=>{"view"in i&&r(0,n=i.view)},[n]}class Bh extends Re{constructor(e){super(),Ae(this,e,$h,Dh,Ne,{view:0})}}function Mh(t){let e;return{c(){e=_e("Add")},m(r,n){B(r,e,n)},p:Z,i:Z,o:Z,d(r){r&&M(e)}}}function Fh(t){let e,r;return e=new en({props:{icon:En,class:"animate-spin"}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function xh(t){let e,r,n,i;const a=[Fh,Mh],l=[];function u(o,s){return o[2]?0:1}return e=u(t),r=l[e]=a[e](t),{c(){r.c(),n=ge()},m(o,s){l[e].m(o,s),B(o,n,s),i=!0},p(o,s){let c=e;e=u(o),e===c?l[e].p(o,s):(ne(),N(l[c],1,1,()=>{l[c]=null}),re(),r=l[e],r?r.p(o,s):(r=l[e]=a[e](o),r.c()),R(r,1),r.m(n.parentNode,n))},i(o){i||(R(r),i=!0)},o(o){N(r),i=!1},d(o){l[e].d(o),o&&M(n)}}}function Uh(t){let e,r,n,i,a;function l(o){t[6](o)}let u={class:"px-2 py-1.5 text-sm ",placeholder:"Project name",autofocus:!0,delayFocus:300};return t[0]!==void 0&&(u.value=t[0]),e=new oa({props:u}),Ve.push(()=>Je(e,"value",l)),i=new wn({props:{disabled:!t[0],class:"w-14 flex-center h-[2.2rem]",$$slots:{default:[xh]},$$scope:{ctx:t}}}),i.$on("click",t[5]),{c(){q(e.$$.fragment),n=X(),q(i.$$.fragment)},m(o,s){H(e,o,s),B(o,n,s),H(i,o,s),a=!0},p(o,s){const c={};!r&&s&1&&(r=!0,c.value=o[0],Qe(()=>r=!1)),e.$set(c);const f={};s&1&&(f.disabled=!o[0]),s&2052&&(f.$$scope={dirty:s,ctx:o}),i.$set(f)},i(o){a||(R(e.$$.fragment,o),R(i.$$.fragment,o),a=!0)},o(o){N(e.$$.fragment,o),N(i.$$.fragment,o),a=!1},d(o){K(e,o),o&&M(n),K(i,o)}}}function jh(t){let e,r,n;function i(l){t[7](l)}let a={class:"flex flex-center px-2 py-2 gap-2",wrapperClass:"border curved-half",wrapperStyles:"border-color: var(--border-color);",autoCloseOnFocusOut:!1,transition:"scale",trigger:"click",origin:"bottom right",placement:"top-end",offset:[0,10],$$slots:{default:[Uh]},$$scope:{ctx:t}};return t[1]!==void 0&&(a.close=t[1]),e=new $r({props:a}),Ve.push(()=>Je(e,"close",i)),{c(){q(e.$$.fragment)},m(l,u){H(e,l,u),n=!0},p(l,[u]){const o={};u&2053&&(o.$$scope={dirty:u,ctx:l}),!r&&u&2&&(r=!0,o.close=l[1],Qe(()=>r=!1)),e.$set(o)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){K(e,l)}}}function qh(t,e,r){let n,i;const{todoist:a,todoistProjects:l,selectedProject:u}=Me("stores");ue(t,l,m=>r(9,i=m)),ue(t,u,m=>r(8,n=m));let o="",s,c=!1;const f=()=>{o&&(r(2,c=!0),a.addProject({name:o}).then(m=>{it(l,i=[...i,m],i),r(0,o=""),r(2,c=!1),it(u,n=m.id,n),s()}))};function d(m){o=m,r(0,o)}function h(m){s=m,r(1,s)}return[o,s,c,l,u,f,d,h]}class Hh extends Re{constructor(e){super(),Ae(this,e,qh,jh,Ne,{})}}function Kh(t){let e;return{c(){e=_e("Add")},m(r,n){B(r,e,n)},p:Z,i:Z,o:Z,d(r){r&&M(e)}}}function Vh(t){let e,r;return e=new en({props:{icon:En,class:"animate-spin"}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Wh(t){let e,r,n,i;const a=[Vh,Kh],l=[];function u(o,s){return o[2]?0:1}return e=u(t),r=l[e]=a[e](t),{c(){r.c(),n=ge()},m(o,s){l[e].m(o,s),B(o,n,s),i=!0},p(o,s){let c=e;e=u(o),e===c?l[e].p(o,s):(ne(),N(l[c],1,1,()=>{l[c]=null}),re(),r=l[e],r?r.p(o,s):(r=l[e]=a[e](o),r.c()),R(r,1),r.m(n.parentNode,n))},i(o){i||(R(r),i=!0)},o(o){N(r),i=!1},d(o){l[e].d(o),o&&M(n)}}}function Gh(t){let e,r,n,i,a;function l(o){t[6](o)}let u={class:"px-2 py-1.5 text-sm ",placeholder:"Section name",autofocus:!0,delayFocus:300};return t[0]!==void 0&&(u.value=t[0]),e=new oa({props:u}),Ve.push(()=>Je(e,"value",l)),i=new wn({props:{disabled:!t[0],class:"w-14 flex-center h-[2.2rem]",$$slots:{default:[Wh]},$$scope:{ctx:t}}}),i.$on("click",t[5]),{c(){q(e.$$.fragment),n=X(),q(i.$$.fragment)},m(o,s){H(e,o,s),B(o,n,s),H(i,o,s),a=!0},p(o,s){const c={};!r&&s&1&&(r=!0,c.value=o[0],Qe(()=>r=!1)),e.$set(c);const f={};s&1&&(f.disabled=!o[0]),s&2052&&(f.$$scope={dirty:s,ctx:o}),i.$set(f)},i(o){a||(R(e.$$.fragment,o),R(i.$$.fragment,o),a=!0)},o(o){N(e.$$.fragment,o),N(i.$$.fragment,o),a=!1},d(o){K(e,o),o&&M(n),K(i,o)}}}function zh(t){let e,r,n;function i(l){t[7](l)}let a={class:"flex flex-center px-2 py-2 gap-2",wrapperClass:"border curved-half",wrapperStyles:"border-color: var(--border-color);",autoCloseOnFocusOut:!1,transition:"scale",trigger:"click",origin:"top right",placement:"bottom-end",offset:[0,10],$$slots:{default:[Gh]},$$scope:{ctx:t}};return t[1]!==void 0&&(a.close=t[1]),e=new $r({props:a}),Ve.push(()=>Je(e,"close",i)),{c(){q(e.$$.fragment)},m(l,u){H(e,l,u),n=!0},p(l,[u]){const o={};u&2053&&(o.$$scope={dirty:u,ctx:l}),!r&&u&2&&(r=!0,o.close=l[1],Qe(()=>r=!1)),e.$set(o)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){N(e.$$.fragment,l),n=!1},d(l){K(e,l)}}}function Yh(t,e,r){let n,i;const{todoist:a,todoistSections:l,selectedProject:u}=Me("stores");ue(t,l,m=>r(8,n=m)),ue(t,u,m=>r(9,i=m));let o="",s,c=!1;const f=()=>{o&&(r(2,c=!0),a.addSection({name:o,projectId:i}).then(m=>{it(l,n=[...n,m],n),r(0,o=""),r(2,c=!1),s()}))};function d(m){o=m,r(0,o)}function h(m){s=m,r(1,s)}return[o,s,c,l,u,f,d,h]}class Xh extends Re{constructor(e){super(),Ae(this,e,Yh,zh,Ne,{})}}function Jh(t){let e,r,n,i,a,l,u;return i=new Oe({props:{icon:aa,class:"ml-auto mr-2 shrink-0 text-xl"}}),i.$on("click",t[2]),{c(){e=G("div"),r=G("div"),n=X(),q(i.$$.fragment),Y(r,"class","cursor-pointer text-sm todist-task-content todist-task-description overflow-overlay scrollbar border-light curved-half px-2.5 py-1.5"),de(r,"width","100%"),de(r,"outline","none"),de(r,"min-height","2.15rem"),de(r,"max-height","5rem"),Y(e,"class","flex flex-row items-center justify-start gap-3 w-full")},m(o,s){B(o,e,s),U(e,r),U(e,n),H(i,e,null),a=!0,l||(u=[kt(t[3].call(null,r)),gt(r,"pointerdown",Cn(t[4])),gt(r,"keydown",t[5])],l=!0)},p:Z,i(o){a||(R(i.$$.fragment,o),a=!0)},o(o){N(i.$$.fragment,o),a=!1},d(o){o&&M(e),K(i),l=!1,Tn(u)}}}function Qh(t,e,r){let n,i;const{selectedSection:a,selectedProject:l,addTask:u}=Me("stores");ue(t,a,v=>r(9,n=v)),ue(t,l,v=>r(10,i=v));let o="",s;const c=()=>{o&&(u({projectId:i,parentId:null,content:o,sectionId:n}),s.setContent(""),o="")},f=new Ke.Renderer;f.link=function(v,_,T){return'<a target="_blank" href="'+v+'" title="'+_+'">'+T+"</a>"};const d=v=>(s=new yn(v,{placeholder:{text:"What's next?"},toolbar:{buttons:["bold","italic",{name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:'<span style="font-size: 0.8rem">🔗</span>',contentFA:'<iconify-icon icon="mdi:format-bold" style="vertical-align: middle; font-size: 1.25rem" ></iconify-icon>'}]},anchorPreview:!1,anchor:{formSaveLabel:'<iconify-icon icon="ic:baseline-check" style="vertical-align: middle; font-size: 1.25rem; padding-bottom: 0.2rem " ></iconify-icon>',formCloseLabel:'<iconify-icon icon="heroicons:x-mark-20-solid" style="vertical-align: middle; font-size: 1.25rem" ></iconify-icon>',placeholderText:"Make sure to add https://"}}),s.subscribe("editableInput",_=>{o=new Tt().turndown(s.getContent())}),{destroy:()=>{s.destroy()}});function h(v){Lr.call(this,t,v)}return[a,l,c,d,h,v=>{v.key==="Enter"&&!v.shiftKey&&(c(),v.preventDefault())}]}class Zh extends Re{constructor(e){super(),Ae(this,e,Qh,Jh,Ne,{})}}function Io(t,e,r){const n=t.slice();return n[8]=e[r],n}function Lo(t){let e,r,n,i,a;const l=[tp,ep],u=[];function o(s,c){return s[0].length===0?0:1}return r=o(t),n=u[r]=l[r](t),{c(){e=G("div"),n.c(),Y(e,"class","flex flex-col gap-2 shrink-0 mt-3")},m(s,c){B(s,e,c),u[r].m(e,null),a=!0},p(s,c){let f=r;r=o(s),r===f?u[r].p(s,c):(ne(),N(u[f],1,1,()=>{u[f]=null}),re(),n=u[r],n?n.p(s,c):(n=u[r]=l[r](s),n.c()),R(n,1),n.m(e,null))},i(s){a||(R(n),s&&St(()=>{a&&(i||(i=De(e,$e,{duration:300},!0)),i.run(1))}),a=!0)},o(s){N(n),s&&(i||(i=De(e,$e,{duration:300},!1)),i.run(0)),a=!1},d(s){s&&M(e),u[r].d(),s&&i&&i.end()}}}function ep(t){let e=[],r=new Map,n,i,a=t[0];const l=u=>u[8].id;for(let u=0;u<a.length;u+=1){let o=Io(t,a,u),s=l(o);r.set(s,e[u]=Do(s,o))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=ge()},m(u,o){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(u,o);B(u,n,o),i=!0},p(u,o){if(o&1){a=u[0],ne();for(let s=0;s<e.length;s+=1)e[s].r();e=We(e,o,l,1,u,a,r,n.parentNode,ot,Do,n,Io);for(let s=0;s<e.length;s+=1)e[s].a();re()}},i(u){if(!i){for(let o=0;o<a.length;o+=1)R(e[o]);i=!0}},o(u){for(let o=0;o<e.length;o+=1)N(e[o]);i=!1},d(u){for(let o=0;o<e.length;o+=1)e[o].d(u);u&&M(n)}}}function tp(t){let e,r;return e=new sn({props:{text:"No tasks are overdue"}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Do(t,e){let r,n,i,a,l=Z,u;return n=new dt({props:{task:e[8]}}),{key:t,first:null,c(){r=G("div"),q(n.$$.fragment),i=X(),this.first=r},m(o,s){B(o,r,s),H(n,r,null),U(r,i),u=!0},p(o,s){e=o;const c={};s&1&&(c.task=e[8]),n.$set(c)},r(){a=r.getBoundingClientRect()},f(){at(r),l()},a(){l(),l=st(r,a,lt,{duration:200})},i(o){u||(R(n.$$.fragment,o),u=!0)},o(o){N(n.$$.fragment,o),u=!1},d(o){o&&M(r),K(n)}}}function np(t){let e,r,n,i,a,l,u;i=new Oe({props:{icon:kn,class:"text-base "+(t[1]?"":"rotate-180"),tooltip:{title:t[1]?"Expand":"Collapse",position:"top"}}}),i.$on("click",t[3]);let o=!t[1]&&Lo(t);return{c(){e=G("div"),r=G("span"),r.textContent="Overdue",n=X(),q(i.$$.fragment),a=X(),o&&o.c(),l=ge(),Y(r,"class","text-sm"),Y(e,"class","flex items-center justify-start gap-3 mt-3 ml-1 group no-margin svelte-byscli")},m(s,c){B(s,e,c),U(e,r),U(e,n),H(i,e,null),B(s,a,c),o&&o.m(s,c),B(s,l,c),u=!0},p(s,[c]){const f={};c&2&&(f.class="text-base "+(s[1]?"":"rotate-180")),c&2&&(f.tooltip={title:s[1]?"Expand":"Collapse",position:"top"}),i.$set(f),s[1]?o&&(ne(),N(o,1,1,()=>{o=null}),re()):o?(o.p(s,c),c&2&&R(o,1)):(o=Lo(s),o.c(),R(o,1),o.m(l.parentNode,l))},i(s){u||(R(i.$$.fragment,s),R(o),u=!0)},o(s){N(i.$$.fragment,s),N(o),u=!1},d(s){s&&M(e),K(i),s&&M(a),o&&o.d(s),s&&M(l)}}}function rp(t,e,r){let n;Me("stores");let{tasks:i=[]}=e,a=!1;const l=()=>r(1,a=!a);return t.$$set=u=>{"tasks"in u&&r(2,i=u.tasks)},t.$$.update=()=>{t.$$.dirty&4&&r(0,n=i.filter(u=>{var o,s;return u.due&&ae(((o=u.due)==null?void 0:o.datetime)||((s=u.due)==null?void 0:s.date)).isBefore(ae(),"day")}).sort((u,o)=>{var f,d,h,m,v,_,T,k;const s=ae(((f=u.due)==null?void 0:f.datetime)||((d=u.due)==null?void 0:d.date)),c=ae(((h=o.due)==null?void 0:h.datetime)||((m=o.due)==null?void 0:m.date));if(s.isSame(c,"day")){if((v=u.due)!=null&&v.datetime&&((_=o.due)!=null&&_.datetime))return s.diff(c);if((T=u.due)!=null&&T.datetime)return-1;if((k=o.due)!=null&&k.datetime)return 1}return s.diff(c)})),t.$$.dirty&1&&console.log(n)},[n,a,i,l]}class ws extends Re{constructor(e){super(),Ae(this,e,rp,np,Ne,{tasks:2})}}function $o(t,e,r){const n=t.slice();return n[14]=e[r],n}function ip(t){let e;return{c(){e=_e("Confirm")},m(r,n){B(r,e,n)},d(r){r&&M(e)}}}function op(t){let e,r,n,i;function a(){return t[12](t[17])}return n=new wn({props:{class:"flex-center h-[2.2rem]",$$slots:{default:[ip]},$$scope:{ctx:t}}}),n.$on("click",a),{c(){e=G("span"),e.textContent="Are you sure? All tasks in this section will be deleted.",r=X(),q(n.$$.fragment),Y(e,"class","text-sm")},m(l,u){B(l,e,u),B(l,r,u),H(n,l,u),i=!0},p(l,u){t=l;const o={};u&262144&&(o.$$scope={dirty:u,ctx:t}),n.$set(o)},i(l){i||(R(n.$$.fragment,l),i=!0)},o(l){N(n.$$.fragment,l),i=!1},d(l){l&&M(e),l&&M(r),K(n,l)}}}function Bo(t){let e,r,n,i,a;const l=[sp,ap],u=[];function o(s,c){return s[3].length===0?0:1}return r=o(t),n=u[r]=l[r](t),{c(){e=G("div"),n.c(),Y(e,"class","flex flex-col gap-2 shrink-0 mt-3")},m(s,c){B(s,e,c),u[r].m(e,null),a=!0},p(s,c){let f=r;r=o(s),r===f?u[r].p(s,c):(ne(),N(u[f],1,1,()=>{u[f]=null}),re(),n=u[r],n?n.p(s,c):(n=u[r]=l[r](s),n.c()),R(n,1),n.m(e,null))},i(s){a||(R(n),s&&St(()=>{a&&(i||(i=De(e,$e,{duration:300},!0)),i.run(1))}),a=!0)},o(s){N(n),s&&(i||(i=De(e,$e,{duration:300},!1)),i.run(0)),a=!1},d(s){s&&M(e),u[r].d(),s&&i&&i.end()}}}function ap(t){let e=[],r=new Map,n,i,a=t[3];const l=u=>u[14].id;for(let u=0;u<a.length;u+=1){let o=$o(t,a,u),s=l(o);r.set(s,e[u]=Mo(s,o))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=ge()},m(u,o){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(u,o);B(u,n,o),i=!0},p(u,o){if(o&8){a=u[3],ne();for(let s=0;s<e.length;s+=1)e[s].r();e=We(e,o,l,1,u,a,r,n.parentNode,ot,Mo,n,$o);for(let s=0;s<e.length;s+=1)e[s].a();re()}},i(u){if(!i){for(let o=0;o<a.length;o+=1)R(e[o]);i=!0}},o(u){for(let o=0;o<e.length;o+=1)N(e[o]);i=!1},d(u){for(let o=0;o<e.length;o+=1)e[o].d(u);u&&M(n)}}}function sp(t){let e,r;return e=new sn({}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Mo(t,e){let r,n,i,a,l=Z,u;return n=new dt({props:{task:e[14]}}),{key:t,first:null,c(){r=G("div"),q(n.$$.fragment),i=X(),this.first=r},m(o,s){B(o,r,s),H(n,r,null),U(r,i),u=!0},p(o,s){e=o;const c={};s&8&&(c.task=e[14]),n.$set(c)},r(){a=r.getBoundingClientRect()},f(){at(r),l()},a(){l(),l=st(r,a,lt,{duration:200})},i(o){u||(R(n.$$.fragment,o),u=!0)},o(o){N(n.$$.fragment,o),u=!1},d(o){o&&M(r),K(n)}}}function lp(t){let e,r,n=t[0].name+"",i,a,l,u,o,s,c,f,d,h,m,v,_,T;l=new Oe({props:{icon:aa,tooltip:"Add task",class:"text-base"}}),l.$on("click",t[10]),o=new Oe({props:{icon:kn,class:"text-base "+(t[2]?"":"rotate-180"),tooltip:{title:t[2]?"Expand":"Collapse",position:"top"}}}),o.$on("click",t[11]),f=new Oe({props:{icon:Is,tooltip:"Delete section",class:"text-base "+(t[1]?"opacity-100":"opacity-0")+" group-hover:opacity-100"}});function k(y){t[13](y)}let g={class:"flex flex-center flex-col px-4 py-2 gap-2 max-w-[14rem]",wrapperClass:"border curved-half",wrapperStyles:"border-color: var(--border-color);",autoCloseOnFocusOut:!1,transition:"scale",trigger:"click",origin:"top left",placement:"bottom-start",offset:[0,10],$$slots:{default:[op,({close:y})=>({17:y}),({close:y})=>y?131072:0]},$$scope:{ctx:t}};t[1]!==void 0&&(g.show=t[1]),h=new $r({props:g}),Ve.push(()=>Je(h,"show",k));let C=!t[2]&&Bo(t);return{c(){e=G("div"),r=G("span"),i=_e(n),a=X(),q(l.$$.fragment),u=X(),q(o.$$.fragment),s=X(),c=G("div"),q(f.$$.fragment),d=X(),q(h.$$.fragment),v=X(),C&&C.c(),_=ge(),Y(r,"class","text-sm"),Y(c,"class","flex-center"),Y(e,"class","flex items-center justify-start gap-3 mt-3 ml-1 group no-margin svelte-byscli")},m(y,I){B(y,e,I),U(e,r),U(r,i),U(e,a),H(l,e,null),U(e,u),H(o,e,null),U(e,s),U(e,c),H(f,c,null),U(e,d),H(h,e,null),B(y,v,I),C&&C.m(y,I),B(y,_,I),T=!0},p(y,[I]){(!T||I&1)&&n!==(n=y[0].name+"")&&tn(i,n);const A={};I&4&&(A.class="text-base "+(y[2]?"":"rotate-180")),I&4&&(A.tooltip={title:y[2]?"Expand":"Collapse",position:"top"}),o.$set(A);const P={};I&2&&(P.class="text-base "+(y[1]?"opacity-100":"opacity-0")+" group-hover:opacity-100"),f.$set(P);const O={};I&393217&&(O.$$scope={dirty:I,ctx:y}),!m&&I&2&&(m=!0,O.show=y[1],Qe(()=>m=!1)),h.$set(O),y[2]?C&&(ne(),N(C,1,1,()=>{C=null}),re()):C?(C.p(y,I),I&4&&R(C,1)):(C=Bo(y),C.c(),R(C,1),C.m(_.parentNode,_))},i(y){T||(R(l.$$.fragment,y),R(o.$$.fragment,y),R(f.$$.fragment,y),R(h.$$.fragment,y),R(C),T=!0)},o(y){N(l.$$.fragment,y),N(o.$$.fragment,y),N(f.$$.fragment,y),N(h.$$.fragment,y),N(C),T=!1},d(y){y&&M(e),K(l),K(o),K(f),K(h),y&&M(v),C&&C.d(y),y&&M(_)}}}function up(t,e,r){let n,i;const{todoist:a,todoistSections:l,selectedProject:u,addTask:o}=Me("stores");ue(t,u,T=>r(4,i=T));let{section:s}=e,{tasks:c=[]}=e,f=!1,d=!1;console.log("Section");const h=()=>o({projectId:i,sectionId:s.id,content:"New Task",parentId:null}),m=()=>r(2,d=!d),v=T=>{l.update(k=>k.filter(g=>g.id!==s.id)),a.deleteSection(s.id),T()};function _(T){f=T,r(1,f)}return t.$$set=T=>{"section"in T&&r(0,s=T.section),"tasks"in T&&r(9,c=T.tasks)},t.$$.update=()=>{t.$$.dirty&513&&r(3,n=c.filter(T=>T.sectionId===s.id))},[s,f,d,n,i,a,l,u,o,c,h,m,v,_]}class cp extends Re{constructor(e){super(),Ae(this,e,up,lp,Ne,{section:0,tasks:9})}}function Fo(t,e,r){const n=t.slice();return n[8]=e[r],n}function xo(t){let e,r,n,i,a;const l=[dp,fp],u=[];function o(s,c){return s[0].length===0?0:1}return r=o(t),n=u[r]=l[r](t),{c(){e=G("div"),n.c(),Y(e,"class","flex flex-col gap-2 shrink-0 mt-3")},m(s,c){B(s,e,c),u[r].m(e,null),a=!0},p(s,c){let f=r;r=o(s),r===f?u[r].p(s,c):(ne(),N(u[f],1,1,()=>{u[f]=null}),re(),n=u[r],n?n.p(s,c):(n=u[r]=l[r](s),n.c()),R(n,1),n.m(e,null))},i(s){a||(R(n),s&&St(()=>{a&&(i||(i=De(e,$e,{duration:300},!0)),i.run(1))}),a=!0)},o(s){N(n),s&&(i||(i=De(e,$e,{duration:300},!1)),i.run(0)),a=!1},d(s){s&&M(e),u[r].d(),s&&i&&i.end()}}}function fp(t){let e=[],r=new Map,n,i,a=t[0];const l=u=>u[8].id;for(let u=0;u<a.length;u+=1){let o=Fo(t,a,u),s=l(o);r.set(s,e[u]=Uo(s,o))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=ge()},m(u,o){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(u,o);B(u,n,o),i=!0},p(u,o){if(o&1){a=u[0],ne();for(let s=0;s<e.length;s+=1)e[s].r();e=We(e,o,l,1,u,a,r,n.parentNode,ot,Uo,n,Fo);for(let s=0;s<e.length;s+=1)e[s].a();re()}},i(u){if(!i){for(let o=0;o<a.length;o+=1)R(e[o]);i=!0}},o(u){for(let o=0;o<e.length;o+=1)N(e[o]);i=!1},d(u){for(let o=0;o<e.length;o+=1)e[o].d(u);u&&M(n)}}}function dp(t){let e,r;return e=new sn({props:{text:"No tasks due today"}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Uo(t,e){let r,n,i,a,l=Z,u;return n=new dt({props:{task:e[8]}}),{key:t,first:null,c(){r=G("div"),q(n.$$.fragment),i=X(),this.first=r},m(o,s){B(o,r,s),H(n,r,null),U(r,i),u=!0},p(o,s){e=o;const c={};s&1&&(c.task=e[8]),n.$set(c)},r(){a=r.getBoundingClientRect()},f(){at(r),l()},a(){l(),l=st(r,a,lt,{duration:200})},i(o){u||(R(n.$$.fragment,o),u=!0)},o(o){N(n.$$.fragment,o),u=!1},d(o){o&&M(r),K(n)}}}function hp(t){let e,r,n,i,a,l,u;i=new Oe({props:{icon:kn,class:"text-base "+(t[1]?"":"rotate-180"),tooltip:{title:t[1]?"Expand":"Collapse",position:"top"}}}),i.$on("click",t[3]);let o=!t[1]&&xo(t);return{c(){e=G("div"),r=G("span"),r.textContent="Today",n=X(),q(i.$$.fragment),a=X(),o&&o.c(),l=ge(),Y(r,"class","text-sm"),Y(e,"class","flex items-center justify-start gap-3 mt-3 ml-1 group no-margin svelte-byscli")},m(s,c){B(s,e,c),U(e,r),U(e,n),H(i,e,null),B(s,a,c),o&&o.m(s,c),B(s,l,c),u=!0},p(s,[c]){const f={};c&2&&(f.class="text-base "+(s[1]?"":"rotate-180")),c&2&&(f.tooltip={title:s[1]?"Expand":"Collapse",position:"top"}),i.$set(f),s[1]?o&&(ne(),N(o,1,1,()=>{o=null}),re()):o?(o.p(s,c),c&2&&R(o,1)):(o=xo(s),o.c(),R(o,1),o.m(l.parentNode,l))},i(s){u||(R(i.$$.fragment,s),R(o),u=!0)},o(s){N(i.$$.fragment,s),N(o),u=!1},d(s){s&&M(e),K(i),s&&M(a),o&&o.d(s),s&&M(l)}}}function pp(t,e,r){let n;Me("stores");let{tasks:i=[]}=e,a=!1;const l=()=>r(1,a=!a);return t.$$set=u=>{"tasks"in u&&r(2,i=u.tasks)},t.$$.update=()=>{t.$$.dirty&4&&r(0,n=i.filter(u=>{var o,s;return u.due&&ae(((o=u.due)==null?void 0:o.datetime)||((s=u.due)==null?void 0:s.date)).isSame(ae(),"day")&&!u.isCompleted}).sort((u,o)=>{var f,d,h,m,v,_,T,k;const s=ae(((f=u.due)==null?void 0:f.datetime)||((d=u.due)==null?void 0:d.date)),c=ae(((h=o.due)==null?void 0:h.datetime)||((m=o.due)==null?void 0:m.date));if(s.isSame(c,"day")){if((v=u.due)!=null&&v.datetime&&((_=o.due)!=null&&_.datetime))return s.diff(c);if((T=u.due)!=null&&T.datetime)return-1;if((k=o.due)!=null&&k.datetime)return 1}return s.diff(c)})),t.$$.dirty&5&&console.log(i,n)},[n,a,i,l]}class mp extends Re{constructor(e){super(),Ae(this,e,pp,hp,Ne,{tasks:2})}}function jo(t,e,r){const n=t.slice();return n[41]=e[r],n}function qo(t,e,r){const n=t.slice();return n[38]=e[r],n}function Ho(t,e,r){const n=t.slice();return n[41]=e[r],n}function Ko(t,e,r){const n=t.slice();return n[35]=e[r],n}function vp(t){let e,r,n,i,a,l,u,o=t[9]!=="today"&&t[9]!=="upcoming"&&Vo();const s=[wp,Ep,_p,yp,bp],c=[];function f(h,m){return h[0].length===0&&h[7].length===0&&h[9]!=="today"&&h[9]!=="upcoming"?0:h[9]==="today"?1:h[9]==="upcoming"?2:h[2]===null?3:4}n=f(t),i=c[n]=s[n](t);let d=(t[10]||t[8])&&Jo(t);return{c(){e=G("div"),o&&o.c(),r=X(),i.c(),a=X(),d&&d.c(),Y(e,"class",l=(t[8]?"h-[40rem]":"h-[24.75rem]")+" w-[24rem] px-2 py-2 overflow-hidden flex flex-col"),de(e,"transition","max-height 250ms ease-in-out")},m(h,m){B(h,e,m),o&&o.m(e,null),U(e,r),c[n].m(e,null),U(e,a),d&&d.m(e,null),u=!0},p(h,m){h[9]!=="today"&&h[9]!=="upcoming"?o?(o.p(h,m),m[0]&512&&R(o,1)):(o=Vo(),o.c(),R(o,1),o.m(e,r)):o&&(ne(),N(o,1,1,()=>{o=null}),re());let v=n;n=f(h),n===v?c[n].p(h,m):(ne(),N(c[v],1,1,()=>{c[v]=null}),re(),i=c[n],i?i.p(h,m):(i=c[n]=s[n](h),i.c()),R(i,1),i.m(e,a)),h[10]||h[8]?d?(d.p(h,m),m[0]&1280&&R(d,1)):(d=Jo(h),d.c(),R(d,1),d.m(e,null)):d&&(ne(),N(d,1,1,()=>{d=null}),re()),(!u||m[0]&256&&l!==(l=(h[8]?"h-[40rem]":"h-[24.75rem]")+" w-[24rem] px-2 py-2 overflow-hidden flex flex-col"))&&Y(e,"class",l)},i(h){u||(R(o),R(i),R(d),u=!0)},o(h){N(o),N(i),N(d),u=!1},d(h){h&&M(e),o&&o.d(),c[n].d(),d&&d.d()}}}function gp(t){let e,r;return e=new la({}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Vo(t){let e,r,n,i,a,l,u,o;return r=new Zh({}),a=new Oe({props:{icon:$s,tooltip:"Add section",class:"shrink-0 mr-2 text-xl"}}),u=new Xh({}),{c(){e=G("div"),q(r.$$.fragment),n=X(),i=G("div"),q(a.$$.fragment),l=X(),q(u.$$.fragment),Y(i,"class","flex-center shrink-0"),Y(e,"class","flex items-center gap-2 w-full mb-2.5")},m(s,c){B(s,e,c),H(r,e,null),U(e,n),U(e,i),H(a,i,null),U(e,l),H(u,e,null),o=!0},p:Z,i(s){o||(R(r.$$.fragment,s),R(a.$$.fragment,s),R(u.$$.fragment,s),o=!0)},o(s){N(r.$$.fragment,s),N(a.$$.fragment,s),N(u.$$.fragment,s),o=!1},d(s){s&&M(e),K(r),K(a),K(u)}}}function bp(t){let e,r,n,i;const a=[Tp,Cp],l=[];function u(o,s){return o[0].length===0?0:1}return r=u(t),n=l[r]=a[r](t),{c(){e=G("div"),n.c(),Y(e,"class","flex flex-col gap-2 overflow-overlay scrollbar-none flex-1")},m(o,s){B(o,e,s),l[r].m(e,null),i=!0},p(o,s){let c=r;r=u(o),r===c?l[r].p(o,s):(ne(),N(l[c],1,1,()=>{l[c]=null}),re(),n=l[r],n?n.p(o,s):(n=l[r]=a[r](o),n.c()),R(n,1),n.m(e,null))},i(o){i||(R(n),i=!0)},o(o){N(n),i=!1},d(o){o&&M(e),l[r].d()}}}function yp(t){let e,r=t[0].filter(Zo).length,n,i=[],a=new Map,l,u=r&&Go(t),o=t[7];const s=c=>c[38].id;for(let c=0;c<o.length;c+=1){let f=qo(t,o,c),d=s(f);a.set(d,i[c]=Yo(d,f))}return{c(){e=G("div"),u&&u.c(),n=X();for(let c=0;c<i.length;c+=1)i[c].c();Y(e,"class","flex flex-col overflow-overlay scrollbar-none flex-1")},m(c,f){B(c,e,f),u&&u.m(e,null),U(e,n);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null);l=!0},p(c,f){f[0]&1&&(r=c[0].filter(Zo).length),r?u?(u.p(c,f),f[0]&1&&R(u,1)):(u=Go(c),u.c(),R(u,1),u.m(e,n)):u&&(ne(),N(u,1,1,()=>{u=null}),re()),f[0]&129&&(o=c[7],ne(),i=We(i,f,s,1,c,o,a,e,ua,Yo,null,qo),re())},i(c){if(!l){R(u);for(let f=0;f<o.length;f+=1)R(i[f]);l=!0}},o(c){N(u);for(let f=0;f<i.length;f+=1)N(i[f]);l=!1},d(c){c&&M(e),u&&u.d();for(let f=0;f<i.length;f+=1)i[f].d()}}}function _p(t){let e,r,n,i=[],a=new Map,l;r=new ws({props:{tasks:t[4]}});let u=t[4].reduce(t[24],[]).sort(t[25]);const o=s=>s[35];for(let s=0;s<u.length;s+=1){let c=Ko(t,u,s),f=o(c);a.set(f,i[s]=Xo(f,c))}return{c(){e=G("div"),q(r.$$.fragment),n=X();for(let s=0;s<i.length;s+=1)i[s].c();Y(e,"class","flex flex-col overflow-overlay scrollbar-none flex-1 mt-1")},m(s,c){B(s,e,c),H(r,e,null),U(e,n);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);l=!0},p(s,c){const f={};c[0]&16&&(f.tasks=s[4]),r.$set(f),c[0]&16&&(u=s[4].reduce(s[24],[]).sort(s[25]),ne(),i=We(i,c,o,1,s,u,a,e,ua,Xo,null,Ko),re())},i(s){if(!l){R(r.$$.fragment,s);for(let c=0;c<u.length;c+=1)R(i[c]);l=!0}},o(s){N(r.$$.fragment,s);for(let c=0;c<i.length;c+=1)N(i[c]);l=!1},d(s){s&&M(e),K(r);for(let c=0;c<i.length;c+=1)i[c].d()}}}function Ep(t){let e,r,n,i,a;return r=new mp({props:{tasks:t[4]}}),i=new ws({props:{tasks:t[4]}}),{c(){e=G("div"),q(r.$$.fragment),n=X(),q(i.$$.fragment),Y(e,"class","flex flex-col overflow-overlay scrollbar-none flex-1 mt-1")},m(l,u){B(l,e,u),H(r,e,null),U(e,n),H(i,e,null),a=!0},p(l,u){const o={};u[0]&16&&(o.tasks=l[4]),r.$set(o);const s={};u[0]&16&&(s.tasks=l[4]),i.$set(s)},i(l){a||(R(r.$$.fragment,l),R(i.$$.fragment,l),a=!0)},o(l){N(r.$$.fragment,l),N(i.$$.fragment,l),a=!1},d(l){l&&M(e),K(r),K(i)}}}function wp(t){let e,r;return e=new Bh({props:{view:t[9]}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){const a={};i[0]&512&&(a.view=n[9]),e.$set(a)},i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Cp(t){let e=[],r=new Map,n,i,a=t[0];const l=u=>u[41].id;for(let u=0;u<a.length;u+=1){let o=jo(t,a,u),s=l(o);r.set(s,e[u]=Wo(s,o))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=ge()},m(u,o){for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(u,o);B(u,n,o),i=!0},p(u,o){if(o[0]&1){a=u[0],ne();for(let s=0;s<e.length;s+=1)e[s].r();e=We(e,o,l,1,u,a,r,n.parentNode,ot,Wo,n,jo);for(let s=0;s<e.length;s+=1)e[s].a();re()}},i(u){if(!i){for(let o=0;o<a.length;o+=1)R(e[o]);i=!0}},o(u){for(let o=0;o<e.length;o+=1)N(e[o]);i=!1},d(u){for(let o=0;o<e.length;o+=1)e[o].d(u);u&&M(n)}}}function Tp(t){let e,r;return e=new sn({}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Wo(t,e){let r,n,i,a,l=Z,u;return n=new dt({props:{task:e[41]}}),{key:t,first:null,c(){r=G("div"),q(n.$$.fragment),i=X(),this.first=r},m(o,s){B(o,r,s),H(n,r,null),U(r,i),u=!0},p(o,s){e=o;const c={};s[0]&1&&(c.task=e[41]),n.$set(c)},r(){a=r.getBoundingClientRect()},f(){at(r),l()},a(){l(),l=st(r,a,lt,{duration:200})},i(o){u||(R(n.$$.fragment,o),u=!0)},o(o){N(n.$$.fragment,o),u=!1},d(o){o&&M(r),K(n)}}}function Go(t){let e,r=[],n=new Map,i,a=t[0].filter(ea);const l=u=>u[41].id;for(let u=0;u<a.length;u+=1){let o=Ho(t,a,u),s=l(o);n.set(s,r[u]=zo(s,o))}return{c(){e=G("div");for(let u=0;u<r.length;u+=1)r[u].c();Y(e,"class","flex flex-col gap-2")},m(u,o){B(u,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null);i=!0},p(u,o){if(o[0]&1){a=u[0].filter(ea),ne();for(let s=0;s<r.length;s+=1)r[s].r();r=We(r,o,l,1,u,a,n,e,ot,zo,null,Ho);for(let s=0;s<r.length;s+=1)r[s].a();re()}},i(u){if(!i){for(let o=0;o<a.length;o+=1)R(r[o]);i=!0}},o(u){for(let o=0;o<r.length;o+=1)N(r[o]);i=!1},d(u){u&&M(e);for(let o=0;o<r.length;o+=1)r[o].d()}}}function zo(t,e){let r,n,i,a,l=Z,u;return n=new dt({props:{task:e[41]}}),{key:t,first:null,c(){r=G("div"),q(n.$$.fragment),i=X(),this.first=r},m(o,s){B(o,r,s),H(n,r,null),U(r,i),u=!0},p(o,s){e=o;const c={};s[0]&1&&(c.task=e[41]),n.$set(c)},r(){a=r.getBoundingClientRect()},f(){at(r),l()},a(){l(),l=st(r,a,lt,{duration:200})},i(o){u||(R(n.$$.fragment,o),u=!0)},o(o){N(n.$$.fragment,o),u=!1},d(o){o&&M(r),K(n)}}}function Yo(t,e){let r,n,i;return n=new cp({props:{section:e[38],tasks:e[0]}}),{key:t,first:null,c(){r=ge(),q(n.$$.fragment),this.first=r},m(a,l){B(a,r,l),H(n,a,l),i=!0},p(a,l){e=a;const u={};l[0]&128&&(u.section=e[38]),l[0]&1&&(u.tasks=e[0]),n.$set(u)},i(a){i||(R(n.$$.fragment,a),i=!0)},o(a){N(n.$$.fragment,a),i=!1},d(a){a&&M(r),K(n,a)}}}function Xo(t,e){let r,n,i;return n=new Lh({props:{date:ae(e[35]),tasks:e[4]}}),{key:t,first:null,c(){r=ge(),q(n.$$.fragment),this.first=r},m(a,l){B(a,r,l),H(n,a,l),i=!0},p(a,l){e=a;const u={};l[0]&16&&(u.date=ae(e[35])),l[0]&16&&(u.tasks=e[4]),n.$set(u)},i(a){i||(R(n.$$.fragment,a),i=!0)},o(a){N(n.$$.fragment,a),i=!1},d(a){a&&M(r),K(n,a)}}}function Jo(t){let e,r,n,i,a,l,u,o,s,c,f,d,h,m,v,_,T,k=t[9]!=="today"&&t[9]!=="upcoming"&&Qo(t);i=new Dr({props:{options:[{id:"today",label:"Today",value:"today"},{id:"upcoming",label:"Upcoming",value:"upcoming"},...t[5].map(ta)],value:t[9]||t[1],placeholder:"Select a project",class:"mr-2",offset:[0,5]}}),i.$on("change",t[27]);const g=[Sp,kp],C=[];function y(O,V){return O[9]!=="today"&&O[9]!=="upcoming"?0:1}l=y(t),u=C[l]=g[l](t),c=new Oe({props:{icon:Bs,tooltip:"Add project",class:"shrink-0  mr-2 text-xl"}}),d=new Hh({});const I=[Ap,Rp],A=[];function P(O,V){return O[6]?0:1}return m=P(t),v=A[m]=I[m](t),{c(){e=G("div"),k&&k.c(),r=X(),n=G("div"),q(i.$$.fragment),a=X(),u.c(),o=X(),s=G("div"),q(c.$$.fragment),f=X(),q(d.$$.fragment),h=X(),v.c(),Y(s,"class","flex-center shrink-0 ml-auto"),Y(n,"class","flex items-center justify-start gap-2 shrink-0 w-full"),Y(e,"class","flex flex-col shrink-0 items-start justify-start gap-2 w-full pb-1 mt-2.5 pl-0.5")},m(O,V){B(O,e,V),k&&k.m(e,null),U(e,r),U(e,n),H(i,n,null),U(n,a),C[l].m(n,null),U(n,o),U(n,s),H(c,s,null),U(n,f),H(d,n,null),U(n,h),A[m].m(n,null),T=!0},p(O,V){O[9]!=="today"&&O[9]!=="upcoming"?k?(k.p(O,V),V[0]&512&&R(k,1)):(k=Qo(O),k.c(),R(k,1),k.m(e,r)):k&&(ne(),N(k,1,1,()=>{k=null}),re());const z={};V[0]&32&&(z.options=[{id:"today",label:"Today",value:"today"},{id:"upcoming",label:"Upcoming",value:"upcoming"},...O[5].map(ta)]),V[0]&514&&(z.value=O[9]||O[1]),i.$set(z);let J=l;l=y(O),l===J?C[l].p(O,V):(ne(),N(C[J],1,1,()=>{C[J]=null}),re(),u=C[l],u?u.p(O,V):(u=C[l]=g[l](O),u.c()),R(u,1),u.m(n,o));let p=m;m=P(O),m===p?A[m].p(O,V):(ne(),N(A[p],1,1,()=>{A[p]=null}),re(),v=A[m],v?v.p(O,V):(v=A[m]=I[m](O),v.c()),R(v,1),v.m(n,null))},i(O){T||(R(k),R(i.$$.fragment,O),R(u),R(c.$$.fragment,O),R(d.$$.fragment,O),R(v),O&&St(()=>{T&&(_||(_=De(e,$e,{duration:300},!0)),_.run(1))}),T=!0)},o(O){N(k),N(i.$$.fragment,O),N(u),N(c.$$.fragment,O),N(d.$$.fragment,O),N(v),O&&(_||(_=De(e,$e,{duration:300},!1)),_.run(0)),T=!1},d(O){O&&M(e),k&&k.d(),K(i),C[l].d(),K(c),K(d),A[m].d(),O&&_&&_.end()}}}function Qo(t){let e,r,n,i,a;function l(o){t[26](o)}let u={};return t[3]!==void 0&&(u.checked=t[3]),n=new ia({props:u}),Ve.push(()=>Je(n,"checked",l)),{c(){e=G("span"),r=_e(`Show completed tasks
            `),q(n.$$.fragment),Y(e,"class","flex flex-row items-center justify-start gap-2 text-sm ml-1")},m(o,s){B(o,e,s),U(e,r),H(n,e,null),a=!0},p(o,s){const c={};!i&&s[0]&8&&(i=!0,c.checked=o[3],Qe(()=>i=!1)),n.$set(c)},i(o){a||(R(n.$$.fragment,o),a=!0)},o(o){N(n.$$.fragment,o),a=!1},d(o){o&&M(e),K(n)}}}function kp(t){let e,r,n,i,a,l,u;return i=new en({props:{icon:Ms}}),{c(){e=G("span"),r=_e(`View only
              `),n=G("div"),q(i.$$.fragment),Y(n,"class","flex-center shrink-0"),Y(e,"class","text-sm flex-center gap-2")},m(o,s){B(o,e,s),U(e,r),U(e,n),H(i,n,null),a=!0,l||(u=kt(ca.call(null,n,"Select a project to add new tasks")),l=!0)},p:Z,i(o){a||(R(i.$$.fragment,o),a=!0)},o(o){N(i.$$.fragment,o),a=!1},d(o){o&&M(e),K(i),l=!1,u()}}}function Sp(t){let e,r,n,i,a,l,u,o;r=new en({props:{icon:Fs}});function s(f){t[28](f)}let c={options:[{label:"All tasks",value:null},...t[7].map(na)],placeholder:"Select a section",class:"mr-2",offset:[0,5]};return t[2]!==void 0&&(c.value=t[2]),i=new Dr({props:c}),Ve.push(()=>Je(i,"value",s)),{c(){e=G("div"),q(r.$$.fragment),n=X(),q(i.$$.fragment),Y(e,"class","flex-center shrink-0")},m(f,d){B(f,e,d),H(r,e,null),B(f,n,d),H(i,f,d),l=!0,u||(o=kt(ca.call(null,e,"Sections")),u=!0)},p(f,d){const h={};d[0]&128&&(h.options=[{label:"All tasks",value:null},...f[7].map(na)]),!a&&d[0]&4&&(a=!0,h.value=f[2],Qe(()=>a=!1)),i.$set(h)},i(f){l||(R(r.$$.fragment,f),R(i.$$.fragment,f),l=!0)},o(f){N(r.$$.fragment,f),N(i.$$.fragment,f),l=!1},d(f){f&&M(e),K(r),f&&M(n),K(i,f),u=!1,o()}}}function Rp(t){let e,r;return e=new Oe({props:{icon:xs,tooltip:"Refresh",class:"mr-2 text-xl shrink-0"}}),e.$on("click",t[22]),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Ap(t){let e,r;return e=new Oe({props:{icon:En,tooltip:"Updating tasks",class:"mr-2 animate-spin shrink-0"}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Np(t){let e,r,n,i;const a=[gp,vp],l=[];function u(o,s){return o[6]&&o[5].length===0?0:1}return e=u(t),r=l[e]=a[e](t),{c(){r.c(),n=ge()},m(o,s){l[e].m(o,s),B(o,n,s),i=!0},p(o,s){let c=e;e=u(o),e===c?l[e].p(o,s):(ne(),N(l[c],1,1,()=>{l[c]=null}),re(),r=l[e],r?r.p(o,s):(r=l[e]=a[e](o),r.c()),R(r,1),r.m(n.parentNode,n))},i(o){i||(R(r),i=!0)},o(o){N(r),i=!1},d(o){l[e].d(o),o&&M(n)}}}const Zo=t=>t.sectionId===null,ea=t=>t.sectionId===null,ta=t=>({id:t.id,label:t.name,value:t.id}),na=t=>({id:t.id,label:t.name,value:t.id});function Op(t,e,r){let n,i,a,l,u,o,s,c,f,d,h,m,v;const{todoist:_,todoistProjects:T,todoistSections:k,todoistTasks:g,selectedProject:C,selectedSection:y,lastUpdated:I,tempIds:A,todoistCompletedTasks:P,isTodoistIntegrated:O,showCompletedTasks:V}=Me("stores");ue(t,T,$=>r(5,d=$)),ue(t,k,$=>r(23,o=$)),ue(t,g,$=>r(4,f=$)),ue(t,C,$=>r(1,u=$)),ue(t,y,$=>r(2,s=$)),ue(t,I,$=>r(30,a=$)),ue(t,O,$=>r(31,l=$)),ue(t,V,$=>r(3,c=$));const z=Me("alwaysAppView");ue(t,z,$=>r(8,h=$));const J=Me("appActive");ue(t,J,$=>r(10,v=$));let p=!1,w;const b=Ls("todoistSelectedView",null);ue(t,b,$=>r(9,m=$));const E=async()=>{if(p)return;r(6,p=!0);const $=_.getProjects(),W=_.getSections(),Q=_.getTasks(),se=sa.get("/integration/todoist/get_tasks").then(It=>It.data.data).catch(()=>[]);await Promise.all([$,W,Q,se]);const be=await se,Ot=await Q,Pt=be.filter(It=>!Ot.some(Cs=>Cs.id===It.id));T.set(await $),k.set(await W),P.set(be),g.set([...Ot,...Pt]),I.set(new Date().getTime()),r(6,p=!1),A.set({}),w&&clearInterval(w),w=setInterval(E,5*60*1e3)};Ds(()=>{let $;return l&&(new Date().getTime()-a>5*60*1e3?E():$=setTimeout(E,5*60*1e3)),()=>{$&&clearTimeout($),w&&clearTimeout(w)}});const S=($,W)=>{if(!W.due||W.isCompleted)return $;const Q=W.due.datetime?ae(W.due.datetime).format("YYYY-MM-DD"):ae(W.due.date).format("YYYY-MM-DD");return ae(Q).isBefore(ae(),"day")||$.includes(Q)||$.push(Q),$},D=($,W)=>ae($).isBefore(W)?-1:1;function j($){c=$,V.set(c)}const F=({detail:$})=>{$==="today"||$==="upcoming"?(b.set($),C.set(null),y.set(null)):(b.set(null),C.set($)),it(y,s=null,s)};function L($){s=$,y.set(s)}return t.$$.update=()=>{var $;t.$$.dirty[0]&34&&!u&&d.length>0&&it(C,u=d[0].id,u),t.$$.dirty[0]&34&&(d.find(W=>W.id===u)||it(C,u=($=d[0])==null?void 0:$.id,u)),t.$$.dirty[0]&30&&r(0,n=f.filter(W=>W.projectId===u&&!W.parentId&&(!W.isCompleted||c)&&(W.sectionId===s||s===null)).sort((W,Q)=>W.order-Q.order).sort((W,Q)=>W.isCompleted&&!Q.isCompleted?1:!W.isCompleted&&Q.isCompleted?-1:0)),t.$$.dirty[0]&1&&console.log(n),t.$$.dirty[0]&8388610&&r(7,i=o.filter(W=>W.projectId===u).sort((W,Q)=>W.order-Q.order))},[n,u,s,c,f,d,p,i,h,m,v,T,k,g,C,y,I,O,V,z,J,b,E,o,S,D,j,F,L]}class Pp extends Re{constructor(e){super(),Ae(this,e,Op,Np,Ne,{},null,[-1,-1])}}function Ip(t){let e,r;return e=new Vs({props:{embeddedInsideApp:!0,customText:"Integrations are only available for Dashy Pro users. Upgrade now to use this widget.",name:"Todoist",iconImg:"/apps/todoist.png"}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Lp(t){let e,r,n,i;const a=[$p,Dp],l=[];function u(o,s){return o[1]?0:1}return e=u(t),r=l[e]=a[e](t),{c(){r.c(),n=ge()},m(o,s){l[e].m(o,s),B(o,n,s),i=!0},p(o,s){let c=e;e=u(o),e===c?l[e].p(o,s):(ne(),N(l[c],1,1,()=>{l[c]=null}),re(),r=l[e],r?r.p(o,s):(r=l[e]=a[e](o),r.c()),R(r,1),r.m(n.parentNode,n))},i(o){i||(R(r),i=!0)},o(o){N(r),i=!1},d(o){l[e].d(o),o&&M(n)}}}function Dp(t){let e,r;return e=new la({}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function $p(t){let e,r,n,i;const a=[Fp,Mp,Bp],l=[];function u(o,s){return o[0]?0:o[2]?1:2}return e=u(t),r=l[e]=a[e](t),{c(){r.c(),n=ge()},m(o,s){l[e].m(o,s),B(o,n,s),i=!0},p(o,s){let c=e;e=u(o),e===c?l[e].p(o,s):(ne(),N(l[c],1,1,()=>{l[c]=null}),re(),r=l[e],r?r.p(o,s):(r=l[e]=a[e](o),r.c()),R(r,1),r.m(n.parentNode,n))},i(o){i||(R(r),i=!0)},o(o){N(r),i=!1},d(o){l[e].d(o),o&&M(n)}}}function Bp(t){let e,r;return e=new ds({props:{widgetId:t[3]}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Mp(t){let e,r;return e=new ds({props:{loading:!0}}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function Fp(t){let e,r;return e=new Pp({}),{c(){q(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:Z,i(n){r||(R(e.$$.fragment,n),r=!0)},o(n){N(e.$$.fragment,n),r=!1},d(n){K(e,n)}}}function xp(t){let e,r,n,i;const a=[Lp,Ip],l=[];function u(o,s){return 0}return e=u(),r=l[e]=a[e](t),{c(){r.c(),n=ge()},m(o,s){l[e].m(o,s),B(o,n,s),i=!0},p(o,[s]){r.p(o,s)},i(o){i||(R(r),i=!0)},o(o){N(r),i=!1},d(o){l[e].d(o),o&&M(n)}}}function Up(t,e,r){let n,i,a,l,{config:u}=e;const o=u.id,s={path:`user_data/{uid}/profiles/{currentProfile}/apps/${o}`,currentProfile:Ws,uid:Gs},{create:c,start:f,stop:d,isFetched:h,createPersist:m}=Hs(s);ue(t,h,p=>r(1,i=p));const v=Us([js],([p])=>{var w;return((w=p==null?void 0:p[o==="todoist"?"todoist":`todoist_${o}`])==null?void 0:w.id)??!1});ue(t,v,p=>r(2,a=p));const _=m("accessToken",null);ue(t,_,p=>r(0,n=p));const T=m("projects",[]),k=m("sections",[]),g=m("tasks",[]);ue(t,g,p=>r(10,l=p));const C=m("selectedProject",null),y=m("selectedSection",null),I=m("lastUpdated",null),A=m("tempIds",{}),P=m("completedTasks",[]),O=m("showCompletedTasks",!1),V=()=>{_.set(null),T.set([]),k.set([]),g.set([]),C.set(null),y.set(null),I.set(null),A.set({}),P.set([]),O.set(!1)},z=new fa.TodoistApi(n);return qs("stores",{todoistAccessToken:_,todoistProjects:T,todoistSections:k,todoistTasks:g,selectedProject:C,selectedSection:y,lastUpdated:I,tempIds:A,todoistCompletedTasks:P,showCompletedTasks:O,isTodoistIntegrated:v,resetTodoist:V,todoist:z,addTask:({projectId:p,parentId:w,content:b="New Subtask",sectionId:E,due:S=null})=>{const D=`temp-${Ks()}`,j=l.filter(F=>F.projectId===p&&F.parentId===w&&F.sectionId===E).map(F=>F.order).reduce((F,L)=>Math.min(F,L),0)-1;g.update(F=>(F=[{id:D,content:b,projectId:p,parentId:w,order:j,isCompleted:!1,creatorId:"0",description:"",due:S,priority:1,url:"",commentCount:0,createdAt:"",labels:[],sectionId:E},...F],F)),z.addTask({content:b,parentId:w,projectId:p,order:j,sectionId:E,...S?{dueDate:S==null?void 0:S.dueDate}:{}}).then(F=>{g.update(L=>(L=L.map($=>$.id===D?{...F,id:D}:$),L)),A.update(L=>(L={...L,[D]:F.id},L))})}}),t.$$set=p=>{"config"in p&&r(8,u=p.config)},t.$$.update=()=>{t.$$.dirty&7&&!n&&i&&a&&sa.get("/integration/todoist/token",{params:{widgetId:o==="todoist"?"":o}}).then(p=>{it(_,n=p.data.data.token,n)}).catch(p=>{console.log(p)}),t.$$.dirty&6&&!a&&i&&V(),t.$$.dirty&1&&n&&(z.authToken=n)},[n,i,a,o,h,v,_,g,u]}class Hp extends Re{constructor(e){super(),Ae(this,e,Up,xp,Ne,{config:8})}}export{Hp as default};
