import{S as X,i as Y,s as Q,N as ke,O as ee,P as te,U as ae,R as W,T as ve,I as J,aC as ne,q as T,c as B,V as R,r as $,u as D,L as C,m as S,a8 as be,ar as ye,W as re,v as z,af as We,ag as Qe,x as V,t as _,a as b,D as N,d as j,E as le,b as G,K,aD as he,a3 as ue,aa as Z,Z as de,a5 as se,aE as Ze,y as Fe,_ as ce,B as pe,a7 as oe,aF as ie,n as q,G as Ie,a1 as fe,f as st,aG as Ce,ac as Xe,a9 as ot,as as $e,ab as Ye,ad as Pe,aH as et,aI as we,aJ as it,aK as Ee,aL as at,aM as Be,aN as Se,ap as ft,ak as tt,j as ut,aO as ct,aP as pt,a2 as mt,aQ as dt,aR as _t,ah as gt,av as kt,e as bt,ay as ht,az as me,aB as $t}from"./overlayscrollbars.js";function je(l,e,t){const r=l.slice();return r[19]=e[t].url,r[20]=e[t].title,r[21]=e[t].id,r}function wt(l){let e;return{c(){e=K("Save")},m(t,r){D(t,e,r)},d(t){t&&N(e)}}}function vt(l){let e,t,r,n;return t=new J({props:{icon:ne,class:"cursor-grab "+(l[4]==="list"?"text-lg":"text-3xl")+" active:cursor-grabbing"}}),{c(){e=T("div"),B(t.$$.fragment),$(e,"class",r="flex-center shrink-0 "+(l[4]==="list"?"h-5 w-5":"h-8 w-8"))},m(o,s){D(o,e,s),S(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.class="cursor-grab "+(o[4]==="list"?"text-lg":"text-3xl")+" active:cursor-grabbing"),t.$set(i),(!n||s&16&&r!==(r="flex-center shrink-0 "+(o[4]==="list"?"h-5 w-5":"h-8 w-8")))&&$(e,"class",r)},i(o){n||(_(t.$$.fragment,o),n=!0)},o(o){b(t.$$.fragment,o),n=!1},d(o){o&&N(e),j(t)}}}function yt(l){let e,t,r,n;return{c(){e=T("img"),oe(e.src,t=ie(l[19]))||$(e,"src",t),$(e,"alt",r=l[20]||l[19]),$(e,"class",n=(l[4]==="list"?"h-5 w-5":"h-8 w-8")+" shrink-0 cursor-grab active:cursor-grabbing"),$(e,"draggable","false")},m(o,s){D(o,e,s)},p(o,s){s&9&&!oe(e.src,t=ie(o[19]))&&$(e,"src",t),s&9&&r!==(r=o[20]||o[19])&&$(e,"alt",r),s&16&&n!==(n=(o[4]==="list"?"h-5 w-5":"h-8 w-8")+" shrink-0 cursor-grab active:cursor-grabbing")&&$(e,"class",n)},i:q,o:q,d(o){o&&N(e)}}}function De(l){let e,t,r,n,o;return t=new J({props:{icon:Ze}}),{c(){e=T("div"),B(t.$$.fragment),$(e,"class",r="absolute shadow-lg "+(l[4]==="list"?"-top-2 -right-2 text-lg":"top-0 right-0"))},m(s,i){D(s,e,i),S(t,e,null),o=!0},p(s,i){(!o||i&16&&r!==(r="absolute shadow-lg "+(s[4]==="list"?"-top-2 -right-2 text-lg":"top-0 right-0")))&&$(e,"class",r)},i(s){o||(_(t.$$.fragment,s),s&&Fe(()=>{o&&(n||(n=ce(e,pe,{duration:100},!0)),n.run(1))}),o=!0)},o(s){b(t.$$.fragment,s),s&&(n||(n=ce(e,pe,{duration:100},!1)),n.run(0)),o=!1},d(s){s&&N(e),j(t),s&&n&&n.end()}}}function Ne(l,e){let t,r,n,o,s,i=(e[20]||e[19])+"",a,f,u,m,k=e[2].includes(e[21]),g,y,h,F,c;const E=[yt,vt],p=[];function d(x,P){return x[19]?0:1}r=d(e),n=p[r]=E[r](e);let w=k&&De(e);function I(){return e[16](e[21])}return{key:l,first:null,c(){t=T("button"),n.c(),o=R(),s=T("span"),a=K(i),m=R(),w&&w.c(),g=R(),$(s,"title",f=e[20]||e[19]),$(s,"class",u="max-line-1 w-full whitespace-pre-wrap text-center "+(e[4]==="list"?"text-sm text-start":"text-xs")),he(s,"word-break","break-word"),ue(s,"self-start",e[4]==="list"?!1:e[20]?e[20].length>12:e[19].length>12),$(t,"class",y="relative flex group/bookmark w-full grow-0 items-center text-[var(--text)] no-underline "+(e[4]==="list"?"flex-row border-light gap-2 curved-half px-2 py-1.5":"flex-col gap-2")),this.first=t},m(x,P){D(x,t,P),p[r].m(t,null),C(t,o),C(t,s),C(s,a),C(t,m),w&&w.m(t,null),C(t,g),h=!0,F||(c=Z(t,"click",I),F=!0)},p(x,P){e=x;let A=r;r=d(e),r===A?p[r].p(e,P):(z(),b(p[A],1,1,()=>{p[A]=null}),V(),n=p[r],n?n.p(e,P):(n=p[r]=E[r](e),n.c()),_(n,1),n.m(t,o)),(!h||P&9)&&i!==(i=(e[20]||e[19])+"")&&de(a,i),(!h||P&9&&f!==(f=e[20]||e[19]))&&$(s,"title",f),(!h||P&16&&u!==(u="max-line-1 w-full whitespace-pre-wrap text-center "+(e[4]==="list"?"text-sm text-start":"text-xs")))&&$(s,"class",u),(!h||P&25)&&ue(s,"self-start",e[4]==="list"?!1:e[20]?e[20].length>12:e[19].length>12),P&13&&(k=e[2].includes(e[21])),k?w?(w.p(e,P),P&13&&_(w,1)):(w=De(e),w.c(),_(w,1),w.m(t,g)):w&&(z(),b(w,1,1,()=>{w=null}),V()),(!h||P&16&&y!==(y="relative flex group/bookmark w-full grow-0 items-center text-[var(--text)] no-underline "+(e[4]==="list"?"flex-row border-light gap-2 curved-half px-2 py-1.5":"flex-col gap-2")))&&$(t,"class",y)},i(x){h||(_(n),_(w),h=!0)},o(x){b(n),b(w),h=!1},d(x){x&&N(t),p[r].d(),w&&w.d(),F=!1,c()}}}function Ft(l){let e,t,r,n,o,s,i,a,f,u,m,k,g,y,h,F,c=[],E=new Map,p,d,w,I;function x(v){l[13](v)}let P={placeholder:"Folder name",class:"w-full text-sm py-1.5 px-3"};l[1]!==void 0&&(P.value=l[1]),r=new ke({props:P}),ee.push(()=>te(r,"value",x)),s=new ae({props:{class:"ml-auto py-[0.3rem]",$$slots:{default:[wt]},$$scope:{ctx:l}}}),s.$on("click",l[11]),f=new W({props:{icon:ve,class:"mr-4 text-base",tooltip:"Back"}}),f.$on("click",l[14]),m=new J({props:{icon:ne,class:"mr-3"}});let A=l[3].filter(l[15]);const L=v=>v[21];for(let v=0;v<A.length;v+=1){let O=je(l,A,v),U=L(O);E.set(U,c[v]=Ne(U,O))}return{c(){e=T("div"),t=T("div"),B(r.$$.fragment),o=R(),B(s.$$.fragment),i=R(),a=T("div"),B(f.$$.fragment),u=R(),B(m.$$.fragment),k=R(),g=T("span"),g.textContent="Select bookmarks",y=R(),h=T("div"),F=T("div");for(let v=0;v<c.length;v+=1)c[v].c();$(t,"class","flex items-center justify-center gap-2 px-2 py-2"),$(g,"class","max-line-1"),$(a,"class","ml-2 flex w-full items-center px-2 mt-2 text-base"),$(F,"class",p="w-full grow-0 justify-items-center py-4 "+(l[4]==="list"?"flex flex-col gap-2 px-2":"grid grid-cols-4 gap-x-5 gap-y-6 px-4 mt-2")),$(e,"class","flex max-h-[24.5rem] w-[24rem] flex-col transition-height")},m(v,O){D(v,e,O),C(e,t),S(r,t,null),C(t,o),S(s,t,null),C(e,i),C(e,a),S(f,a,null),C(a,u),S(m,a,null),C(a,k),C(a,g),C(e,y),C(e,h),C(h,F);for(let U=0;U<c.length;U+=1)c[U]&&c[U].m(F,null);d=!0,w||(I=be(ye.call(null,h)),w=!0)},p(v,[O]){const U={};!n&&O&2&&(n=!0,U.value=v[1],re(()=>n=!1)),r.$set(U);const H={};O&16777216&&(H.$$scope={dirty:O,ctx:v}),s.$set(H),O&1053&&(A=v[3].filter(v[15]),z(),c=We(c,O,L,1,v,A,E,F,Qe,Ne,null,je),V()),(!d||O&16&&p!==(p="w-full grow-0 justify-items-center py-4 "+(v[4]==="list"?"flex flex-col gap-2 px-2":"grid grid-cols-4 gap-x-5 gap-y-6 px-4 mt-2")))&&$(F,"class",p)},i(v){if(!d){_(r.$$.fragment,v),_(s.$$.fragment,v),_(f.$$.fragment,v),_(m.$$.fragment,v);for(let O=0;O<A.length;O+=1)_(c[O]);d=!0}},o(v){b(r.$$.fragment,v),b(s.$$.fragment,v),b(f.$$.fragment,v),b(m.$$.fragment,v);for(let O=0;O<c.length;O+=1)b(c[O]);d=!1},d(v){v&&N(e),j(r),j(s),j(f),j(m);for(let O=0;O<c.length;O+=1)c[O].d();w=!1,I()}}}function It(l,e,t){let r,n,o,s,i,a,f;const{addFolder:u,bookmarks:m,selectedFolder:k,view:g,parentId:y}=le("stores");G(l,u,I=>t(17,o=I)),G(l,m,I=>t(12,a=I)),G(l,k,I=>t(0,i=I)),G(l,g,I=>t(4,f=I)),G(l,y,I=>t(18,s=I));let h="";const F=I=>{r.includes(I)?t(2,r=r.filter(x=>x!==I)):t(2,r=[...r,I])},c=async()=>{const I={},x=await chrome.bookmarks.create({title:h,parentId:i?i.id:s,index:0,...I});r.forEach(P=>{chrome.bookmarks.move(P,{parentId:x.id,index:0})}),se(u,o=!1,o)};function E(I){h=I,t(1,h)}const p=()=>u.set(null),d=I=>(I==null?void 0:I.type)==="separator"?!1:i?I.id!==i.id:!0,w=I=>F(I);return l.$$.update=()=>{l.$$.dirty&4097&&t(3,n=[...i?i.children??[]:[],...a])},t(2,r=[]),[i,h,r,n,f,u,m,k,g,y,F,c,a,E,p,d,w]}class Ct extends X{constructor(e){super(),Y(this,e,It,Ft,Q,{})}}function Le(l,e,t){const r=l.slice();return r[18]=e[t].url,r[19]=e[t].title,r[20]=e[t].id,r}function Pt(l){let e;return{c(){e=K("Save")},m(t,r){D(t,e,r)},d(t){t&&N(e)}}}function Et(l){let e,t,r,n;return t=new J({props:{icon:ne,class:"cursor-grab "+(l[4]==="list"?"text-lg":"text-3xl")+" active:cursor-grabbing"}}),{c(){e=T("div"),B(t.$$.fragment),$(e,"class",r="flex-center shrink-0 "+(l[4]==="list"?"h-5 w-5":"h-8 w-8"))},m(o,s){D(o,e,s),S(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.class="cursor-grab "+(o[4]==="list"?"text-lg":"text-3xl")+" active:cursor-grabbing"),t.$set(i),(!n||s&16&&r!==(r="flex-center shrink-0 "+(o[4]==="list"?"h-5 w-5":"h-8 w-8")))&&$(e,"class",r)},i(o){n||(_(t.$$.fragment,o),n=!0)},o(o){b(t.$$.fragment,o),n=!1},d(o){o&&N(e),j(t)}}}function Ot(l){let e,t,r,n;return{c(){e=T("img"),oe(e.src,t=ie(l[18]))||$(e,"src",t),$(e,"alt",r=l[19]||l[18]),$(e,"class",n=(l[4]==="list"?"h-5 w-5":"h-8 w-8")+" shrink-0 cursor-grab active:cursor-grabbing"),$(e,"draggable","false")},m(o,s){D(o,e,s)},p(o,s){s&9&&!oe(e.src,t=ie(o[18]))&&$(e,"src",t),s&9&&r!==(r=o[19]||o[18])&&$(e,"alt",r),s&16&&n!==(n=(o[4]==="list"?"h-5 w-5":"h-8 w-8")+" shrink-0 cursor-grab active:cursor-grabbing")&&$(e,"class",n)},i:q,o:q,d(o){o&&N(e)}}}function Re(l){let e,t,r,n,o;return t=new J({props:{icon:Ze}}),{c(){e=T("div"),B(t.$$.fragment),$(e,"class",r="absolute shadow-lg "+(l[4]==="list"?"-top-2 -right-2 text-lg":"top-0 right-0"))},m(s,i){D(s,e,i),S(t,e,null),o=!0},p(s,i){(!o||i&16&&r!==(r="absolute shadow-lg "+(s[4]==="list"?"-top-2 -right-2 text-lg":"top-0 right-0")))&&$(e,"class",r)},i(s){o||(_(t.$$.fragment,s),s&&Fe(()=>{o&&(n||(n=ce(e,pe,{duration:100},!0)),n.run(1))}),o=!0)},o(s){b(t.$$.fragment,s),s&&(n||(n=ce(e,pe,{duration:100},!1)),n.run(0)),o=!1},d(s){s&&N(e),j(t),s&&n&&n.end()}}}function xe(l,e){let t,r,n,o,s,i=(e[19]||e[18])+"",a,f,u,m,k=e[2].includes(e[20]),g,y,h,F,c;const E=[Ot,Et],p=[];function d(x,P){return x[18]?0:1}r=d(e),n=p[r]=E[r](e);let w=k&&Re(e);function I(){return e[16](e[20])}return{key:l,first:null,c(){t=T("button"),n.c(),o=R(),s=T("span"),a=K(i),m=R(),w&&w.c(),g=R(),$(s,"title",f=e[19]||e[18]),$(s,"class",u="max-line-1 w-full whitespace-pre-wrap text-center "+(e[4]==="list"?"text-sm text-start":"text-xs")),he(s,"word-break","break-word"),ue(s,"self-start",e[4]==="list"?!1:e[19]?e[19].length>12:e[18].length>12),$(t,"class",y="relative flex group/bookmark w-full grow-0 items-center text-[var(--text)] no-underline "+(e[4]==="list"?"flex-row border-light gap-2 curved-half px-2 py-1.5":"flex-col gap-2")),this.first=t},m(x,P){D(x,t,P),p[r].m(t,null),C(t,o),C(t,s),C(s,a),C(t,m),w&&w.m(t,null),C(t,g),h=!0,F||(c=Z(t,"click",I),F=!0)},p(x,P){e=x;let A=r;r=d(e),r===A?p[r].p(e,P):(z(),b(p[A],1,1,()=>{p[A]=null}),V(),n=p[r],n?n.p(e,P):(n=p[r]=E[r](e),n.c()),_(n,1),n.m(t,o)),(!h||P&9)&&i!==(i=(e[19]||e[18])+"")&&de(a,i),(!h||P&9&&f!==(f=e[19]||e[18]))&&$(s,"title",f),(!h||P&16&&u!==(u="max-line-1 w-full whitespace-pre-wrap text-center "+(e[4]==="list"?"text-sm text-start":"text-xs")))&&$(s,"class",u),(!h||P&25)&&ue(s,"self-start",e[4]==="list"?!1:e[19]?e[19].length>12:e[18].length>12),P&13&&(k=e[2].includes(e[20])),k?w?(w.p(e,P),P&13&&_(w,1)):(w=Re(e),w.c(),_(w,1),w.m(t,g)):w&&(z(),b(w,1,1,()=>{w=null}),V()),(!h||P&16&&y!==(y="relative flex group/bookmark w-full grow-0 items-center text-[var(--text)] no-underline "+(e[4]==="list"?"flex-row border-light gap-2 curved-half px-2 py-1.5":"flex-col gap-2")))&&$(t,"class",y)},i(x){h||(_(n),_(w),h=!0)},o(x){b(n),b(w),h=!1},d(x){x&&N(t),p[r].d(),w&&w.d(),F=!1,c()}}}function Tt(l){let e,t,r,n,o,s,i,a,f,u,m,k,g,y,h,F,c=[],E=new Map,p,d,w,I;function x(v){l[12](v)}let P={placeholder:"Folder name",class:"w-full text-sm py-1.5 px-3"};l[1]!==void 0&&(P.value=l[1]),r=new ke({props:P}),ee.push(()=>te(r,"value",x)),s=new ae({props:{class:"ml-auto py-[0.3rem]",$$slots:{default:[Pt]},$$scope:{ctx:l}}}),s.$on("click",l[13]),f=new W({props:{icon:ve,class:"mr-4 text-base shrink-0",tooltip:"Back"}}),f.$on("click",l[14]),m=new J({props:{icon:ne,class:"mr-3 shrink-0"}});let A=l[3].filter(l[15]);const L=v=>v[20];for(let v=0;v<A.length;v+=1){let O=Le(l,A,v),U=L(O);E.set(U,c[v]=xe(U,O))}return{c(){e=T("div"),t=T("div"),B(r.$$.fragment),o=R(),B(s.$$.fragment),i=R(),a=T("div"),B(f.$$.fragment),u=R(),B(m.$$.fragment),k=R(),g=T("span"),g.textContent="Select bookmarks",y=R(),h=T("div"),F=T("div");for(let v=0;v<c.length;v+=1)c[v].c();$(t,"class","flex items-center justify-center gap-2 px-2 py-2"),$(g,"class","max-line-1"),$(a,"class","flex w-full items-center text-base px-3 mt-2"),$(F,"class",p="mt-1 w-full grow-0 justify-items-center "+(l[4]==="list"?"py-2":"py-4")+" "+(l[4]==="list"?"flex flex-col gap-2 px-2":"grid grid-cols-4 gap-x-5 gap-y-6 px-4")),$(e,"class","flex max-h-[24.5rem] w-[24rem] flex-col")},m(v,O){D(v,e,O),C(e,t),S(r,t,null),C(t,o),S(s,t,null),C(e,i),C(e,a),S(f,a,null),C(a,u),S(m,a,null),C(a,k),C(a,g),C(e,y),C(e,h),C(h,F);for(let U=0;U<c.length;U+=1)c[U]&&c[U].m(F,null);d=!0,w||(I=be(ye.call(null,h)),w=!0)},p(v,[O]){const U={};!n&&O&2&&(n=!0,U.value=v[1],re(()=>n=!1)),r.$set(U);const H={};O&8388608&&(H.$$scope={dirty:O,ctx:v}),s.$set(H),O&285&&(A=v[3].filter(v[15]),z(),c=We(c,O,L,1,v,A,E,F,Qe,xe,null,Le),V()),(!d||O&16&&p!==(p="mt-1 w-full grow-0 justify-items-center "+(v[4]==="list"?"py-2":"py-4")+" "+(v[4]==="list"?"flex flex-col gap-2 px-2":"grid grid-cols-4 gap-x-5 gap-y-6 px-4")))&&$(F,"class",p)},i(v){if(!d){_(r.$$.fragment,v),_(s.$$.fragment,v),_(f.$$.fragment,v),_(m.$$.fragment,v);for(let O=0;O<A.length;O+=1)_(c[O]);d=!0}},o(v){b(r.$$.fragment,v),b(s.$$.fragment,v),b(f.$$.fragment,v),b(m.$$.fragment,v);for(let O=0;O<c.length;O+=1)b(c[O]);d=!1},d(v){v&&N(e),j(r),j(s),j(f),j(m);for(let O=0;O<c.length;O+=1)c[O].d();w=!1,I()}}}function Bt(l,e,t){let r,n,o,s,i,a;const{bookmarks:f,editMode:u,view:m}=le("stores");G(l,f,d=>t(11,i=d)),G(l,u,d=>t(0,s=d)),G(l,m,d=>t(4,a=d)),Ie();let k=s&&(s==null?void 0:s.title)||"";const g=d=>{s&&(n.includes(d)?t(2,n=n.filter(w=>w!==d)):t(2,n=[...n,d]))},y=()=>{s&&(chrome.bookmarks.update(s.id,{title:k}),r.forEach(d=>{!n.includes(d.id)&&s&&chrome.bookmarks.move(d.id,{parentId:s.parentId,index:0})}),n.forEach(d=>{s&&chrome.bookmarks.move(d,{parentId:s.id,index:0})}),u.set(null))};function h(d){k=d,t(1,k)}const F=()=>y(),c=()=>u.set(null),E=d=>s&&d.id===(s==null?void 0:s.id)?!1:(d==null?void 0:d.type)!=="separator",p=d=>g(d);return l.$$.update=()=>{l.$$.dirty&1&&t(10,r=s&&(s==null?void 0:s.children)||[]),l.$$.dirty&1024&&t(2,n=r.map(d=>d.id)),l.$$.dirty&2049&&t(3,o=s&&[...s!=null&&s.children?s==null?void 0:s.children:[],...i])},[s,k,n,o,a,f,u,m,g,y,r,i,h,F,c,E,p]}class St extends X{constructor(e){super(),Y(this,e,Bt,Tt,Q,{})}}const Me=async l=>{typeof l=="string"?await chrome.bookmarks.remove(l).catch(()=>{chrome.bookmarks.removeTree(l)}):await chrome.bookmarks.remove(l.id).catch(()=>{chrome.bookmarks.removeTree(l.id)})},Ae=async l=>{var e,t;typeof l=="string"?(e=(await chrome.bookmarks.getSubTree(l))[0].children)==null||e.forEach(n=>{n.url&&chrome.tabs.create({url:n.url})}):(t=l.children)==null||t.forEach(r=>{r.url&&chrome.tabs.create({url:r.url})})},Oe=({detail:l})=>{const{oldIndex:e,newIndex:t,item:r}=l,n=r.id||r;chrome.bookmarks.move(n,{index:t===0?0:e>t?t:t+1})},jt=async l=>{var n;const e=[],t=async o=>{const s=await chrome.bookmarks.getSubTree(typeof o=="string"?o:o.id);e.push({title:s[0].title,id:s[0].id}),s[0].parentId&&await t(s[0].parentId)};await t(l);const r=e.reverse().splice(2);return{path:r.map(o=>o.title).join("/"),previousFolderId:((n=r[r.length-2])==null?void 0:n.id)||null}};function Dt(l){let e,t,r,n,o,s=(l[2]||l[3])+"",i,a,f,u,m,k,g,y,h;const F=[Rt,Lt],c=[];function E(d,w){return d[3]?0:1}t=E(l),r=c[t]=F[t](l);let p=l[4]==="list"&&Ge(l);return{c(){e=T("button"),r.c(),n=R(),o=T("span"),i=K(s),u=R(),p&&p.c(),$(o,"title",a=l[2]||l[3]),$(o,"class",f="max-line-1 w-full whitespace-pre-wrap text-center "+(l[4]==="list"?"text-sm text-start":"text-xs")),he(o,"word-break","break-word"),ue(o,"self-start",l[4]==="list"?!1:l[2]?l[2].length>12:l[3].length>12),$(e,"class",m="flex group/bookmark grow-0 items-center text-[var(--text)] no-underline "+(l[4]==="list"?"flex-row border-light gap-2 curved-half px-2 py-1.5 w-full":"flex-col gap-2 w-[4.25rem]")),$(e,"draggable","true")},m(d,w){D(d,e,w),c[t].m(e,null),C(e,n),C(e,o),C(o,i),C(e,u),p&&p.m(e,null),g=!0,y||(h=[Z(e,"click",l[13]),Z(e,"contextmenu",l[14]),Z(e,"dragstart",l[9]),be(k=ot.call(null,e,{title:l[2],classNames:"max-line-2",styles:"padding: 0.15rem 0.75rem; overflow: hidden; max-width: 10rem; font-size: 0.75rem;",show:l[4]!=="list"}))],y=!0)},p(d,w){let I=t;t=E(d),t===I?c[t].p(d,w):(z(),b(c[I],1,1,()=>{c[I]=null}),V(),r=c[t],r?r.p(d,w):(r=c[t]=F[t](d),r.c()),_(r,1),r.m(e,n)),(!g||w&12)&&s!==(s=(d[2]||d[3])+"")&&de(i,s),(!g||w&12&&a!==(a=d[2]||d[3]))&&$(o,"title",a),(!g||w&16&&f!==(f="max-line-1 w-full whitespace-pre-wrap text-center "+(d[4]==="list"?"text-sm text-start":"text-xs")))&&$(o,"class",f),(!g||w&28)&&ue(o,"self-start",d[4]==="list"?!1:d[2]?d[2].length>12:d[3].length>12),d[4]==="list"?p?(p.p(d,w),w&16&&_(p,1)):(p=Ge(d),p.c(),_(p,1),p.m(e,null)):p&&(z(),b(p,1,1,()=>{p=null}),V()),(!g||w&16&&m!==(m="flex group/bookmark grow-0 items-center text-[var(--text)] no-underline "+(d[4]==="list"?"flex-row border-light gap-2 curved-half px-2 py-1.5 w-full":"flex-col gap-2 w-[4.25rem]")))&&$(e,"class",m),k&&$e(k.update)&&w&20&&k.update.call(null,{title:d[2],classNames:"max-line-2",styles:"padding: 0.15rem 0.75rem; overflow: hidden; max-width: 10rem; font-size: 0.75rem;",show:d[4]!=="list"})},i(d){g||(_(r),_(p),g=!0)},o(d){b(r),b(p),g=!1},d(d){d&&N(e),c[t].d(),p&&p.d(),y=!1,Ye(h)}}}function Nt(l){let e,t,r,n,o;return{c(){e=T("button"),t=T("div"),$(t,"class","bg-[var(--border-color)] w-full h-full"),$(e,"class",r="flex group/bookmark rounded-full overflow-hidden "+(l[4]==="list"?"w-full h-1":"w-1 h-[3rem]")),$(e,"draggable","true")},m(s,i){D(s,e,i),C(e,t),n||(o=Z(e,"contextmenu",At),n=!0)},p(s,i){i&16&&r!==(r="flex group/bookmark rounded-full overflow-hidden "+(s[4]==="list"?"w-full h-1":"w-1 h-[3rem]"))&&$(e,"class",r)},i:q,o:q,d(s){s&&N(e),n=!1,o()}}}function Lt(l){let e,t,r,n;return t=new J({props:{icon:ne,class:"cursor-grab "+(l[4]==="list"?"text-lg":"text-3xl")+" active:cursor-grabbing"}}),{c(){e=T("div"),B(t.$$.fragment),$(e,"class",r="flex-center shrink-0 "+(l[4]==="list"?"h-5 w-5":"h-8 w-8"))},m(o,s){D(o,e,s),S(t,e,null),n=!0},p(o,s){const i={};s&16&&(i.class="cursor-grab "+(o[4]==="list"?"text-lg":"text-3xl")+" active:cursor-grabbing"),t.$set(i),(!n||s&16&&r!==(r="flex-center shrink-0 "+(o[4]==="list"?"h-5 w-5":"h-8 w-8")))&&$(e,"class",r)},i(o){n||(_(t.$$.fragment,o),n=!0)},o(o){b(t.$$.fragment,o),n=!1},d(o){o&&N(e),j(t)}}}function Rt(l){let e,t,r,n;return{c(){e=T("img"),oe(e.src,t=ie(l[3]))||$(e,"src",t),$(e,"alt",r=l[2]||l[3]),$(e,"class",n=(l[4]==="list"?"h-5 w-5":"h-8 w-8")+" shrink-0 cursor-grab active:cursor-grabbing"),$(e,"draggable","false")},m(o,s){D(o,e,s)},p(o,s){s&8&&!oe(e.src,t=ie(o[3]))&&$(e,"src",t),s&12&&r!==(r=o[2]||o[3])&&$(e,"alt",r),s&16&&n!==(n=(o[4]==="list"?"h-5 w-5":"h-8 w-8")+" shrink-0 cursor-grab active:cursor-grabbing")&&$(e,"class",n)},i:q,o:q,d(o){o&&N(e)}}}function Ge(l){let e,t,r,n,o,s=!l[0].url&&Ue(l);return t=new W({props:{icon:Pe,stopPropogationOnClick:!0,class:"text-lg shrink-0 hidden group-hover/bookmark:flex",tooltip:"Edit"}}),t.$on("click",l[11]),n=new W({props:{icon:Xe,stopPropogationOnClick:!0,class:"text-lg ml-2 shrink-0 hidden group-hover/bookmark:flex",tooltip:"Remove"}}),n.$on("click",l[12]),{c(){s&&s.c(),e=R(),B(t.$$.fragment),r=R(),B(n.$$.fragment)},m(i,a){s&&s.m(i,a),D(i,e,a),S(t,i,a),D(i,r,a),S(n,i,a),o=!0},p(i,a){i[0].url?s&&(z(),b(s,1,1,()=>{s=null}),V()):s?(s.p(i,a),a&1&&_(s,1)):(s=Ue(i),s.c(),_(s,1),s.m(e.parentNode,e))},i(i){o||(_(s),_(t.$$.fragment,i),_(n.$$.fragment,i),o=!0)},o(i){b(s),b(t.$$.fragment,i),b(n.$$.fragment,i),o=!1},d(i){s&&s.d(i),i&&N(e),j(t,i),i&&N(r),j(n,i)}}}function Ue(l){let e,t;return e=new W({props:{icon:et,stopPropogationOnClick:!0,class:"text-lg mr-2 shrink-0 hidden group-hover/bookmark:flex",tooltip:"Open all sites"}}),e.$on("click",l[10]),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p:q,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function ze(l){let e,t;return e=new Ce({props:{trigger:"contextmenu",placement:l[4]!=="list"?"right-start":"bottom",offset:[0,0],origin:"top left",autoCloseOnFocusOut:!1,wrapperClass:"curved-half",class:"flex flex-col items-start gap-2 px-3 py-2",closeOnContextMenu:!0,$$slots:{default:[xt,({close:r})=>({20:r}),({close:r})=>r?1048576:0]},$$scope:{ctx:l}}}),e.$on("clickOutside",l[18]),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){const o={};n&16&&(o.placement=r[4]!=="list"?"right-start":"bottom"),n&3145731&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Ve(l){let e,t,r,n,o,s,i;t=new J({props:{icon:et}});function a(){return l[15](l[20])}return{c(){e=T("button"),B(t.$$.fragment),r=R(),n=T("span"),n.textContent="Open all sites",$(n,"class","mt-0.5"),$(e,"class","justitfy-start flex items-center gap-2 text-sm opacity-70 transition hover:opacity-100")},m(f,u){D(f,e,u),S(t,e,null),C(e,r),C(e,n),o=!0,s||(i=Z(e,"click",a),s=!0)},p(f,u){l=f},i(f){o||(_(t.$$.fragment,f),o=!0)},o(f){b(t.$$.fragment,f),o=!1},d(f){f&&N(e),j(t),s=!1,i()}}}function qe(l){let e,t,r,n,o,s,i;t=new J({props:{icon:Pe}});function a(){return l[16](l[20])}return{c(){e=T("button"),B(t.$$.fragment),r=R(),n=T("span"),n.textContent="Edit",$(n,"class","mt-0.5"),$(e,"class","justitfy-start flex items-center gap-2 text-sm opacity-70 transition hover:opacity-100")},m(f,u){D(f,e,u),S(t,e,null),C(e,r),C(e,n),o=!0,s||(i=Z(e,"click",a),s=!0)},p(f,u){l=f},i(f){o||(_(t.$$.fragment,f),o=!0)},o(f){b(t.$$.fragment,f),o=!1},d(f){f&&N(e),j(t),s=!1,i()}}}function xt(l){var h;let e,t,r,n,o,s,i=l[1]?"Confirm remove":"Remove",a,f,u,m,k=!l[0].url&&Ve(l),g=((h=l[0])==null?void 0:h.type)!=="separator"&&qe(l);n=new J({props:{icon:Xe}});function y(){return l[17](l[20])}return{c(){k&&k.c(),e=R(),g&&g.c(),t=R(),r=T("button"),B(n.$$.fragment),o=R(),s=T("span"),a=K(i),$(s,"class","mt-0.5"),$(r,"class","justitfy-start flex items-center gap-2 text-sm opacity-70 transition hover:opacity-100")},m(F,c){k&&k.m(F,c),D(F,e,c),g&&g.m(F,c),D(F,t,c),D(F,r,c),S(n,r,null),C(r,o),C(r,s),C(s,a),f=!0,u||(m=Z(r,"click",y),u=!0)},p(F,c){var E;l=F,l[0].url?k&&(z(),b(k,1,1,()=>{k=null}),V()):k?(k.p(l,c),c&1&&_(k,1)):(k=Ve(l),k.c(),_(k,1),k.m(e.parentNode,e)),((E=l[0])==null?void 0:E.type)!=="separator"?g?(g.p(l,c),c&1&&_(g,1)):(g=qe(l),g.c(),_(g,1),g.m(t.parentNode,t)):g&&(z(),b(g,1,1,()=>{g=null}),V()),(!f||c&2)&&i!==(i=l[1]?"Confirm remove":"Remove")&&de(a,i)},i(F){f||(_(k),_(g),_(n.$$.fragment,F),f=!0)},o(F){b(k),b(g),b(n.$$.fragment,F),f=!1},d(F){k&&k.d(F),F&&N(e),g&&g.d(F),F&&N(t),F&&N(r),j(n),u=!1,m()}}}function Mt(l){var u;let e,t,r,n,o;const s=[Nt,Dt],i=[];function a(m,k){var g;return((g=m[0])==null?void 0:g.type)==="separator"?0:1}e=a(l),t=i[e]=s[e](l);let f=(l[4]!=="list"||((u=l[0])==null?void 0:u.type)==="separator")&&ze(l);return{c(){t.c(),r=R(),f&&f.c(),n=fe()},m(m,k){i[e].m(m,k),D(m,r,k),f&&f.m(m,k),D(m,n,k),o=!0},p(m,[k]){var y;let g=e;e=a(m),e===g?i[e].p(m,k):(z(),b(i[g],1,1,()=>{i[g]=null}),V(),t=i[e],t?t.p(m,k):(t=i[e]=s[e](m),t.c()),_(t,1),t.m(r.parentNode,r)),m[4]!=="list"||((y=m[0])==null?void 0:y.type)==="separator"?f?(f.p(m,k),k&17&&_(f,1)):(f=ze(m),f.c(),_(f,1),f.m(n.parentNode,n)):f&&(z(),b(f,1,1,()=>{f=null}),V())},i(m){o||(_(t),_(f),o=!0)},o(m){b(t),b(f),o=!1},d(m){i[e].d(m),m&&N(r),f&&f.d(m),m&&N(n)}}}const At=l=>{l.stopPropagation()};function Gt(l,e,t){let r,n,o,s;G(l,st,I=>t(5,s=I));const{selectedFolder:i,view:a,editMode:f}=le("stores");G(l,a,I=>t(4,o=I));let{item:u=null}=e,m=!1;Ie();const k=I=>{I.dataTransfer.setData("json",JSON.stringify({type:"bookmarks-drop",data:u}))},g=I=>Ae(u),y=I=>f.set(u),h=I=>Me(u),F=()=>r?s?chrome.tabs.create({url:r}):chrome.tabs.update({url:r}):i.set(u),c=I=>{o!=="list"&&I.stopPropagation()},E=I=>{I(),Ae(u)},p=I=>{I(),f.set(u)},d=I=>{if(!u.url&&!m){t(1,m=!0);return}I(),Me(u)},w=()=>t(1,m=!1);return l.$$set=I=>{"item"in I&&t(0,u=I.item)},l.$$.update=()=>{l.$$.dirty&1&&t(3,r=u.url),l.$$.dirty&1&&t(2,n=u.title)},[u,m,n,r,o,s,i,a,f,k,g,y,h,F,c,E,p,d,w]}class Te extends X{constructor(e){super(),Y(this,e,Gt,Mt,Q,{item:0})}}function He(l){let e,t;return e=new W({props:{icon:it,class:"ml-3 shrink-0",tooltip:"Home"}}),e.$on("click",l[9]),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p:q,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Ut(l){let e,t;return e=new Ee({props:{items:l[1].children,class:`overflow-overlay scrollbar mb-1 w-full grow-0 justify-items-center
      `+(l[3]==="list"?"flex flex-col gap-2":"grid grid-cols-4 gap-y-5 justify-items-center gap-x-5 justify-center items-center")+`
      `,wrapperClass:"items-start overflow-hidden",$$slots:{default:[Vt,({item:r})=>({15:r}),({item:r})=>r?32768:0]},$$scope:{ctx:l}}}),e.$on("contextmenu",Ht),e.$on("update",Oe),e.$on("drop",function(){$e(l[0])&&l[0].apply(this,arguments)}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){l=r;const o={};n&2&&(o.items=l[1].children),n&8&&(o.class=`overflow-overlay scrollbar mb-1 w-full grow-0 justify-items-center
      `+(l[3]==="list"?"flex flex-col gap-2":"grid grid-cols-4 gap-y-5 justify-items-center gap-x-5 justify-center items-center")+`
      `),n&98304&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function zt(l){let e,t,r,n,o;return t=new J({props:{icon:ne,class:"text-3xl mb-3"}}),{c(){e=T("div"),B(t.$$.fragment),r=R(),n=T("span"),n.textContent="This folder is empty",$(n,"class","text-sm"),$(e,"class","flex-center flex-col w-full h-full text-sm py-4")},m(s,i){D(s,e,i),S(t,e,null),C(e,r),C(e,n),o=!0},p:q,i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){b(t.$$.fragment,s),o=!1},d(s){s&&N(e),j(t)}}}function Vt(l){let e,t;return e=new Te({props:{item:l[15]}}),e.$on("edit",l[10]),e.$on("remove",l[11]),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){const o={};n&32768&&(o.item=r[15]),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Je(l){var x;let e,t,r,n,o,s,i,a=((x=l[1])==null?void 0:x.title)+"",f,u,m,k,g,y,h,F,c,E;r=new W({props:{icon:ve,class:"mr-4 text-base shrink-0",tooltip:"Back"}}),r.$on("click",l[7]),o=new J({props:{icon:ne,class:"mr-3 shrink-0"}}),m=new W({props:{class:"ml-auto py-[0.3rem] shrink-0",tooltip:"Edit",icon:Pe}}),m.$on("click",l[8]);let p=l[2]&&He(l);const d=[zt,Ut],w=[];function I(P,A){return!P[1].children||P[1].children.length===0?0:1}return y=I(l),h=w[y]=d[y](l),{c(){e=T("div"),t=T("div"),B(r.$$.fragment),n=R(),B(o.$$.fragment),s=R(),i=T("span"),f=K(a),u=R(),B(m.$$.fragment),k=R(),p&&p.c(),g=R(),h.c(),$(i,"class","max-line-1"),$(t,"class","flex w-full items-center text-base px-1"),$(e,"class",F="flex items-center flex-col justify-start "+(l[3]==="list"?"gap-2":"gap-3.5"))},m(P,A){D(P,e,A),C(e,t),S(r,t,null),C(t,n),S(o,t,null),C(t,s),C(t,i),C(i,f),C(t,u),S(m,t,null),C(t,k),p&&p.m(t,null),C(e,g),w[y].m(e,null),E=!0},p(P,A){var v;(!E||A&2)&&a!==(a=((v=P[1])==null?void 0:v.title)+"")&&de(f,a),P[2]?p?(p.p(P,A),A&4&&_(p,1)):(p=He(P),p.c(),_(p,1),p.m(t,null)):p&&(z(),b(p,1,1,()=>{p=null}),V());let L=y;y=I(P),y===L?w[y].p(P,A):(z(),b(w[L],1,1,()=>{w[L]=null}),V(),h=w[y],h?h.p(P,A):(h=w[y]=d[y](P),h.c()),_(h,1),h.m(e,null)),(!E||A&8&&F!==(F="flex items-center flex-col justify-start "+(P[3]==="list"?"gap-2":"gap-3.5")))&&$(e,"class",F)},i(P){E||(_(r.$$.fragment,P),_(o.$$.fragment,P),_(m.$$.fragment,P),_(p),_(h),P&&Fe(()=>{E&&(c||(c=ce(e,pe,{duration:250},!0)),c.run(1))}),E=!0)},o(P){b(r.$$.fragment,P),b(o.$$.fragment,P),b(m.$$.fragment,P),b(p),b(h),P&&(c||(c=ce(e,pe,{duration:250},!1)),c.run(0)),E=!1},d(P){P&&N(e),j(r),j(o),j(m),p&&p.d(),w[y].d(),P&&c&&c.end()}}}function qt(l){var o;let e=(o=l[1])==null?void 0:o.id,t,r,n=Je(l);return{c(){n.c(),t=fe()},m(s,i){n.m(s,i),D(s,t,i),r=!0},p(s,[i]){var a;i&2&&Q(e,e=(a=s[1])==null?void 0:a.id)?(z(),b(n,1,1,q),V(),n=Je(s),n.c(),_(n,1),n.m(t.parentNode,t)):n.p(s,i)},i(s){r||(_(n),r=!0)},o(s){b(n),r=!1},d(s){s&&N(t),n.d(s)}}}const Ht=l=>{l.stopPropagation()};function Jt(l,e,t){let r,n;const{editMode:o,selectedFolder:s,view:i}=le("stores");G(l,s,F=>t(1,r=F)),G(l,i,F=>t(3,n=F));let{handleTabManagerDrop:a}=e;Ie();let f=null;const u=async()=>{const{path:F,previousFolderId:c}=await jt(r.id);t(2,f=c?(await chrome.bookmarks.getSubTree(c))[0]:null)},m=()=>{f?s.set(f):s.set(null)},k=()=>o.set(r),g=()=>{s.set(null)};function y(F){we.call(this,l,F)}function h(F){we.call(this,l,F)}return l.$$set=F=>{"handleTabManagerDrop"in F&&t(0,a=F.handleTabManagerDrop)},l.$$.update=()=>{l.$$.dirty&2&&r&&u()},[a,r,f,n,o,s,i,m,k,g,y,h]}class Kt extends X{constructor(e){super(),Y(this,e,Jt,qt,Q,{handleTabManagerDrop:0})}}function Wt(l){let e,t,r;return t=new J({props:{icon:ct,class:"text-xl"}}),{c(){e=T("div"),B(t.$$.fragment),$(e,"class","flex-center h-6 w-6 shrink-0")},m(n,o){D(n,e,o),S(t,e,null),r=!0},p:q,i(n){r||(_(t.$$.fragment,n),r=!0)},o(n){b(t.$$.fragment,n),r=!1},d(n){n&&N(e),j(t)}}}function Qt(l){let e,t;return{c(){e=T("img"),oe(e.src,t=ie(l[3]))||$(e,"src",t),$(e,"alt","Favicon"),$(e,"class","h-6 w-6 shrink-0")},m(r,n){D(r,e,n)},p(r,n){n[0]&8&&!oe(e.src,t=ie(r[3]))&&$(e,"src",t)},i:q,o:q,d(r){r&&N(e)}}}function Zt(l){let e,t;return e=new ae({props:{class:"flex-center px-3 py-1.5 text-sm",$$slots:{default:[Yt]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){const o={};n[1]&2&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Xt(l){let e,t;return e=new ae({props:{class:"flex-center px-3 py-1.5 text-sm",disabled:!l[7],$$slots:{default:[er]},$$scope:{ctx:l}}}),e.$on("click",l[18]),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){const o={};n[0]&128&&(o.disabled=!r[7]),n[1]&2&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Yt(l){let e;return{c(){e=K("Save")},m(t,r){D(t,e,r)},d(t){t&&N(e)}}}function er(l){let e;return{c(){e=K("Add")},m(t,r){D(t,e,r)},d(t){t&&N(e)}}}function tr(l){let e,t,r,n,o,s,i,a,f,u;const m=[Qt,Wt],k=[];function g(p,d){return p[2]!==""?0:1}e=g(l),t=k[e]=m[e](l);function y(p){l[24](p)}let h={placeholder:"Title (Optional)",class:"w-full px-3 py-2 text-sm"};l[5]!==void 0&&(h.value=l[5]),n=new ke({props:h}),ee.push(()=>te(n,"value",y)),n.$on("keypress",l[25]);const F=[Xt,Zt],c=[];function E(p,d){var w;return!p[4]||!((w=p[4])!=null&&w.url)?0:1}return i=E(l),a=c[i]=F[i](l),{c(){t.c(),r=R(),B(n.$$.fragment),s=R(),a.c(),f=fe()},m(p,d){k[e].m(p,d),D(p,r,d),S(n,p,d),D(p,s,d),c[i].m(p,d),D(p,f,d),u=!0},p(p,d){let w=e;e=g(p),e===w?k[e].p(p,d):(z(),b(k[w],1,1,()=>{k[w]=null}),V(),t=k[e],t?t.p(p,d):(t=k[e]=m[e](p),t.c()),_(t,1),t.m(r.parentNode,r));const I={};!o&&d[0]&32&&(o=!0,I.value=p[5],re(()=>o=!1)),n.$set(I);let x=i;i=E(p),i===x?c[i].p(p,d):(z(),b(c[x],1,1,()=>{c[x]=null}),V(),a=c[i],a?a.p(p,d):(a=c[i]=F[i](p),a.c()),_(a,1),a.m(f.parentNode,f))},i(p){u||(_(t),_(n.$$.fragment,p),_(a),u=!0)},o(p){b(t),b(n.$$.fragment,p),b(a),u=!1},d(p){k[e].d(p),p&&N(r),j(n,p),p&&N(s),c[i].d(p),p&&N(f)}}}function Ke(l){let e,t,r,n,o,s,i,a,f;return e=new W({props:{icon:at,tooltip:"Add folder",class:"mr-1 shrink-0 text-xl"}}),e.$on("click",l[27]),r=new W({props:{icon:l[11]==="grid"?Be:Se,tooltip:l[11]==="grid"?"Switch to list view":"Switch to grid view",class:"mr-1 shrink-0 text-xl"}}),r.$on("click",l[28]),s=new W({props:{icon:ft,tooltip:"Change parent",class:"mr-1 shrink-0 text-xl"}}),a=new Ce({props:{trigger:"click",placement:"bottom-end",origin:"top right",offset:[0,10],$$slots:{default:[rr]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment),t=R(),B(r.$$.fragment),n=R(),o=T("div"),B(s.$$.fragment),i=R(),B(a.$$.fragment),$(o,"class","shrink-0")},m(u,m){S(e,u,m),D(u,t,m),S(r,u,m),D(u,n,m),D(u,o,m),S(s,o,null),D(u,i,m),S(a,u,m),f=!0},p(u,m){const k={};m[0]&2048&&(k.icon=u[11]==="grid"?Be:Se),m[0]&2048&&(k.tooltip=u[11]==="grid"?"Switch to list view":"Switch to grid view"),r.$set(k);const g={};m[0]&320|m[1]&2&&(g.$$scope={dirty:m,ctx:u}),a.$set(g)},i(u){f||(_(e.$$.fragment,u),_(r.$$.fragment,u),_(s.$$.fragment,u),_(a.$$.fragment,u),f=!0)},o(u){b(e.$$.fragment,u),b(r.$$.fragment,u),b(s.$$.fragment,u),b(a.$$.fragment,u),f=!1},d(u){j(e,u),u&&N(t),j(r,u),u&&N(n),u&&N(o),j(s),u&&N(i),j(a,u)}}}function rr(l){let e,t,r,n,o,s;t=new J({props:{icon:ne}});function i(f){l[29](f)}let a={options:l[6]};return l[8]!==void 0&&(a.value=l[8]),n=new tt({props:a}),ee.push(()=>te(n,"value",i)),{c(){e=T("div"),B(t.$$.fragment),r=R(),B(n.$$.fragment),$(e,"class","flex gap-3 items-center justify-center px-4 py-2")},m(f,u){D(f,e,u),S(t,e,null),C(e,r),S(n,e,null),s=!0},p(f,u){const m={};u[0]&64&&(m.options=f[6]),!o&&u[0]&256&&(o=!0,m.value=f[8],re(()=>o=!1)),n.$set(m)},i(f){s||(_(t.$$.fragment,f),_(n.$$.fragment,f),s=!0)},o(f){b(t.$$.fragment,f),b(n.$$.fragment,f),s=!1},d(f){f&&N(e),j(t),j(n)}}}function lr(l){let e,t,r,n,o,s,i,a,f;function u(y){l[20](y)}function m(y){l[21](y)}let k={class:"w-full text-sm py-1.5 px-3",placeholder:"Type URL to add bookmark"};l[2]!==void 0&&(k.value=l[2]),l[1]!==void 0&&(k.element=l[1]),r=new ke({props:k}),ee.push(()=>te(r,"value",u)),ee.push(()=>te(r,"element",m)),r.$on("focus",l[22]),r.$on("keypress",l[23]),i=new Ce({props:{closeOnOutsideClick:!1,autoCloseOnFocusOut:!1,autoFocus:!1,show:!0,visible:l[0],trigger:null,transition:"slide",placement:"bottom-start",class:"flex w-[22.5rem] flex-row items-center justify-between gap-4 px-3 py-2",id:"bookmarks-add-url",offset:[0,10],$$slots:{default:[tr]},$$scope:{ctx:l}}}),i.$on("clickOutside",l[26]);let g=l[9].length!==0&&Ke(l);return{c(){e=T("div"),t=T("div"),B(r.$$.fragment),s=R(),B(i.$$.fragment),a=R(),g&&g.c(),$(t,"class","flex w-full flex-row items-center gap-4 overflow-hidden py-0.5"),$(e,"class","flex flex-col items-start gap-2 overflow-hidden pr-1 shrink-0")},m(y,h){D(y,e,h),C(e,t),S(r,t,null),C(t,s),S(i,t,null),C(t,a),g&&g.m(t,null),f=!0},p(y,h){const F={};!n&&h[0]&4&&(n=!0,F.value=y[2],re(()=>n=!1)),!o&&h[0]&2&&(o=!0,F.element=y[1],re(()=>o=!1)),r.$set(F);const c={};h[0]&1&&(c.visible=y[0]),h[0]&188|h[1]&2&&(c.$$scope={dirty:h,ctx:y}),i.$set(c),y[9].length!==0?g?(g.p(y,h),h[0]&512&&_(g,1)):(g=Ke(y),g.c(),_(g,1),g.m(t,null)):g&&(z(),b(g,1,1,()=>{g=null}),V())},i(y){f||(_(r.$$.fragment,y),_(i.$$.fragment,y),_(g),f=!0)},o(y){b(r.$$.fragment,y),b(i.$$.fragment,y),b(g),f=!1},d(y){y&&N(e),j(r),j(i),g&&g.d()}}}function nr(l,e,t){let r,n,o,s,i,a,f,u;const{addFolder:m,bookmarks:k,editMode:g,selectedFolder:y,view:h,parentId:F}=le("stores");G(l,m,M=>t(10,f=M)),G(l,k,M=>t(9,a=M)),G(l,g,M=>t(4,o=M)),G(l,y,M=>t(30,i=M)),G(l,h,M=>t(11,u=M)),G(l,F,M=>t(8,s=M));let c="",{showPopOver:E=!1}=e,{inputElement:p=null}=e,d="",w=[];try{chrome.bookmarks.getTree().then(M=>{M[0].children.forEach(ge=>{t(6,w=[...w,{value:ge.id,label:ge.title}])})})}catch(M){console.error(M)}const I=()=>{n&&(i?chrome.bookmarks.create({parentId:i.id,title:d,url:r,index:0}):chrome.bookmarks.create({parentId:s,title:d,url:r,index:0}),t(2,c=""),t(5,d=""),t(0,E=!1))},x=()=>{!n||!o||(chrome.bookmarks.update(o.id,{title:d,url:r}),g.set(null),t(2,c=""),t(5,d=""),t(0,E=!1))},P=async()=>{if(!o)return;const{url:M,title:ge}=o;t(2,c=M),t(3,r=M),t(7,n=!0),t(5,d=ge),t(0,E=!0),setTimeout(()=>{p.focus(),p.setSelectionRange(p.value.length,p.value.length)},100)};function A(M){c=M,t(2,c)}function L(M){p=M,t(1,p)}const v=()=>t(0,E=!0),O=M=>{M.key==="Enter"&&(o&&(o!=null&&o.url)?x():I())};function U(M){d=M,t(5,d)}const H=M=>{M.key==="Enter"&&(o&&(o!=null&&o.url)?x():I())},_e=()=>{if(o&&(o!=null&&o.url)){g.set(null),t(2,c=""),t(5,d=""),t(0,E=!1);return}else t(0,E=!1)},rt=()=>se(m,f=!0,f),lt=()=>se(h,u=u==="grid"?"list":"grid",u);function nt(M){s=M,F.set(s)}return l.$$set=M=>{"showPopOver"in M&&t(0,E=M.showPopOver),"inputElement"in M&&t(1,p=M.inputElement)},l.$$.update=()=>{l.$$.dirty[0]&4&&t(3,r=c.includes("://")?c:`https://${c}`),l.$$.dirty[0]&12&&t(7,n=c&&ut(r)),l.$$.dirty[0]&16&&o&&o.url&&P()},[E,p,c,r,o,d,w,n,s,a,f,u,m,k,g,y,h,F,I,x,A,L,v,O,U,H,_e,rt,lt,nt]}class sr extends X{constructor(e){super(),Y(this,e,nr,lr,Q,{showPopOver:0,inputElement:1},null,[-1,-1])}}function or(l){let e,t;return e=new Ee({props:{items:l[2],options:{group:"bookmarks_"+l[3],animation:150,easing:"cubic-bezier(0.5, 0, 0, 1)"},class:`overflow-overlay scrollbar  w-full grow-0  
   grid grid-cols-4 gap-y-5 mt-2 justify-items-center gap-x-5 justify-center items-center pb-2
  `,wrapperClass:"items-start overflow-hidden w-max",$$slots:{default:[ar,({item:r})=>({7:r}),({item:r})=>r?128:0]},$$scope:{ctx:l}}}),e.$on("dragover",pr),e.$on("update",Oe),e.$on("drop",function(){$e(l[0])&&l[0].apply(this,arguments)}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){l=r;const o={};n&4&&(o.items=l[2]),n&8&&(o.options={group:"bookmarks_"+l[3],animation:150,easing:"cubic-bezier(0.5, 0, 0, 1)"}),n&384&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function ir(l){let e,t;return e=new Ee({props:{items:l[2],options:{group:"bookmarks_"+l[3],animation:150,easing:"cubic-bezier(0.5, 0, 0, 1)"},class:`overflow-overlay scrollbar  w-full grow-0  justify-items-center
   flex flex-col gap-2
  `,wrapperClass:"items-start overflow-hidden w-full",$$slots:{default:[fr,({item:r})=>({7:r}),({item:r})=>r?128:0]},$$scope:{ctx:l}}}),e.$on("dragover",cr),e.$on("update",Oe),e.$on("drop",function(){$e(l[0])&&l[0].apply(this,arguments)}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){l=r;const o={};n&4&&(o.items=l[2]),n&8&&(o.options={group:"bookmarks_"+l[3],animation:150,easing:"cubic-bezier(0.5, 0, 0, 1)"}),n&384&&(o.$$scope={dirty:n,ctx:l}),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function ar(l){let e,t;return e=new Te({props:{item:l[7]}}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){const o={};n&128&&(o.item=r[7]),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function fr(l){let e,t;return e=new Te({props:{item:l[7]}}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p(r,n){const o={};n&128&&(o.item=r[7]),e.$set(o)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function ur(l){let e,t,r,n;const o=[ir,or],s=[];function i(a,f){return a[1]==="list"?0:1}return e=i(l),t=s[e]=o[e](l),{c(){t.c(),r=fe()},m(a,f){s[e].m(a,f),D(a,r,f),n=!0},p(a,[f]){let u=e;e=i(a),e===u?s[e].p(a,f):(z(),b(s[u],1,1,()=>{s[u]=null}),V(),t=s[e],t?t.p(a,f):(t=s[e]=o[e](a),t.c()),_(t,1),t.m(r.parentNode,r))},i(a){n||(_(t),n=!0)},o(a){b(t),n=!1},d(a){s[e].d(a),a&&N(r)}}}const cr=l=>{l.preventDefault()},pr=l=>{l.preventDefault()};function mr(l,e,t){let r,n,o;const{bookmarks:s,view:i,parentId:a}=le("stores");G(l,s,u=>t(2,n=u)),G(l,i,u=>t(1,r=u)),G(l,a,u=>t(3,o=u));let{handleTabManagerDrop:f}=e;return l.$$set=u=>{"handleTabManagerDrop"in u&&t(0,f=u.handleTabManagerDrop)},[f,r,n,o,s,i,a]}class dr extends X{constructor(e){super(),Y(this,e,mr,ur,Q,{handleTabManagerDrop:0})}}function _r(l){let e,t;return e=new St({}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p:q,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function gr(l){let e,t;return e=new Ct({}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p:q,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function kr(l){let e,t,r,n,o,s,i,a,f,u;function m(c){l[18](c)}function k(c){l[19](c)}let g={};l[3]!==void 0&&(g.showPopOver=l[3]),l[4]!==void 0&&(g.inputElement=l[4]),t=new sr({props:g}),ee.push(()=>te(t,"showPopOver",m)),ee.push(()=>te(t,"inputElement",k));const y=[$r,hr,br],h=[];function F(c,E){return c[7].length===0?0:c[5]?1:2}return i=F(l),a=h[i]=y[i](l),{c(){e=T("div"),B(t.$$.fragment),o=R(),s=T("div"),a.c(),$(s,"class","flex w-full flex-col gap-5 transition-container h-full"),he(s,"transition","max-height 250ms ease-in"),$(e,"class",f=(l[9]?"h-[40rem]":"h-[20.75rem]")+" flex flex-col gap-2 p-2 w-[24rem]")},m(c,E){D(c,e,E),S(t,e,null),C(e,o),C(e,s),h[i].m(s,null),u=!0},p(c,E){const p={};!r&&E&8&&(r=!0,p.showPopOver=c[3],re(()=>r=!1)),!n&&E&16&&(n=!0,p.inputElement=c[4],re(()=>n=!1)),t.$set(p);let d=i;i=F(c),i===d?h[i].p(c,E):(z(),b(h[d],1,1,()=>{h[d]=null}),V(),a=h[i],a?a.p(c,E):(a=h[i]=y[i](c),a.c()),_(a,1),a.m(s,null)),(!u||E&512&&f!==(f=(c[9]?"h-[40rem]":"h-[20.75rem]")+" flex flex-col gap-2 p-2 w-[24rem]"))&&$(e,"class",f)},i(c){u||(_(t.$$.fragment,c),_(a),u=!0)},o(c){b(t.$$.fragment,c),b(a),u=!1},d(c){c&&N(e),j(t),h[i].d()}}}function br(l){let e,t,r,n,o,s;return r=new dr({props:{handleTabManagerDrop:l[16]}}),{c(){e=T("div"),t=T("div"),B(r.$$.fragment),$(t,"class","w-full flex-1")},m(i,a){D(i,e,a),C(e,t),S(r,t,null),n=!0,o||(s=[Z(t,"drop",dt(l[17])),be(ye.call(null,e))],o=!0)},p:q,i(i){n||(_(r.$$.fragment,i),n=!0)},o(i){b(r.$$.fragment,i),n=!1},d(i){i&&N(e),j(r),o=!1,Ye(s)}}}function hr(l){let e,t;return e=new Kt({props:{handleTabManagerDrop:l[16]}}),e.$on("editFolder",l[21]),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p:q,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function $r(l){let e,t,r,n,o,s,i,a,f;o=new _t({props:{icon:ne,class:"text-xl"}});function u(k){l[20](k)}let m={options:l[1]};return l[0]!==void 0&&(m.value=l[0]),i=new tt({props:m}),ee.push(()=>te(i,"value",u)),{c(){e=T("div"),t=T("span"),t.textContent="Add a bookmark or choose another parent to get started.",r=R(),n=T("div"),B(o.$$.fragment),s=R(),B(i.$$.fragment),$(t,"class","mx-8 text-center"),$(n,"class","flex gap-3 items-center justify-center px-4 py-2 text-sm"),$(e,"class","flex-center my-3 flex h-full flex-col gap-2")},m(k,g){D(k,e,g),C(e,t),C(e,r),C(e,n),S(o,n,null),C(n,s),S(i,n,null),f=!0},p(k,g){const y={};g&2&&(y.options=k[1]),!a&&g&1&&(a=!0,y.value=k[0],re(()=>a=!1)),i.$set(y)},i(k){f||(_(o.$$.fragment,k),_(i.$$.fragment,k),f=!0)},o(k){b(o.$$.fragment,k),b(i.$$.fragment,k),f=!1},d(k){k&&N(e),j(o),j(i)}}}function wr(l){let e,t,r,n;const o=[kr,gr,_r],s=[];function i(a,f){return!a[8]&&(!a[6]||a[6]&&a[6].url)?0:a[8]?1:a[6]&&!a[6].url?2:-1}return~(e=i(l))&&(t=s[e]=o[e](l)),{c(){t&&t.c(),r=fe()},m(a,f){~e&&s[e].m(a,f),D(a,r,f),n=!0},p(a,[f]){let u=e;e=i(a),e===u?~e&&s[e].p(a,f):(t&&(z(),b(s[u],1,1,()=>{s[u]=null}),V()),~e?(t=s[e],t?t.p(a,f):(t=s[e]=o[e](a),t.c()),_(t,1),t.m(r.parentNode,r)):t=null)},i(a){n||(_(t),n=!0)},o(a){b(t),n=!1},d(a){~e&&s[e].d(a),a&&N(r)}}}function vr(l,e,t){let r,n,o,s,i,a;const{addFolder:f,bookmarks:u,editMode:m,selectedFolder:k,parentId:g}=le("stores");G(l,f,L=>t(8,i=L)),G(l,u,L=>t(7,s=L)),G(l,m,L=>t(6,o=L)),G(l,k,L=>t(5,n=L)),G(l,g,L=>t(0,r=L));let y=[];try{chrome.bookmarks.getTree().then(L=>{L[0].children.forEach(v=>{t(1,y=[...y,{value:v.id,label:v.title}])})})}catch(L){console.error(L)}const h=async L=>{const v=await chrome.bookmarks.getTree(),O=v[0].children.findIndex(H=>H.id===r),U=v[0].children[O].children;if(se(u,s=U,s),n){const H=await chrome.bookmarks.getSubTree(n.id);H?k.set(H[0]):k.set(null)}if(o){const H=await chrome.bookmarks.getSubTree(o.id);H?m.set(H[0]):m.set(null)}};pt(()=>{var L,v;chrome.bookmarks.onChanged.addListener(h),chrome.bookmarks.onCreated.addListener(h),chrome.bookmarks.onRemoved.addListener(h),chrome.bookmarks.onMoved.addListener(h),(v=(L=chrome.bookmarks)==null?void 0:L.onChildrenReordered)==null||v.addListener(h)}),mt(()=>{var L,v;chrome.bookmarks.onChanged.removeListener(h),chrome.bookmarks.onCreated.removeListener(h),chrome.bookmarks.onRemoved.removeListener(h),chrome.bookmarks.onMoved.removeListener(h),(v=(L=chrome.bookmarks)==null?void 0:L.onChildrenReordered)==null||v.removeListener(h)});let F=!1,c=!1,E=null;const p=le("alwaysAppView");G(l,p,L=>t(9,a=L));const d=async L=>{try{const v=JSON.parse(L.dataTransfer.getData("text/plain"));if(v.type==="tab"){const O=await chrome.tabs.get(v.id);if(!O)return;chrome.bookmarks.create({parentId:n?n.id:r,title:O.title,url:O.url,index:0})}if(v.type==="group"){const O=await chrome.tabs.query({groupId:v.id}),U=await chrome.tabGroups.get(v.id);if(O.length===0)return;const H=await chrome.bookmarks.create({parentId:n?n.id:r,title:U.title||"Untitled",index:0});O.forEach(_e=>{chrome.bookmarks.create({parentId:H.id,title:_e.title,url:_e.url,index:0})})}}catch{}};function w(L){we.call(this,l,L)}function I(L){c=L,t(3,c)}function x(L){E=L,t(4,E)}function P(L){r=L,g.set(r)}const A=({detail:L})=>t(2,F=L.id);return l.$$.update=()=>{l.$$.dirty&1&&h()},[r,y,F,c,E,n,o,s,i,a,f,u,m,k,g,p,d,w,I,x,P,A]}class yr extends X{constructor(e){super(),Y(this,e,vr,wr,Q,{})}}function Fr(l){let e;return{c(){e=K("Grant Permissions")},m(t,r){D(t,e,r)},d(t){t&&N(e)}}}function Ir(l){let e,t,r,n,o;return n=new ae({props:{class:"mt-4",$$slots:{default:[Fr]},$$scope:{ctx:l}}}),n.$on("click",l[1]),{c(){e=T("div"),t=T("span"),t.textContent="Dashy needs your permission to view and manage your bookmarks. Dashy does not store your data.",r=R(),B(n.$$.fragment),$(t,"class","text-sm text-center"),$(e,"class","max-w-[24rem] p-4 h-max flex flex-col items-center justify-center")},m(s,i){D(s,e,i),C(e,t),C(e,r),S(n,e,null),o=!0},p(s,[i]){const a={};i&4&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){o||(_(n.$$.fragment,s),o=!0)},o(s){b(n.$$.fragment,s),o=!1},d(s){s&&N(e),j(n)}}}function Cr(l,e,t){let{checkForPermissions:r}=e;const n=async()=>{await chrome.permissions.request({permissions:["bookmarks","tabs"]})&&r()};return l.$$set=o=>{"checkForPermissions"in o&&t(0,r=o.checkForPermissions)},[r,n]}class Pr extends X{constructor(e){super(),Y(this,e,Cr,Ir,Q,{checkForPermissions:0})}}function Er(l){let e;return{c(){e=K("Export to Chrome")},m(t,r){D(t,e,r)},d(t){t&&N(e)}}}function Or(l){let e;return{c(){e=K("Delete Bookmarks")},m(t,r){D(t,e,r)},d(t){t&&N(e)}}}function Tr(l){let e,t,r,n,o,s,i,a;return o=new ae({props:{class:"mt-4",$$slots:{default:[Er]},$$scope:{ctx:l}}}),o.$on("click",l[1]),i=new ae({props:{class:"mt-4",$$slots:{default:[Or]},$$scope:{ctx:l}}}),i.$on("click",l[2]),{c(){e=T("div"),t=T("span"),t.textContent="The Bookmarks widget is now integrated with Chrome Bookmarks. Either delete or export your existing bookmarks to Chrome to continue.",r=R(),n=T("div"),B(o.$$.fragment),s=R(),B(i.$$.fragment),$(t,"class","text-sm text-center"),$(n,"class","flex-center gap-3"),$(e,"class","max-w-[24rem] p-4 h-max flex flex-col items-center justify-center")},m(f,u){D(f,e,u),C(e,t),C(e,r),C(e,n),S(o,n,null),C(n,s),S(i,n,null),a=!0},p(f,[u]){const m={};u&16&&(m.$$scope={dirty:u,ctx:f}),o.$set(m);const k={};u&16&&(k.$$scope={dirty:u,ctx:f}),i.$set(k)},i(f){a||(_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){b(o.$$.fragment,f),b(i.$$.fragment,f),a=!1},d(f){f&&N(e),j(o),j(i)}}}function Br(l,e,t){let r;const{oldBookmarks:n}=le("stores");return G(l,n,i=>t(3,r=i)),[n,async()=>{const i=await chrome.bookmarks.create({parentId:"1",title:"Dashy",index:0});r.forEach(a=>{chrome.bookmarks.create({parentId:i.id,title:a.title,url:a.url})}),se(n,r=[],r)},async()=>{se(n,r=[],r)}]}class Sr extends X{constructor(e){super(),Y(this,e,Br,Tr,Q,{})}}function jr(l){let e,t;return e=new Pr({props:{checkForPermissions:l[6]}}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},p:q,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Dr(l){let e,t,r,n;const o=[Rr,Lr,Nr],s=[];function i(a,f){return a[1].length>0?0:a[2]?1:2}return e=i(l),t=s[e]=o[e](l),{c(){t.c(),r=fe()},m(a,f){s[e].m(a,f),D(a,r,f),n=!0},p(a,f){let u=e;e=i(a),e!==u&&(z(),b(s[u],1,1,()=>{s[u]=null}),V(),t=s[e],t||(t=s[e]=o[e](a),t.c()),_(t,1),t.m(r.parentNode,r))},i(a){n||(_(t),n=!0)},o(a){b(t),n=!1},d(a){s[e].d(a),a&&N(r)}}}function Nr(l){let e,t;return e=new $t({}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Lr(l){let e,t;return e=new yr({}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function Rr(l){let e,t;return e=new Sr({}),{c(){B(e.$$.fragment)},m(r,n){S(e,r,n),t=!0},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){j(e,r)}}}function xr(l){let e,t,r,n;const o=[Dr,jr],s=[];function i(a,f){return a[0]?0:1}return e=i(l),t=s[e]=o[e](l),{c(){t.c(),r=fe()},m(a,f){s[e].m(a,f),D(a,r,f),n=!0},p(a,[f]){let u=e;e=i(a),e===u?s[e].p(a,f):(z(),b(s[u],1,1,()=>{s[u]=null}),V(),t=s[e],t?t.p(a,f):(t=s[e]=o[e](a),t.c()),_(t,1),t.m(r.parentNode,r))},i(a){n||(_(t),n=!0)},o(a){b(t),n=!1},d(a){s[e].d(a),a&&N(r)}}}function Mr(l,e,t){let r,n,o,{config:s}=e;const i={path:`user_data/{uid}/profiles/{currentProfile}/apps/${s.id}`,currentProfile:gt,uid:kt},{create:a,isFetched:f,createPersist:u}=ht(i);G(l,f,w=>t(2,o=w));const m=a("bookmarks",[]);G(l,m,w=>t(1,n=w));const k=me([]),g=me(null),y=me(!1),h=me(!1),F=a("view","grid"),c=u("bookmarks:permissonsGranted",!1);G(l,c,w=>t(0,r=w));const E=u("parentId","1"),p=me(!1);bt("stores",{bookmarks:k,selectedFolder:g,editMode:y,addFolder:h,view:F,permissonsGranted:c,isPointerDown:p,oldBookmarks:m,parentId:E}),d();async function d(){const w=["bookmarks"],I=await chrome.permissions.getAll();w.every(x=>I.permissions.includes(x))?se(c,r=!0,r):se(c,r=!1,r)}return l.$$set=w=>{"config"in w&&t(7,s=w.config)},[r,n,o,f,m,c,d,s]}class Gr extends X{constructor(e){super(),Y(this,e,Mr,xr,Q,{config:7})}}export{Gr as default};
