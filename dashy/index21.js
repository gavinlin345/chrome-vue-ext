import{S as re,i as le,s as ne,q as $,V as N,K as oe,r as b,u as I,L as k,aa as ae,aQ as ue,Z as ie,v as J,a as v,x as K,t as y,D as T,b as R,dJ as q,dK as U,dL as fe,E as ce,a2 as me,a7 as W,de as pe,c as P,m as V,af as _e,ag as de,y as ge,_ as Z,dM as G,aq as H,d as E,a1 as he,I as be,dN as ye,O as se,P as ve,a8 as we,a9 as ke,W as $e,a5 as j,du as X,aI as Se,co as Ce,R as F,cB as Ae,n as Q,J as Ie,cA as Te}from"./overlayscrollbars.js";import{B as Pe}from"./ButtonImage.js";import{S as Ve}from"./Slider.js";function Y(l,t,n){const e=l.slice();return e[24]=t[n],e}function x(l){let t,n,e,o,_;return{c(){t=$("div"),n=N(),e=$("video"),o=$("source"),b(t,"class","video-overlay svelte-1q4czuk"),W(o.src,_=l[2].currentCategory.thumbnail)||b(o,"src",_),b(o,"type","video/mp4"),e.autoplay=!0,e.loop=!0,e.muted=!0,b(e,"class","curved-half h-40 w-full object-cover transition group-hover:scale-110")},m(a,u){I(a,t,u),I(a,n,u),I(a,e,u),k(e,o),l[12](e)},p(a,u){u&4&&!W(o.src,_=a[2].currentCategory.thumbnail)&&b(o,"src",_)},d(a){a&&T(t),a&&T(n),a&&T(e),l[12](null)}}}function Ee(l){let t,n;return t=new F({props:{icon:Ae,size:"4xl"}}),t.$on("click",l[8]),{c(){P(t.$$.fragment)},m(e,o){V(t,e,o),n=!0},p:Q,i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){v(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function Ne(l){let t,n;return t=new F({props:{icon:Ie,class:"animate-spin",size:"4xl"}}),{c(){P(t.$$.fragment)},m(e,o){V(t,e,o),n=!0},p:Q,i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){v(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function qe(l){let t,n;return t=new F({props:{icon:Te,size:"4xl"}}),t.$on("click",l[7]),{c(){P(t.$$.fragment)},m(e,o){V(t,e,o),n=!0},p:Q,i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){v(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function ee(l){let t,n,e=[],o=new Map,_,a,u,d,s,p=l[3].sort(l[13]);const i=f=>f[24];for(let f=0;f<p.length;f+=1){let m=Y(l,p,f),h=i(m);o.set(h,e[f]=te(h,m))}return u=new pe({props:{class:"mr-2",$$slots:{default:[ze]},$$scope:{ctx:l}}}),{c(){t=$("div"),n=$("div");for(let f=0;f<e.length;f+=1)e[f].c();_=N(),a=$("div"),P(u.$$.fragment),b(n,"class","my-2 flex h-[19.2rem] w-full flex-col gap-2 overflow-auto"),b(a,"class","mb-2.5 ml-1.5 flex w-full items-center justify-between gap-3"),b(t,"class","flex flex-col items-start px-2")},m(f,m){I(f,t,m),k(t,n);for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(n,null);k(t,_),k(t,a),V(u,a,null),s=!0},p(f,m){l=f,m&76&&(p=l[3].sort(l[13]),J(),e=_e(e,m,i,1,l,p,o,n,de,te,null,Y),K());const h={};m&134217732&&(h.$$scope={dirty:m,ctx:l}),u.$set(h)},i(f){if(!s){for(let m=0;m<p.length;m+=1)y(e[m]);y(u.$$.fragment,f),f&&ge(()=>{s&&(d||(d=Z(t,H,{duration:400,easing:G},!0)),d.run(1))}),s=!0}},o(f){for(let m=0;m<e.length;m+=1)v(e[m]);v(u.$$.fragment,f),f&&(d||(d=Z(t,H,{duration:400,easing:G},!1)),d.run(0)),s=!1},d(f){f&&T(t);for(let m=0;m<e.length;m+=1)e[m].d();E(u),f&&d&&d.end()}}}function te(l,t){let n,e,o;function _(){return t[14](t[24])}return e=new Pe({props:{isVideo:!0,src:t[24].thumbnail,name:t[24].name,selected:t[2].audio===t[24].name}}),e.$on("click",_),{key:l,first:null,c(){n=he(),P(e.$$.fragment),this.first=n},m(a,u){I(a,n,u),V(e,a,u),o=!0},p(a,u){t=a;const d={};u&8&&(d.src=t[24].thumbnail),u&8&&(d.name=t[24].name),u&12&&(d.selected=t[2].audio===t[24].name),e.$set(d)},i(a){o||(y(e.$$.fragment,a),o=!0)},o(a){v(e.$$.fragment,a),o=!1},d(a){a&&T(n),E(e,a)}}}function ze(l){let t,n,e,o,_,a,u,d;n=new be({props:{icon:ye,class:"text-lg mr-1"}});function s(i){l[15](i)}let p={type:"range",min:0,max:10,step:10,class:"w-24"};return l[2].volume!==void 0&&(p.value=l[2].volume),o=new Ve({props:p}),se.push(()=>ve(o,"value",s)),o.$on("change",l[16]),{c(){t=$("div"),P(n.$$.fragment),e=N(),P(o.$$.fragment),b(t,"class","flex-center")},m(i,f){I(i,t,f),V(n,t,null),I(i,e,f),V(o,i,f),a=!0,u||(d=we(ke.call(null,t,"Volume")),u=!0)},p(i,f){const m={};!_&&f&4&&(_=!0,m.value=i[2].volume,$e(()=>_=!1)),o.$set(m)},i(i){a||(y(n.$$.fragment,i),y(o.$$.fragment,i),a=!0)},o(i){v(n.$$.fragment,i),v(o.$$.fragment,i),a=!1},d(i){i&&T(t),E(n),i&&T(e),E(o,i),u=!1,d()}}}function Be(l){var M,L;let t,n,e=l[2].currentCategory.thumbnail,o,_,a=((L=(M=l[2])==null?void 0:M.currentCategory)==null?void 0:L.name)+"",u,d,s,p,i,f,m,h,z,w=x(l);const B=[qe,Ne,Ee],S=[];function D(r,c){return r[1]==="playing"?0:r[1]==="loading"?1:r[1]==="paused"?2:-1}~(p=D(l))&&(i=S[p]=B[p](l));let g=l[4]&&ee(l);return{c(){t=$("div"),n=$("div"),w.c(),o=N(),_=$("span"),u=oe(a),d=N(),s=$("div"),i&&i.c(),f=N(),g&&g.c(),b(_,"class","absolute bottom-3 left-4 z-10 text-xl font-semibold"),b(s,"class","flex-center absolute bottom-4 right-5 z-[10]"),b(n,"class","group relative overflow-hidden"),b(t,"class","flex h-max w-[24rem] flex-col")},m(r,c){I(r,t,c),k(t,n),w.m(n,null),k(n,o),k(n,_),k(_,u),k(n,d),k(n,s),~p&&S[p].m(s,null),k(t,f),g&&g.m(t,null),m=!0,h||(z=ae(s,"pointerdown",ue(l[11])),h=!0)},p(r,[c]){var A,O;c&4&&ne(e,e=r[2].currentCategory.thumbnail)?(w.d(1),w=x(r),w.c(),w.m(n,o)):w.p(r,c),(!m||c&4)&&a!==(a=((O=(A=r[2])==null?void 0:A.currentCategory)==null?void 0:O.name)+"")&&ie(u,a);let C=p;p=D(r),p===C?~p&&S[p].p(r,c):(i&&(J(),v(S[C],1,1,()=>{S[C]=null}),K()),~p?(i=S[p],i?i.p(r,c):(i=S[p]=B[p](r),i.c()),y(i,1),i.m(s,null)):i=null),r[4]?g?(g.p(r,c),c&16&&y(g,1)):(g=ee(r),g.c(),y(g,1),g.m(t,null)):g&&(J(),v(g,1,1,()=>{g=null}),K())},i(r){m||(y(i),y(g),m=!0)},o(r){v(i),v(g),m=!1},d(r){r&&T(t),w.d(r),~p&&S[p].d(),g&&g.d(),h=!1,z()}}}function De(l,t,n){let e,o,_,a;R(l,q,r=>n(1,e=r)),R(l,U,r=>n(2,o=r)),R(l,fe,r=>n(3,_=r));let u;const d=ce("appView");R(l,d,r=>n(4,a=r));let s=null,p=o.volume/10,i=[];q.set("paused");const f=async(r=null)=>{s==null||s.pause(),s==null||s.remove(),j(q,e="loading",e);const c=_.find(C=>C.name===o.audio);if(c!=null&&c.radio){m(r);return}else n(10,s=document.createElement("audio")),n(10,s.src=X.PUBLIC_ASSETS_ENDPOINT+(c==null?void 0:c.audio),s),n(10,s.oncanplaythrough=()=>{s&&(n(10,s.volume=p,s),s.play().then(()=>{r&&(r==null||r(!0))}).catch(C=>{r&&(r==null||r(!1))}))},s),n(10,s.onended=()=>{s&&s.play()},s)},m=r=>{const c=_.find(A=>A.name===o.audio);i=[];const C=()=>{if(!(c!=null&&c.tracks))return;const A=Math.floor(Math.random()*(c==null?void 0:c.tracks))+1;if(i.includes(A))C();else{i.push(A);const O=(c==null?void 0:c.audio)+A+".mp3";n(10,s=document.createElement("audio")),n(10,s.src=X.PUBLIC_ASSETS_ENDPOINT+O,s),n(10,s.oncanplaythrough=()=>{s&&(n(10,s.volume=p,s),s.play().then(()=>{r&&r(!0)}).catch(Me=>{r&&r(!1)}))},s),n(10,s.onended=()=>{C()},s)}};C()},h=()=>{s==null||s.pause()},z=()=>{s||f(),s==null||s.play()},w=()=>{p=o.volume/10,s&&n(10,s.volume=p,s)};me(()=>{s&&(s.pause(),s.remove(),n(10,s=null))});function B(r){Se.call(this,l,r)}function S(r){se[r?"unshift":"push"](()=>{u=r,n(0,u)})}const D=(r,c)=>Ce(r,c,"name",!0),g=r=>{U.update(c=>(c.audio=r.name,c.currentCategory=r,c)),f()};function M(r){l.$$.not_equal(o.volume,r)&&(o.volume=r,U.set(o))}const L=()=>{w()};return l.$$.update=()=>{l.$$.dirty&1024&&s&&n(10,s.onplay=()=>{j(q,e="playing",e)},s),l.$$.dirty&1024&&s&&n(10,s.onpause=()=>{j(q,e="paused",e)},s),l.$$.dirty&3&&(e==="playing"&&u?u==null||u.play():u==null||u.pause())},[u,e,o,_,a,d,f,h,z,w,s,B,S,D,g,M,L]}class Ue extends re{constructor(t){super(),le(this,t,De,Be,ne,{})}}export{Ue as default};
