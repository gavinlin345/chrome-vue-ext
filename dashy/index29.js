import{S as Ce,i as Be,s as be,I as ae,q as $,c as E,r as _,cd as Ae,c9 as Te,u as R,m as O,aa as ue,aQ as $t,a8 as Ct,a9 as Bt,as as jt,t as y,a as C,D as U,d as q,ab as zt,ca as Ee,cb as Oe,cC as qe,aI as ze,R as ke,T as ct,V as A,L as g,v as Q,x as Z,y as ve,z as Ue,B as se,C as Le,b as K,ah as ut,av as ft,G as mt,a5 as te,bf as Ie,bB as we,bC as Ve,O as re,ev as je,a3 as X,af as ye,bZ as dt,ac as Re,K as Y,a7 as _e,Z as oe,b_ as _t,b$ as pt,c0 as gt,N as ht,P as ge,U as bt,aG as Dt,W as he,_ as $e,bD as kt,bE as vt,n as F,aE as It,a0 as Vt,ch as Rt,ew as Ne,J as wt,ex as ce,ey as Ut,dg as ee,ez as De,eA as Lt,eB as Pt,eC as Mt,eD as At,E as Tt,dM as We,aq as Se,eE as de,eF as Et,eG as Ot,co as qt,a1 as fe,Q as Pe,eH as Nt,ak as Wt,ag as Fe,bw as St,ao as Ft}from"./overlayscrollbars.js";import{B as Me}from"./ButtonImage.js";import{t as yt}from"./index33.js";import{collections as ie}from"./stores.js";function Gt(n){let t,e,l,r,i,s,o,a,c;return e=new ae({props:{icon:n[0]?n[1][0]:n[1][1],class:n[6].iconClass+" "+(n[0]?`animate-${n[5][0]}`:`animate-${n[5][1]}`)}}),{c(){t=$("button"),E(e.$$.fragment),_(t,"aria-label",l=n[6].ariaLabel||n[3]||n[6].title),_(t,"class",r=Ae(Te(`flex w-fit items-center justify-center opacity-50 text-${n[2]} ${n[6].class}`))+" svelte-1c96bgy"),_(t,"style",i=`--scale: ${n[4]}; ${n[6].styles}`)},m(d,u){R(d,t,u),O(e,t,null),o=!0,a||(c=[ue(t,"click",n[7]),ue(t,"pointerdown",n[8]),ue(t,"pointerdown",$t(n[9])),Ct(s=Bt.call(null,t,n[3]))],a=!0)},p(d,[u]){const m={};u&3&&(m.icon=d[0]?d[1][0]:d[1][1]),u&97&&(m.class=d[6].iconClass+" "+(d[0]?`animate-${d[5][0]}`:`animate-${d[5][1]}`)),e.$set(m),(!o||u&72&&l!==(l=d[6].ariaLabel||d[3]||d[6].title))&&_(t,"aria-label",l),(!o||u&68&&r!==(r=Ae(Te(`flex w-fit items-center justify-center opacity-50 text-${d[2]} ${d[6].class}`))+" svelte-1c96bgy"))&&_(t,"class",r),(!o||u&80&&i!==(i=`--scale: ${d[4]}; ${d[6].styles}`))&&_(t,"style",i),s&&jt(s.update)&&u&8&&s.update.call(null,d[3])},i(d){o||(y(e.$$.fragment,d),o=!0)},o(d){C(e.$$.fragment,d),o=!1},d(d){d&&U(t),q(e),a=!1,zt(c)}}}function Yt(n,t,e){let{condition:l=!0}=t,{icon:r=[qe,qe]}=t,{size:i="lg"}=t,{tooltip:s=!1}=t,{scale:o="1.1"}=t,{animate:a=["",""]}=t;function c(m){ze.call(this,n,m)}function d(m){ze.call(this,n,m)}function u(m){ze.call(this,n,m)}return n.$$set=m=>{e(6,t=Ee(Ee({},t),Oe(m))),"condition"in m&&e(0,l=m.condition),"icon"in m&&e(1,r=m.icon),"size"in m&&e(2,i=m.size),"tooltip"in m&&e(3,s=m.tooltip),"scale"in m&&e(4,o=m.scale),"animate"in m&&e(5,a=m.animate)},t=Oe(t),[l,r,i,s,o,a,t,c,d,u]}class Ht extends Ce{constructor(t){super(),Be(this,t,Yt,Gt,be,{condition:0,icon:1,size:2,tooltip:3,scale:4,animate:5})}}function Ge(n,t,e){const l=n.slice();return l[21]=t[e],l}function Qt(n){let t,e,l,r,i,s,o,a,c,d,u,m;return i=new ae({props:{icon:je,class:"text-3xl"}}),{c(){t=$("div"),e=$("input"),l=A(),r=$("span"),E(i.$$.fragment),s=A(),o=$("span"),o.textContent="Drop some images to get started!",a=A(),c=$("span"),c.textContent="You can add up to 20 images.",_(e,"type","file"),_(e,"id","file"),_(e,"class","absolute top-0 left-0 z-10 h-full w-full cursor-pointer opacity-0"),e.multiple=!0,e.disabled=n[9]&&n[9].length>=5,_(e,"accept","image/webp,image/jpeg,image/png"),_(o,"class","mt-4"),_(c,"class","text-sm mt-2"),_(r,"class","flex h-full w-full cursor-not-allowed flex-col items-center justify-center"),X(r,"z-10",n[0].length>=20),_(t,"class","curved border-light relative flex w-full flex-1 shrink-0 items-center justify-center transition hover:bg-black hover:bg-opacity-10"),X(t,"mt-5",n[9]&&n[9].length>0),X(t,"opactity-50",n[9]&&n[9].length>=5)},m(h,f){R(h,t,f),g(t,e),n[16](e),g(t,l),g(t,r),O(i,r,null),g(r,s),g(r,o),g(r,a),g(r,c),d=!0,u||(m=ue(e,"change",n[11]),u=!0)},p(h,f){(!d||f&1)&&X(r,"z-10",h[0].length>=20)},i(h){d||(y(i.$$.fragment,h),d=!0)},o(h){C(i.$$.fragment,h),d=!1},d(h){h&&U(t),n[16](null),q(i),u=!1,m()}}}function Zt(n){let t,e=[],l=new Map,r,i=n[0];const s=o=>o[21].name;for(let o=0;o<i.length;o+=1){let a=Ge(n,i,o),c=s(a);l.set(c,e[o]=Ye(c,a))}return{c(){t=$("div");for(let o=0;o<e.length;o+=1)e[o].c();_(t,"class","flex flex-1 flex-row flex-wrap gap-3 overflow-auto px-0.5")},m(o,a){R(o,t,a);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);r=!0},p(o,a){if(a&1){i=o[0],Q();for(let c=0;c<e.length;c+=1)e[c].r();e=ye(e,a,s,1,o,i,l,t,dt,Ye,null,Ge);for(let c=0;c<e.length;c+=1)e[c].a();Z()}},i(o){if(!r){for(let a=0;a<i.length;a+=1)y(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)C(e[a]);r=!1},d(o){o&&U(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function Ye(n,t){let e,l,r,i,s,o,a=t[21].name+"",c,d,u,m,h,f=F,b;function z(){return t[15](t[21])}return u=new ke({props:{class:"text-sm",icon:Re,tooltip:"Remove image"}}),u.$on("click",z),{key:n,first:null,c(){e=$("div"),l=$("img"),i=A(),s=$("div"),o=$("span"),c=Y(a),d=A(),E(u.$$.fragment),m=A(),_e(l.src,r=URL.createObjectURL(t[21]))||_(l,"src",r),_(l,"class","h-24 w-full rounded object-cover"),_(l,"alt","Wallpaper"),_(o,"class","fade-text flex-1 shrink-0 overflow-hidden whitespace-nowrap text-sm"),_(s,"class","mt-1 flex items-center justify-between gap-2"),_(e,"class","w-44"),this.first=e},m(v,L){R(v,e,L),g(e,l),g(e,i),g(e,s),g(s,o),g(o,c),g(s,d),O(u,s,null),g(e,m),b=!0},p(v,L){t=v,(!b||L&1&&!_e(l.src,r=URL.createObjectURL(t[21])))&&_(l,"src",r),(!b||L&1)&&a!==(a=t[21].name+"")&&oe(c,a)},r(){h=e.getBoundingClientRect()},f(){_t(e),f()},a(){f(),f=pt(e,h,gt,{duration:250})},i(v){b||(y(u.$$.fragment,v),b=!0)},o(v){C(u.$$.fragment,v),b=!1},d(v){v&&U(e),q(u)}}}function Jt(n){let t,e,l,r,i,s,o,a,c,d,u=n[0].length>0&&He(n);function m(f){n[18](f)}let h={placeholder:"Collection name",class:"flex-1 py-2.5 text-sm",maxLength:25};return n[1]!==void 0&&(h.value=n[1]),r=new ht({props:h}),re.push(()=>ge(r,"value",m)),o=new bt({props:{disabled:!!n[5]||n[0].length===0,$$slots:{default:[tl]},$$scope:{ctx:n}}}),o.$on("click",n[12]),c=new Dt({props:{trigger:"hover",transition:"scale",origin:"bottom",class:"flex-center px-3 py-2",$$slots:{default:[il]},$$scope:{ctx:n}}}),{c(){t=$("div"),u&&u.c(),e=A(),l=$("div"),E(r.$$.fragment),s=A(),E(o.$$.fragment),a=A(),E(c.$$.fragment),_(l,"class","mt-3 flex w-full justify-between gap-3")},m(f,b){R(f,t,b),u&&u.m(t,null),g(t,e),g(t,l),O(r,l,null),g(l,s),O(o,l,null),g(l,a),O(c,l,null),d=!0},p(f,b){f[0].length>0?u?(u.p(f,b),b&1&&y(u,1)):(u=He(f),u.c(),y(u,1),u.m(t,e)):u&&(Q(),C(u,1,1,()=>{u=null}),Z());const z={};!i&&b&2&&(i=!0,z.value=f[1],he(()=>i=!1)),r.$set(z);const v={};b&33&&(v.disabled=!!f[5]||f[0].length===0),b&16777216&&(v.$$scope={dirty:b,ctx:f}),o.$set(v);const L={};b&16777264&&(L.$$scope={dirty:b,ctx:f}),c.$set(L)},i(f){d||(y(u),y(r.$$.fragment,f),y(o.$$.fragment,f),y(c.$$.fragment,f),d=!0)},o(f){C(u),C(r.$$.fragment,f),C(o.$$.fragment,f),C(c.$$.fragment,f),d=!1},d(f){f&&U(t),u&&u.d(),q(r),q(o),q(c)}}}function Kt(n){let t,e,l,r,i,s,o,a,c=n[0].length+"",d,u,m,h;return{c(){t=$("div"),e=$("div"),l=$("div"),i=A(),s=$("span"),o=Y(n[2]),a=Y(" / "),d=Y(c),u=Y(" images uploaded"),_(l,"class","h-full rounded-lg bg-white"),_(l,"style",r=`width: ${n[7]}%`),_(e,"class","h-[0.5rem] w-full rounded-lg bg-gray-400"),_(s,"class","text-sm"),_(t,"class","flex-center mt-4 mb-0.5 shrink-0 flex-col gap-2")},m(f,b){R(f,t,b),g(t,e),g(e,l),g(t,i),g(t,s),g(s,o),g(s,a),g(s,d),g(s,u),h=!0},p(f,b){(!h||b&128&&r!==(r=`width: ${f[7]}%`))&&_(l,"style",r),(!h||b&4)&&oe(o,f[2]),(!h||b&1)&&c!==(c=f[0].length+"")&&oe(d,c)},i(f){h||(f&&ve(()=>{h&&(m||(m=$e(t,se,{duration:250},!0)),m.run(1))}),h=!0)},o(f){f&&(m||(m=$e(t,se,{duration:250},!1)),m.run(0)),h=!1},d(f){f&&U(t),f&&m&&m.end()}}}function He(n){let t,e,l,r,i,s,o,a,c,d;const u=[el,xt,Xt],m=[];function h(f,b){return f[0]&&f[0].length>=20?0:f[4]?2:1}return s=h(n),o=m[s]=u[s](n),{c(){t=$("div"),e=$("input"),r=A(),i=$("span"),o.c(),_(e,"type","file"),_(e,"id","file"),_(e,"class","absolute top-0 left-0 z-10 h-full w-full cursor-pointer opacity-0"),e.multiple=!0,e.disabled=l=n[0]&&n[0].length>=20,_(e,"accept","image/webp,image/jpeg,image/png"),_(i,"class","flex h-full w-full cursor-not-allowed items-center justify-center gap-3 text-sm"),X(i,"z-10",n[0].length>=20),_(t,"class","curved border-light relative mt-4 flex h-12 w-full shrink-0 items-center justify-center transition hover:bg-black hover:bg-opacity-10"),X(t,"opactity-50",n[0]&&n[0].length>=20)},m(f,b){R(f,t,b),g(t,e),n[17](e),g(t,r),g(t,i),m[s].m(i,null),a=!0,c||(d=ue(e,"change",n[11]),c=!0)},p(f,b){(!a||b&1&&l!==(l=f[0]&&f[0].length>=20))&&(e.disabled=l);let z=s;s=h(f),s===z?m[s].p(f,b):(Q(),C(m[z],1,1,()=>{m[z]=null}),Z(),o=m[s],o?o.p(f,b):(o=m[s]=u[s](f),o.c()),y(o,1),o.m(i,null)),(!a||b&1)&&X(i,"z-10",f[0].length>=20),(!a||b&1)&&X(t,"opactity-50",f[0]&&f[0].length>=20)},i(f){a||(y(o),a=!0)},o(f){C(o),a=!1},d(f){f&&U(t),n[17](null),m[s].d(),c=!1,d()}}}function Xt(n){let t;return{c(){t=Y(n[4])},m(e,l){R(e,t,l)},p(e,l){l&16&&oe(t,e[4])},i:F,o:F,d(e){e&&U(t)}}}function xt(n){let t,e,l;return e=new ae({props:{icon:je}}),{c(){t=Y("Drop your images here! "),E(e.$$.fragment)},m(r,i){R(r,t,i),O(e,r,i),l=!0},p:F,i(r){l||(y(e.$$.fragment,r),l=!0)},o(r){C(e.$$.fragment,r),l=!1},d(r){r&&U(t),q(e,r)}}}function el(n){let t;return{c(){t=Y("Max 20 images per collection")},m(e,l){R(e,t,l)},p:F,i:F,o:F,d(e){e&&U(t)}}}function tl(n){let t;return{c(){t=Y("Create")},m(e,l){R(e,t,l)},d(e){e&&U(t)}}}function ll(n){let t,e;return t=new ae({props:{icon:It,class:"mr-3"}}),{c(){E(t.$$.fragment)},m(l,r){O(t,l,r),e=!0},p:F,i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){C(t.$$.fragment,l),e=!1},d(l){q(t,l)}}}function nl(n){let t,e;return t=new ae({props:{icon:Vt,class:"mr-3"}}),{c(){E(t.$$.fragment)},m(l,r){O(t,l,r),e=!0},p:F,i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){C(t.$$.fragment,l),e=!1},d(l){q(t,l)}}}function il(n){let t,e,l,r,i=(n[5]?n[5]:"Create collection")+"",s,o;const a=[nl,ll],c=[];function d(u,m){return u[4]?0:1}return t=d(n),e=c[t]=a[t](n),{c(){e.c(),l=A(),r=$("span"),s=Y(i),_(r,"class","text-sm leading-6")},m(u,m){c[t].m(u,m),R(u,l,m),R(u,r,m),g(r,s),o=!0},p(u,m){let h=t;t=d(u),t===h?c[t].p(u,m):(Q(),C(c[h],1,1,()=>{c[h]=null}),Z(),e=c[t],e?e.p(u,m):(e=c[t]=a[t](u),e.c()),y(e,1),e.m(l.parentNode,l)),(!o||m&32)&&i!==(i=(u[5]?u[5]:"Create collection")+"")&&oe(s,i)},i(u){o||(y(e),o=!0)},o(u){C(e),o=!1},d(u){c[t].d(u),u&&U(l),u&&U(r)}}}function rl(n){let t,e,l,r,i,s,o,a,c,d,u,m,h,f,b,z;l=new ke({props:{icon:ct,class:"ml-1",tooltip:"Back"}}),l.$on("click",n[14]);const v=[Zt,Qt],L=[];function B(j,k){return j[0].length>0?0:1}a=B(n),c=L[a]=v[a](n);const M=[Kt,Jt],V=[];function p(j,k){return j[6]?0:1}return m=p(n),h=V[m]=M[m](n),{c(){t=$("div"),e=$("div"),E(l.$$.fragment),r=A(),i=$("span"),i.textContent="Add a collection",s=A(),o=$("div"),c.c(),d=A(),u=$("div"),h.c(),_(i,"class","ml-1"),_(e,"class","flex items-center justify-start gap-2 py-1"),_(u,"class","transition-container"),_(o,"class","mt-2 flex flex-1 flex-col overflow-hidden"),_(t,"class","mt-2 flex h-full flex-col px-2 pb-4")},m(j,k){R(j,t,k),g(t,e),O(l,e,null),g(e,r),g(e,i),g(t,s),g(t,o),L[a].m(o,null),g(o,d),g(o,u),V[m].m(u,null),z=!0},p(j,[k]){let G=a;a=B(j),a===G?L[a].p(j,k):(Q(),C(L[G],1,1,()=>{L[G]=null}),Z(),c=L[a],c?c.p(j,k):(c=L[a]=v[a](j),c.c()),y(c,1),c.m(o,d));let N=m;m=p(j),m===N?V[m].p(j,k):(Q(),C(V[N],1,1,()=>{V[N]=null}),Z(),h=V[m],h?h.p(j,k):(h=V[m]=M[m](j),h.c()),y(h,1),h.m(u,null))},i(j){z||(y(l.$$.fragment,j),y(c),y(h),j&&ve(()=>{z&&(b&&b.end(1),f=Ue(t,se,{duration:300,delay:300}),f.start())}),z=!0)},o(j){C(l.$$.fragment,j),C(c),C(h),f&&f.invalidate(),j&&(b=Le(t,se,{duration:300})),z=!1},d(j){j&&U(t),q(l),L[a].d(),V[m].d(),j&&b&&b.end()}}}function ol(n,t,e){let l,r,i,s;K(n,ie,k=>e(13,r=k)),K(n,ut,k=>e(19,i=k)),K(n,ft,k=>e(20,s=k));const o=mt();let a=[],c=[],d,u="",m="",h="",f=0,b=!1;const z=yt(0);K(n,z,k=>e(7,l=k));const v=async()=>{Array.from(d.files).forEach(G=>{if(!(a.length>=20)){if(G.size>5*1024*1024){e(4,u="Max file size is 5MB. Try again.");return}e(0,a=[...a,G])}}),e(3,d.value="",d)},L=async()=>{if(a.length===0){e(4,u="Please select at least one image.");return}if(r.find(T=>T.name===h)){e(4,u="A collection with the same name already exists.");return}if(h.trim()===""){e(4,u="Please enter a name for the collection.");return}if(h.length>25){e(4,u="Collection name cannot be more than 25 characters.");return}if(r.length>=1){e(4,u="Max one collection per profile.");return}e(6,b=!0);const k={id:Ie(),name:h,images:[],thumbnail:""};ie.update(T=>[k,...T]);const G=we(Ve,`user_data/${s}/${i}/wallpaper/${k.id}`),N=async T=>{const x=Ie(),H=we(G,`${x}_${T.name}`);await kt(H,T,{contentType:T.type,cacheControl:"public,max-age=31536000"});const le=await vt(H);ie.update(pe=>pe.map(ne=>(ne.id===k.id&&(ne.images=[...ne.images,{url:le,name:T.name,fullPath:H.fullPath,id:`${x}_${T.name}`}]),ne))),e(2,f+=1)},P=a.map(T=>N(T));await Promise.all(P),o("close")},B=()=>o("close"),M=k=>{e(0,a=a.filter(G=>G!==k))};function V(k){re[k?"unshift":"push"](()=>{d=k,e(3,d)})}function p(k){re[k?"unshift":"push"](()=>{d=k,e(3,d)})}function j(k){h=k,e(1,h)}return n.$$.update=()=>{n.$$.dirty&8195&&(a.length===0?e(5,m="Please select at least one image."):r.find(k=>k.name===h)?e(5,m="A collection with the same name already exists."):h.trim()===""?e(5,m="Please enter a name for the collection."):e(5,m="")),n.$$.dirty&5&&te(z,l=a.length===0?0:f/a.length*100,l)},[a,h,f,d,u,m,b,l,o,c,z,v,L,r,B,M,V,p,j]}class sl extends Ce{constructor(t){super(),Be(this,t,ol,rl,be,{})}}function Qe(n,t,e){const l=n.slice();return l[21]=t[e],l}function Ze(n){let t,e,l,r,i=n[0].name+"",s,o,a,c,d,u,m,h,f,b,z,v,L,B,M;e=new ke({props:{icon:ct,class:"ml-1",tooltip:"Back"}}),e.$on("click",n[11]);const V=[cl,al],p=[];function j(P,T){return P[0].images.length>0?0:1}c=j(n),d=p[c]=V[c](n);let k=n[0].images.length>0&&Ke(n);function G(P){n[15](P)}let N={placeholder:"Collection name",class:"flex-1 py-2.5 text-sm",value:n[0].name,maxLength:25};return n[5]!==void 0&&(N.element=n[5]),z=new ht({props:N}),re.push(()=>ge(z,"element",G)),B=new bt({props:{$$slots:{default:[_l]},$$scope:{ctx:n}}}),B.$on("click",n[16]),{c(){t=$("div"),E(e.$$.fragment),l=A(),r=$("span"),s=Y(i),o=A(),a=$("div"),d.c(),u=A(),m=$("div"),h=$("div"),k&&k.c(),f=A(),b=$("div"),E(z.$$.fragment),L=A(),E(B.$$.fragment),_(r,"class","ml-1"),_(t,"class","flex items-center justify-start gap-2 py-1"),_(b,"class","mt-3 flex w-full justify-between gap-3"),_(m,"class","transition-container"),_(a,"class","mt-2 flex flex-1 flex-col overflow-hidden")},m(P,T){R(P,t,T),O(e,t,null),g(t,l),g(t,r),g(r,s),R(P,o,T),R(P,a,T),p[c].m(a,null),g(a,u),g(a,m),g(m,h),k&&k.m(h,null),g(h,f),g(h,b),O(z,b,null),g(b,L),O(B,b,null),M=!0},p(P,T){(!M||T&1)&&i!==(i=P[0].name+"")&&oe(s,i);let x=c;c=j(P),c===x?p[c].p(P,T):(Q(),C(p[x],1,1,()=>{p[x]=null}),Z(),d=p[c],d?d.p(P,T):(d=p[c]=V[c](P),d.c()),y(d,1),d.m(a,u)),P[0].images.length>0?k?(k.p(P,T),T&1&&y(k,1)):(k=Ke(P),k.c(),y(k,1),k.m(h,f)):k&&(Q(),C(k,1,1,()=>{k=null}),Z());const H={};T&1&&(H.value=P[0].name),!v&&T&32&&(v=!0,H.element=P[5],he(()=>v=!1)),z.$set(H);const le={};T&16777216&&(le.$$scope={dirty:T,ctx:P}),B.$set(le)},i(P){M||(y(e.$$.fragment,P),y(d),y(k),y(z.$$.fragment,P),y(B.$$.fragment,P),M=!0)},o(P){C(e.$$.fragment,P),C(d),C(k),C(z.$$.fragment,P),C(B.$$.fragment,P),M=!1},d(P){P&&U(t),q(e),P&&U(o),P&&U(a),p[c].d(),k&&k.d(),q(z),q(B)}}}function al(n){let t,e,l,r,i,s,o,a,c;return i=new ae({props:{icon:je,class:"text-3xl"}}),{c(){t=$("div"),e=$("input"),l=A(),r=$("span"),E(i.$$.fragment),s=Y(`

            Drop some images to get started!`),_(e,"type","file"),_(e,"id","file"),_(e,"class","absolute top-0 left-0 z-10 h-full w-full cursor-pointer opacity-0"),e.multiple=!0,e.disabled=n[8]&&n[8].length>=5,_(e,"accept","image/webp,image/jpeg,image/png"),_(r,"class","flex h-full w-full cursor-not-allowed flex-col items-center justify-center gap-5"),X(r,"z-10",n[7].length>=20),_(t,"class","curved border-light relative flex w-full flex-1 shrink-0 items-center justify-center transition hover:bg-black hover:bg-opacity-10"),X(t,"mt-5",n[8]&&n[8].length>0),X(t,"opactity-50",n[8]&&n[8].length>=5)},m(d,u){R(d,t,u),g(t,e),n[13](e),g(t,l),g(t,r),O(i,r,null),g(r,s),o=!0,a||(c=ue(e,"change",n[9]),a=!0)},p:F,i(d){o||(y(i.$$.fragment,d),o=!0)},o(d){C(i.$$.fragment,d),o=!1},d(d){d&&U(t),n[13](null),q(i),a=!1,c()}}}function cl(n){let t,e=[],l=new Map,r,i=n[0].images;const s=o=>o[21].id;for(let o=0;o<i.length;o+=1){let a=Qe(n,i,o),c=s(a);l.set(c,e[o]=Je(c,a))}return{c(){t=$("div");for(let o=0;o<e.length;o+=1)e[o].c();_(t,"class","flex flex-1 flex-row flex-wrap items-start justify-start gap-3 overflow-auto px-0.5")},m(o,a){R(o,t,a);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(t,null);r=!0},p(o,a){if(a&1){i=o[0].images,Q();for(let c=0;c<e.length;c+=1)e[c].r();e=ye(e,a,s,1,o,i,l,t,dt,Je,null,Qe);for(let c=0;c<e.length;c+=1)e[c].a();Z()}},i(o){if(!r){for(let a=0;a<i.length;a+=1)y(e[a]);r=!0}},o(o){for(let a=0;a<e.length;a+=1)C(e[a]);r=!1},d(o){o&&U(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function Je(n,t){let e,l,r,i,s,o,a=t[21].name+"",c,d,u,m,h,f=F,b;function z(){return t[12](t[21])}return u=new ke({props:{class:"text-sm",icon:t[0].images.length!==1?Re:Ne,tooltip:t[0].images.length===1?"You need at least one image in a collection.":"Delete image"}}),u.$on("click",z),{key:n,first:null,c(){e=$("div"),l=$("img"),i=A(),s=$("div"),o=$("span"),c=Y(a),d=A(),E(u.$$.fragment),m=A(),_e(l.src,r=t[21].url)||_(l,"src",r),_(l,"class","h-24 w-full rounded object-cover"),_(l,"alt","Wallpaper"),_(l,"loading","lazy"),_(o,"class","fade-text flex-1 shrink-0 overflow-hidden whitespace-nowrap text-sm"),_(s,"class","mt-1 flex items-center justify-between gap-2"),_(e,"class","h-max w-44"),this.first=e},m(v,L){R(v,e,L),g(e,l),g(e,i),g(e,s),g(s,o),g(o,c),g(s,d),O(u,s,null),g(e,m),b=!0},p(v,L){t=v,(!b||L&1&&!_e(l.src,r=t[21].url))&&_(l,"src",r),(!b||L&1)&&a!==(a=t[21].name+"")&&oe(c,a);const B={};L&1&&(B.icon=t[0].images.length!==1?Re:Ne),L&1&&(B.tooltip=t[0].images.length===1?"You need at least one image in a collection.":"Delete image"),u.$set(B)},r(){h=e.getBoundingClientRect()},f(){_t(e),f()},a(){f(),f=pt(e,h,gt,{duration:250})},i(v){b||(y(u.$$.fragment,v),b=!0)},o(v){C(u.$$.fragment,v),b=!1},d(v){v&&U(e),q(u)}}}function Ke(n){let t,e,l,r,i,s,o,a,c,d;const u=[dl,ml,fl,ul],m=[];function h(f,b){return f[4]?0:f[0].images.length>=20?1:f[3]?3:2}return s=h(n),o=m[s]=u[s](n),{c(){t=$("div"),e=$("input"),r=A(),i=$("span"),o.c(),_(e,"type","file"),_(e,"id","file"),_(e,"class","absolute top-0 left-0 z-10 h-full w-full cursor-pointer opacity-0"),e.multiple=!0,e.disabled=l=n[0].images.length>=20||n[4],_(e,"accept","image/webp,image/jpeg,image/png"),_(i,"class","flex h-full w-full cursor-not-allowed items-center justify-center gap-3 text-sm"),X(i,"z-10",n[7].length>=20),_(t,"class","curved border-light relative mt-4 flex h-12 w-full shrink-0 items-center justify-center transition hover:bg-black hover:bg-opacity-10"),X(t,"mt-5",n[8]&&n[8].length>0),X(t,"opactity-50",n[8]&&n[8].length>=5)},m(f,b){R(f,t,b),g(t,e),n[14](e),g(t,r),g(t,i),m[s].m(i,null),a=!0,c||(d=ue(e,"change",n[9]),c=!0)},p(f,b){(!a||b&17&&l!==(l=f[0].images.length>=20||f[4]))&&(e.disabled=l);let z=s;s=h(f),s===z?m[s].p(f,b):(Q(),C(m[z],1,1,()=>{m[z]=null}),Z(),o=m[s],o?o.p(f,b):(o=m[s]=u[s](f),o.c()),y(o,1),o.m(i,null))},i(f){a||(y(o),a=!0)},o(f){C(o),a=!1},d(f){f&&U(t),n[14](null),m[s].d(),c=!1,d()}}}function ul(n){let t;return{c(){t=Y(n[3])},m(e,l){R(e,t,l)},p(e,l){l&8&&oe(t,e[3])},i:F,o:F,d(e){e&&U(t)}}}function fl(n){let t,e,l;return e=new ae({props:{icon:je}}),{c(){t=Y("Add more images here! "),E(e.$$.fragment)},m(r,i){R(r,t,i),O(e,r,i),l=!0},p:F,i(r){l||(y(e.$$.fragment,r),l=!0)},o(r){C(e.$$.fragment,r),l=!1},d(r){r&&U(t),q(e,r)}}}function ml(n){let t;return{c(){t=Y("Max 20 images per collection")},m(e,l){R(e,t,l)},p:F,i:F,o:F,d(e){e&&U(t)}}}function dl(n){let t,e,l;return e=new ae({props:{icon:wt,class:"animate-spin"}}),{c(){t=Y("Uploading "),E(e.$$.fragment)},m(r,i){R(r,t,i),O(e,r,i),l=!0},p:F,i(r){l||(y(e.$$.fragment,r),l=!0)},o(r){C(e.$$.fragment,r),l=!1},d(r){r&&U(t),q(e,r)}}}function _l(n){let t;return{c(){t=Y("Update name")},m(e,l){R(e,t,l)},d(e){e&&U(t)}}}function pl(n){let t,e,l,r,i=n[0]&&Ze(n);return{c(){t=$("div"),i&&i.c(),_(t,"class","mt-2 flex h-full flex-col px-2 pb-4")},m(s,o){R(s,t,o),i&&i.m(t,null),r=!0},p(s,[o]){s[0]?i?(i.p(s,o),o&1&&y(i,1)):(i=Ze(s),i.c(),y(i,1),i.m(t,null)):i&&(Q(),C(i,1,1,()=>{i=null}),Z())},i(s){r||(y(i),s&&ve(()=>{r&&(l&&l.end(1),e=Ue(t,se,{duration:300,delay:300}),e.start())}),r=!0)},o(s){C(i),e&&e.invalidate(),s&&(l=Le(t,se,{duration:300})),r=!1},d(s){s&&U(t),i&&i.d(),s&&l&&l.end()}}}function gl(n,t,e){let l,r,i,s;K(n,ut,p=>e(18,r=p)),K(n,ft,p=>e(19,i=p)),K(n,ie,p=>e(1,s=p));const o=mt();let{collectionId:a}=t,c=[],d=[],u,m="",h=!1,f;yt(0);const b=async()=>{const p=Array.from(u.files);e(4,h=!0);const j=p.map(async k=>{if(!l)return;if(l.images.length>=20){e(3,m="Max 20 images per collection.");return}if(k.size>25*1024*1024){e(3,m="Max file size is 25MB. Try again.");return}const G=Ie(),N=we(Ve,`user_data/${i}/${r}/wallpaper/${l.id}/${G}_${k.name}`),P=await kt(N,k,{contentType:k.type,cacheControl:"public,max-age=31536000"}),T=await vt(P.ref);ie.update(x=>x.map(H=>(H.id===a&&(H.images=[{url:T,name:k.name,fullPath:N.fullPath,id:`${G}_${k.name}`},...H.images]),H)))});await Promise.all(j),e(2,u.value="",u),e(4,h=!1)},z=()=>o("close"),v=p=>{if((l==null?void 0:l.images.length)===1)return;const j=p.fullPath;ie.update(G=>G.map(N=>(N.id===(l==null?void 0:l.id)&&(N.images=N.images.filter(P=>P.id!==p.id)),N)));const k=we(Ve,j);Rt(k)};function L(p){re[p?"unshift":"push"](()=>{u=p,e(2,u)})}function B(p){re[p?"unshift":"push"](()=>{u=p,e(2,u)})}function M(p){f=p,e(5,f)}const V=()=>{const p=f.value;s.find(j=>j.name===p)||!p||p.length>25||ie.update(j=>j.map(k=>(k.id===(l==null?void 0:l.id)&&(k.name=p),k)))};return n.$$set=p=>{"collectionId"in p&&e(10,a=p.collectionId)},n.$$.update=()=>{n.$$.dirty&1026&&e(0,l=s.find(p=>p.id===a)),n.$$.dirty&1026&&console.log(a,s),n.$$.dirty&1&&(l==null||l.name)},[l,s,u,m,h,f,o,c,d,b,a,z,v,L,B,M,V]}class hl extends Ce{constructor(t){super(),Be(this,t,gl,pl,be,{collectionId:10})}}function Xe(n,t,e){const l=n.slice();return l[31]=t[e],l}function xe(n,t,e){const l=n.slice();return l[31]=t[e],l}function et(n,t,e){const l=n.slice();return l[36]=t[e],l}function bl(n){let t;return{c(){t=$("div"),_(t,"class","curved-half cover-img border-bottom-light h-40 w-full overflow-hidden transition-all duration-300 ease-in-out svelte-gn2ggq"),_(t,"style","background-color: linear-gradient(to bottom, transparent -5%, var(--text-inverse) 150%)); background-color: var(--text-inverse);")},m(e,l){R(e,t,l)},p:F,d(e){e&&U(t)}}}function kl(n){let t;function e(i,s){return i[4]?wl:vl}let l=e(n),r=l(n);return{c(){r.c(),t=fe()},m(i,s){r.m(i,s),R(i,t,s)},p(i,s){l===(l=e(i))&&r?r.p(i,s):(r.d(1),r=l(i),r&&(r.c(),r.m(t.parentNode,t)))},d(i){r.d(i),i&&U(t)}}}function vl(n){let t,e;return{c(){t=$("div"),_(t,"class","curved-half cover-img h-40 w-full overflow-hidden transition-all duration-300 ease-in-out svelte-gn2ggq"),_(t,"style",e=`background-image: linear-gradient(to bottom, transparent -5%, var(--text-inverse) 150%), url(${n[8]})`)},m(l,r){R(l,t,r)},p(l,r){r[0]&256&&e!==(e=`background-image: linear-gradient(to bottom, transparent -5%, var(--text-inverse) 150%), url(${l[8]})`)&&_(t,"style",e)},d(l){l&&U(t)}}}function wl(n){let t=n[7],e,l=tt(n);return{c(){l.c(),e=fe()},m(r,i){l.m(r,i),R(r,e,i)},p(r,i){i[0]&128&&be(t,t=r[7])?(l.d(1),l=tt(r),l.c(),l.m(e.parentNode,e)):l.p(r,i)},d(r){r&&U(e),l.d(r)}}}function tt(n){let t,e,l,r,i;return{c(){t=$("video"),e=$("source"),r=A(),i=$("div"),_e(e.src,l=n[7])||_(e,"src",l),_(e,"type","video/mp4"),t.autoplay=!0,t.loop=!0,t.muted=!0,_(t,"class","curved-half h-40 w-full object-cover"),_(i,"class","video-overlay svelte-gn2ggq")},m(s,o){R(s,t,o),g(t,e),R(s,r,o),R(s,i,o)},p(s,o){o[0]&128&&!_e(e.src,l=s[7])&&_(e,"src",l)},d(s){s&&U(t),s&&U(r),s&&U(i)}}}function yl(n){let t;return{c(){t=Y("Wallpaper hidden")},m(e,l){R(e,t,l)},p:F,d(e){e&&U(t)}}}function $l(n){let t;function e(i,s){return i[4]?Bl:Cl}let l=e(n),r=l(n);return{c(){r.c(),t=fe()},m(i,s){r.m(i,s),R(i,t,s)},p(i,s){l===(l=e(i))&&r?r.p(i,s):(r.d(1),r=l(i),r&&(r.c(),r.m(t.parentNode,t)))},d(i){r.d(i),i&&U(t)}}}function Cl(n){let t=n[3].currentCategory+"",e;return{c(){e=Y(t)},m(l,r){R(l,e,r)},p(l,r){r[0]&8&&t!==(t=l[3].currentCategory+"")&&oe(e,t)},d(l){l&&U(e)}}}function Bl(n){let t;return{c(){t=Y("Videos")},m(e,l){R(e,t,l)},p:F,d(e){e&&U(t)}}}function jl(n){let t,e;return t=new Pe({props:{tooltip:"Show wallpaper",class:"text-[1.5rem]",checked:n[3].hideBg}}),t.$on("change",n[17]),{c(){E(t.$$.fragment)},m(l,r){O(t,l,r),e=!0},p(l,r){const i={};r[0]&8&&(i.checked=l[3].hideBg),t.$set(i)},i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){C(t.$$.fragment,l),e=!1},d(l){q(t,l)}}}function zl(n){let t,e;return t=new Ht({props:{size:"3xl",condition:n[9],icon:[wt,Nt],animate:["spin",""]}}),t.$on("click",n[16]),t.$on("pointerdown",Pl),{c(){E(t.$$.fragment)},m(l,r){O(t,l,r),e=!0},p(l,r){const i={};r[0]&512&&(i.condition=l[9]),t.$set(i)},i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){C(t.$$.fragment,l),e=!1},d(l){q(t,l)}}}function lt(n){let t,e,l,r,i;const s=[Vl,Il,Dl],o=[];function a(c,d){return c[0]?0:c[1]?1:2}return e=a(n),l=o[e]=s[e](n),{c(){t=$("div"),l.c(),_(t,"class","h-[24.75rem] w-full")},m(c,d){R(c,t,d),o[e].m(t,null),i=!0},p(c,d){n=c;let u=e;e=a(n),e===u?o[e].p(n,d):(Q(),C(o[u],1,1,()=>{o[u]=null}),Z(),l=o[e],l?l.p(n,d):(l=o[e]=s[e](n),l.c()),y(l,1),l.m(t,null))},i(c){i||(y(l),c&&ve(()=>{i&&(r||(r=$e(t,Se,{duration:400,easing:We},!0)),r.run(1))}),i=!0)},o(c){C(l),c&&(r||(r=$e(t,Se,{duration:400,easing:We},!1)),r.run(0)),i=!1},d(c){c&&U(t),o[e].d(),c&&r&&r.end()}}}function Dl(n){let t,e,l,r,i,s=[],o=new Map,a,c=[],d=new Map,u,m,h,f,b,z,v,L,B,M,V,p,j,k;const G=[Ul,Rl],N=[];function P(w,I){return w[6].length===0?0:1}l=P(n),r=N[l]=G[l](n);let T=n[5];const x=w=>w[31];for(let w=0;w<T.length;w+=1){let I=xe(n,T,w),W=x(I);o.set(W,s[w]=rt(W,I))}let H=n[5].sort(n[26]);const le=w=>w[31];for(let w=0;w<H.length;w+=1){let I=Xe(n,H,w),W=le(I);d.set(W,c[w]=st(W,I))}function pe(w){n[28](w)}let ne={options:[{value:"never",label:"Never"},{value:"reload",label:"On Launch"},{value:"five",label:"Every 5 minutes"},{value:"hourly",label:"Every 1 hour"},{value:"daily",label:"Every day"}],class:"text-xs",optionClass:"text-xs"};n[2].state!==void 0&&(ne.value=n[2].state),b=new Wt({props:ne}),re.push(()=>ge(b,"value",pe)),b.$on("change",n[15]);function D(w){n[29](w)}let J={class:"mr-2 text-lg"};return n[3].hideBg!==void 0&&(J.checked=n[3].hideBg),M=new Pe({props:J}),re.push(()=>ge(M,"checked",D)),{c(){t=$("div"),e=$("div"),r.c(),i=A();for(let w=0;w<s.length;w+=1)s[w].c();a=A();for(let w=0;w<c.length;w+=1)c[w].c();u=A(),m=$("div"),h=$("span"),h.textContent="Auto change",f=A(),E(b.$$.fragment),v=A(),L=$("span"),L.textContent="Hide",B=A(),E(M.$$.fragment),_(e,"class","my-2 mt-2 flex w-full flex-1 flex-col gap-2 overflow-overlay scrollbar-none px-2"),_(h,"class","text-sm"),_(L,"class","ml-auto text-sm"),_(m,"class","mb-2.5 mt-1 ml-1 flex items-center gap-4 px-2"),_(t,"class","flex h-full flex-col")},m(w,I){R(w,t,I),g(t,e),N[l].m(e,null),g(e,i);for(let W=0;W<s.length;W+=1)s[W]&&s[W].m(e,null);g(e,a);for(let W=0;W<c.length;W+=1)c[W]&&c[W].m(e,null);g(t,u),g(t,m),g(m,h),g(m,f),O(b,m,null),g(m,v),g(m,L),g(m,B),O(M,m,null),k=!0},p(w,I){let W=l;l=P(w),l===W?N[l].p(w,I):(Q(),C(N[W],1,1,()=>{N[W]=null}),Z(),r=N[l],r?r.p(w,I):(r=N[l]=G[l](w),r.c()),y(r,1),r.m(e,i)),I[0]&16440&&(T=w[5],Q(),s=ye(s,I,x,1,w,T,o,e,Fe,rt,a,xe),Z()),I[0]&4152&&(H=w[5].sort(w[26]),Q(),c=ye(c,I,le,1,w,H,d,e,Fe,st,null,Xe),Z());const me={};!z&&I[0]&4&&(z=!0,me.value=w[2].state,he(()=>z=!1)),b.$set(me);const S={};!V&&I[0]&8&&(V=!0,S.checked=w[3].hideBg,he(()=>V=!1)),M.$set(S)},i(w){if(!k){y(r);for(let I=0;I<T.length;I+=1)y(s[I]);for(let I=0;I<H.length;I+=1)y(c[I]);y(b.$$.fragment,w),y(M.$$.fragment,w),w&&ve(()=>{k&&(j&&j.end(1),p=Ue(t,se,{duration:300,delay:300}),p.start())}),k=!0}},o(w){C(r);for(let I=0;I<s.length;I+=1)C(s[I]);for(let I=0;I<c.length;I+=1)C(c[I]);C(b.$$.fragment,w),C(M.$$.fragment,w),p&&p.invalidate(),w&&(j=Le(t,se,{duration:300})),k=!1},d(w){w&&U(t),N[l].d();for(let I=0;I<s.length;I+=1)s[I].d();for(let I=0;I<c.length;I+=1)c[I].d();q(b),q(M),w&&j&&j.end()}}}function Il(n){let t,e;return t=new hl({props:{collectionId:n[1]}}),t.$on("close",n[19]),{c(){E(t.$$.fragment)},m(l,r){O(t,l,r),e=!0},p(l,r){const i={};r[0]&2&&(i.collectionId=l[1]),t.$set(i)},i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){C(t.$$.fragment,l),e=!1},d(l){q(t,l)}}}function Vl(n){let t,e;return t=new sl({}),t.$on("close",n[18]),{c(){E(t.$$.fragment)},m(l,r){O(t,l,r),e=!0},p:F,i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){C(t.$$.fragment,l),e=!1},d(l){q(t,l)}}}function Rl(n){let t,e,l,r,i,s,o,a,c,d,u,m,h;function f(B){n[21](B)}let b={class:"mr-1 ml-2",size:"lg",tooltip:n[3].enableCustomCollections?"Wallpaper will be selected from all selected collections":"Wallpaper will be selected only from your collections."};n[3].enableCustomCollections!==void 0&&(b.checked=n[3].enableCustomCollections),o=new Pe({props:b}),re.push(()=>ge(o,"checked",f)),o.$on("change",n[22]);let z=n[6].filter(at),v=[];for(let B=0;B<z.length;B+=1)v[B]=nt(et(n,z,B));const L=B=>C(v[B],1,1,()=>{v[B]=null});return{c(){t=$("div"),e=$("div"),l=$("span"),l.textContent="My Collections",r=A(),i=$("span"),i.textContent="Only my collections",s=A(),E(o.$$.fragment),c=A(),d=$("div");for(let B=0;B<v.length;B+=1)v[B].c();u=A(),m=$("span"),m.textContent="Dashy Collections",_(l,"class","font-regular my-0.5 ml-1 font-medium"),_(i,"class","ml-auto text-sm"),_(e,"class","mb-2.5 flex w-full items-center justify-start"),_(d,"class","flex w-full flex-col gap-2"),_(m,"class","font-regular my-0.5 mt-3 ml-1 font-medium"),_(t,"class","flex w-full flex-col items-start justify-start")},m(B,M){R(B,t,M),g(t,e),g(e,l),g(e,r),g(e,i),g(e,s),O(o,e,null),g(t,c),g(t,d);for(let V=0;V<v.length;V+=1)v[V]&&v[V].m(d,null);g(t,u),g(t,m),h=!0},p(B,M){const V={};if(M[0]&8&&(V.tooltip=B[3].enableCustomCollections?"Wallpaper will be selected from all selected collections":"Wallpaper will be selected only from your collections."),!a&&M[0]&8&&(a=!0,V.checked=B[3].enableCustomCollections,he(()=>a=!1)),o.$set(V),M[0]&8266){z=B[6].filter(at);let p;for(p=0;p<z.length;p+=1){const j=et(B,z,p);v[p]?(v[p].p(j,M),y(v[p],1)):(v[p]=nt(j),v[p].c(),y(v[p],1),v[p].m(d,null))}for(Q(),p=z.length;p<v.length;p+=1)L(p);Z()}},i(B){if(!h){y(o.$$.fragment,B);for(let M=0;M<z.length;M+=1)y(v[M]);h=!0}},o(B){C(o.$$.fragment,B),v=v.filter(Boolean);for(let M=0;M<v.length;M+=1)C(v[M]);h=!1},d(B){B&&U(t),q(o),St(v,B)}}}function Ul(n){let t,e,l,r,i;return r=new ke({props:{icon:Ft,class:"mr-1 text-xl",tooltip:"Add your own collection"}}),r.$on("click",n[20]),{c(){t=$("div"),e=$("span"),e.textContent="Collections",l=A(),E(r.$$.fragment),_(e,"class","font-regular my-0.5 ml-1 font-medium"),_(t,"class","flex w-full items-center justify-between")},m(s,o){R(s,t,o),g(t,e),g(t,l),O(r,t,null),i=!0},p:F,i(s){i||(y(r.$$.fragment,s),i=!0)},o(s){C(r.$$.fragment,s),i=!1},d(s){s&&U(t),q(r)}}}function nt(n){var s;let t,e;function l(){return n[23](n[36])}function r(){return n[24](n[36])}function i(){return n[25](n[36])}return t=new Me({props:{src:n[36].images[0].url,name:n[36].name,selected:!((s=n[3].customCategories)!=null&&s.includes(n[36].name)),showOptions:!0}}),t.$on("click",l),t.$on("delete",r),t.$on("edit",i),{c(){E(t.$$.fragment)},m(o,a){O(t,o,a),e=!0},p(o,a){var d;n=o;const c={};a[0]&64&&(c.src=n[36].images[0].url),a[0]&64&&(c.name=n[36].name),a[0]&72&&(c.selected=!((d=n[3].customCategories)!=null&&d.includes(n[36].name))),t.$set(c)},i(o){e||(y(t.$$.fragment,o),e=!0)},o(o){C(t.$$.fragment,o),e=!1},d(o){q(t,o)}}}function it(n){let t,e;return t=new Me({props:{src:n[31].thumbnail,name:n[31].name,isVideo:!0,selected:n[4],disabled:n[3].enableCustomCollections}}),t.$on("click",n[14]),{c(){E(t.$$.fragment)},m(l,r){O(t,l,r),e=!0},p(l,r){const i={};r[0]&32&&(i.src=l[31].thumbnail),r[0]&32&&(i.name=l[31].name),r[0]&16&&(i.selected=l[4]),r[0]&8&&(i.disabled=l[3].enableCustomCollections),t.$set(i)},i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){C(t.$$.fragment,l),e=!1},d(l){q(t,l)}}}function rt(n,t){let e,l,r,i=t[31].name==="Videos"&&it(t);return{key:n,first:null,c(){e=fe(),i&&i.c(),l=fe(),this.first=e},m(s,o){R(s,e,o),i&&i.m(s,o),R(s,l,o),r=!0},p(s,o){t=s,t[31].name==="Videos"?i?(i.p(t,o),o[0]&32&&y(i,1)):(i=it(t),i.c(),y(i,1),i.m(l.parentNode,l)):i&&(Q(),C(i,1,1,()=>{i=null}),Z())},i(s){r||(y(i),r=!0)},o(s){C(i),r=!1},d(s){s&&U(e),i&&i.d(s),s&&U(l)}}}function ot(n){let t,e;function l(){return n[27](n[31])}return t=new Me({props:{src:n[31].thumbnail,name:n[31].name,selected:!n[3].categories.includes(n[31].name),disabled:n[4]||n[3].enableCustomCollections}}),t.$on("click",l),{c(){E(t.$$.fragment)},m(r,i){O(t,r,i),e=!0},p(r,i){n=r;const s={};i[0]&32&&(s.src=n[31].thumbnail),i[0]&32&&(s.name=n[31].name),i[0]&40&&(s.selected=!n[3].categories.includes(n[31].name)),i[0]&24&&(s.disabled=n[4]||n[3].enableCustomCollections),t.$set(s)},i(r){e||(y(t.$$.fragment,r),e=!0)},o(r){C(t.$$.fragment,r),e=!1},d(r){q(t,r)}}}function st(n,t){let e,l,r,i=t[31].name!=="Videos"&&ot(t);return{key:n,first:null,c(){e=fe(),i&&i.c(),l=fe(),this.first=e},m(s,o){R(s,e,o),i&&i.m(s,o),R(s,l,o),r=!0},p(s,o){t=s,t[31].name!=="Videos"?i?(i.p(t,o),o[0]&32&&y(i,1)):(i=ot(t),i.c(),y(i,1),i.m(l.parentNode,l)):i&&(Q(),C(i,1,1,()=>{i=null}),Z())},i(s){r||(y(i),r=!0)},o(s){C(i),r=!1},d(s){s&&U(e),i&&i.d(s),s&&U(l)}}}function Ll(n){let t,e,l,r,i,s,o,a,c,d,u;function m(p,j){return p[3].hideBg?bl:kl}let h=m(n),f=h(n);function b(p,j){return p[3].hideBg?yl:$l}let z=b(n),v=z(n);const L=[zl,jl],B=[];function M(p,j){return p[3].hideBg?1:0}a=M(n),c=B[a]=L[a](n);let V=n[10]&&lt(n);return{c(){t=$("div"),e=$("div"),f.c(),l=A(),r=$("div"),i=$("span"),v.c(),s=A(),o=$("div"),c.c(),d=A(),V&&V.c(),_(i,"class","text-xl font-semibold"),_(r,"class","absolute bottom-3 left-4 z-10 flex flex-col"),_(o,"class","absolute bottom-4 right-6 z-[10] flex items-center justify-center"),_(e,"class","relative"),_(t,"class","flex h-max w-[24rem] flex-col")},m(p,j){R(p,t,j),g(t,e),f.m(e,null),g(e,l),g(e,r),g(r,i),v.m(i,null),g(e,s),g(e,o),B[a].m(o,null),g(t,d),V&&V.m(t,null),u=!0},p(p,j){h===(h=m(p))&&f?f.p(p,j):(f.d(1),f=h(p),f&&(f.c(),f.m(e,l))),z===(z=b(p))&&v?v.p(p,j):(v.d(1),v=z(p),v&&(v.c(),v.m(i,null)));let k=a;a=M(p),a===k?B[a].p(p,j):(Q(),C(B[k],1,1,()=>{B[k]=null}),Z(),c=B[a],c?c.p(p,j):(c=B[a]=L[a](p),c.c()),y(c,1),c.m(o,null)),p[10]?V?(V.p(p,j),j[0]&1024&&y(V,1)):(V=lt(p),V.c(),y(V,1),V.m(t,null)):V&&(Q(),C(V,1,1,()=>{V=null}),Z())},i(p){u||(y(c),y(V),u=!0)},o(p){C(c),C(V),u=!1},d(p){p&&U(t),f.d(),v.d(),B[a].d(),V&&V.d()}}}const Pl=n=>n.stopPropagation(),at=n=>n.images.length>0;function Ml(n,t,e){let l,r,i,s,o,a,c,d,u,m;K(n,ce,D=>e(2,l=D)),K(n,Ut,D=>e(30,r=D)),K(n,ee,D=>e(3,i=D)),K(n,De,D=>e(4,s=D)),K(n,Lt,D=>e(5,o=D)),K(n,ie,D=>e(6,a=D)),K(n,Pt,D=>e(7,c=D)),K(n,Mt,D=>e(8,d=D)),K(n,At,D=>e(9,u=D));const h=Tt("appView");K(n,h,D=>e(10,m=D));let f=!1,b=!1;const z=D=>{const J=o.map(S=>S.name).filter(S=>S!=="Videos"),w=a.map(S=>S.name);i.categories.includes(D)?te(ee,i.categories=i.categories.filter(S=>S!==D),i):te(ee,i.categories=[...i.categories,D],i);const I=J.filter(S=>!i.categories.includes(S)),W=w.filter(S=>!i.customCategories.includes(S));I.length===0&&W.length===0&&te(ee,i.categories=[],i);const me=i.currentCategory;!I.includes(me)&&(i==null?void 0:i.enableCustomCollections)===!1&&de()},v=D=>{const J=a.map(S=>S.name),w=o.map(S=>S.name).filter(S=>S!=="Videos");i.customCategories||te(ee,i.customCategories=[],i),i!=null&&i.customCategories.includes(D)?te(ee,i.customCategories=i.customCategories.filter(S=>S!==D),i):te(ee,i.customCategories=[...i.customCategories,D],i);const I=J.filter(S=>!i.customCategories.includes(S)),W=w.filter(S=>!i.categories.includes(S));(I.length===0&&W.length===0||I.length===0&&i.enableCustomCollections===!0)&&te(ee,i.customCategories=[],i);const me=i.currentCategory;!I.includes(me)&&(i==null?void 0:i.enableCustomCollections)===!0&&de()},L=()=>{te(De,s=!s,s),s?Et(i.currentImageURL,()=>{}):Ot(r.currentVideoURL,()=>{})},B=D=>{const J=D.detail;if(J==="never"&&te(ce,l.interval="never",l),J==="reload"&&te(ce,l.interval="reload",l),J==="five"&&ce.update(w=>(w.interval=5*6e4,w.nextUpdate=new Date().getTime()+w.interval,w)),J==="hourly"&&ce.update(w=>(w.interval=60*6e4,w.nextUpdate=new Date().getTime()+w.interval,w)),J==="daily"){const w=new Date,I=new Date(w.getFullYear(),w.getMonth(),w.getDate()+1,0,0,0);ce.update(W=>(W.interval=24*60*6e4,W.nextUpdate=I.getTime(),W))}},M=()=>de(),V=()=>ee.update(D=>(D.hideBg=!D.hideBg,D)),p=()=>e(0,f=!1),j=()=>e(1,b=!1),k=()=>e(0,f=!0);function G(D){n.$$.not_equal(i.enableCustomCollections,D)&&(i.enableCustomCollections=D,ee.set(i))}const N=()=>{s&&De.set(!1),de()},P=D=>v(D.name),T=D=>{ie.update(J=>(J.splice(J.findIndex(w=>w.name===D.name),1),J)),i.currentCategory===D.name&&de(),a.length===0&&(te(ee,i.enableCustomCollections=!1,i),de())},x=D=>e(1,b=D.id),H=(D,J)=>qt(D,J,"name",!0),le=D=>z(D.name);function pe(D){n.$$.not_equal(l.state,D)&&(l.state=D,ce.set(l))}function ne(D){n.$$.not_equal(i.hideBg,D)&&(i.hideBg=D,ee.set(i))}return[f,b,l,i,s,o,a,c,d,u,m,h,z,v,L,B,M,V,p,j,k,G,N,P,T,x,H,le,pe,ne]}class ql extends Ce{constructor(t){super(),Be(this,t,Ml,Ll,be,{},null,[-1,-1])}}export{ql as default};
