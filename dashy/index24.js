import{S as Te,i as De,s as Se,c as N,m as A,t as $,a as w,d as Y,E as ye,b as se,p as ee,G as Ke,q as h,V as M,r as g,u as I,v as G,x as K,D as x,aI as ae,a5 as re,K as W,L as _,a8 as he,a9 as Ie,Z as ne,as as Ze,ce as X,aa as Q,aQ as ue,ab as xe,I as _e,cQ as Je,n as F,y as $e,_ as oe,B as ge,R as le,ad as Xe,ac as et,aE as Ue,a1 as we,aP as tt,a2 as nt,aq as ke,bf as lt,e7 as Me,au as rt,dO as fe,cF as st,dQ as Re,a3 as Pe,aD as me,cB as Ve,ak as ot,O as it,P as at,W as ut,dR as ft,U as ct,ar as pt,af as dt,ag as mt,du as Ce,cA as _t,e8 as bt,e9 as vt,br as gt,ah as kt,av as ht,e as $t,ay as wt,aB as yt}from"./overlayscrollbars.js";import{t as Tt}from"./index33.js";import{C as Dt}from"./Card.js";function St(l){let t,n=l[0].name+"",e,s,r,o,u=ee(l[0].startTime).format("MMM DD, YYYY")+"",f,i,c;return{c(){t=h("span"),e=W(n),r=M(),o=h("span"),f=W(u),g(t,"class","max-line-1 max-w-[10rem] text-start"),g(o,"class","text-sm")},m(d,v){I(d,t,v),_(t,e),I(d,r,v),I(d,o,v),_(o,f),i||(c=he(s=Ie.call(null,t,l[0].name)),i=!0)},p(d,v){v&1&&n!==(n=d[0].name+"")&&ne(e,n),s&&Ze(s.update)&&v&1&&s.update.call(null,d[0].name),v&1&&u!==(u=ee(d[0].startTime).format("MMM DD, YYYY")+"")&&ne(f,u)},d(d){d&&x(t),d&&x(r),d&&x(o),i=!1,c()}}}function It(l){let t,n,e;return{c(){t=h("input"),g(t,"class","max-line-1 max-w-[7.5rem] border-b-[1px] border-l-0 border-r-0 border-t-0 border-[var(--border-color)] bg-transparent text-start text-[var(--text)] outline-0 focus:border-[var(--text)] svelte-91axx7")},m(s,r){I(s,t,r),X(t,l[1]),n||(e=[Q(t,"input",l[10]),Q(t,"click",ue(l[8])),Q(t,"pointerdown",ue(l[9]))],n=!0)},p(s,r){r&2&&t.value!==s[1]&&X(t,s[1])},d(s){s&&x(t),n=!1,xe(e)}}}function Le(l){let t,n,e=ee(l[0].startTime).format("hh:mm A")+"",s,r,o;return{c(){t=h("div"),n=h("span"),s=W(e),g(n,"class","text-sm"),g(t,"class","w-18 flex flex-col items-center gap-1")},m(u,f){I(u,t,f),_(t,n),_(n,s),r||(o=he(Ie.call(null,t,"Time")),r=!0)},p(u,f){f&1&&e!==(e=ee(u[0].startTime).format("hh:mm A")+"")&&ne(s,e)},d(u){u&&x(t),r=!1,o()}}}function xt(l){let t,n,e,s,r,o,u,f;return n=new _e({props:{icon:Je,class:"mr-1"}}),{c(){t=h("div"),N(n.$$.fragment),e=M(),s=h("span"),s.textContent=`${l[6]}`,g(t,"class","flex items-center justify-end gap-1.5 text-right")},m(i,c){I(i,t,c),A(n,t,null),_(t,e),_(t,s),o=!0,u||(f=he(Ie.call(null,t,"Duration")),u=!0)},p:F,i(i){o||($(n.$$.fragment,i),i&&$e(()=>{o&&(r||(r=oe(t,ge,{duration:200},!0)),r.run(1))}),o=!0)},o(i){w(n.$$.fragment,i),i&&(r||(r=oe(t,ge,{duration:200},!1)),r.run(0)),o=!1},d(i){i&&x(t),Y(n),i&&r&&r.end(),u=!1,f()}}}function Mt(l){let t,n,e,s,r;const o=[Ct,Pt],u=[];function f(i,c){return i[3]?0:1}return n=f(l),e=u[n]=o[n](l),{c(){t=h("div"),e.c(),g(t,"class","flex items-center justify-end gap-3")},m(i,c){I(i,t,c),u[n].m(t,null),r=!0},p(i,c){let d=n;n=f(i),n===d?u[n].p(i,c):(G(),w(u[d],1,1,()=>{u[d]=null}),K(),e=u[n],e?e.p(i,c):(e=u[n]=o[n](i),e.c()),$(e,1),e.m(t,null))},i(i){r||($(e),i&&$e(()=>{r&&(s||(s=oe(t,ge,{duration:200},!0)),s.run(1))}),r=!0)},o(i){w(e),i&&(s||(s=oe(t,ge,{duration:200},!1)),s.run(0)),r=!1},d(i){i&&x(t),u[n].d(),i&&s&&s.end()}}}function Pt(l){let t,n,e,s;return t=new le({props:{tooltip:"Edit",icon:Xe}}),t.$on("click",l[12]),e=new le({props:{tooltip:"Delete",icon:et}}),e.$on("click",l[13]),{c(){N(t.$$.fragment),n=M(),N(e.$$.fragment)},m(r,o){A(t,r,o),I(r,n,o),A(e,r,o),s=!0},p:F,i(r){s||($(t.$$.fragment,r),$(e.$$.fragment,r),s=!0)},o(r){w(t.$$.fragment,r),w(e.$$.fragment,r),s=!1},d(r){Y(t,r),r&&x(n),Y(e,r)}}}function Ct(l){let t,n;return t=new le({props:{tooltip:"Confirm changes",class:"mr-2 text-xl",icon:Ue}}),t.$on("click",l[11]),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},p:F,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Lt(l){let t,n,e,s,r,o,u;function f(a,b){return a[3]?It:St}let i=f(l),c=i(l),d=!l[3]&&Le(l);const v=[Mt,xt],p=[];function y(a,b){return a[2]||a[3]?0:1}return r=y(l),o=p[r]=v[r](l),{c(){t=h("div"),c.c(),n=M(),d&&d.c(),e=M(),s=h("div"),o.c(),g(t,"class","flex h-11 w-32 flex-col items-start justify-center"),g(s,"class","transition-container flex-1 items-center justify-end")},m(a,b){I(a,t,b),c.m(t,null),I(a,n,b),d&&d.m(a,b),I(a,e,b),I(a,s,b),p[r].m(s,null),u=!0},p(a,b){i===(i=f(a))&&c?c.p(a,b):(c.d(1),c=i(a),c&&(c.c(),c.m(t,null))),a[3]?d&&(d.d(1),d=null):d?d.p(a,b):(d=Le(a),d.c(),d.m(e.parentNode,e));let m=r;r=y(a),r===m?p[r].p(a,b):(G(),w(p[m],1,1,()=>{p[m]=null}),K(),o=p[r],o?o.p(a,b):(o=p[r]=v[r](a),o.c()),$(o,1),o.m(s,null))},i(a){u||($(o),u=!0)},o(a){w(o),u=!1},d(a){a&&x(t),c.d(),a&&x(n),d&&d.d(a),a&&x(e),a&&x(s),p[r].d()}}}function Et(l){let t,n;return t=new Dt({props:{class:"flex w-full items-center justify-start gap-4 px-4 py-2",$$slots:{default:[Lt]},$$scope:{ctx:l}}}),t.$on("pointerenter",l[14]),t.$on("pointerleave",l[15]),t.$on("click",l[16]),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},p(e,[s]){const r={};s&1048607&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function jt(l,t,n){let e;const{history:s}=ye("stores");se(l,s,L=>n(4,e=L));let{log:r}=t;const o=ee.utc(r.duration*1e3).format("H:mm:ss");let u=r.name;o.split(":");let f=!1,i=!1;const c=Ke();function d(L){ae.call(this,l,L)}function v(L){ae.call(this,l,L)}function p(){u=this.value,n(1,u)}const y=L=>{L.stopPropagation(),re(s,e=e.map(E=>(E.id===r.id&&(E.name=u),E)),e),n(3,i=!1)},a=L=>{L.stopPropagation(),n(3,i=!0)},b=L=>{L.stopPropagation(),re(s,e=e.filter(E=>E.id!==r.id),e)},m=()=>n(2,f=!0),T=()=>n(2,f=!1),P=()=>c("updateDuration",r);return l.$$set=L=>{"log"in L&&n(0,r=L.log)},[r,u,f,i,e,s,o,c,d,v,p,y,a,b,m,T,P]}class Nt extends Te{constructor(t){super(),De(this,t,jt,Et,Se,{log:0})}}function Ee(l,t,n){const e=l.slice();return e[42]=t[n],e}function At(l){let t,n,e,s=l[2]?"for "+l[2]:"",r,o,u,f,i;return f=new le({props:{icon:Ue,class:"text-[2rem]",tooltip:"End timer"}}),f.$on("click",l[20]),{c(){t=h("div"),n=h("span"),e=W("Times up "),r=W(s),o=W("!"),u=M(),N(f.$$.fragment),g(n,"class","max-line-1 text-xl font-semibold"),g(t,"class","flex h-full w-full flex-col items-center justify-center gap-5 py-6")},m(c,d){I(c,t,d),_(t,n),_(n,e),_(n,r),_(n,o),_(t,u),A(f,t,null),i=!0},p(c,d){(!i||d[0]&4)&&s!==(s=c[2]?"for "+c[2]:"")&&ne(r,s)},i(c){i||($(f.$$.fragment,c),i=!0)},o(c){w(f.$$.fragment,c),i=!1},d(c){c&&x(t),Y(f)}}}function Yt(l){let t,n,e=(l[2]||"Your Timer")+"",s,r,o,u,f,i,c,d,v,p,y,a,b,m,T,P=ee(l[0].paused?Date.now()+(l[0].duration-l[0].elapsed):l[0].startTime+(l[0].duration-l[0].elapsed)).format("hh:mm A")+"",L,E,O,B,Z,R,te,C,S,j,z,V=l[3]&&je(l),q=(l[4]||l[3])&&Ne(l);m=new _e({props:{icon:st}});const be=[Ut,Ot],J=[];function ve(D,H){return D[0].paused?0:1}return O=ve(l),B=J[O]=be[O](l),R=new le({props:{icon:Re,class:"text-2xl",tooltip:"End timer"}}),R.$on("click",l[20]),{c(){t=h("div"),n=h("span"),s=W(e),r=M(),o=h("div"),V&&V.c(),u=M(),q&&q.c(),f=M(),i=h("span"),c=W(l[5]),d=M(),v=h("span"),v.textContent="s",p=M(),y=h("div"),a=h("div"),b=h("span"),N(m.$$.fragment),T=M(),L=W(P),E=M(),B.c(),Z=M(),N(R.$$.fragment),te=M(),C=h("div"),S=h("div"),j=h("div"),g(n,"class","max-line-1 text-xl"),g(v,"class","text-xl font-normal"),g(i,"class","text-3xl font-bold"),g(o,"class","flex gap-6"),g(b,"class","flex-center mr-8 gap-2 text-sm"),Pe(b,"opacity-50",l[0].paused),g(a,"class","flex items-center justify-center gap-2"),g(j,"class","h-full rounded-full bg-[var(--text)]"),me(j,"width",l[9]+"%"),g(S,"class","w-transparent h-1.5 w-full rounded-full border opacity-70 transition hover:opacity-100"),g(C,"class","flex-center mt-3 gap-2"),g(y,"class","mt-2 flex-col gap-3"),g(t,"class","mt-[-0.5rem] flex h-full w-full flex-col items-center justify-center gap-4 px-10")},m(D,H){I(D,t,H),_(t,n),_(n,s),_(t,r),_(t,o),V&&V.m(o,null),_(o,u),q&&q.m(o,null),_(o,f),_(o,i),_(i,c),_(i,d),_(i,v),_(t,p),_(t,y),_(y,a),_(a,b),A(m,b,null),_(b,T),_(b,L),_(a,E),J[O].m(a,null),_(a,Z),A(R,a,null),_(y,te),_(y,C),_(C,S),_(S,j),z=!0},p(D,H){(!z||H[0]&4)&&e!==(e=(D[2]||"Your Timer")+"")&&ne(s,e),D[3]?V?V.p(D,H):(V=je(D),V.c(),V.m(o,u)):V&&(V.d(1),V=null),D[4]||D[3]?q?q.p(D,H):(q=Ne(D),q.c(),q.m(o,f)):q&&(q.d(1),q=null),(!z||H[0]&32)&&ne(c,D[5]),(!z||H[0]&1)&&P!==(P=ee(D[0].paused?Date.now()+(D[0].duration-D[0].elapsed):D[0].startTime+(D[0].duration-D[0].elapsed)).format("hh:mm A")+"")&&ne(L,P),(!z||H[0]&1)&&Pe(b,"opacity-50",D[0].paused);let ce=O;O=ve(D),O===ce?J[O].p(D,H):(G(),w(J[ce],1,1,()=>{J[ce]=null}),K(),B=J[O],B?B.p(D,H):(B=J[O]=be[O](D),B.c()),$(B,1),B.m(a,Z)),(!z||H[0]&512)&&me(j,"width",D[9]+"%")},i(D){z||($(m.$$.fragment,D),$(B),$(R.$$.fragment,D),z=!0)},o(D){w(m.$$.fragment,D),w(B),w(R.$$.fragment,D),z=!1},d(D){D&&x(t),V&&V.d(),q&&q.d(),Y(m),J[O].d(),Y(R)}}}function Bt(l){let t,n,e,s,r,o,u,f,i,c,d,v,p,y,a,b,m,T,P,L,E,O,B,Z,R,te;E=new le({props:{icon:Ve,class:"mr-3 w-max shrink-0 text-[3rem]",tooltip:"Start timer"}}),E.$on("click",l[17]);let C=(l[6]||l[10])&&Ae(l);return{c(){t=h("div"),n=h("div"),e=h("input"),s=M(),r=h("div"),o=h("div"),u=h("input"),f=M(),i=h("span"),i.textContent="hr",c=M(),d=h("div"),v=h("input"),p=M(),y=h("span"),y.textContent="m",a=M(),b=h("div"),m=h("input"),T=M(),P=h("span"),P.textContent="s",L=M(),N(E.$$.fragment),O=M(),C&&C.c(),B=we(),g(e,"type","text"),g(e,"class","border-x-0 border-b-[1px] border-t-0 border-solid border-[var(--border-color)] bg-transparent text-center placeholder:text-[var(--placeholder)] focus:outline-none svelte-1wrwskw"),g(e,"placeholder","What's the timer for?"),me(e,"font-size","1rem"),me(e,"width","11.5rem"),me(e,"text-align","start"),g(e,"maxlength","20"),g(u,"type","number"),g(u,"min","00"),g(u,"max","23"),g(u,"placeholder","00"),g(u,"class","border-x-0 border-b-[1px] border-t-0 border-solid border-[var(--border-color)] bg-transparent text-center placeholder:text-[var(--placeholder)] focus:outline-none svelte-1wrwskw"),g(o,"class","flex flex-col items-center justify-center gap-1 text-sm"),g(v,"type","number"),g(v,"min","00"),g(v,"max","59"),g(v,"placeholder","00"),g(v,"class","border-x-0 border-b-[1px] border-t-0 border-solid border-[var(--border-color)] bg-transparent text-center placeholder:text-[var(--placeholder)] focus:outline-none svelte-1wrwskw"),g(d,"class","flex flex-col items-center justify-center gap-1 text-sm"),g(m,"type","number"),g(m,"min","00"),g(m,"max","59"),g(m,"placeholder","00"),g(m,"class","border-x-0 border-b-[1px] border-t-0 border-solid border-[var(--border-color)] bg-transparent text-center placeholder:text-[var(--placeholder)] focus:outline-none svelte-1wrwskw"),g(b,"class","flex flex-col items-center justify-center gap-1 text-sm"),g(r,"class","time-options flex gap-3"),g(n,"class","flex-start flex flex-col gap-[1.65rem]"),g(t,"class","flex h-full w-full items-center justify-between px-8")},m(S,j){I(S,t,j),_(t,n),_(n,e),X(e,l[2]),_(n,s),_(n,r),_(r,o),_(o,u),X(u,l[0].hours),_(o,f),_(o,i),_(r,c),_(r,d),_(d,v),X(v,l[0].minutes),_(d,p),_(d,y),_(r,a),_(r,b),_(b,m),X(m,l[0].seconds),_(b,T),_(b,P),_(t,L),A(E,t,null),I(S,O,j),C&&C.m(S,j),I(S,B,j),Z=!0,R||(te=[Q(e,"input",l[27]),Q(e,"pointerdown",ue(l[26])),Q(u,"input",l[28]),Q(u,"pointerdown",ue(l[25])),Q(v,"pointerdown",ue(l[24])),Q(v,"input",l[29]),Q(m,"pointerdown",ue(l[23])),Q(m,"input",l[30])],R=!0)},p(S,j){j[0]&4&&e.value!==S[2]&&X(e,S[2]),j[0]&1&&fe(u.value)!==S[0].hours&&X(u,S[0].hours),j[0]&1&&fe(v.value)!==S[0].minutes&&X(v,S[0].minutes),j[0]&1&&fe(m.value)!==S[0].seconds&&X(m,S[0].seconds),S[6]||S[10]?C?(C.p(S,j),j[0]&1088&&$(C,1)):(C=Ae(S),C.c(),$(C,1),C.m(B.parentNode,B)):C&&(G(),w(C,1,1,()=>{C=null}),K())},i(S){Z||($(E.$$.fragment,S),$(C),Z=!0)},o(S){w(E.$$.fragment,S),w(C),Z=!1},d(S){S&&x(t),Y(E),S&&x(O),C&&C.d(S),S&&x(B),R=!1,xe(te)}}}function je(l){let t,n,e,s;return{c(){t=h("span"),n=W(l[3]),e=M(),s=h("span"),s.textContent="hr",g(s,"class","text-xl font-normal"),g(t,"class","text-3xl font-bold")},m(r,o){I(r,t,o),_(t,n),_(t,e),_(t,s)},p(r,o){o[0]&8&&ne(n,r[3])},d(r){r&&x(t)}}}function Ne(l){let t,n,e,s;return{c(){t=h("span"),n=W(l[4]),e=M(),s=h("span"),s.textContent="m",g(s,"class","text-xl font-normal"),g(t,"class","text-3xl font-bold")},m(r,o){I(r,t,o),_(t,n),_(t,e),_(t,s)},p(r,o){o[0]&16&&ne(n,r[4])},d(r){r&&x(t)}}}function Ot(l){let t,n;return t=new le({props:{icon:_t,class:"mr-3 text-2xl",tooltip:"Pause timer"}}),t.$on("click",l[18]),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},p:F,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Ut(l){let t,n;return t=new le({props:{icon:Ve,class:"mr-3 text-2xl",tooltip:"Resume timer"}}),t.$on("click",l[19]),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},p:F,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Ae(l){let t,n,e,s,r,o,u,f,i;const c=[Vt,Rt],d=[];function v(b,m){return b[8]!=="Mute"?0:1}n=v(l),e=d[n]=c[n](l);function p(b){l[31](b)}let y={options:l[14]};l[8]!==void 0&&(y.value=l[8]),r=new ot({props:y}),it.push(()=>at(r,"value",p)),r.$on("change",l[32]);let a=l[1]&&Ye(l);return{c(){t=h("div"),e.c(),s=M(),N(r.$$.fragment),u=M(),a&&a.c(),g(t,"class","mt-6 mb-[-0.75rem] flex items-center gap-5 px-8")},m(b,m){I(b,t,m),d[n].m(t,null),_(t,s),A(r,t,null),_(t,u),a&&a.m(t,null),i=!0},p(b,m){let T=n;n=v(b),n===T?d[n].p(b,m):(G(),w(d[T],1,1,()=>{d[T]=null}),K(),e=d[n],e?e.p(b,m):(e=d[n]=c[n](b),e.c()),$(e,1),e.m(t,s));const P={};!o&&m[0]&256&&(o=!0,P.value=b[8],ut(()=>o=!1)),r.$set(P),b[1]?a?(a.p(b,m),m[0]&2&&$(a,1)):(a=Ye(b),a.c(),$(a,1),a.m(t,null)):a&&(G(),w(a,1,1,()=>{a=null}),K())},i(b){i||($(e),$(r.$$.fragment,b),$(a),b&&$e(()=>{i&&(f||(f=oe(t,ke,{duration:300},!0)),f.run(1))}),i=!0)},o(b){w(e),w(r.$$.fragment,b),w(a),b&&(f||(f=oe(t,ke,{duration:300},!1)),f.run(0)),i=!1},d(b){b&&x(t),d[n].d(),Y(r),a&&a.d(),b&&f&&f.end()}}}function Rt(l){let t,n;return t=new _e({props:{icon:bt,class:"text-xl"}}),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},p:F,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Vt(l){let t,n;return t=new _e({props:{icon:vt,class:"text-lg"}}),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},p:F,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Ye(l){let t,n;return t=new le({props:{icon:Re,tooltip:"Stop",class:"mr-2 text-xl"}}),t.$on("click",l[33]),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},p:F,i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Be(l){let t,n,e,s,r;const o=[Ht,qt],u=[];function f(i,c){return i[7].length===0?0:1}return n=f(l),e=u[n]=o[n](l),{c(){t=h("div"),e.c(),g(t,"class","mt-2 flex w-[24rem] flex-col gap-3 px-2 pb-2")},m(i,c){I(i,t,c),u[n].m(t,null),r=!0},p(i,c){let d=n;n=f(i),n===d?u[n].p(i,c):(G(),w(u[d],1,1,()=>{u[d]=null}),K(),e=u[n],e?e.p(i,c):(e=u[n]=o[n](i),e.c()),$(e,1),e.m(t,null))},i(i){r||($(e),i&&$e(()=>{r&&(s||(s=oe(t,ke,{duration:200},!0)),s.run(1))}),r=!0)},o(i){w(e),i&&(s||(s=oe(t,ke,{duration:200},!1)),s.run(0)),r=!1},d(i){i&&x(t),u[n].d(),i&&s&&s.end()}}}function qt(l){let t,n,e,s,r,o,u,f,i,c=[],d=new Map,v,p,y;e=new _e({props:{icon:ft}}),o=new ct({props:{class:"mr-1 flex items-center justify-start gap-3 text-sm",size:"sm",$$slots:{default:[Qt]},$$scope:{ctx:l}}}),o.$on("click",l[36]);let a=l[7];const b=m=>m[42].id;for(let m=0;m<a.length;m+=1){let T=Ee(l,a,m),P=b(T);d.set(P,c[m]=Oe(P,T))}return{c(){t=h("div"),n=h("span"),N(e.$$.fragment),s=W(`
          History`),r=M(),N(o.$$.fragment),u=M(),f=h("div"),i=h("div");for(let m=0;m<c.length;m+=1)c[m].c();g(n,"class","ml-1 flex items-center justify-start gap-3 text-lg"),g(t,"class","flex w-full items-center justify-between"),g(i,"class","flex max-h-[17.4rem] flex-col gap-2 scroll-smooth")},m(m,T){I(m,t,T),_(t,n),A(e,n,null),_(n,s),_(t,r),A(o,t,null),I(m,u,T),I(m,f,T),_(f,i);for(let P=0;P<c.length;P+=1)c[P]&&c[P].m(i,null);v=!0,p||(y=he(pt.call(null,f)),p=!0)},p(m,T){const P={};T[1]&16384&&(P.$$scope={dirty:T,ctx:m}),o.$set(P),T[0]&2097280&&(a=m[7],G(),c=dt(c,T,b,1,m,a,d,i,mt,Oe,null,Ee),K())},i(m){if(!v){$(e.$$.fragment,m),$(o.$$.fragment,m);for(let T=0;T<a.length;T+=1)$(c[T]);v=!0}},o(m){w(e.$$.fragment,m),w(o.$$.fragment,m);for(let T=0;T<c.length;T+=1)w(c[T]);v=!1},d(m){m&&x(t),Y(e),Y(o),m&&x(u),m&&x(f);for(let T=0;T<c.length;T+=1)c[T].d();p=!1,y()}}}function Ht(l){let t;return{c(){t=h("div"),t.innerHTML='<span class="px-12">Start using the timer to see your history here.</span>',g(t,"class","flex-center border-light curved-half mt-2 h-[10rem] w-full text-center text-[var(--text)]")},m(n,e){I(n,t,e)},p:F,i:F,o:F,d(n){n&&x(t)}}}function Qt(l){let t;return{c(){t=W("Clear all")},m(n,e){I(n,t,e)},d(n){n&&x(t)}}}function Oe(l,t){let n,e,s;return e=new Nt({props:{log:t[42]}}),e.$on("updateDuration",t[37]),{key:l,first:null,c(){n=we(),N(e.$$.fragment),this.first=n},m(r,o){I(r,n,o),A(e,r,o),s=!0},p(r,o){t=r;const u={};o[0]&128&&(u.log=t[42]),e.$set(u)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){w(e.$$.fragment,r),s=!1},d(r){r&&x(n),Y(e,r)}}}function Wt(l){let t,n,e,s,r,o,u,f;const i=[Bt,Yt,At],c=[];function d(p,y){return p[0].active?p[0].active&&!p[0].done?1:2:0}n=d(l),e=c[n]=i[n](l);let v=l[10]&&Be(l);return{c(){t=h("div"),e.c(),s=M(),v&&v.c(),r=we(),g(t,"class","h-max w-[24rem] pt-6 pb-6")},m(p,y){I(p,t,y),c[n].m(t,null),I(p,s,y),v&&v.m(p,y),I(p,r,y),o=!0,u||(f=[Q(t,"pointerenter",l[34]),Q(t,"pointerleave",l[35])],u=!0)},p(p,y){let a=n;n=d(p),n===a?c[n].p(p,y):(G(),w(c[a],1,1,()=>{c[a]=null}),K(),e=c[n],e?e.p(p,y):(e=c[n]=i[n](p),e.c()),$(e,1),e.m(t,null)),p[10]?v?(v.p(p,y),y[0]&1024&&$(v,1)):(v=Be(p),v.c(),$(v,1),v.m(r.parentNode,r)):v&&(G(),w(v,1,1,()=>{v=null}),K())},i(p){o||($(e),$(v),o=!0)},o(p){w(e),w(v),o=!1},d(p){p&&x(t),c[n].d(),p&&x(s),v&&v.d(p),p&&x(r),u=!1,xe(f)}}}function zt(l,t,n){let e,s,r,o,u;const{timer:f,history:i,tone:c}=ye("stores");se(l,f,k=>n(0,e=k)),se(l,i,k=>n(7,s=k)),se(l,c,k=>n(8,r=k));const d=k=>{re(f,e.seconds=(e.seconds>59?59:e.seconds.toString().padStart(2,"0")).toString(),e),re(f,e.minutes=(e.minutes>59?59:e.minutes.toString().padStart(2,"0")).toString(),e),re(f,e.hours=(e.hours>23?23:e.hours.toString().padStart(2,"0")).toString(),e)},v=["Mute","Swinging","Promise","Lovingly","Christmas"];let p=null,y=Tt(0);se(l,y,k=>n(9,o=k));let a="",b=0,m=0,T=0,P=!1;const L=ye("appView");se(l,L,k=>n(10,u=k));let E=null;tt(()=>{window.addEventListener("stopTimer",R)});const O=()=>{const k=(parseInt(e.seconds)+parseInt(e.minutes*60)+parseInt(e.hours*60*60))*1e3;k<=0||f.update(U=>(U.id=lt(),U.name=a,U.active=!0,U.paused=!1,U.startTime=Date.now(),U.start=Date.now(),U.duration=k,U.done=!1,U))},B=()=>{f.update(k=>(k.paused=!0,k.elapsed+=Date.now()-k.startTime,k))},Z=()=>{f.update(k=>(k.paused=!1,k.startTime=Date.now(),k))},R=()=>{document.title="Dashy",S(),y.set(0),p&&p.pause(),p&&p.remove(),n(1,p=null),f.update(k=>(k.active=!1,k.paused=!1,k.startTime=0,k.start=0,k.elapsed=0,k.done=!1,k))},te=()=>{if(!e.active)return;const k=e.paused?e.elapsed:Date.now()-e.startTime+e.elapsed,U=Math.round((e.duration-k)/1e3);n(3,b=ee.duration(U,"seconds").hours().toString().padStart(2,"0")),n(4,m=ee.duration(U,"seconds").minutes().toString().padStart(2,"0")),n(5,T=ee.duration(U,"seconds").seconds().toString().padStart(2,"0")),document.title=`${b?b+":":""}${m}:${T}`,re(y,o=Math.floor(k/1e3)/Math.floor(e.duration/1e3)*100,o),k>=e.duration&&(clearInterval(E),C())},C=()=>{e.done||p||(re(f,e.done=!0,e),r!=="Mute"&&n(1,p=Me(`${Ce.PUBLIC_ASSETS_ENDPOINT}/audio/ringtones/${r}.mp3`,!0)),rt({id:e.id,title:a||"Times Up!",body:"Your timer has ended",faIcon:{icon:"faTimer",type:"solid"},timestamp:Date.now(),dueIn:0,action:"EmitEvent",actionData:"stopTimer"}),document.title="Dashy")},S=()=>{if(!e.active)return;const{id:k,name:U,duration:pe}=e,de={id:k,name:U||"Untitled",duration:Math.round(pe/1e3),startTime:e.start};s.filter(ie=>ie.id===k).length===0&&i.update(ie=>[de,...ie])},j=k=>{const{name:U,duration:pe}=k,de=Math.floor(pe/3600),ie=Math.floor((pe-de*3600)/60),Ge=pe-de*3600-ie*60;U&&n(2,a=U),re(f,e={hours:de,minutes:ie,seconds:Ge},e)};nt(()=>{p&&p.pause(),p&&p.remove(),window.removeEventListener("stopTimer",R),document.title="Dashy"});function z(k){ae.call(this,l,k)}function V(k){ae.call(this,l,k)}function q(k){ae.call(this,l,k)}function be(k){ae.call(this,l,k)}function J(){a=this.value,n(2,a)}function ve(){e.hours=fe(this.value),f.set(e)}function D(){e.minutes=fe(this.value),f.set(e)}function H(){e.seconds=fe(this.value),f.set(e)}function ce(k){r=k,c.set(r)}const qe=()=>{p&&(p.pause(),p.remove()),r!=="Mute"&&(n(1,p=Me(Ce.PUBLIC_ASSETS_ENDPOINT+"/audio/ringtones/"+r+".mp3")),n(1,p.onended=()=>{n(1,p=null)},p))},He=()=>{p==null||p.pause(),p==null||p.remove(),n(1,p=null)},Qe=()=>n(6,P=!0),We=()=>n(6,P=!1),ze=()=>{i.set([])},Fe=k=>j(k.detail);return l.$$.update=()=>{l.$$.dirty[0]&1&&d(),l.$$.dirty[0]&4194305&&(e.done?clearInterval(E):e.active&&!e.paused?(clearInterval(E),te(),n(22,E=setInterval(te,1e3))):e.active&&e.paused?(clearInterval(E),te()):(R(),clearInterval(E)))},[e,p,a,b,m,T,P,s,r,o,u,f,i,c,v,y,L,O,B,Z,R,j,E,z,V,q,be,J,ve,D,H,ce,qe,He,Qe,We,ze,Fe]}class Ft extends Te{constructor(t){super(),De(this,t,zt,Wt,Se,{},null,[-1,-1])}}function Gt(l){let t,n;return t=new yt({}),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Kt(l){let t,n;return t=new Ft({}),{c(){N(t.$$.fragment)},m(e,s){A(t,e,s),n=!0},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){Y(t,e)}}}function Zt(l){let t,n,e,s;const r=[Kt,Gt],o=[];function u(f,i){return f[0]||!f[1]?0:1}return t=u(l),n=o[t]=r[t](l),{c(){n.c(),e=we()},m(f,i){o[t].m(f,i),I(f,e,i),s=!0},p(f,[i]){let c=t;t=u(f),t!==c&&(G(),w(o[c],1,1,()=>{o[c]=null}),K(),n=o[t],n||(n=o[t]=r[t](f),n.c()),$(n,1),n.m(e.parentNode,e))},i(f){s||($(n),s=!0)},o(f){w(n),s=!1},d(f){o[t].d(f),f&&x(e)}}}function Jt(l,t,n){let e,s;se(l,gt,a=>n(1,s=a));let{config:r}=t;const o={path:"user_data/{uid}/profiles/{currentProfile}/apps/"+r.id,currentProfile:kt,uid:ht},{create:u,createPersist:f,isFetched:i,start:c,stop:d}=wt(o);se(l,i,a=>n(0,e=a));const v=u("timer_tone","Promise"),p=u("timer",{seconds:0,hours:0,minutes:0,duration:0,isPaused:!1,startTime:0,acitve:!1,done:!1,elapsed:0}),y=u("history",[]);return $t("stores",{timer:p,tone:v,history:y}),l.$$set=a=>{"config"in a&&n(3,r=a.config)},[e,s,i,r]}class nn extends Te{constructor(t){super(),De(this,t,Jt,Zt,Se,{config:3})}}export{nn as default};
