import{el as ir,ee as nr}from"./overlayscrollbars.js";function _r(g1,Be){for(var P1=0;P1<Be.length;P1++){const b1=Be[P1];if(typeof b1!="string"&&!Array.isArray(b1)){for(const y1 in b1)if(y1!=="default"&&!(y1 in g1)){const Z1=Object.getOwnPropertyDescriptor(b1,y1);Z1&&Object.defineProperty(g1,y1,Z1.get?Z1:{enumerable:!0,get:()=>b1[y1]})}}}return Object.freeze(Object.defineProperty(g1,Symbol.toStringTag,{value:"Module"}))}var ya={exports:{}};(function(g1,Be){(function(P1,b1){g1.exports=b1()})(nr,function(){function P1(M){return new Int8Array(M)}function b1(M){return new Int16Array(M)}function y1(M){return new Int32Array(M)}function Z1(M){return new Float32Array(M)}function Ia(M){return new Float64Array(M)}function $e(M){if(M.length==1)return Z1(M[0]);var F=M[0];M=M.slice(1);for(var P=[],X=0;X<F;X++)P.push($e(M));return P}function Pe(M){if(M.length==1)return y1(M[0]);var F=M[0];M=M.slice(1);for(var P=[],X=0;X<F;X++)P.push(Pe(M));return P}function Ze(M){if(M.length==1)return b1(M[0]);var F=M[0];M=M.slice(1);for(var P=[],X=0;X<F;X++)P.push(Ze(M));return P}function Ke(M){if(M.length==1)return new Array(M[0]);var F=M[0];M=M.slice(1);for(var P=[],X=0;X<F;X++)P.push(Ke(M));return P}var Qe={};Qe.fill=function(M,F,P,X){if(arguments.length==2)for(var z=0;z<M.length;z++)M[z]=arguments[1];else for(var z=F;z<P;z++)M[z]=X};var Ue={};Ue.arraycopy=function(M,F,P,X,z){for(var Y=F+z;F<Y;)P[X++]=M[F++]};var ve={};ve.SQRT2=1.4142135623730951,ve.FAST_LOG10=function(M){return Math.log10(M)},ve.FAST_LOG10_X=function(M,F){return Math.log10(M)*F};function R1(M){this.ordinal=M}R1.short_block_allowed=new R1(0),R1.short_block_coupled=new R1(1),R1.short_block_dispensed=new R1(2),R1.short_block_forced=new R1(3);var je={};je.MAX_VALUE=34028235e31;function a1(M){this.ordinal=M}a1.vbr_off=new a1(0),a1.vbr_mt=new a1(1),a1.vbr_rh=new a1(2),a1.vbr_abr=new a1(3),a1.vbr_mtrh=new a1(4),a1.vbr_default=a1.vbr_mtrh;var pa=function(M){},o0={System:Ue,VbrMode:a1,Float:je,ShortBlock:R1,Util:ve,Arrays:Qe,new_array_n:Ke,new_byte:P1,new_double:Ia,new_float:Z1,new_float_n:$e,new_int:y1,new_int_n:Pe,new_short:b1,new_short_n:Ze,assert:pa},La=o0.System,F0=o0.Util,Na=o0.Arrays,Va=o0.new_float;function Ha(){var M=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*F0.SQRT2*.5/2384e-9,.017876148*F0.SQRT2*.5/2384e-9,.003134727*F0.SQRT2*.5/2384e-9,.002457142*F0.SQRT2*.5/2384e-9,971317e-9*F0.SQRT2*.5/2384e-9,218868e-9*F0.SQRT2*.5/2384e-9,101566e-9*F0.SQRT2*.5/2384e-9,13828e-9*F0.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],F=12,P=36,X=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],z=X[c.SHORT_TYPE],Y=X[c.SHORT_TYPE],K=X[c.SHORT_TYPE],r0=X[c.SHORT_TYPE],s0=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function p(A,T,e){for(var V=10,N=T+238-14-286,y=-15;y<0;y++){var s,f,S;s=M[V+-10],f=A[N+-224]*s,S=A[T+224]*s,s=M[V+-9],f+=A[N+-160]*s,S+=A[T+160]*s,s=M[V+-8],f+=A[N+-96]*s,S+=A[T+96]*s,s=M[V+-7],f+=A[N+-32]*s,S+=A[T+32]*s,s=M[V+-6],f+=A[N+32]*s,S+=A[T+-32]*s,s=M[V+-5],f+=A[N+96]*s,S+=A[T+-96]*s,s=M[V+-4],f+=A[N+160]*s,S+=A[T+-160]*s,s=M[V+-3],f+=A[N+224]*s,S+=A[T+-224]*s,s=M[V+-2],f+=A[T+-256]*s,S-=A[N+256]*s,s=M[V+-1],f+=A[T+-192]*s,S-=A[N+192]*s,s=M[V+0],f+=A[T+-128]*s,S-=A[N+128]*s,s=M[V+1],f+=A[T+-64]*s,S-=A[N+64]*s,s=M[V+2],f+=A[T+0]*s,S-=A[N+0]*s,s=M[V+3],f+=A[T+64]*s,S-=A[N+-64]*s,s=M[V+4],f+=A[T+128]*s,S-=A[N+-128]*s,s=M[V+5],f+=A[T+192]*s,S-=A[N+-192]*s,f*=M[V+6],s=S-f,e[30+y*2]=S+f,e[31+y*2]=M[V+7]*s,V+=18,T--,N++}{var f,S,x,B;S=A[T+-16]*M[V+-10],f=A[T+-32]*M[V+-2],S+=(A[T+-48]-A[T+16])*M[V+-9],f+=A[T+-96]*M[V+-1],S+=(A[T+-80]+A[T+48])*M[V+-8],f+=A[T+-160]*M[V+0],S+=(A[T+-112]-A[T+80])*M[V+-7],f+=A[T+-224]*M[V+1],S+=(A[T+-144]+A[T+112])*M[V+-6],f-=A[T+32]*M[V+2],S+=(A[T+-176]-A[T+144])*M[V+-5],f-=A[T+96]*M[V+3],S+=(A[T+-208]+A[T+176])*M[V+-4],f-=A[T+160]*M[V+4],S+=(A[T+-240]-A[T+208])*M[V+-3],f-=A[T+224],x=f-S,B=f+S,S=e[14],f=e[15]-S,e[31]=B+S,e[30]=x+f,e[15]=x-f,e[14]=B-S}{var a;a=e[28]-e[0],e[0]+=e[28],e[28]=a*M[V+-2*18+7],a=e[29]-e[1],e[1]+=e[29],e[29]=a*M[V+-2*18+7],a=e[26]-e[2],e[2]+=e[26],e[26]=a*M[V+-4*18+7],a=e[27]-e[3],e[3]+=e[27],e[27]=a*M[V+-4*18+7],a=e[24]-e[4],e[4]+=e[24],e[24]=a*M[V+-6*18+7],a=e[25]-e[5],e[5]+=e[25],e[25]=a*M[V+-6*18+7],a=e[22]-e[6],e[6]+=e[22],e[22]=a*F0.SQRT2,a=e[23]-e[7],e[7]+=e[23],e[23]=a*F0.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],a=e[6],e[6]=e[31]-a,e[31]=e[31]+a,a=e[7],e[7]=e[30]-a,e[30]=e[30]+a,a=e[22],e[22]=e[15]-a,e[15]=e[15]+a,a=e[23],e[23]=e[14]-a,e[14]=e[14]+a,a=e[20]-e[8],e[8]+=e[20],e[20]=a*M[V+-10*18+7],a=e[21]-e[9],e[9]+=e[21],e[21]=a*M[V+-10*18+7],a=e[18]-e[10],e[10]+=e[18],e[18]=a*M[V+-12*18+7],a=e[19]-e[11],e[11]+=e[19],e[19]=a*M[V+-12*18+7],a=e[16]-e[12],e[12]+=e[16],e[16]=a*M[V+-14*18+7],a=e[17]-e[13],e[13]+=e[17],e[17]=a*M[V+-14*18+7],a=-e[20]+e[24],e[20]+=e[24],e[24]=a*M[V+-12*18+7],a=-e[21]+e[25],e[21]+=e[25],e[25]=a*M[V+-12*18+7],a=e[4]-e[8],e[4]+=e[8],e[8]=a*M[V+-12*18+7],a=e[5]-e[9],e[5]+=e[9],e[9]=a*M[V+-12*18+7],a=e[0]-e[12],e[0]+=e[12],e[12]=a*M[V+-4*18+7],a=e[1]-e[13],e[1]+=e[13],e[13]=a*M[V+-4*18+7],a=e[16]-e[28],e[16]+=e[28],e[28]=a*M[V+-4*18+7],a=-e[17]+e[29],e[17]+=e[29],e[29]=a*M[V+-4*18+7],a=F0.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=a,a=F0.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=a,a=F0.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=a-e[18],a=F0.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=a-e[19],a=e[2],e[19]-=e[3],e[3]-=a,e[2]=e[31]-a,e[31]+=a,a=e[3],e[11]-=e[19],e[18]-=a,e[3]=e[30]-a,e[30]+=a,a=e[18],e[27]-=e[11],e[19]-=a,e[18]=e[15]-a,e[15]+=a,a=e[19],e[10]-=a,e[19]=e[14]-a,e[14]+=a,a=e[10],e[11]-=a,e[10]=e[23]-a,e[23]+=a,a=e[11],e[26]-=a,e[11]=e[22]-a,e[22]+=a,a=e[26],e[27]-=a,e[26]=e[7]-a,e[7]+=a,a=e[27],e[27]=e[6]-a,e[6]+=a,a=F0.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=a,a=F0.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=a,a=F0.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=a,a=F0.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=a,a=-F0.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=a-e[8],a=-F0.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=a-e[9],a=-F0.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=a-e[25],a=-F0.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=a-e[24],a=e[24]-e[16],e[24]=a,a=e[20]-a,e[20]=a,a=e[28]-a,e[28]=a,a=e[25]-e[17],e[25]=a,a=e[21]-a,e[21]=a,a=e[29]-a,e[29]=a,a=e[17]-e[1],e[17]=a,a=e[9]-a,e[9]=a,a=e[25]-a,e[25]=a,a=e[5]-a,e[5]=a,a=e[21]-a,e[21]=a,a=e[13]-a,e[13]=a,a=e[29]-a,e[29]=a,a=e[1]-e[0],e[1]=a,a=e[16]-a,e[16]=a,a=e[17]-a,e[17]=a,a=e[8]-a,e[8]=a,a=e[9]-a,e[9]=a,a=e[24]-a,e[24]=a,a=e[25]-a,e[25]=a,a=e[4]-a,e[4]=a,a=e[5]-a,e[5]=a,a=e[20]-a,e[20]=a,a=e[21]-a,e[21]=a,a=e[12]-a,e[12]=a,a=e[13]-a,e[13]=a,a=e[28]-a,e[28]=a,a=e[29]-a,e[29]=a,a=e[0],e[0]+=e[31],e[31]-=a,a=e[1],e[1]+=e[30],e[30]-=a,a=e[16],e[16]+=e[15],e[15]-=a,a=e[17],e[17]+=e[14],e[14]-=a,a=e[8],e[8]+=e[23],e[23]-=a,a=e[9],e[9]+=e[22],e[22]-=a,a=e[24],e[24]+=e[7],e[7]-=a,a=e[25],e[25]+=e[6],e[6]-=a,a=e[4],e[4]+=e[27],e[27]-=a,a=e[5],e[5]+=e[26],e[26]-=a,a=e[20],e[20]+=e[11],e[11]-=a,a=e[21],e[21]+=e[10],e[10]-=a,a=e[12],e[12]+=e[19],e[19]-=a,a=e[13],e[13]+=e[18],e[18]-=a,a=e[28],e[28]+=e[3],e[3]-=a,a=e[29],e[29]+=e[2],e[2]-=a}}function W(A,T){for(var e=0;e<3;e++){var V,N,y,s,f,S;s=A[T+2*3]*X[c.SHORT_TYPE][0]-A[T+5*3],V=A[T+0*3]*X[c.SHORT_TYPE][2]-A[T+3*3],N=s+V,y=s-V,s=A[T+5*3]*X[c.SHORT_TYPE][0]+A[T+2*3],V=A[T+3*3]*X[c.SHORT_TYPE][2]+A[T+0*3],f=s+V,S=-s+V,V=(A[T+1*3]*X[c.SHORT_TYPE][1]-A[T+4*3])*2069978111953089e-26,s=(A[T+4*3]*X[c.SHORT_TYPE][1]+A[T+1*3])*2069978111953089e-26,A[T+3*0]=N*190752519173728e-25+V,A[T+3*5]=-f*190752519173728e-25+s,y=y*.8660254037844387*1907525191737281e-26,f=f*.5*1907525191737281e-26+s,A[T+3*1]=y-f,A[T+3*2]=y+f,N=N*.5*1907525191737281e-26-V,S=S*.8660254037844387*1907525191737281e-26,A[T+3*3]=N+S,A[T+3*4]=N-S,T++}}function d(A,T,e){var V,N;{var y,s,f,S,x,B,a,u;y=e[17]-e[9],f=e[15]-e[11],S=e[14]-e[12],x=e[0]+e[8],B=e[1]+e[7],a=e[2]+e[6],u=e[3]+e[5],A[T+17]=x+a-u-(B-e[4]),N=(x+a-u)*Y[12+7]+(B-e[4]),V=(y-f-S)*Y[12+6],A[T+5]=V+N,A[T+6]=V-N,s=(e[16]-e[10])*Y[12+6],B=B*Y[12+7]+e[4],V=y*Y[12+0]+s+f*Y[12+1]+S*Y[12+2],N=-x*Y[12+4]+B-a*Y[12+5]+u*Y[12+3],A[T+1]=V+N,A[T+2]=V-N,V=y*Y[12+1]-s-f*Y[12+2]+S*Y[12+0],N=-x*Y[12+5]+B-a*Y[12+3]+u*Y[12+4],A[T+9]=V+N,A[T+10]=V-N,V=y*Y[12+2]-s+f*Y[12+0]-S*Y[12+1],N=x*Y[12+3]-B+a*Y[12+4]-u*Y[12+5],A[T+13]=V+N,A[T+14]=V-N}{var o,i,v,h,t,n,_,R;o=e[8]-e[0],v=e[6]-e[2],h=e[5]-e[3],t=e[17]+e[9],n=e[16]+e[10],_=e[15]+e[11],R=e[14]+e[12],A[T+0]=t+_+R+(n+e[13]),V=(t+_+R)*Y[12+7]-(n+e[13]),N=(o-v+h)*Y[12+6],A[T+11]=V+N,A[T+12]=V-N,i=(e[7]-e[1])*Y[12+6],n=e[13]-n*Y[12+7],V=t*Y[12+3]-n+_*Y[12+4]+R*Y[12+5],N=o*Y[12+2]+i+v*Y[12+0]+h*Y[12+1],A[T+3]=V+N,A[T+4]=V-N,V=-t*Y[12+5]+n-_*Y[12+3]-R*Y[12+4],N=o*Y[12+1]+i-v*Y[12+2]-h*Y[12+0],A[T+7]=V+N,A[T+8]=V-N,V=-t*Y[12+4]+n-_*Y[12+5]-R*Y[12+3],N=o*Y[12+0]-i+v*Y[12+1]-h*Y[12+2],A[T+15]=V+N,A[T+16]=V-N}}this.mdct_sub48=function(A,T,e){for(var V=T,N=286,y=0;y<A.channels_out;y++){for(var s=0;s<A.mode_gr;s++){for(var f,S=A.l3_side.tt[s][y],x=S.xr,B=0,a=A.sb_sample[y][1-s],u=0,o=0;o<18/2;o++)for(p(V,N,a[u]),p(V,N+32,a[u+1]),u+=2,N+=64,f=1;f<32;f+=2)a[u-1][f]*=-1;for(f=0;f<32;f++,B+=18){var i=S.block_type,v=A.sb_sample[y][s],h=A.sb_sample[y][1-s];if(S.mixed_block_flag!=0&&f<2&&(i=0),A.amp_filter[f]<1e-12)Na.fill(x,B+0,B+18,0);else{if(A.amp_filter[f]<1)for(var o=0;o<18;o++)h[o][s0[f]]*=A.amp_filter[f];if(i==c.SHORT_TYPE){for(var o=-F/4;o<0;o++){var t=X[c.SHORT_TYPE][o+3];x[B+o*3+9]=v[9+o][s0[f]]*t-v[8-o][s0[f]],x[B+o*3+18]=v[14-o][s0[f]]*t+v[15+o][s0[f]],x[B+o*3+10]=v[15+o][s0[f]]*t-v[14-o][s0[f]],x[B+o*3+19]=h[2-o][s0[f]]*t+h[3+o][s0[f]],x[B+o*3+11]=h[3+o][s0[f]]*t-h[2-o][s0[f]],x[B+o*3+20]=h[8-o][s0[f]]*t+h[9+o][s0[f]]}W(x,B)}else{for(var n=Va(18),o=-P/4;o<0;o++){var _,R;_=X[i][o+27]*h[o+9][s0[f]]+X[i][o+36]*h[8-o][s0[f]],R=X[i][o+9]*v[o+9][s0[f]]-X[i][o+18]*v[8-o][s0[f]],n[o+9]=_-R*z[3+o+9],n[o+18]=_*z[3+o+9]+R}d(x,B,n)}}if(i!=c.SHORT_TYPE&&f!=0)for(var o=7;o>=0;--o){var G,I;G=x[B+o]*K[20+o]+x[B+-1-o]*r0[28+o],I=x[B+o]*r0[28+o]-x[B+-1-o]*K[20+o],x[B+-1-o]=G,x[B+o]=I}}}if(V=e,N=286,A.mode_gr==1)for(var H=0;H<18;H++)La.arraycopy(A.sb_sample[y][1][H],0,A.sb_sample[y][0][H],0,32)}}}var Oa=Ha,Ca=o0.System,ka=o0.new_float,Fa=o0.new_float_n;function Xa(){this.l=ka(c.SBMAX_l),this.s=Fa([c.SBMAX_s,3]);var M=this;this.assign=function(F){Ca.arraycopy(F.l,0,M.l,0,c.SBMAX_l);for(var P=0;P<c.SBMAX_s;P++)for(var X=0;X<3;X++)M.s[P][X]=F.s[P][X]}}var he=Xa;function Ya(){this.thm=new he,this.en=new he}var qa=Ya,We=o0.System,ue=o0.VbrMode,ze=o0.new_array_n,Je=o0.new_float,Da=o0.new_float_n,Ga=o0.new_int,fe=o0.assert;E0.ENCDELAY=576,E0.POSTDELAY=1152,E0.MDCTDELAY=48,E0.FFTOFFSET=224+E0.MDCTDELAY,E0.DECDELAY=528,E0.SBLIMIT=32,E0.CBANDS=64,E0.SBPSY_l=21,E0.SBPSY_s=12,E0.SBMAX_l=22,E0.SBMAX_s=13,E0.PSFB21=6,E0.PSFB12=6,E0.BLKSIZE=1024,E0.HBLKSIZE=E0.BLKSIZE/2+1,E0.BLKSIZE_s=256,E0.HBLKSIZE_s=E0.BLKSIZE_s/2+1,E0.NORM_TYPE=0,E0.START_TYPE=1,E0.SHORT_TYPE=2,E0.STOP_TYPE=3,E0.MPG_MD_LR_LR=0,E0.MPG_MD_LR_I=1,E0.MPG_MD_MS_LR=2,E0.MPG_MD_MS_I=3,E0.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function E0(){var M=Oa,F=qa,P=E0.FFTOFFSET,X=E0.MPG_MD_MS_LR,z=null;this.psy=null;var Y=null,K=null,r0=null;this.setModules=function(A,T,e,V){z=A,this.psy=T,Y=T,K=V,r0=e};var s0=new M;function p(A){var T,e;if(A.ATH.useAdjust==0){A.ATH.adjust=1;return}if(e=A.loudness_sq[0][0],T=A.loudness_sq[1][0],A.channels_out==2?(e+=A.loudness_sq[0][1],T+=A.loudness_sq[1][1]):(e+=e,T+=T),A.mode_gr==2&&(e=Math.max(e,T)),e*=.5,e*=A.ATH.aaSensitivityP,e>.03125)A.ATH.adjust>=1?A.ATH.adjust=1:A.ATH.adjust<A.ATH.adjustLimit&&(A.ATH.adjust=A.ATH.adjustLimit),A.ATH.adjustLimit=1;else{var V=31.98*e+625e-6;A.ATH.adjust>=V?(A.ATH.adjust*=V*.075+.925,A.ATH.adjust<V&&(A.ATH.adjust=V)):A.ATH.adjustLimit>=V?A.ATH.adjust=V:A.ATH.adjust<A.ATH.adjustLimit&&(A.ATH.adjust=A.ATH.adjustLimit),A.ATH.adjustLimit=V}}function W(A){var T,e;for(fe(0<=A.bitrate_index&&A.bitrate_index<16),fe(0<=A.mode_ext&&A.mode_ext<4),A.bitrate_stereoMode_Hist[A.bitrate_index][4]++,A.bitrate_stereoMode_Hist[15][4]++,A.channels_out==2&&(A.bitrate_stereoMode_Hist[A.bitrate_index][A.mode_ext]++,A.bitrate_stereoMode_Hist[15][A.mode_ext]++),T=0;T<A.mode_gr;++T)for(e=0;e<A.channels_out;++e){var V=A.l3_side.tt[T][e].block_type|0;A.l3_side.tt[T][e].mixed_block_flag!=0&&(V=4),A.bitrate_blockType_Hist[A.bitrate_index][V]++,A.bitrate_blockType_Hist[A.bitrate_index][5]++,A.bitrate_blockType_Hist[15][V]++,A.bitrate_blockType_Hist[15][5]++}}function d(A,T){var e=A.internal_flags,V,N;if(e.lame_encode_frame_init==0){var y,s,f=Je(2014),S=Je(286+1152+576);for(e.lame_encode_frame_init=1,y=0,s=0;y<286+576*(1+e.mode_gr);++y)y<576*e.mode_gr?(f[y]=0,e.channels_out==2&&(S[y]=0)):(f[y]=T[0][s],e.channels_out==2&&(S[y]=T[1][s]),++s);for(N=0;N<e.mode_gr;N++)for(V=0;V<e.channels_out;V++)e.l3_side.tt[N][V].block_type=E0.SHORT_TYPE;s0.mdct_sub48(e,f,S),fe(e.mf_size>=E0.BLKSIZE+A.framesize-E0.FFTOFFSET),fe(e.mf_size>=512+A.framesize-32)}}this.lame_encode_mp3_frame=function(A,T,e,V,N,y){var s,f=ze([2,2]);f[0][0]=new F,f[0][1]=new F,f[1][0]=new F,f[1][1]=new F;var S=ze([2,2]);S[0][0]=new F,S[0][1]=new F,S[1][0]=new F,S[1][1]=new F;var x,B=[null,null],a=A.internal_flags,u=Da([2,4]),o=[.5,.5],i=[[0,0],[0,0]],v=[[0,0],[0,0]],h,t,n;if(B[0]=T,B[1]=e,a.lame_encode_frame_init==0&&d(A,B),a.padding=0,(a.slot_lag-=a.frac_SpF)<0&&(a.slot_lag+=A.out_samplerate,a.padding=1),a.psymodel!=0){var _,R=[null,null],G=0,I=Ga(2);for(n=0;n<a.mode_gr;n++){for(t=0;t<a.channels_out;t++)R[t]=B[t],G=576+n*576-E0.FFTOFFSET;if(A.VBR==ue.vbr_mtrh||A.VBR==ue.vbr_mt?_=Y.L3psycho_anal_vbr(A,R,G,n,f,S,i[n],v[n],u[n],I):_=Y.L3psycho_anal_ns(A,R,G,n,f,S,i[n],v[n],u[n],I),_!=0)return-4;for(A.mode==P0.JOINT_STEREO&&(o[n]=u[n][2]+u[n][3],o[n]>0&&(o[n]=u[n][3]/o[n])),t=0;t<a.channels_out;t++){var H=a.l3_side.tt[n][t];H.block_type=I[t],H.mixed_block_flag=0}}}else for(n=0;n<a.mode_gr;n++)for(t=0;t<a.channels_out;t++)a.l3_side.tt[n][t].block_type=E0.NORM_TYPE,a.l3_side.tt[n][t].mixed_block_flag=0,v[n][t]=i[n][t]=700;if(p(a),s0.mdct_sub48(a,B[0],B[1]),a.mode_ext=E0.MPG_MD_LR_LR,A.force_ms)a.mode_ext=E0.MPG_MD_MS_LR;else if(A.mode==P0.JOINT_STEREO){var r=0,l=0;for(n=0;n<a.mode_gr;n++)for(t=0;t<a.channels_out;t++)r+=v[n][t],l+=i[n][t];if(r<=1*l){var $=a.l3_side.tt[0],Q=a.l3_side.tt[a.mode_gr-1];$[0].block_type==$[1].block_type&&Q[0].block_type==Q[1].block_type&&(a.mode_ext=E0.MPG_MD_MS_LR)}}if(a.mode_ext==X?(x=S,h=v):(x=f,h=i),A.analysis&&a.pinfo!=null)for(n=0;n<a.mode_gr;n++)for(t=0;t<a.channels_out;t++)a.pinfo.ms_ratio[n]=a.ms_ratio[n],a.pinfo.ms_ener_ratio[n]=o[n],a.pinfo.blocktype[n][t]=a.l3_side.tt[n][t].block_type,a.pinfo.pe[n][t]=h[n][t],We.arraycopy(a.l3_side.tt[n][t].xr,0,a.pinfo.xr[n][t],0,576),a.mode_ext==X&&(a.pinfo.ers[n][t]=a.pinfo.ers[n][t+2],We.arraycopy(a.pinfo.energy[n][t+2],0,a.pinfo.energy[n][t],0,a.pinfo.energy[n][t].length));if(A.VBR==ue.vbr_off||A.VBR==ue.vbr_abr){var t0,l0;for(t0=0;t0<18;t0++)a.nsPsy.pefirbuf[t0]=a.nsPsy.pefirbuf[t0+1];for(l0=0,n=0;n<a.mode_gr;n++)for(t=0;t<a.channels_out;t++)l0+=h[n][t];for(a.nsPsy.pefirbuf[18]=l0,l0=a.nsPsy.pefirbuf[9],t0=0;t0<9;t0++)l0+=(a.nsPsy.pefirbuf[t0]+a.nsPsy.pefirbuf[18-t0])*E0.fircoef[t0];for(l0=670*5*a.mode_gr*a.channels_out/l0,n=0;n<a.mode_gr;n++)for(t=0;t<a.channels_out;t++)h[n][t]*=l0}if(a.iteration_loop.iteration_loop(A,h,o,x),z.format_bitstream(A),s=z.copy_buffer(a,V,N,y,1),A.bWriteVbrTag&&K.addVbrFrame(A),A.analysis&&a.pinfo!=null){for(t=0;t<a.channels_out;t++){var i0;for(i0=0;i0<P;i0++)a.pinfo.pcmdata[t][i0]=a.pinfo.pcmdata[t][i0+A.framesize];for(i0=P;i0<1600;i0++)a.pinfo.pcmdata[t][i0]=B[t][i0-P]}r0.set_frame_pinfo(A,x)}return W(a),s}}var c=E0,ge=o0.Util,ea=o0.new_float;function $a(){var M=ea(c.BLKSIZE),F=ea(c.BLKSIZE_s/2),P=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function X(Y,K,r0){var s0=0,p,W,d;r0<<=1;var A=K+r0;p=4;do{var T,e,V,N,y,s,f;f=p>>1,N=p,y=p<<1,s=y+N,p=y<<1,W=K,d=W+f;do{var S,x,B,a;x=Y[W+0]-Y[W+N],S=Y[W+0]+Y[W+N],a=Y[W+y]-Y[W+s],B=Y[W+y]+Y[W+s],Y[W+y]=S-B,Y[W+0]=S+B,Y[W+s]=x-a,Y[W+N]=x+a,x=Y[d+0]-Y[d+N],S=Y[d+0]+Y[d+N],a=ge.SQRT2*Y[d+s],B=ge.SQRT2*Y[d+y],Y[d+y]=S-B,Y[d+0]=S+B,Y[d+s]=x-a,Y[d+N]=x+a,d+=p,W+=p}while(W<A);for(e=P[s0+0],T=P[s0+1],V=1;V<f;V++){var u,o;u=1-2*T*T,o=2*T*e,W=K+V,d=K+N-V;do{var i,v,h,S,x,t,B,n,a,_;v=o*Y[W+N]-u*Y[d+N],i=u*Y[W+N]+o*Y[d+N],x=Y[W+0]-i,S=Y[W+0]+i,t=Y[d+0]-v,h=Y[d+0]+v,v=o*Y[W+s]-u*Y[d+s],i=u*Y[W+s]+o*Y[d+s],a=Y[W+y]-i,B=Y[W+y]+i,_=Y[d+y]-v,n=Y[d+y]+v,v=T*B-e*_,i=e*B+T*_,Y[W+y]=S-i,Y[W+0]=S+i,Y[d+s]=t-v,Y[d+N]=t+v,v=e*n-T*a,i=T*n+e*a,Y[d+y]=h-i,Y[d+0]=h+i,Y[W+s]=x-v,Y[W+N]=x+v,d+=p,W+=p}while(W<A);u=e,e=u*P[s0+0]-T*P[s0+1],T=u*P[s0+1]+T*P[s0+0]}s0+=2}while(p<r0)}var z=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(Y,K,r0,s0,p){for(var W=0;W<3;W++){var d=c.BLKSIZE_s/2,A=65535&576/3*(W+1),T=c.BLKSIZE_s/8-1;do{var e,V,N,y,s,f=z[T<<2]&255;e=F[f]*s0[r0][p+f+A],s=F[127-f]*s0[r0][p+f+A+128],V=e-s,e=e+s,N=F[f+64]*s0[r0][p+f+A+64],s=F[63-f]*s0[r0][p+f+A+192],y=N-s,N=N+s,d-=4,K[W][d+0]=e+N,K[W][d+2]=e-N,K[W][d+1]=V+y,K[W][d+3]=V-y,e=F[f+1]*s0[r0][p+f+A+1],s=F[126-f]*s0[r0][p+f+A+129],V=e-s,e=e+s,N=F[f+65]*s0[r0][p+f+A+65],s=F[62-f]*s0[r0][p+f+A+193],y=N-s,N=N+s,K[W][d+c.BLKSIZE_s/2+0]=e+N,K[W][d+c.BLKSIZE_s/2+2]=e-N,K[W][d+c.BLKSIZE_s/2+1]=V+y,K[W][d+c.BLKSIZE_s/2+3]=V-y}while(--T>=0);X(K[W],d,c.BLKSIZE_s/2)}},this.fft_long=function(Y,K,r0,s0,p){var W=c.BLKSIZE/8-1,d=c.BLKSIZE/2;do{var A,T,e,V,N,y=z[W]&255;A=M[y]*s0[r0][p+y],N=M[y+512]*s0[r0][p+y+512],T=A-N,A=A+N,e=M[y+256]*s0[r0][p+y+256],N=M[y+768]*s0[r0][p+y+768],V=e-N,e=e+N,d-=4,K[d+0]=A+e,K[d+2]=A-e,K[d+1]=T+V,K[d+3]=T-V,A=M[y+1]*s0[r0][p+y+1],N=M[y+513]*s0[r0][p+y+513],T=A-N,A=A+N,e=M[y+257]*s0[r0][p+y+257],N=M[y+769]*s0[r0][p+y+769],V=e-N,e=e+N,K[d+c.BLKSIZE/2+0]=A+e,K[d+c.BLKSIZE/2+2]=A-e,K[d+c.BLKSIZE/2+1]=T+V,K[d+c.BLKSIZE/2+3]=T-V}while(--W>=0);X(K,d,c.BLKSIZE/2)},this.init_fft=function(Y){for(var K=0;K<c.BLKSIZE;K++)M[K]=.42-.5*Math.cos(2*Math.PI*(K+.5)/c.BLKSIZE)+.08*Math.cos(4*Math.PI*(K+.5)/c.BLKSIZE);for(var K=0;K<c.BLKSIZE_s/2;K++)F[K]=.5*(1-Math.cos(2*Math.PI*(K+.5)/c.BLKSIZE_s))}}var Pa=$a,K1=o0.VbrMode,aa=o0.Float,Q1=o0.ShortBlock,W0=o0.Util,Za=o0.Arrays,D0=o0.new_float,_1=o0.new_float_n,V1=o0.new_int,R0=o0.assert;function Ka(){var M=new Pa,F=2.302585092994046,P=2,X=16,z=2,Y=16,K=.34,r0=1/(14752*14752)/(c.BLKSIZE/2),s0=.01,p=.8,W=.6,d=.3,A=3.5,T=21,e=.2302585093;function V(m){return m}function N(m,b){for(var w=0,L=0;L<c.BLKSIZE/2;++L)w+=m[L]*b.ATH.eql_w[L];return w*=r0,w}function y(m,b,w,L,C,E,k,q,O,U,D){var j=m.internal_flags;if(O<2)M.fft_long(j,L[C],O,U,D),M.fft_short(j,E[k],O,U,D);else if(O==2){for(var v0=c.BLKSIZE-1;v0>=0;--v0){var c0=L[C+0][v0],J=L[C+1][v0];L[C+0][v0]=(c0+J)*W0.SQRT2*.5,L[C+1][v0]=(c0-J)*W0.SQRT2*.5}for(var b0=2;b0>=0;--b0)for(var v0=c.BLKSIZE_s-1;v0>=0;--v0){var c0=E[k+0][b0][v0],J=E[k+1][b0][v0];E[k+0][b0][v0]=(c0+J)*W0.SQRT2*.5,E[k+1][b0][v0]=(c0-J)*W0.SQRT2*.5}}b[0]=L[C+0][0],b[0]*=b[0];for(var v0=c.BLKSIZE/2-1;v0>=0;--v0){var Z=L[C+0][c.BLKSIZE/2-v0],u0=L[C+0][c.BLKSIZE/2+v0];b[c.BLKSIZE/2-v0]=(Z*Z+u0*u0)*.5}for(var b0=2;b0>=0;--b0){w[b0][0]=E[k+0][b0][0],w[b0][0]*=w[b0][0];for(var v0=c.BLKSIZE_s/2-1;v0>=0;--v0){var Z=E[k+0][b0][c.BLKSIZE_s/2-v0],u0=E[k+0][b0][c.BLKSIZE_s/2+v0];w[b0][c.BLKSIZE_s/2-v0]=(Z*Z+u0*u0)*.5}}{for(var x0=0,v0=11;v0<c.HBLKSIZE;v0++)x0+=b[v0];j.tot_ener[O]=x0}if(m.analysis){for(var v0=0;v0<c.HBLKSIZE;v0++)j.pinfo.energy[q][O][v0]=j.pinfo.energy_save[O][v0],j.pinfo.energy_save[O][v0]=b[v0];j.pinfo.pe[q][O]=j.pe[O]}m.athaa_loudapprox==2&&O<2&&(j.loudness_sq[q][O]=j.loudness_sq_save[O],j.loudness_sq_save[O]=N(b,j))}var s=8,f=23,S=15,x,B,a,u=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function o(){x=Math.pow(10,(s+1)/16),B=Math.pow(10,(f+1)/16),a=Math.pow(10,S/10)}var i=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],v=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],h=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function t(m,b,w,L,C,E){var k;if(b>m)if(b<m*B)k=b/m;else return m+b;else{if(m>=b*B)return m+b;k=m/b}if(m+=b,L+3<=3+3){if(k>=x)return m;var q=0|W0.FAST_LOG10_X(k,16);return m*v[q]}var q=0|W0.FAST_LOG10_X(k,16);if(E!=0?b=C.ATH.cb_s[w]*C.ATH.adjust:b=C.ATH.cb_l[w]*C.ATH.adjust,m<a*b){if(m>b){var O,U;return O=1,q<=13&&(O=h[q]),U=W0.FAST_LOG10_X(m/b,10/15),m*((i[q]-O)*U+O)}return q>13?m:m*h[q]}return m*i[q]}var n=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function _(m,b,w){var L;if(m<0&&(m=0),b<0&&(b=0),m<=0)return b;if(b<=0)return m;if(b>m?L=b/m:L=m/b,-2<=w&&w<=2){if(L>=x)return m+b;var C=0|W0.FAST_LOG10_X(L,16);return(m+b)*n[C]}return L<B?m+b:(m<b&&(m=b),m)}function R(m,b){var w=m.internal_flags;if(w.channels_out>1){for(var L=0;L<c.SBMAX_l;L++){var C=w.thm[0].l[L],E=w.thm[1].l[L];w.thm[0].l[L]+=E*b,w.thm[1].l[L]+=C*b}for(var L=0;L<c.SBMAX_s;L++)for(var k=0;k<3;k++){var C=w.thm[0].s[L][k],E=w.thm[1].s[L][k];w.thm[0].s[L][k]+=E*b,w.thm[1].s[L][k]+=C*b}}}function G(m){for(var b=0;b<c.SBMAX_l;b++)if(!(m.thm[0].l[b]>1.58*m.thm[1].l[b]||m.thm[1].l[b]>1.58*m.thm[0].l[b])){var w=m.mld_l[b]*m.en[3].l[b],L=Math.max(m.thm[2].l[b],Math.min(m.thm[3].l[b],w));w=m.mld_l[b]*m.en[2].l[b];var C=Math.max(m.thm[3].l[b],Math.min(m.thm[2].l[b],w));m.thm[2].l[b]=L,m.thm[3].l[b]=C}for(var b=0;b<c.SBMAX_s;b++)for(var E=0;E<3;E++)if(!(m.thm[0].s[b][E]>1.58*m.thm[1].s[b][E]||m.thm[1].s[b][E]>1.58*m.thm[0].s[b][E])){var w=m.mld_s[b]*m.en[3].s[b][E],L=Math.max(m.thm[2].s[b][E],Math.min(m.thm[3].s[b][E],w));w=m.mld_s[b]*m.en[2].s[b][E];var C=Math.max(m.thm[3].s[b][E],Math.min(m.thm[2].s[b][E],w));m.thm[2].s[b][E]=L,m.thm[3].s[b][E]=C}}function I(m,b,w){var L=b,C=Math.pow(10,w);b*=2,L*=2;for(var E=0;E<c.SBMAX_l;E++){var k,q,O,U;if(U=m.ATH.cb_l[m.bm_l[E]]*C,k=Math.min(Math.max(m.thm[0].l[E],U),Math.max(m.thm[1].l[E],U)),q=Math.max(m.thm[2].l[E],U),O=Math.max(m.thm[3].l[E],U),k*b<q+O){var D=k*L/(q+O);q*=D,O*=D}m.thm[2].l[E]=Math.min(q,m.thm[2].l[E]),m.thm[3].l[E]=Math.min(O,m.thm[3].l[E])}C*=c.BLKSIZE_s/c.BLKSIZE;for(var E=0;E<c.SBMAX_s;E++)for(var j=0;j<3;j++){var k,q,O,U;if(U=m.ATH.cb_s[m.bm_s[E]]*C,k=Math.min(Math.max(m.thm[0].s[E][j],U),Math.max(m.thm[1].s[E][j],U)),q=Math.max(m.thm[2].s[E][j],U),O=Math.max(m.thm[3].s[E][j],U),k*b<q+O){var D=k*b/(q+O);q*=D,O*=D}m.thm[2].s[E][j]=Math.min(m.thm[2].s[E][j],q),m.thm[3].s[E][j]=Math.min(m.thm[3].s[E][j],O)}}function H(m,b,w,L,C){var E,k,q=0,O=0;for(E=k=0;E<c.SBMAX_s;++k,++E){for(var U=m.bo_s[E],D=m.npart_s,j=U<D?U:D;k<j;)R0(b[k]>=0),R0(w[k]>=0),q+=b[k],O+=w[k],k++;if(m.en[L].s[E][C]=q,m.thm[L].s[E][C]=O,k>=D){++E;break}R0(b[k]>=0),R0(w[k]>=0);{var v0=m.PSY.bo_s_weight[E],c0=1-v0;q=v0*b[k],O=v0*w[k],m.en[L].s[E][C]+=q,m.thm[L].s[E][C]+=O,q=c0*b[k],O=c0*w[k]}}for(;E<c.SBMAX_s;++E)m.en[L].s[E][C]=0,m.thm[L].s[E][C]=0}function r(m,b,w,L){var C,E,k=0,q=0;for(C=E=0;C<c.SBMAX_l;++E,++C){for(var O=m.bo_l[C],U=m.npart_l,D=O<U?O:U;E<D;)R0(b[E]>=0),R0(w[E]>=0),k+=b[E],q+=w[E],E++;if(m.en[L].l[C]=k,m.thm[L].l[C]=q,E>=U){++C;break}R0(b[E]>=0),R0(w[E]>=0);{var j=m.PSY.bo_l_weight[C],v0=1-j;k=j*b[E],q=j*w[E],m.en[L].l[C]+=k,m.thm[L].l[C]+=q,k=v0*b[E],q=v0*w[E]}}for(;C<c.SBMAX_l;++C)m.en[L].l[C]=0,m.thm[L].l[C]=0}function l(m,b,w,L,C,E){var k=m.internal_flags,q,O;for(O=q=0;O<k.npart_s;++O){for(var U=0,D=k.numlines_s[O],j=0;j<D;++j,++q){var v0=b[E][q];U+=v0}w[O]=U}for(R0(O==k.npart_s),q=O=0;O<k.npart_s;O++){var c0=k.s3ind_s[O][0],J=k.s3_ss[q++]*w[c0];for(++c0;c0<=k.s3ind_s[O][1];)J+=k.s3_ss[q]*w[c0],++q,++c0;{var b0=z*k.nb_s1[C][O];L[O]=Math.min(J,b0)}if(k.blocktype_old[C&1]==c.SHORT_TYPE){var b0=Y*k.nb_s2[C][O],Z=L[O];L[O]=Math.min(b0,Z)}k.nb_s2[C][O]=k.nb_s1[C][O],k.nb_s1[C][O]=J,R0(L[O]>=0)}for(;O<=c.CBANDS;++O)w[O]=0,L[O]=0}function $(m,b,w,L){var C=m.internal_flags;m.short_blocks==Q1.short_block_coupled&&!(b[0]!=0&&b[1]!=0)&&(b[0]=b[1]=0);for(var E=0;E<C.channels_out;E++)L[E]=c.NORM_TYPE,m.short_blocks==Q1.short_block_dispensed&&(b[E]=1),m.short_blocks==Q1.short_block_forced&&(b[E]=0),b[E]!=0?(R0(C.blocktype_old[E]!=c.START_TYPE),C.blocktype_old[E]==c.SHORT_TYPE&&(L[E]=c.STOP_TYPE)):(L[E]=c.SHORT_TYPE,C.blocktype_old[E]==c.NORM_TYPE&&(C.blocktype_old[E]=c.START_TYPE),C.blocktype_old[E]==c.STOP_TYPE&&(C.blocktype_old[E]=c.SHORT_TYPE)),w[E]=C.blocktype_old[E],C.blocktype_old[E]=L[E]}function Q(m,b,w){return w>=1?m:w<=0?b:b>0?Math.pow(m/b,w)*b:0}var t0=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function l0(m,b){for(var w=309.07,L=0;L<c.SBMAX_s-1;L++)for(var C=0;C<3;C++){var E=m.thm.s[L][C];if(E>0){var k=E*b,q=m.en.s[L][C];q>k&&(q>k*1e10?w+=t0[L]*(10*F):w+=t0[L]*W0.FAST_LOG10(q/k))}}return w}var i0=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function _0(m,b){for(var w=281.0575,L=0;L<c.SBMAX_l-1;L++){var C=m.thm.l[L];if(C>0){var E=C*b,k=m.en.l[L];k>E&&(k>E*1e10?w+=i0[L]*(10*F):w+=i0[L]*W0.FAST_LOG10(k/E))}}return w}function S0(m,b,w,L,C){var E,k;for(E=k=0;E<m.npart_l;++E){var q=0,O=0,U;for(U=0;U<m.numlines_l[E];++U,++k){var D=b[k];q+=D,O<D&&(O=D)}w[E]=q,L[E]=O,C[E]=q*m.rnumlines_l[E],R0(m.rnumlines_l[E]>=0),R0(w[E]>=0),R0(L[E]>=0),R0(C[E]>=0)}}function f0(m,b,w,L){var C=u.length-1,E=0,k=w[E]+w[E+1];if(k>0){var q=b[E];q<b[E+1]&&(q=b[E+1]),R0(m.numlines_l[E]+m.numlines_l[E+1]-1>0),k=20*(q*2-k)/(k*(m.numlines_l[E]+m.numlines_l[E+1]-1));var O=0|k;O>C&&(O=C),L[E]=O}else L[E]=0;for(E=1;E<m.npart_l-1;E++)if(k=w[E-1]+w[E]+w[E+1],k>0){var q=b[E-1];q<b[E]&&(q=b[E]),q<b[E+1]&&(q=b[E+1]),R0(m.numlines_l[E-1]+m.numlines_l[E]+m.numlines_l[E+1]-1>0),k=20*(q*3-k)/(k*(m.numlines_l[E-1]+m.numlines_l[E]+m.numlines_l[E+1]-1));var O=0|k;O>C&&(O=C),L[E]=O}else L[E]=0;if(R0(E==m.npart_l-1),k=w[E-1]+w[E],k>0){var q=b[E-1];q<b[E]&&(q=b[E]),R0(m.numlines_l[E-1]+m.numlines_l[E]-1>0),k=20*(q*2-k)/(k*(m.numlines_l[E-1]+m.numlines_l[E]-1));var O=0|k;O>C&&(O=C),L[E]=O}else L[E]=0;R0(E==m.npart_l-1)}var n0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(m,b,w,L,C,E,k,q,O,U){var D=m.internal_flags,j=_1([2,c.BLKSIZE]),v0=_1([2,3,c.BLKSIZE_s]),c0=D0(c.CBANDS+1),J=D0(c.CBANDS+1),b0=D0(c.CBANDS+2),Z=V1(2),u0=V1(2),x0,g,m0,e0,d0,L0,h0,A0,M0=_1([2,576]),O0,s1=V1(c.CBANDS+2),q0=V1(c.CBANDS+2);for(Za.fill(q0,0),x0=D.channels_out,m.mode==P0.JOINT_STEREO&&(x0=4),m.VBR==K1.vbr_off?O0=D.ResvMax==0?0:D.ResvSize/D.ResvMax*.5:m.VBR==K1.vbr_rh||m.VBR==K1.vbr_mtrh||m.VBR==K1.vbr_mt?O0=.6:O0=1,g=0;g<D.channels_out;g++){var C0=b[g],g0=w+576-350-T+192;for(e0=0;e0<576;e0++){var i1,n1;for(i1=C0[g0+e0+10],n1=0,d0=0;d0<(T-1)/2-1;d0+=2)i1+=n0[d0]*(C0[g0+e0+d0]+C0[g0+e0+T-d0]),n1+=n0[d0+1]*(C0[g0+e0+d0+1]+C0[g0+e0+T-d0-1]);M0[g][e0]=i1+n1}C[L][g].en.assign(D.en[g]),C[L][g].thm.assign(D.thm[g]),x0>2&&(E[L][g].en.assign(D.en[g+2]),E[L][g].thm.assign(D.thm[g+2]))}for(g=0;g<x0;g++){var f1,m1,U0=D0(12),x1=[0,0,0,0],J1=D0(12),Ce=1,xa,Ra=D0(c.CBANDS),Ma=D0(c.CBANDS),k0=[0,0,0,0],Ea=D0(c.HBLKSIZE),Ba=_1([3,c.HBLKSIZE_s]);for(R0(D.npart_s<=c.CBANDS),R0(D.npart_l<=c.CBANDS),e0=0;e0<3;e0++)U0[e0]=D.nsPsy.last_en_subshort[g][e0+6],R0(D.nsPsy.last_en_subshort[g][e0+4]>0),J1[e0]=U0[e0]/D.nsPsy.last_en_subshort[g][e0+4],x1[0]+=U0[e0];if(g==2)for(e0=0;e0<576;e0++){var ke,Fe;ke=M0[0][e0],Fe=M0[1][e0],M0[0][e0]=ke+Fe,M0[1][e0]=ke-Fe}{var Ta=M0[g&1],ne=0;for(e0=0;e0<9;e0++){for(var sr=ne+64,Q0=1;ne<sr;ne++)Q0<Math.abs(Ta[ne])&&(Q0=Math.abs(Ta[ne]));D.nsPsy.last_en_subshort[g][e0]=U0[e0+3]=Q0,x1[1+e0/3]+=Q0,Q0>U0[e0+3-2]?(R0(U0[e0+3-2]>0),Q0=Q0/U0[e0+3-2]):U0[e0+3-2]>Q0*10?Q0=U0[e0+3-2]/(Q0*10):Q0=0,J1[e0+3]=Q0}}if(m.analysis){var Xe=J1[0];for(e0=1;e0<12;e0++)Xe<J1[e0]&&(Xe=J1[e0]);D.pinfo.ers[L][g]=D.pinfo.ers_save[g],D.pinfo.ers_save[g]=Xe}for(xa=g==3?D.nsPsy.attackthre_s:D.nsPsy.attackthre,e0=0;e0<12;e0++)k0[e0/3]==0&&J1[e0]>xa&&(k0[e0/3]=e0%3+1);for(e0=1;e0<4;e0++){var Ye;x1[e0-1]>x1[e0]?(R0(x1[e0]>0),Ye=x1[e0-1]/x1[e0]):(R0(x1[e0-1]>0),Ye=x1[e0]/x1[e0-1]),Ye<1.7&&(k0[e0]=0,e0==1&&(k0[0]=0))}for(k0[0]!=0&&D.nsPsy.lastAttacks[g]!=0&&(k0[0]=0),(D.nsPsy.lastAttacks[g]==3||k0[0]+k0[1]+k0[2]+k0[3]!=0)&&(Ce=0,k0[1]!=0&&k0[0]!=0&&(k0[1]=0),k0[2]!=0&&k0[1]!=0&&(k0[2]=0),k0[3]!=0&&k0[2]!=0&&(k0[3]=0)),g<2?u0[g]=Ce:Ce==0&&(u0[0]=u0[1]=0),O[g]=D.tot_ener[g],m1=v0,f1=j,y(m,Ea,Ba,f1,g&1,m1,g&1,L,g,b,w),S0(D,Ea,c0,Ra,Ma),f0(D,Ra,Ma,s1),A0=0;A0<3;A0++){var qe,e1;for(l(m,Ba,J,b0,g,A0),H(D,J,b0,g,A0),h0=0;h0<c.SBMAX_s;h0++){if(e1=D.thm[g].s[h0][A0],e1*=p,k0[A0]>=2||k0[A0+1]==1){var _e=A0!=0?A0-1:2,Q0=Q(D.thm[g].s[h0][_e],e1,W*O0);e1=Math.min(e1,Q0)}if(k0[A0]==1){var _e=A0!=0?A0-1:2,Q0=Q(D.thm[g].s[h0][_e],e1,d*O0);e1=Math.min(e1,Q0)}else if(A0!=0&&k0[A0-1]==3||A0==0&&D.nsPsy.lastAttacks[g]==3){var _e=A0!=2?A0+1:0,Q0=Q(D.thm[g].s[h0][_e],e1,d*O0);e1=Math.min(e1,Q0)}qe=U0[A0*3+3]+U0[A0*3+4]+U0[A0*3+5],U0[A0*3+5]*6<qe&&(e1*=.5,U0[A0*3+4]*6<qe&&(e1*=.5)),D.thm[g].s[h0][A0]=e1}}for(D.nsPsy.lastAttacks[g]=k0[2],L0=0,m0=0;m0<D.npart_l;m0++){for(var G1=D.s3ind[m0][0],De=c0[G1]*u[s1[G1]],$1=D.s3_ll[L0++]*De;++G1<=D.s3ind[m0][1];)De=c0[G1]*u[s1[G1]],$1=t($1,D.s3_ll[L0++]*De,G1,G1-m0,D,0);$1*=.158489319246111,D.blocktype_old[g&1]==c.SHORT_TYPE?b0[m0]=$1:b0[m0]=Q(Math.min($1,Math.min(P*D.nb_1[g][m0],X*D.nb_2[g][m0])),$1,O0),D.nb_2[g][m0]=D.nb_1[g][m0],D.nb_1[g][m0]=$1}for(;m0<=c.CBANDS;++m0)c0[m0]=0,b0[m0]=0;r(D,c0,b0,g)}if((m.mode==P0.STEREO||m.mode==P0.JOINT_STEREO)&&m.interChRatio>0&&R(m,m.interChRatio),m.mode==P0.JOINT_STEREO){var Ge;G(D),Ge=m.msfix,Math.abs(Ge)>0&&I(D,Ge,m.ATHlower*D.ATH.adjust)}for($(m,u0,U,Z),g=0;g<x0;g++){var le,oe=0,Me,Ee;g>1?(le=q,oe=-2,Me=c.NORM_TYPE,(U[0]==c.SHORT_TYPE||U[1]==c.SHORT_TYPE)&&(Me=c.SHORT_TYPE),Ee=E[L][g-2]):(le=k,oe=0,Me=U[g],Ee=C[L][g]),Me==c.SHORT_TYPE?le[oe+g]=l0(Ee,D.masking_lower):le[oe+g]=_0(Ee,D.masking_lower),m.analysis&&(D.pinfo.pe[L][g]=le[oe+g])}return 0};function w0(m,b,w,L,C,E,k,q){var O=m.internal_flags;if(L<2)M.fft_long(O,k[q],L,b,w);else if(L==2)for(var U=c.BLKSIZE-1;U>=0;--U){var D=k[q+0][U],j=k[q+1][U];k[q+0][U]=(D+j)*W0.SQRT2*.5,k[q+1][U]=(D-j)*W0.SQRT2*.5}E[0]=k[q+0][0],E[0]*=E[0];for(var U=c.BLKSIZE/2-1;U>=0;--U){var v0=k[q+0][c.BLKSIZE/2-U],c0=k[q+0][c.BLKSIZE/2+U];E[c.BLKSIZE/2-U]=(v0*v0+c0*c0)*.5}{for(var J=0,U=11;U<c.HBLKSIZE;U++)J+=E[U];O.tot_ener[L]=J}if(m.analysis){for(var U=0;U<c.HBLKSIZE;U++)O.pinfo.energy[C][L][U]=O.pinfo.energy_save[L][U],O.pinfo.energy_save[L][U]=E[U];O.pinfo.pe[C][L]=O.pe[L]}}function Z0(m,b,w,L,C,E,k,q){var O=m.internal_flags;if(C==0&&L<2&&M.fft_short(O,k[q],L,b,w),L==2)for(var U=c.BLKSIZE_s-1;U>=0;--U){var D=k[q+0][C][U],j=k[q+1][C][U];k[q+0][C][U]=(D+j)*W0.SQRT2*.5,k[q+1][C][U]=(D-j)*W0.SQRT2*.5}E[C][0]=k[q+0][C][0],E[C][0]*=E[C][0];for(var U=c.BLKSIZE_s/2-1;U>=0;--U){var v0=k[q+0][C][c.BLKSIZE_s/2-U],c0=k[q+0][C][c.BLKSIZE_s/2+U];E[C][c.BLKSIZE_s/2-U]=(v0*v0+c0*c0)*.5}}function B0(m,b,w,L){var C=m.internal_flags;m.athaa_loudapprox==2&&w<2&&(C.loudness_sq[b][w]=C.loudness_sq_save[w],C.loudness_sq_save[w]=N(L,C))}var V0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function H0(m,b,w,L,C,E,k,q,O,U){for(var D=_1([2,576]),j=m.internal_flags,v0=j.channels_out,c0=m.mode==P0.JOINT_STEREO?4:v0,J=0;J<v0;J++){firbuf=b[J];for(var b0=w+576-350-T+192,Z=0;Z<576;Z++){var u0,x0;u0=firbuf[b0+Z+10],x0=0;for(var g=0;g<(T-1)/2-1;g+=2)u0+=V0[g]*(firbuf[b0+Z+g]+firbuf[b0+Z+T-g]),x0+=V0[g+1]*(firbuf[b0+Z+g+1]+firbuf[b0+Z+T-g-1]);D[J][Z]=u0+x0}C[L][J].en.assign(j.en[J]),C[L][J].thm.assign(j.thm[J]),c0>2&&(E[L][J].en.assign(j.en[J+2]),E[L][J].thm.assign(j.thm[J+2]))}for(var J=0;J<c0;J++){var m0=D0(12),e0=D0(12),d0=[0,0,0,0],L0=D[J&1],h0=0,A0=J==3?j.nsPsy.attackthre_s:j.nsPsy.attackthre,M0=1;if(J==2)for(var Z=0,g=576;g>0;++Z,--g){var O0=D[0][Z],s1=D[1][Z];D[0][Z]=O0+s1,D[1][Z]=O0-s1}for(var Z=0;Z<3;Z++)e0[Z]=j.nsPsy.last_en_subshort[J][Z+6],R0(j.nsPsy.last_en_subshort[J][Z+4]>0),m0[Z]=e0[Z]/j.nsPsy.last_en_subshort[J][Z+4],d0[0]+=e0[Z];for(var Z=0;Z<9;Z++){for(var q0=h0+64,C0=1;h0<q0;h0++)C0<Math.abs(L0[h0])&&(C0=Math.abs(L0[h0]));j.nsPsy.last_en_subshort[J][Z]=e0[Z+3]=C0,d0[1+Z/3]+=C0,C0>e0[Z+3-2]?(R0(e0[Z+3-2]>0),C0=C0/e0[Z+3-2]):e0[Z+3-2]>C0*10?C0=e0[Z+3-2]/(C0*10):C0=0,m0[Z+3]=C0}for(var Z=0;Z<3;++Z){var g0=e0[Z*3+3]+e0[Z*3+4]+e0[Z*3+5],i1=1;e0[Z*3+5]*6<g0&&(i1*=.5,e0[Z*3+4]*6<g0&&(i1*=.5)),q[J][Z]=i1}if(m.analysis){for(var n1=m0[0],Z=1;Z<12;Z++)n1<m0[Z]&&(n1=m0[Z]);j.pinfo.ers[L][J]=j.pinfo.ers_save[J],j.pinfo.ers_save[J]=n1}for(var Z=0;Z<12;Z++)O[J][Z/3]==0&&m0[Z]>A0&&(O[J][Z/3]=Z%3+1);for(var Z=1;Z<4;Z++){var f1=d0[Z-1],m1=d0[Z],U0=Math.max(f1,m1);U0<4e4&&f1<1.7*m1&&m1<1.7*f1&&(Z==1&&O[J][0]<=O[J][Z]&&(O[J][0]=0),O[J][Z]=0)}O[J][0]<=j.nsPsy.lastAttacks[J]&&(O[J][0]=0),(j.nsPsy.lastAttacks[J]==3||O[J][0]+O[J][1]+O[J][2]+O[J][3]!=0)&&(M0=0,O[J][1]!=0&&O[J][0]!=0&&(O[J][1]=0),O[J][2]!=0&&O[J][1]!=0&&(O[J][2]=0),O[J][3]!=0&&O[J][2]!=0&&(O[J][3]=0)),J<2?U[J]=M0:M0==0&&(U[0]=U[1]=0),k[J]=j.tot_ener[J]}}function Y0(m,b,w){if(w==0)for(var L=0;L<m.npart_s;L++)m.nb_s2[b][L]=m.nb_s1[b][L],m.nb_s1[b][L]=0}function K0(m,b){for(var w=0;w<m.npart_l;w++)m.nb_2[b][w]=m.nb_1[b][w],m.nb_1[b][w]=0}function A1(m,b,w,L){var C=u.length-1,E=0,k=w[E]+w[E+1];if(k>0){var q=b[E];q<b[E+1]&&(q=b[E+1]),R0(m.numlines_s[E]+m.numlines_s[E+1]-1>0),k=20*(q*2-k)/(k*(m.numlines_s[E]+m.numlines_s[E+1]-1));var O=0|k;O>C&&(O=C),L[E]=O}else L[E]=0;for(E=1;E<m.npart_s-1;E++)if(k=w[E-1]+w[E]+w[E+1],R0(E+1<m.npart_s),k>0){var q=b[E-1];q<b[E]&&(q=b[E]),q<b[E+1]&&(q=b[E+1]),R0(m.numlines_s[E-1]+m.numlines_s[E]+m.numlines_s[E+1]-1>0),k=20*(q*3-k)/(k*(m.numlines_s[E-1]+m.numlines_s[E]+m.numlines_s[E+1]-1));var O=0|k;O>C&&(O=C),L[E]=O}else L[E]=0;if(R0(E==m.npart_s-1),k=w[E-1]+w[E],k>0){var q=b[E-1];q<b[E]&&(q=b[E]),R0(m.numlines_s[E-1]+m.numlines_s[E]-1>0),k=20*(q*2-k)/(k*(m.numlines_s[E-1]+m.numlines_s[E]-1));var O=0|k;O>C&&(O=C),L[E]=O}else L[E]=0;R0(E==m.npart_s-1)}function o1(m,b,w,L,C,E){var k=m.internal_flags,q=new float[c.CBANDS],O=D0(c.CBANDS),U,D,j,v0=new int[c.CBANDS];for(j=D=0;j<k.npart_s;++j){var c0=0,J=0,b0=k.numlines_s[j];for(U=0;U<b0;++U,++D){var Z=b[E][D];c0+=Z,J<Z&&(J=Z)}w[j]=c0,q[j]=J,O[j]=c0/b0,R0(O[j]>=0)}for(R0(j==k.npart_s);j<c.CBANDS;++j)q[j]=0,O[j]=0;for(A1(k,q,O,v0),D=j=0;j<k.npart_s;j++){var u0=k.s3ind_s[j][0],x0=k.s3ind_s[j][1],g,m0,e0,d0,L0;for(g=v0[u0],m0=1,d0=k.s3_ss[D]*w[u0]*u[v0[u0]],++D,++u0;u0<=x0;)g+=v0[u0],m0+=1,e0=k.s3_ss[D]*w[u0]*u[v0[u0]],d0=_(d0,e0,u0-j),++D,++u0;g=(1+2*g)/(2*m0),L0=u[g]*.5,d0*=L0,L[j]=d0,k.nb_s2[C][j]=k.nb_s1[C][j],k.nb_s1[C][j]=d0,e0=q[j],e0*=k.minval_s[j],e0*=L0,L[j]>e0&&(L[j]=e0),k.masking_lower>1&&(L[j]*=k.masking_lower),L[j]>w[j]&&(L[j]=w[j]),k.masking_lower<1&&(L[j]*=k.masking_lower),R0(L[j]>=0)}for(;j<c.CBANDS;++j)w[j]=0,L[j]=0}function J0(m,b,w,L,C){var E=D0(c.CBANDS),k=D0(c.CBANDS),q=V1(c.CBANDS+2),O;S0(m,b,w,E,k),f0(m,E,k,q);var U=0;for(O=0;O<m.npart_l;O++){var D,j,v0,c0,J=m.s3ind[O][0],b0=m.s3ind[O][1],Z=0,u0=0;for(Z=q[J],u0+=1,j=m.s3_ll[U]*w[J]*u[q[J]],++U,++J;J<=b0;)Z+=q[J],u0+=1,D=m.s3_ll[U]*w[J]*u[q[J]],c0=_(j,D,J-O),j=c0,++U,++J;if(Z=(1+2*Z)/(2*u0),v0=u[Z]*.5,j*=v0,m.blocktype_old[C&1]==c.SHORT_TYPE){var x0=P*m.nb_1[C][O];x0>0?L[O]=Math.min(j,x0):L[O]=Math.min(j,w[O]*d)}else{var g=X*m.nb_2[C][O],m0=P*m.nb_1[C][O],x0;g<=0&&(g=j),m0<=0&&(m0=j),m.blocktype_old[C&1]==c.NORM_TYPE?x0=Math.min(m0,g):x0=m0,L[O]=Math.min(j,x0)}m.nb_2[C][O]=m.nb_1[C][O],m.nb_1[C][O]=j,D=E[O],D*=m.minval_l[O],D*=v0,L[O]>D&&(L[O]=D),m.masking_lower>1&&(L[O]*=m.masking_lower),L[O]>w[O]&&(L[O]=w[O]),m.masking_lower<1&&(L[O]*=m.masking_lower),R0(L[O]>=0)}for(;O<c.CBANDS;++O)w[O]=0,L[O]=0}function u1(m,b){var w=m.internal_flags;m.short_blocks==Q1.short_block_coupled&&!(b[0]!=0&&b[1]!=0)&&(b[0]=b[1]=0);for(var L=0;L<w.channels_out;L++)m.short_blocks==Q1.short_block_dispensed&&(b[L]=1),m.short_blocks==Q1.short_block_forced&&(b[L]=0)}function q1(m,b,w){for(var L=m.internal_flags,C=0;C<L.channels_out;C++){var E=c.NORM_TYPE;b[C]!=0?(R0(L.blocktype_old[C]!=c.START_TYPE),L.blocktype_old[C]==c.SHORT_TYPE&&(E=c.STOP_TYPE)):(E=c.SHORT_TYPE,L.blocktype_old[C]==c.NORM_TYPE&&(L.blocktype_old[C]=c.START_TYPE),L.blocktype_old[C]==c.STOP_TYPE&&(L.blocktype_old[C]=c.SHORT_TYPE)),w[C]=L.blocktype_old[C],L.blocktype_old[C]=E}}function N1(m,b,w,L,C,E,k){for(var q=E*2,O=E>0?Math.pow(10,C):1,U,D,j=0;j<k;++j){var v0=m[2][j],c0=m[3][j],J=b[0][j],b0=b[1][j],Z=b[2][j],u0=b[3][j];if(J<=1.58*b0&&b0<=1.58*J){var x0=w[j]*c0,g=w[j]*v0;D=Math.max(Z,Math.min(u0,x0)),U=Math.max(u0,Math.min(Z,g))}else D=Z,U=u0;if(E>0){var m0,e0,d0=L[j]*O;if(m0=Math.min(Math.max(J,d0),Math.max(b0,d0)),Z=Math.max(D,d0),u0=Math.max(U,d0),e0=Z+u0,e0>0&&m0*q<e0){var L0=m0*q/e0;Z*=L0,u0*=L0}D=Math.min(Z,D),U=Math.min(u0,U)}D>v0&&(D=v0),U>c0&&(U=c0),b[2][j]=D,b[3][j]=U}}this.L3psycho_anal_vbr=function(m,b,w,L,C,E,k,q,O,U){var D=m.internal_flags,j,v0,c0=D0(c.HBLKSIZE),J=_1([3,c.HBLKSIZE_s]),b0=_1([2,c.BLKSIZE]),Z=_1([2,3,c.BLKSIZE_s]),u0=_1([4,c.CBANDS]),x0=_1([4,c.CBANDS]),g=_1([4,3]),m0=.6,e0=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],d0=V1(2),L0=m.mode==P0.JOINT_STEREO?4:D.channels_out;H0(m,b,w,L,C,E,O,g,e0,d0),u1(m,d0);{for(var h0=0;h0<L0;h0++){var A0=h0&1;j=b0,w0(m,b,w,h0,L,c0,j,A0),B0(m,L,h0,c0),d0[A0]!=0?J0(D,c0,u0[h0],x0[h0],h0):K0(D,h0)}d0[0]+d0[1]==2&&m.mode==P0.JOINT_STEREO&&N1(u0,x0,D.mld_cb_l,D.ATH.cb_l,m.ATHlower*D.ATH.adjust,m.msfix,D.npart_l);for(var h0=0;h0<L0;h0++){var A0=h0&1;d0[A0]!=0&&r(D,u0[h0],x0[h0],h0)}}{for(var M0=0;M0<3;M0++){for(var h0=0;h0<L0;++h0){var A0=h0&1;d0[A0]!=0?Y0(D,h0,M0):(v0=Z,Z0(m,b,w,h0,M0,J,v0,A0),o1(m,J,u0[h0],x0[h0],h0,M0))}d0[0]+d0[1]==0&&m.mode==P0.JOINT_STEREO&&N1(u0,x0,D.mld_cb_s,D.ATH.cb_s,m.ATHlower*D.ATH.adjust,m.msfix,D.npart_s);for(var h0=0;h0<L0;++h0){var A0=h0&1;d0[A0]==0&&H(D,u0[h0],x0[h0],h0,M0)}}for(var h0=0;h0<L0;h0++){var A0=h0&1;if(d0[A0]==0)for(var O0=0;O0<c.SBMAX_s;O0++){for(var s1=D0(3),M0=0;M0<3;M0++){var q0=D.thm[h0].s[O0][M0];if(q0*=p,e0[h0][M0]>=2||e0[h0][M0+1]==1){var C0=M0!=0?M0-1:2,g0=Q(D.thm[h0].s[O0][C0],q0,W*m0);q0=Math.min(q0,g0)}else if(e0[h0][M0]==1){var C0=M0!=0?M0-1:2,g0=Q(D.thm[h0].s[O0][C0],q0,d*m0);q0=Math.min(q0,g0)}else if(M0!=0&&e0[h0][M0-1]==3||M0==0&&D.nsPsy.lastAttacks[h0]==3){var C0=M0!=2?M0+1:0,g0=Q(D.thm[h0].s[O0][C0],q0,d*m0);q0=Math.min(q0,g0)}q0*=g[h0][M0],s1[M0]=q0}for(var M0=0;M0<3;M0++)D.thm[h0].s[O0][M0]=s1[M0]}}}for(var h0=0;h0<L0;h0++)D.nsPsy.lastAttacks[h0]=e0[h0][2];q1(m,d0,U);for(var h0=0;h0<L0;h0++){var i1,n1,f1,m1;h0>1?(i1=q,n1=-2,f1=c.NORM_TYPE,(U[0]==c.SHORT_TYPE||U[1]==c.SHORT_TYPE)&&(f1=c.SHORT_TYPE),m1=E[L][h0-2]):(i1=k,n1=0,f1=U[h0],m1=C[L][h0]),f1==c.SHORT_TYPE?i1[n1+h0]=l0(m1,D.masking_lower):i1[n1+h0]=_0(m1,D.masking_lower),m.analysis&&(D.pinfo.pe[L][h0]=i1[n1+h0])}return 0};function r1(m,b){var w=m,L;return w>=0?L=-w*27:L=w*b,L<=-72?0:Math.exp(L*e)}function D1(m){var b=0,w=0;{var L=0,C,E;for(L=0;r1(L,m)>1e-20;L-=1);for(C=L,E=0;Math.abs(E-C)>1e-12;)L=(E+C)/2,r1(L,m)>0?E=L:C=L;b=C}{var L=0,C,E;for(L=0;r1(L,m)>1e-20;L+=1);for(C=0,E=L;Math.abs(E-C)>1e-12;)L=(E+C)/2,r1(L,m)>0?C=L:E=L;w=E}{var k=0,q=1e3,O;for(O=0;O<=q;++O){var L=b+O*(w-b)/q,U=r1(L,m);k+=U}{var D=(q+1)/(k*(w-b));return D}}}function T1(m){var b,w,L,C;return b=m,b>=0?b*=3:b*=1.5,b>=.5&&b<=2.5?(C=b-.5,w=8*(C*C-2*C)):w=0,b+=.474,L=15.811389+7.5*b-17.5*Math.sqrt(1+b*b),L<=-60?0:(b=Math.exp((w+L)*e),b/=.6609193,b)}function t1(m){return m<0&&(m=0),m=m*.001,13*Math.atan(.76*m)+3.5*Math.atan(m*m/(7.5*7.5))}function W1(m,b,w,L,C,E,k,q,O,U,D,j){var v0=D0(c.CBANDS+1),c0=q/(j>15?2*576:2*192),J=V1(c.HBLKSIZE),b0;q/=O;var Z=0,u0=0;for(b0=0;b0<c.CBANDS;b0++){var x0,g;for(x0=t1(q*Z),v0[b0]=q*Z,g=Z;t1(q*g)-x0<K&&g<=O/2;g++);for(m[b0]=g-Z,u0=b0+1;Z<g;)J[Z++]=b0;if(Z>O/2){Z=O/2,++b0;break}}v0[b0]=q*Z;for(var m0=0;m0<j;m0++){var e0,d0,L0,h0,A0;L0=U[m0],h0=U[m0+1],e0=0|Math.floor(.5+D*(L0-.5)),e0<0&&(e0=0),d0=0|Math.floor(.5+D*(h0-.5)),d0>O/2&&(d0=O/2),w[m0]=(J[e0]+J[d0])/2,b[m0]=J[d0];var M0=c0*h0;k[m0]=(M0-v0[b[m0]])/(v0[b[m0]+1]-v0[b[m0]]),k[m0]<0?k[m0]=0:k[m0]>1&&(k[m0]=1),A0=t1(q*U[m0]*D),A0=Math.min(A0,15.5)/15.5,E[m0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*A0))-2.5)}Z=0;for(var O0=0;O0<u0;O0++){var s1=m[O0],x0,q0;x0=t1(q*Z),q0=t1(q*(Z+s1-1)),L[O0]=.5*(x0+q0),x0=t1(q*(Z-.5)),q0=t1(q*(Z+s1-.5)),C[O0]=q0-x0,Z+=s1}return u0}function Sa(m,b,w,L,C,E){var k=_1([c.CBANDS,c.CBANDS]),q,O=0;if(E)for(var U=0;U<b;U++)for(q=0;q<b;q++){var D=T1(w[U]-w[q])*L[q];k[U][q]=D*C[U]}else for(q=0;q<b;q++)for(var j=15+Math.min(21/w[q],12),v0=D1(j),U=0;U<b;U++){var D=v0*r1(w[U]-w[q],j)*L[q];k[U][q]=D*C[U]}for(var U=0;U<b;U++){for(q=0;q<b&&!(k[U][q]>0);q++);for(m[U][0]=q,q=b-1;q>0&&!(k[U][q]>0);q--);m[U][1]=q,O+=m[U][1]-m[U][0]+1}for(var c0=D0(O),J=0,U=0;U<b;U++)for(q=m[U][0];q<=m[U][1];q++)c0[J++]=k[U][q];return c0}function Aa(m){var b=t1(m);return b=Math.min(b,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*b))-2.5)}this.psymodel_init=function(m){var b=m.internal_flags,w,L=!0,C=13,E=24,k=0,q=0,O=-8.25,U=-4.5,D=D0(c.CBANDS),j=D0(c.CBANDS),v0=D0(c.CBANDS),c0=m.out_samplerate;switch(m.experimentalZ){default:case 0:L=!0;break;case 1:L=!(m.VBR==K1.vbr_mtrh||m.VBR==K1.vbr_mt);break;case 2:L=!1;break;case 3:C=8,k=-1.75,q=-.0125,O=-8.25,U=-2.25;break}for(b.ms_ener_ratio_old=.25,b.blocktype_old[0]=b.blocktype_old[1]=c.NORM_TYPE,w=0;w<4;++w){for(var Z=0;Z<c.CBANDS;++Z)b.nb_1[w][Z]=1e20,b.nb_2[w][Z]=1e20,b.nb_s1[w][Z]=b.nb_s2[w][Z]=1;for(var J=0;J<c.SBMAX_l;J++)b.en[w].l[J]=1e20,b.thm[w].l[J]=1e20;for(var Z=0;Z<3;++Z){for(var J=0;J<c.SBMAX_s;J++)b.en[w].s[J][Z]=1e20,b.thm[w].s[J][Z]=1e20;b.nsPsy.lastAttacks[w]=0}for(var Z=0;Z<9;Z++)b.nsPsy.last_en_subshort[w][Z]=10}for(b.loudness_sq_save[0]=b.loudness_sq_save[1]=0,b.npart_l=W1(b.numlines_l,b.bo_l,b.bm_l,D,j,b.mld_l,b.PSY.bo_l_weight,c0,c.BLKSIZE,b.scalefac_band.l,c.BLKSIZE/(2*576),c.SBMAX_l),R0(b.npart_l<c.CBANDS),w=0;w<b.npart_l;w++){var b0=k;D[w]>=C&&(b0=q*(D[w]-C)/(E-C)+k*(E-D[w])/(E-C)),v0[w]=Math.pow(10,b0/10),b.numlines_l[w]>0?b.rnumlines_l[w]=1/b.numlines_l[w]:b.rnumlines_l[w]=0}b.s3_ll=Sa(b.s3ind,b.npart_l,D,j,v0,L);var Z=0;for(w=0;w<b.npart_l;w++){var u0;u0=aa.MAX_VALUE;for(var x0=0;x0<b.numlines_l[w];x0++,Z++){var g=c0*Z/(1e3*c.BLKSIZE),m0;m0=this.ATHformula(g*1e3,m)-20,m0=Math.pow(10,.1*m0),m0*=b.numlines_l[w],u0>m0&&(u0=m0)}b.ATH.cb_l[w]=u0,u0=-20+D[w]*20/10,u0>6&&(u0=100),u0<-15&&(u0=-15),u0-=8,b.minval_l[w]=Math.pow(10,u0/10)*b.numlines_l[w]}for(b.npart_s=W1(b.numlines_s,b.bo_s,b.bm_s,D,j,b.mld_s,b.PSY.bo_s_weight,c0,c.BLKSIZE_s,b.scalefac_band.s,c.BLKSIZE_s/(2*192),c.SBMAX_s),R0(b.npart_s<c.CBANDS),Z=0,w=0;w<b.npart_s;w++){var u0,b0=O;D[w]>=C&&(b0=U*(D[w]-C)/(E-C)+O*(E-D[w])/(E-C)),v0[w]=Math.pow(10,b0/10),u0=aa.MAX_VALUE;for(var x0=0;x0<b.numlines_s[w];x0++,Z++){var g=c0*Z/(1e3*c.BLKSIZE_s),m0;m0=this.ATHformula(g*1e3,m)-20,m0=Math.pow(10,.1*m0),m0*=b.numlines_s[w],u0>m0&&(u0=m0)}b.ATH.cb_s[w]=u0,u0=-7+D[w]*7/12,D[w]>12&&(u0*=1+Math.log(1+u0)*3.1),D[w]<12&&(u0*=1+Math.log(1-u0)*2.3),u0<-15&&(u0=-15),u0-=8,b.minval_s[w]=Math.pow(10,u0/10)*b.numlines_s[w]}b.s3_ss=Sa(b.s3ind_s,b.npart_s,D,j,v0,L),o(),M.init_fft(b),b.decay=Math.exp(-1*F/(s0*c0/192));{var e0;e0=A,m.exp_nspsytune&2&&(e0=1),Math.abs(m.msfix)>0&&(e0=m.msfix),m.msfix=e0;for(var d0=0;d0<b.npart_l;d0++)b.s3ind[d0][1]>b.npart_l-1&&(b.s3ind[d0][1]=b.npart_l-1)}var L0=576*b.mode_gr/c0;if(b.ATH.decay=Math.pow(10,-12/10*L0),b.ATH.adjust=.01,b.ATH.adjustLimit=1,R0(b.bo_l[c.SBMAX_l-1]<=b.npart_l),R0(b.bo_s[c.SBMAX_s-1]<=b.npart_s),m.ATHtype!=-1){var g,h0=m.out_samplerate/c.BLKSIZE,A0=0;for(g=0,w=0;w<c.BLKSIZE/2;++w)g+=h0,b.ATH.eql_w[w]=1/Math.pow(10,this.ATHformula(g,m)/10),A0+=b.ATH.eql_w[w];for(A0=1/A0,w=c.BLKSIZE/2;--w>=0;)b.ATH.eql_w[w]*=A0}{for(var d0=Z=0;d0<b.npart_s;++d0)for(w=0;w<b.numlines_s[d0];++w)++Z;for(var d0=Z=0;d0<b.npart_l;++d0)for(w=0;w<b.numlines_l[d0];++w)++Z}for(Z=0,w=0;w<b.npart_l;w++){var g=c0*(Z+b.numlines_l[w]/2)/(1*c.BLKSIZE);b.mld_cb_l[w]=Aa(g),Z+=b.numlines_l[w]}for(;w<c.CBANDS;++w)b.mld_cb_l[w]=1;for(Z=0,w=0;w<b.npart_s;w++){var g=c0*(Z+b.numlines_s[w]/2)/(1*c.BLKSIZE_s);b.mld_cb_s[w]=Aa(g),Z+=b.numlines_s[w]}for(;w<c.CBANDS;++w)b.mld_cb_s[w]=1;return 0};function z1(m,b){m<-.3&&(m=3410),m/=1e3,m=Math.max(.1,m);var w=3.64*Math.pow(m,-.8)-6.8*Math.exp(-.6*Math.pow(m-3.4,2))+6*Math.exp(-.15*Math.pow(m-8.7,2))+(.6+.04*b)*.001*Math.pow(m,4);return w}this.ATHformula=function(m,b){var w;switch(b.ATHtype){case 0:w=z1(m,9);break;case 1:w=z1(m,-1);break;case 2:w=z1(m,0);break;case 3:w=z1(m,1)+6;break;case 4:w=z1(m,b.ATHcurve);break;default:w=z1(m,0);break}return w}}var Te=Ka;function v1(M){var F=M;this.ordinal=function(){return F}}v1.STEREO=new v1(0),v1.JOINT_STEREO=new v1(1),v1.DUAL_CHANNEL=new v1(2),v1.MONO=new v1(3),v1.NOT_SET=new v1(4);var ra=v1;function Qa(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=ra.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var Ua=Qa,ta={};ta.SFBMAX=c.SBMAX_s*3;var H1=ta,ja=o0.new_float,O1=o0.new_int;function Wa(){this.xr=ja(576),this.l3_enc=O1(576),this.scalefac=O1(H1.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=O1(3),this.subblock_gain=O1(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=O1(H1.SFBMAX),this.window=O1(H1.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=O1(4),this.max_nonzero_coeff=0;var M=this;function F(X){return new Int32Array(X)}function P(X){return new Float32Array(X)}this.assign=function(X){M.xr=P(X.xr),M.l3_enc=F(X.l3_enc),M.scalefac=F(X.scalefac),M.xrpow_max=X.xrpow_max,M.part2_3_length=X.part2_3_length,M.big_values=X.big_values,M.count1=X.count1,M.global_gain=X.global_gain,M.scalefac_compress=X.scalefac_compress,M.block_type=X.block_type,M.mixed_block_flag=X.mixed_block_flag,M.table_select=F(X.table_select),M.subblock_gain=F(X.subblock_gain),M.region0_count=X.region0_count,M.region1_count=X.region1_count,M.preflag=X.preflag,M.scalefac_scale=X.scalefac_scale,M.count1table_select=X.count1table_select,M.part2_length=X.part2_length,M.sfb_lmax=X.sfb_lmax,M.sfb_smin=X.sfb_smin,M.psy_lmax=X.psy_lmax,M.sfbmax=X.sfbmax,M.psymax=X.psymax,M.sfbdivide=X.sfbdivide,M.width=F(X.width),M.window=F(X.window),M.count1bits=X.count1bits,M.sfb_partition_table=X.sfb_partition_table.slice(0),M.slen=F(X.slen),M.max_nonzero_coeff=X.max_nonzero_coeff}}var me=Wa,sa=o0.new_int;function za(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[sa(4),sa(4)];for(var M=0;M<2;M++)for(var F=0;F<2;F++)this.tt[M][F]=new me}var Ja=za,be=o0.System,ce=o0.new_int;function ga(M,F,P,X){this.l=ce(1+c.SBMAX_l),this.s=ce(1+c.SBMAX_s),this.psfb21=ce(1+c.PSFB21),this.psfb12=ce(1+c.PSFB12);var z=this.l,Y=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],be.arraycopy(this.arrL,0,z,0,Math.min(this.arrL.length,this.l.length)),be.arraycopy(this.arrS,0,Y,0,Math.min(this.arrS.length,this.s.length)),be.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),be.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var c1=ga,ye=o0.new_float,e2=o0.new_float_n,a2=o0.new_int;function r2(){this.last_en_subshort=e2([4,9]),this.lastAttacks=a2(4),this.pefirbuf=ye(19),this.longfact=ye(c.SBMAX_l),this.shortfact=ye(c.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var t2=r2;function s2(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var i2=s2,n2=o0.new_byte,_2=o0.new_double,l1=o0.new_float,C1=o0.new_float_n,h1=o0.new_int,de=o0.new_int_n;M1.MFSIZE=3*1152+c.ENCDELAY-c.MDCTDELAY,M1.MAX_HEADER_BUF=256,M1.MAX_BITS_PER_CHANNEL=4095,M1.MAX_BITS_PER_GRANULE=7680,M1.BPC=320;function M1(){var M=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=C1([2,M1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new Ja,this.ms_ratio=l1(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=h1(2),this.CurrentStep=h1(2),this.masking_lower=0,this.bv_scf=h1(576),this.pseudohalf=h1(H1.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*M1.BPC+1),this.itime=_2(2),this.sideinfo_len=0,this.sb_sample=C1([2,2,18,c.SBLIMIT]),this.amp_filter=l1(32);function F(){this.write_timing=0,this.ptr=0,this.buf=n2(M)}this.header=new Array(M1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new c1,this.minval_l=l1(c.CBANDS),this.minval_s=l1(c.CBANDS),this.nb_1=C1([4,c.CBANDS]),this.nb_2=C1([4,c.CBANDS]),this.nb_s1=C1([4,c.CBANDS]),this.nb_s2=C1([4,c.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=l1(4),this.loudness_sq=C1([2,2]),this.loudness_sq_save=l1(2),this.mld_l=l1(c.SBMAX_l),this.mld_s=l1(c.SBMAX_s),this.bm_l=h1(c.SBMAX_l),this.bo_l=h1(c.SBMAX_l),this.bm_s=h1(c.SBMAX_s),this.bo_s=h1(c.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=de([c.CBANDS,2]),this.s3ind_s=de([c.CBANDS,2]),this.numlines_s=h1(c.CBANDS),this.numlines_l=h1(c.CBANDS),this.rnumlines_l=l1(c.CBANDS),this.mld_cb_l=l1(c.CBANDS),this.mld_cb_s=l1(c.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=l1(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=h1(2),this.nsPsy=new t2,this.VBR_seek_table=new i2,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=de([16,4+1]),this.bitrate_blockType_Hist=de([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var P=0;P<this.en.length;P++)this.en[P]=new he;for(var P=0;P<this.thm.length;P++)this.thm[P]=new he;for(var P=0;P<this.header.length;P++)this.header[P]=new F}var N0=M1,k1=o0.new_float;function l2(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=k1(c.SBMAX_l),this.s=k1(c.SBMAX_s),this.psfb21=k1(c.PSFB21),this.psfb12=k1(c.PSFB12),this.cb_l=k1(c.CBANDS),this.cb_s=k1(c.CBANDS),this.eql_w=k1(c.BLKSIZE/2)}var o2=l2,z0=o0.System,ia=o0.Arrays;X0.STEPS_per_dB=100,X0.MAX_dB=120,X0.GAIN_NOT_ENOUGH_SAMPLES=-24601,X0.GAIN_ANALYSIS_ERROR=0,X0.GAIN_ANALYSIS_OK=1,X0.INIT_GAIN_ANALYSIS_ERROR=0,X0.INIT_GAIN_ANALYSIS_OK=1,X0.YULE_ORDER=10,X0.MAX_ORDER=X0.YULE_ORDER,X0.MAX_SAMP_FREQ=48e3,X0.RMS_WINDOW_TIME_NUMERATOR=1,X0.RMS_WINDOW_TIME_DENOMINATOR=20,X0.MAX_SAMPLES_PER_WINDOW=X0.MAX_SAMP_FREQ*X0.RMS_WINDOW_TIME_NUMERATOR/X0.RMS_WINDOW_TIME_DENOMINATOR+1;function X0(){var M=64.82,F=.95,P=X0.RMS_WINDOW_TIME_NUMERATOR,X=X0.RMS_WINDOW_TIME_DENOMINATOR,z=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],Y=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function K(d,A,T,e,V,N){for(;V--!=0;)T[e]=1e-10+d[A+0]*N[0]-T[e-1]*N[1]+d[A-1]*N[2]-T[e-2]*N[3]+d[A-2]*N[4]-T[e-3]*N[5]+d[A-3]*N[6]-T[e-4]*N[7]+d[A-4]*N[8]-T[e-5]*N[9]+d[A-5]*N[10]-T[e-6]*N[11]+d[A-6]*N[12]-T[e-7]*N[13]+d[A-7]*N[14]-T[e-8]*N[15]+d[A-8]*N[16]-T[e-9]*N[17]+d[A-9]*N[18]-T[e-10]*N[19]+d[A-10]*N[20],++e,++A}function r0(d,A,T,e,V,N){for(;V--!=0;)T[e]=d[A+0]*N[0]-T[e-1]*N[1]+d[A-1]*N[2]-T[e-2]*N[3]+d[A-2]*N[4],++e,++A}function s0(d,A){for(var T=0;T<MAX_ORDER;T++)d.linprebuf[T]=d.lstepbuf[T]=d.loutbuf[T]=d.rinprebuf[T]=d.rstepbuf[T]=d.routbuf[T]=0;switch(0|A){case 48e3:d.reqindex=0;break;case 44100:d.reqindex=1;break;case 32e3:d.reqindex=2;break;case 24e3:d.reqindex=3;break;case 22050:d.reqindex=4;break;case 16e3:d.reqindex=5;break;case 12e3:d.reqindex=6;break;case 11025:d.reqindex=7;break;case 8e3:d.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return d.sampleWindow=0|(A*P+X-1)/X,d.lsum=0,d.rsum=0,d.totsamp=0,ia.ill(d.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(d,A){return s0(d,A)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(d.linpre=MAX_ORDER,d.rinpre=MAX_ORDER,d.lstep=MAX_ORDER,d.rstep=MAX_ORDER,d.lout=MAX_ORDER,d.rout=MAX_ORDER,ia.fill(d.B,0),INIT_GAIN_ANALYSIS_OK)};function p(d){return d*d}this.AnalyzeSamples=function(d,A,T,e,V,N,y){var s,f,S,x,B,a,u;if(N==0)return GAIN_ANALYSIS_OK;switch(u=0,B=N,y){case 1:e=A,V=T;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(N<MAX_ORDER?(z0.arraycopy(A,T,d.linprebuf,MAX_ORDER,N),z0.arraycopy(e,V,d.rinprebuf,MAX_ORDER,N)):(z0.arraycopy(A,T,d.linprebuf,MAX_ORDER,MAX_ORDER),z0.arraycopy(e,V,d.rinprebuf,MAX_ORDER,MAX_ORDER));B>0;){a=B>d.sampleWindow-d.totsamp?d.sampleWindow-d.totsamp:B,u<MAX_ORDER?(s=d.linpre+u,f=d.linprebuf,S=d.rinpre+u,x=d.rinprebuf,a>MAX_ORDER-u&&(a=MAX_ORDER-u)):(s=T+u,f=A,S=V+u,x=e),K(f,s,d.lstepbuf,d.lstep+d.totsamp,a,z[d.reqindex]),K(x,S,d.rstepbuf,d.rstep+d.totsamp,a,z[d.reqindex]),r0(d.lstepbuf,d.lstep+d.totsamp,d.loutbuf,d.lout+d.totsamp,a,Y[d.reqindex]),r0(d.rstepbuf,d.rstep+d.totsamp,d.routbuf,d.rout+d.totsamp,a,Y[d.reqindex]),s=d.lout+d.totsamp,f=d.loutbuf,S=d.rout+d.totsamp,x=d.routbuf;for(var o=a%8;o--!=0;)d.lsum+=p(f[s++]),d.rsum+=p(x[S++]);for(o=a/8;o--!=0;)d.lsum+=p(f[s+0])+p(f[s+1])+p(f[s+2])+p(f[s+3])+p(f[s+4])+p(f[s+5])+p(f[s+6])+p(f[s+7]),s+=8,d.rsum+=p(x[S+0])+p(x[S+1])+p(x[S+2])+p(x[S+3])+p(x[S+4])+p(x[S+5])+p(x[S+6])+p(x[S+7]),S+=8;if(B-=a,u+=a,d.totsamp+=a,d.totsamp==d.sampleWindow){var i=X0.STEPS_per_dB*10*Math.log10((d.lsum+d.rsum)/d.totsamp*.5+1e-37),v=i<=0?0:0|i;v>=d.A.length&&(v=d.A.length-1),d.A[v]++,d.lsum=d.rsum=0,z0.arraycopy(d.loutbuf,d.totsamp,d.loutbuf,0,MAX_ORDER),z0.arraycopy(d.routbuf,d.totsamp,d.routbuf,0,MAX_ORDER),z0.arraycopy(d.lstepbuf,d.totsamp,d.lstepbuf,0,MAX_ORDER),z0.arraycopy(d.rstepbuf,d.totsamp,d.rstepbuf,0,MAX_ORDER),d.totsamp=0}if(d.totsamp>d.sampleWindow)return GAIN_ANALYSIS_ERROR}return N<MAX_ORDER?(z0.arraycopy(d.linprebuf,N,d.linprebuf,0,MAX_ORDER-N),z0.arraycopy(d.rinprebuf,N,d.rinprebuf,0,MAX_ORDER-N),z0.arraycopy(A,T,d.linprebuf,MAX_ORDER-N,N),z0.arraycopy(e,V,d.rinprebuf,MAX_ORDER-N,N)):(z0.arraycopy(A,T+N-MAX_ORDER,d.linprebuf,0,MAX_ORDER),z0.arraycopy(e,V+N-MAX_ORDER,d.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function W(d,A){var T,e=0;for(T=0;T<A;T++)e+=d[T];if(e==0)return GAIN_NOT_ENOUGH_SAMPLES;var V=0|Math.ceil(e*(1-F));for(T=A;T-- >0&&!((V-=d[T])<=0););return M-T/X0.STEPS_per_dB}this.GetTitleGain=function(d){for(var A=W(d.A,d.A.length),T=0;T<d.A.length;T++)d.B[T]+=d.A[T],d.A[T]=0;for(var T=0;T<MAX_ORDER;T++)d.linprebuf[T]=d.lstepbuf[T]=d.loutbuf[T]=d.rinprebuf[T]=d.rstepbuf[T]=d.routbuf[T]=0;return d.totsamp=0,d.lsum=d.rsum=0,A}}var j0=X0,U1=o0.new_float,na=o0.new_int;function v2(){this.linprebuf=U1(j0.MAX_ORDER*2),this.linpre=0,this.lstepbuf=U1(j0.MAX_SAMPLES_PER_WINDOW+j0.MAX_ORDER),this.lstep=0,this.loutbuf=U1(j0.MAX_SAMPLES_PER_WINDOW+j0.MAX_ORDER),this.lout=0,this.rinprebuf=U1(j0.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=U1(j0.MAX_SAMPLES_PER_WINDOW+j0.MAX_ORDER),this.rstep=0,this.routbuf=U1(j0.MAX_SAMPLES_PER_WINDOW+j0.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=na(0|j0.STEPS_per_dB*j0.MAX_dB),this.B=na(0|j0.STEPS_per_dB*j0.MAX_dB)}var h2=v2;function u2(M){this.bits=M}var _a=u2,la=o0.new_float,f2=o0.new_int,oa=o0.assert;function m2(M){var F=M;this.quantize=F,this.iteration_loop=function(P,X,z,Y){var K=P.internal_flags,r0=la(H1.SFBMAX),s0=la(576),p=f2(2),W=0,d,A=K.l3_side,T=new _a(W);this.quantize.rv.ResvFrameBegin(P,T),W=T.bits;for(var e=0;e<K.mode_gr;e++){d=this.quantize.qupvt.on_pe(P,X,p,W,e,e),K.mode_ext==c.MPG_MD_MS_LR&&(this.quantize.ms_convert(K.l3_side,e),this.quantize.qupvt.reduce_side(p,z[e],W,d));for(var V=0;V<K.channels_out;V++){var N,y,s=A.tt[e][V];s.block_type!=c.SHORT_TYPE?(N=0,y=K.PSY.mask_adjust-N):(N=0,y=K.PSY.mask_adjust_short-N),K.masking_lower=Math.pow(10,y*.1),this.quantize.init_outer_loop(K,s),this.quantize.init_xrpow(K,s,s0)&&(this.quantize.qupvt.calc_xmin(P,Y[e][V],s,r0),this.quantize.outer_loop(P,s,r0,s0,V,p[V])),this.quantize.iteration_finish_one(K,e,V),oa(s.part2_3_length<=N0.MAX_BITS_PER_CHANNEL),oa(s.part2_3_length<=p[V])}}this.quantize.rv.ResvFrameEnd(K,W)}}var b2=m2;function y0(M,F,P,X){this.xlen=M,this.linmax=F,this.table=P,this.hlen=X}var a0={};a0.t1HB=[1,1,1,0],a0.t2HB=[1,2,1,3,1,1,3,2,0],a0.t3HB=[3,2,1,1,1,1,3,2,0],a0.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],a0.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],a0.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],a0.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],a0.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],a0.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],a0.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],a0.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],a0.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],a0.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],a0.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],a0.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],a0.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],a0.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],a0.t1l=[1,4,3,5],a0.t2l=[1,4,7,4,5,7,6,7,8],a0.t3l=[2,3,7,4,4,7,6,7,8],a0.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],a0.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],a0.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],a0.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],a0.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],a0.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],a0.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],a0.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],a0.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],a0.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],a0.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],a0.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],a0.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],a0.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4],a0.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4],a0.ht=[new y0(0,0,null,null),new y0(2,0,a0.t1HB,a0.t1l),new y0(3,0,a0.t2HB,a0.t2l),new y0(3,0,a0.t3HB,a0.t3l),new y0(0,0,null,null),new y0(4,0,a0.t5HB,a0.t5l),new y0(4,0,a0.t6HB,a0.t6l),new y0(6,0,a0.t7HB,a0.t7l),new y0(6,0,a0.t8HB,a0.t8l),new y0(6,0,a0.t9HB,a0.t9l),new y0(8,0,a0.t10HB,a0.t10l),new y0(8,0,a0.t11HB,a0.t11l),new y0(8,0,a0.t12HB,a0.t12l),new y0(16,0,a0.t13HB,a0.t13l),new y0(0,0,null,a0.t16_5l),new y0(16,0,a0.t15HB,a0.t15l),new y0(1,1,a0.t16HB,a0.t16l),new y0(2,3,a0.t16HB,a0.t16l),new y0(3,7,a0.t16HB,a0.t16l),new y0(4,15,a0.t16HB,a0.t16l),new y0(6,63,a0.t16HB,a0.t16l),new y0(8,255,a0.t16HB,a0.t16l),new y0(10,1023,a0.t16HB,a0.t16l),new y0(13,8191,a0.t16HB,a0.t16l),new y0(4,15,a0.t24HB,a0.t24l),new y0(5,31,a0.t24HB,a0.t24l),new y0(6,63,a0.t24HB,a0.t24l),new y0(7,127,a0.t24HB,a0.t24l),new y0(8,255,a0.t24HB,a0.t24l),new y0(9,511,a0.t24HB,a0.t24l),new y0(11,2047,a0.t24HB,a0.t24l),new y0(13,8191,a0.t24HB,a0.t24l),new y0(0,0,a0.t32HB,a0.t32l),new y0(0,0,a0.t33HB,a0.t33l)],a0.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],a0.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],a0.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],a0.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],a0.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],a0.scfsi_band=[0,6,11,16,21];var T0=a0,F1=o0.VbrMode,Se=o0.Float,we=o0.Util,X1=o0.new_float,c2=o0.new_int,ee=o0.assert;E1.Q_MAX=256+1,E1.Q_MAX2=116,E1.LARGE_BITS=1e5,E1.IXMAX_VAL=8206;function E1(){var M=null,F=null,P=null;this.setModules=function(s,f,S){M=s,F=f,P=S};function X(s){return d[s+E1.Q_MAX2]}this.IPOW20=function(s){return A[s]};var z=2220446049250313e-31,Y=E1.IXMAX_VAL,K=Y+2,r0=E1.Q_MAX,s0=E1.Q_MAX2,p=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var W=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=W,this.sfBandIndex=[new c1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c1([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c1([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c1([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c1([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new c1([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var d=X1(r0+s0+1),A=X1(r0),T=X1(K),e=X1(K);this.adj43=e;function V(s,f){var S=P.ATHformula(f,s);return S-=p,S=Math.pow(10,S/10+s.ATHlower),S}function N(s){for(var f=s.internal_flags.ATH.l,S=s.internal_flags.ATH.psfb21,x=s.internal_flags.ATH.s,B=s.internal_flags.ATH.psfb12,a=s.internal_flags,u=s.out_samplerate,o=0;o<c.SBMAX_l;o++){var i=a.scalefac_band.l[o],v=a.scalefac_band.l[o+1];f[o]=Se.MAX_VALUE;for(var h=i;h<v;h++){var t=h*u/1152,n=V(s,t);f[o]=Math.min(f[o],n)}}for(var o=0;o<c.PSFB21;o++){var i=a.scalefac_band.psfb21[o],v=a.scalefac_band.psfb21[o+1];S[o]=Se.MAX_VALUE;for(var h=i;h<v;h++){var t=h*u/1152,n=V(s,t);S[o]=Math.min(S[o],n)}}for(var o=0;o<c.SBMAX_s;o++){var i=a.scalefac_band.s[o],v=a.scalefac_band.s[o+1];x[o]=Se.MAX_VALUE;for(var h=i;h<v;h++){var t=h*u/384,n=V(s,t);x[o]=Math.min(x[o],n)}x[o]*=a.scalefac_band.s[o+1]-a.scalefac_band.s[o]}for(var o=0;o<c.PSFB12;o++){var i=a.scalefac_band.psfb12[o],v=a.scalefac_band.psfb12[o+1];B[o]=Se.MAX_VALUE;for(var h=i;h<v;h++){var t=h*u/384,n=V(s,t);B[o]=Math.min(B[o],n)}B[o]*=a.scalefac_band.s[13]-a.scalefac_band.s[12]}if(s.noATH){for(var o=0;o<c.SBMAX_l;o++)f[o]=1e-20;for(var o=0;o<c.PSFB21;o++)S[o]=1e-20;for(var o=0;o<c.SBMAX_s;o++)x[o]=1e-20;for(var o=0;o<c.PSFB12;o++)B[o]=1e-20}a.ATH.floor=10*Math.log10(V(s,-1))}this.iteration_init=function(s){var f=s.internal_flags,S=f.l3_side,x;if(f.iteration_init_init==0){for(f.iteration_init_init=1,S.main_data_begin=0,N(s),T[0]=0,x=1;x<K;x++)T[x]=Math.pow(x,4/3);for(x=0;x<K-1;x++)e[x]=x+1-Math.pow(.5*(T[x]+T[x+1]),.75);for(e[x]=.5,x=0;x<r0;x++)A[x]=Math.pow(2,(x-210)*-.1875);for(x=0;x<=r0+s0;x++)d[x]=Math.pow(2,(x-210-s0)*.25);M.huffman_init(f);{var B,a,u,o;for(x=s.exp_nspsytune>>2&63,x>=32&&(x-=64),B=Math.pow(10,x/4/10),x=s.exp_nspsytune>>8&63,x>=32&&(x-=64),a=Math.pow(10,x/4/10),x=s.exp_nspsytune>>14&63,x>=32&&(x-=64),u=Math.pow(10,x/4/10),x=s.exp_nspsytune>>20&63,x>=32&&(x-=64),o=u*Math.pow(10,x/4/10),x=0;x<c.SBMAX_l;x++){var i;x<=6?i=B:x<=13?i=a:x<=20?i=u:i=o,f.nsPsy.longfact[x]=i}for(x=0;x<c.SBMAX_s;x++){var i;x<=5?i=B:x<=10?i=a:x<=11?i=u:i=o,f.nsPsy.shortfact[x]=i}}}},this.on_pe=function(s,f,S,x,B,a){var u=s.internal_flags,o=0,i,v=c2(2),h,t=new _a(o),n=F.ResvMaxBits(s,x,t,a);o=t.bits;var _=o+n;for(_>N0.MAX_BITS_PER_GRANULE&&(_=N0.MAX_BITS_PER_GRANULE),i=0,h=0;h<u.channels_out;++h)S[h]=Math.min(N0.MAX_BITS_PER_CHANNEL,o/u.channels_out),v[h]=0|S[h]*f[B][h]/700-S[h],v[h]>x*3/4&&(v[h]=x*3/4),v[h]<0&&(v[h]=0),v[h]+S[h]>N0.MAX_BITS_PER_CHANNEL&&(v[h]=Math.max(0,N0.MAX_BITS_PER_CHANNEL-S[h])),i+=v[h];if(i>n)for(h=0;h<u.channels_out;++h)v[h]=n*v[h]/i;for(h=0;h<u.channels_out;++h)S[h]+=v[h],n-=v[h];for(i=0,h=0;h<u.channels_out;++h)i+=S[h];if(i>N0.MAX_BITS_PER_GRANULE){var R=0;for(h=0;h<u.channels_out;++h)S[h]*=N0.MAX_BITS_PER_GRANULE,S[h]/=i,R+=S[h]}return _},this.reduce_side=function(s,f,S,x){ee(s[0]+s[1]<=N0.MAX_BITS_PER_GRANULE);var B=.33*(.5-f)/.5;B<0&&(B=0),B>.5&&(B=.5);var a=0|B*.5*(s[0]+s[1]);a>N0.MAX_BITS_PER_CHANNEL-s[0]&&(a=N0.MAX_BITS_PER_CHANNEL-s[0]),a<0&&(a=0),s[1]>=125&&(s[1]-a>125?(s[0]<S&&(s[0]+=a),s[1]-=a):(s[0]+=s[1]-125,s[1]=125)),a=s[0]+s[1],a>x&&(s[0]=x*s[0]/a,s[1]=x*s[1]/a),ee(s[0]<=N0.MAX_BITS_PER_CHANNEL),ee(s[1]<=N0.MAX_BITS_PER_CHANNEL),ee(s[0]+s[1]<=N0.MAX_BITS_PER_GRANULE)},this.athAdjust=function(s,f,S){var x=90.30873362,B=94.82444863,a=we.FAST_LOG10_X(f,10),u=s*s,o=0;return a-=S,u>1e-20&&(o=1+we.FAST_LOG10_X(u,10/x)),o<0&&(o=0),a*=o,a+=S+x-B,Math.pow(10,.1*a)},this.calc_xmin=function(s,f,S,x){var B=0,a=s.internal_flags,u,o=0,i=0,v=a.ATH,h=S.xr,t=s.VBR==F1.vbr_mtrh?1:0,n=a.masking_lower;for((s.VBR==F1.vbr_mtrh||s.VBR==F1.vbr_mt)&&(n=1),u=0;u<S.psy_lmax;u++){var _,R,G,I,H,r;s.VBR==F1.vbr_rh||s.VBR==F1.vbr_mtrh?R=athAdjust(v.adjust,v.l[u],v.floor):R=v.adjust*v.l[u],H=S.width[u],G=R/H,I=z,r=H>>1,_=0;do{var l,$;l=h[o]*h[o],_+=l,I+=l<G?l:G,o++,$=h[o]*h[o],_+=$,I+=$<G?$:G,o++}while(--r>0);if(_>R&&i++,u==c.SBPSY_l){var Q=R*a.nsPsy.longfact[u];I<Q&&(I=Q)}if(t!=0&&(R=I),!s.ATHonly){var t0=f.en.l[u];if(t0>0){var Q;Q=_*f.thm.l[u]*n/t0,t!=0&&(Q*=a.nsPsy.longfact[u]),R<Q&&(R=Q)}}t!=0?x[B++]=R:x[B++]=R*a.nsPsy.longfact[u]}var l0=575;if(S.block_type!=c.SHORT_TYPE)for(var i0=576;i0--!=0&&B1.EQ(h[i0],0);)l0=i0;S.max_nonzero_coeff=l0;for(var _0=S.sfb_smin;u<S.psymax;_0++,u+=3){var H,S0,f0;for(s.VBR==F1.vbr_rh||s.VBR==F1.vbr_mtrh?f0=athAdjust(v.adjust,v.s[_0],v.floor):f0=v.adjust*v.s[_0],H=S.width[u],S0=0;S0<3;S0++){var _=0,R,G,I,r=H>>1;G=f0/H,I=z;do{var l,$;l=h[o]*h[o],_+=l,I+=l<G?l:G,o++,$=h[o]*h[o],_+=$,I+=$<G?$:G,o++}while(--r>0);if(_>f0&&i++,_0==c.SBPSY_s){var Q=f0*a.nsPsy.shortfact[_0];I<Q&&(I=Q)}if(t!=0?R=I:R=f0,!s.ATHonly&&!s.ATHshort){var t0=f.en.s[_0][S0];if(t0>0){var Q;Q=_*f.thm.s[_0][S0]*n/t0,t!=0&&(Q*=a.nsPsy.shortfact[_0]),R<Q&&(R=Q)}}t!=0?x[B++]=R:x[B++]=R*a.nsPsy.shortfact[_0]}s.useTemporal&&(x[B-3]>x[B-3+1]&&(x[B-3+1]+=(x[B-3]-x[B-3+1])*a.decay),x[B-3+1]>x[B-3+2]&&(x[B-3+2]+=(x[B-3+1]-x[B-3+2])*a.decay))}return i};function y(s){this.s=s}this.calc_noise_core=function(s,f,S,x){var B=0,a=f.s,u=s.l3_enc;if(a>s.count1)for(;S--!=0;){var o;o=s.xr[a],a++,B+=o*o,o=s.xr[a],a++,B+=o*o}else if(a>s.big_values){var i=X1(2);for(i[0]=0,i[1]=x;S--!=0;){var o;o=Math.abs(s.xr[a])-i[u[a]],a++,B+=o*o,o=Math.abs(s.xr[a])-i[u[a]],a++,B+=o*o}}else for(;S--!=0;){var o;o=Math.abs(s.xr[a])-T[u[a]]*x,a++,B+=o*o,o=Math.abs(s.xr[a])-T[u[a]]*x,a++,B+=o*o}return f.s=a,B},this.calc_noise=function(s,f,S,x,B){var a=0,u=0,o,i,v=0,h=0,t=0,n=-20,_=0,R=s.scalefac,G=0;for(x.over_SSD=0,o=0;o<s.psymax;o++){var I=s.global_gain-(R[G++]+(s.preflag!=0?W[o]:0)<<s.scalefac_scale+1)-s.subblock_gain[s.window[o]]*8,H=0;if(B!=null&&B.step[o]==I)H=B.noise[o],_+=s.width[o],S[a++]=H/f[u++],H=B.noise_log[o];else{var r=X(I);if(i=s.width[o]>>1,_+s.width[o]>s.max_nonzero_coeff){var l;l=s.max_nonzero_coeff-_+1,l>0?i=l>>1:i=0}var $=new y(_);H=this.calc_noise_core(s,$,i,r),_=$.s,B!=null&&(B.step[o]=I,B.noise[o]=H),H=S[a++]=H/f[u++],H=we.FAST_LOG10(Math.max(H,1e-20)),B!=null&&(B.noise_log[o]=H)}if(B!=null&&(B.global_gain=s.global_gain),t+=H,H>0){var Q;Q=Math.max(0|H*10+.5,1),x.over_SSD+=Q*Q,v++,h+=H}n=Math.max(n,H)}return x.over_count=v,x.tot_noise=t,x.over_noise=h,x.max_noise=n,v},this.set_pinfo=function(s,f,S,x,B){var a=s.internal_flags,u,o,i,v,h,t=f.scalefac_scale==0?.5:1,n=f.scalefac,_=X1(L3Side.SFBMAX),R=X1(L3Side.SFBMAX),G=new CalcNoiseResult;calc_xmin(s,S,f,_),calc_noise(f,_,R,G,null);var I=0;for(o=f.sfb_lmax,f.block_type!=c.SHORT_TYPE&&f.mixed_block_flag==0&&(o=22),u=0;u<o;u++){var H=a.scalefac_band.l[u],r=a.scalefac_band.l[u+1],l=r-H;for(v=0;I<r;I++)v+=f.xr[I]*f.xr[I];v/=l,h=1e15,a.pinfo.en[x][B][u]=h*v,a.pinfo.xfsf[x][B][u]=h*_[u]*R[u]/l,S.en.l[u]>0&&!s.ATHonly?v=v/S.en.l[u]:v=0,a.pinfo.thr[x][B][u]=h*Math.max(v*S.thm.l[u],a.ATH.l[u]),a.pinfo.LAMEsfb[x][B][u]=0,f.preflag!=0&&u>=11&&(a.pinfo.LAMEsfb[x][B][u]=-t*W[u]),u<c.SBPSY_l&&(ee(n[u]>=0),a.pinfo.LAMEsfb[x][B][u]-=t*n[u])}if(f.block_type==c.SHORT_TYPE)for(o=u,u=f.sfb_smin;u<c.SBMAX_s;u++)for(var H=a.scalefac_band.s[u],r=a.scalefac_band.s[u+1],l=r-H,$=0;$<3;$++){for(v=0,i=H;i<r;i++)v+=f.xr[I]*f.xr[I],I++;v=Math.max(v/l,1e-20),h=1e15,a.pinfo.en_s[x][B][3*u+$]=h*v,a.pinfo.xfsf_s[x][B][3*u+$]=h*_[o]*R[o]/l,S.en.s[u][$]>0?v=v/S.en.s[u][$]:v=0,(s.ATHonly||s.ATHshort)&&(v=0),a.pinfo.thr_s[x][B][3*u+$]=h*Math.max(v*S.thm.s[u][$],a.ATH.s[u]),a.pinfo.LAMEsfb_s[x][B][3*u+$]=-2*f.subblock_gain[$],u<c.SBPSY_s&&(a.pinfo.LAMEsfb_s[x][B][3*u+$]-=t*n[o]),o++}a.pinfo.LAMEqss[x][B]=f.global_gain,a.pinfo.LAMEmainbits[x][B]=f.part2_3_length+f.part2_length,a.pinfo.LAMEsfbits[x][B]=f.part2_length,a.pinfo.over[x][B]=G.over_count,a.pinfo.max_noise[x][B]=G.max_noise*10,a.pinfo.over_noise[x][B]=G.over_noise*10,a.pinfo.tot_noise[x][B]=G.tot_noise*10,a.pinfo.over_SSD[x][B]=G.over_SSD}}var w1=E1,d2=o0.System,S2=o0.Arrays,ae=o0.new_int,Ie=o0.assert;function pe(){var M=null;this.qupvt=null,this.setModules=function(i){this.qupvt=i,M=i};function F(i){this.bits=0|i}var P=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function X(i,v,h,t,n,_){var R=.5946/v;for(i=i>>1;i--!=0;)n[_++]=R>h[t++]?0:1,n[_++]=R>h[t++]?0:1}function z(i,v,h,t,n,_){i=i>>1;var R=i%2;for(i=i>>1;i--!=0;){var G,I,H,r,l,$,Q,t0;G=h[t++]*v,I=h[t++]*v,l=0|G,H=h[t++]*v,$=0|I,r=h[t++]*v,Q=0|H,G+=M.adj43[l],t0=0|r,I+=M.adj43[$],n[_++]=0|G,H+=M.adj43[Q],n[_++]=0|I,r+=M.adj43[t0],n[_++]=0|H,n[_++]=0|r}if(R!=0){var G,I,l,$;G=h[t++]*v,I=h[t++]*v,l=0|G,$=0|I,G+=M.adj43[l],I+=M.adj43[$],n[_++]=0|G,n[_++]=0|I}}function Y(i,v,h,t,n){var _,R,G=0,I,H=0,r=0,l=0,$=v,Q=0,t0=$,l0=0,i0=i,_0=0;for(I=n!=null&&t.global_gain==n.global_gain,t.block_type==c.SHORT_TYPE?R=38:R=21,_=0;_<=R;_++){var S0=-1;if((I||t.block_type==c.NORM_TYPE)&&(S0=t.global_gain-(t.scalefac[_]+(t.preflag!=0?M.pretab[_]:0)<<t.scalefac_scale+1)-t.subblock_gain[t.window[_]]*8),Ie(t.width[_]>=0),I&&n.step[_]==S0)H!=0&&(z(H,h,i0,_0,t0,l0),H=0),r!=0&&(X(r,h,i0,_0,t0,l0),r=0);else{var f0=t.width[_];if(G+t.width[_]>t.max_nonzero_coeff){var n0;n0=t.max_nonzero_coeff-G+1,S2.fill(v,t.max_nonzero_coeff,576,0),f0=n0,f0<0&&(f0=0),_=R+1}if(H==0&&r==0&&(t0=$,l0=Q,i0=i,_0=l),n!=null&&n.sfb_count1>0&&_>=n.sfb_count1&&n.step[_]>0&&S0>=n.step[_]?(H!=0&&(z(H,h,i0,_0,t0,l0),H=0,t0=$,l0=Q,i0=i,_0=l),r+=f0):(r!=0&&(X(r,h,i0,_0,t0,l0),r=0,t0=$,l0=Q,i0=i,_0=l),H+=f0),f0<=0){r!=0&&(X(r,h,i0,_0,t0,l0),r=0),H!=0&&(z(H,h,i0,_0,t0,l0),H=0);break}}_<=R&&(Q+=t.width[_],l+=t.width[_],G+=t.width[_])}H!=0&&(z(H,h,i0,_0,t0,l0),H=0),r!=0&&(X(r,h,i0,_0,t0,l0),r=0)}function K(i,v,h){var t=0,n=0;do{var _=i[v++],R=i[v++];t<_&&(t=_),n<R&&(n=R)}while(v<h);return t<n&&(t=n),t}function r0(i,v,h,t,n,_){var R=T0.ht[t].xlen*65536+T0.ht[n].xlen,G=0,I;do{var H=i[v++],r=i[v++];H!=0&&(H>14&&(H=15,G+=R),H*=16),r!=0&&(r>14&&(r=15,G+=R),H+=r),G+=T0.largetbl[H]}while(v<h);return I=G&65535,G>>=16,G>I&&(G=I,t=n),_.bits+=G,t}function s0(i,v,h,t){var n=0,_=T0.ht[1].hlen;do{var R=i[v+0]*2+i[v+1];v+=2,n+=_[R]}while(v<h);return t.bits+=n,1}function p(i,v,h,t,n){var _=0,R,G=T0.ht[t].xlen,I;t==2?I=T0.table23:I=T0.table56;do{var H=i[v+0]*G+i[v+1];v+=2,_+=I[H]}while(v<h);return R=_&65535,_>>=16,_>R&&(_=R,t++),n.bits+=_,t}function W(i,v,h,t,n){var _=0,R=0,G=0,I=T0.ht[t].xlen,H=T0.ht[t].hlen,r=T0.ht[t+1].hlen,l=T0.ht[t+2].hlen;do{var $=i[v+0]*I+i[v+1];v+=2,_+=H[$],R+=r[$],G+=l[$]}while(v<h);var Q=t;return _>R&&(_=R,Q++),_>G&&(_=G,Q=t+2),n.bits+=_,Q}var d=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function A(i,v,h,t){var n=K(i,v,h);switch(n){case 0:return n;case 1:return s0(i,v,h,t);case 2:case 3:return p(i,v,h,d[n-1],t);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return W(i,v,h,d[n-1],t);default:if(n>w1.IXMAX_VAL)return t.bits=w1.LARGE_BITS,-1;n-=15;var _;for(_=24;_<32&&!(T0.ht[_].linmax>=n);_++);var R;for(R=_-8;R<24&&!(T0.ht[R].linmax>=n);R++);return r0(i,v,h,R,_,t)}}this.noquant_count_bits=function(i,v,h){var t=v.l3_enc,n=Math.min(576,v.max_nonzero_coeff+2>>1<<1);for(h!=null&&(h.sfb_count1=0);n>1&&!(t[n-1]|t[n-2]);n-=2);v.count1=n;for(var _=0,R=0;n>3;n-=4){var G;if(((t[n-1]|t[n-2]|t[n-3]|t[n-4])&2147483647)>1)break;G=((t[n-4]*2+t[n-3])*2+t[n-2])*2+t[n-1],_+=T0.t32l[G],R+=T0.t33l[G]}var I=_;if(v.count1table_select=0,_>R&&(I=R,v.count1table_select=1),v.count1bits=I,v.big_values=n,n==0)return I;if(v.block_type==c.SHORT_TYPE)_=3*i.scalefac_band.s[3],_>v.big_values&&(_=v.big_values),R=v.big_values;else if(v.block_type==c.NORM_TYPE){if(_=v.region0_count=i.bv_scf[n-2],R=v.region1_count=i.bv_scf[n-1],R=i.scalefac_band.l[_+R+2],_=i.scalefac_band.l[_+1],R<n){var H=new F(I);v.table_select[2]=A(t,R,n,H),I=H.bits}}else v.region0_count=7,v.region1_count=c.SBMAX_l-1-7-1,_=i.scalefac_band.l[7+1],R=n,_>R&&(_=R);if(_=Math.min(_,n),R=Math.min(R,n),0<_){var H=new F(I);v.table_select[0]=A(t,0,_,H),I=H.bits}if(_<R){var H=new F(I);v.table_select[1]=A(t,_,R,H),I=H.bits}if(i.use_best_huffman==2&&(v.part2_3_length=I,best_huffman_divide(i,v),I=v.part2_3_length),h!=null&&v.block_type==c.NORM_TYPE){for(var r=0;i.scalefac_band.l[r]<v.big_values;)r++;h.sfb_count1=r}return I},this.count_bits=function(i,v,h,t){var n=h.l3_enc,_=w1.IXMAX_VAL/M.IPOW20(h.global_gain);if(h.xrpow_max>_)return w1.LARGE_BITS;if(Y(v,n,M.IPOW20(h.global_gain),h,t),i.substep_shaping&2)for(var R=0,G=h.global_gain+h.scalefac_scale,I=.634521682242439/M.IPOW20(G),H=0;H<h.sfbmax;H++){var r=h.width[H];if(i.pseudohalf[H]==0)R+=r;else{var l;for(l=R,R+=r;l<R;++l)n[l]=v[l]>=I?n[l]:0}}return this.noquant_count_bits(i,h,t)};function T(i,v,h,t,n,_,R){for(var G=v.big_values,I=0;I<=7+15;I++)t[I]=w1.LARGE_BITS;for(var I=0;I<16;I++){var H=i.scalefac_band.l[I+1];if(H>=G)break;var r=0,l=new F(r),$=A(h,0,H,l);r=l.bits;for(var Q=0;Q<8;Q++){var t0=i.scalefac_band.l[I+Q+2];if(t0>=G)break;var l0=r;l=new F(l0);var i0=A(h,H,t0,l);l0=l.bits,t[I+Q]>l0&&(t[I+Q]=l0,n[I+Q]=I,_[I+Q]=$,R[I+Q]=i0)}}}function e(i,v,h,t,n,_,R,G){for(var I=v.big_values,H=2;H<c.SBMAX_l+1;H++){var r=i.scalefac_band.l[H];if(r>=I)break;var l=n[H-2]+v.count1bits;if(h.part2_3_length<=l)break;var $=new F(l),Q=A(t,r,I,$);l=$.bits,!(h.part2_3_length<=l)&&(h.assign(v),h.part2_3_length=l,h.region0_count=_[H-2],h.region1_count=H-2-_[H-2],h.table_select[0]=R[H-2],h.table_select[1]=G[H-2],h.table_select[2]=Q)}}this.best_huffman_divide=function(i,v){var h=new me,t=v.l3_enc,n=ae(7+15+1),_=ae(7+15+1),R=ae(7+15+1),G=ae(7+15+1);if(!(v.block_type==c.SHORT_TYPE&&i.mode_gr==1)){h.assign(v),v.block_type==c.NORM_TYPE&&(T(i,v,t,n,_,R,G),e(i,h,v,t,n,_,R,G));var I=h.big_values;if(!(I==0||(t[I-2]|t[I-1])>1)&&(I=v.count1+2,!(I>576))){h.assign(v),h.count1=I;for(var H=0,r=0;I>h.big_values;I-=4){var l=((t[I-4]*2+t[I-3])*2+t[I-2])*2+t[I-1];H+=T0.t32l[l],r+=T0.t33l[l]}if(h.big_values=I,h.count1table_select=0,H>r&&(H=r,h.count1table_select=1),h.count1bits=H,h.block_type==c.NORM_TYPE)e(i,h,v,t,n,_,R,G);else{if(h.part2_3_length=H,H=i.scalefac_band.l[7+1],H>I&&(H=I),H>0){var $=new F(h.part2_3_length);h.table_select[0]=A(t,0,H,$),h.part2_3_length=$.bits}if(I>H){var $=new F(h.part2_3_length);h.table_select[1]=A(t,H,I,$),h.part2_3_length=$.bits}v.part2_3_length>h.part2_3_length&&v.assign(h)}}}};var V=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],N=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],y=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],s=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];pe.slen1_tab=y,pe.slen2_tab=s;function f(i,v){for(var h,t=v.tt[1][i],n=v.tt[0][i],_=0;_<T0.scfsi_band.length-1;_++){for(h=T0.scfsi_band[_];h<T0.scfsi_band[_+1]&&!(n.scalefac[h]!=t.scalefac[h]&&t.scalefac[h]>=0);h++);if(h==T0.scfsi_band[_+1]){for(h=T0.scfsi_band[_];h<T0.scfsi_band[_+1];h++)t.scalefac[h]=-1;v.scfsi[i][_]=1}}var R=0,G=0;for(h=0;h<11;h++)t.scalefac[h]!=-1&&(G++,R<t.scalefac[h]&&(R=t.scalefac[h]));for(var I=0,H=0;h<c.SBPSY_l;h++)t.scalefac[h]!=-1&&(H++,I<t.scalefac[h]&&(I=t.scalefac[h]));for(var _=0;_<16;_++)if(R<V[_]&&I<N[_]){var r=y[_]*G+s[_]*H;t.part2_length>r&&(t.part2_length=r,t.scalefac_compress=_)}}this.best_scalefac_store=function(i,v,h,t){var n=t.tt[v][h],_,R,G,I,H=0;for(G=0,_=0;_<n.sfbmax;_++){var r=n.width[_];for(G+=r,I=-r;I<0&&n.l3_enc[I+G]==0;I++);I==0&&(n.scalefac[_]=H=-2)}if(n.scalefac_scale==0&&n.preflag==0){var l=0;for(_=0;_<n.sfbmax;_++)n.scalefac[_]>0&&(l|=n.scalefac[_]);if(!(l&1)&&l!=0){for(_=0;_<n.sfbmax;_++)n.scalefac[_]>0&&(n.scalefac[_]>>=1);n.scalefac_scale=H=1}}if(n.preflag==0&&n.block_type!=c.SHORT_TYPE&&i.mode_gr==2){for(_=11;_<c.SBPSY_l&&!(n.scalefac[_]<M.pretab[_]&&n.scalefac[_]!=-2);_++);if(_==c.SBPSY_l){for(_=11;_<c.SBPSY_l;_++)n.scalefac[_]>0&&(n.scalefac[_]-=M.pretab[_]);n.preflag=H=1}}for(R=0;R<4;R++)t.scfsi[h][R]=0;for(i.mode_gr==2&&v==1&&t.tt[0][h].block_type!=c.SHORT_TYPE&&t.tt[1][h].block_type!=c.SHORT_TYPE&&(f(h,t),H=0),_=0;_<n.sfbmax;_++)n.scalefac[_]==-2&&(n.scalefac[_]=0);H!=0&&(i.mode_gr==2?this.scale_bitcount(n):this.scale_bitcount_lsf(i,n))};function S(i,v){for(var h=0;h<v;++h)if(i[h]<0)return!1;return!0}var x=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],B=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],a=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(i){var v,h,t=0,n=0,_,R=i.scalefac;if(Ie(S(R,i.sfbmax)),i.block_type==c.SHORT_TYPE)_=x,i.mixed_block_flag!=0&&(_=B);else if(_=a,i.preflag==0){for(h=11;h<c.SBPSY_l&&!(R[h]<M.pretab[h]);h++);if(h==c.SBPSY_l)for(i.preflag=1,h=11;h<c.SBPSY_l;h++)R[h]-=M.pretab[h]}for(h=0;h<i.sfbdivide;h++)t<R[h]&&(t=R[h]);for(;h<i.sfbmax;h++)n<R[h]&&(n=R[h]);for(i.part2_length=w1.LARGE_BITS,v=0;v<16;v++)t<V[v]&&n<N[v]&&i.part2_length>_[v]&&(i.part2_length=_[v],i.scalefac_compress=v);return i.part2_length==w1.LARGE_BITS};var u=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(i,v){var h,t,n,_,R,G,I,H,r=ae(4),l=v.scalefac;for(v.preflag!=0?h=2:h=0,I=0;I<4;I++)r[I]=0;if(v.block_type==c.SHORT_TYPE){t=1;var $=M.nr_of_sfb_block[h][t];for(H=0,n=0;n<4;n++)for(_=$[n]/3,I=0;I<_;I++,H++)for(R=0;R<3;R++)l[H*3+R]>r[n]&&(r[n]=l[H*3+R])}else{t=0;var $=M.nr_of_sfb_block[h][t];for(H=0,n=0;n<4;n++)for(_=$[n],I=0;I<_;I++,H++)l[H]>r[n]&&(r[n]=l[H])}for(G=!1,n=0;n<4;n++)r[n]>u[h][n]&&(G=!0);if(!G){var Q,t0,l0,i0;for(v.sfb_partition_table=M.nr_of_sfb_block[h][t],n=0;n<4;n++)v.slen[n]=o[r[n]];switch(Q=v.slen[0],t0=v.slen[1],l0=v.slen[2],i0=v.slen[3],h){case 0:v.scalefac_compress=(Q*5+t0<<4)+(l0<<2)+i0;break;case 1:v.scalefac_compress=400+(Q*5+t0<<2)+l0;break;case 2:v.scalefac_compress=500+Q*3+t0;break;default:d2.err.printf(`intensity stereo not implemented yet
`);break}}if(!G)for(Ie(v.sfb_partition_table!=null),v.part2_length=0,n=0;n<4;n++)v.part2_length+=v.slen[n]*v.sfb_partition_table[n];return G};var o=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(i){for(var v=2;v<=576;v+=2){for(var h=0,t;i.scalefac_band.l[++h]<v;);for(t=P[h][0];i.scalefac_band.l[t+1]>v;)t--;for(t<0&&(t=P[h][0]),i.bv_scf[v-2]=t,t=P[h][1];i.scalefac_band.l[t+i.bv_scf[v-2]+2]>v;)t--;t<0&&(t=P[h][1]),i.bv_scf[v-1]=t}}}var Le=pe,d1=o0.System,A2=o0.Arrays,x2=o0.new_byte,R2=o0.new_float_n,M2=o0.new_int,G0=o0.assert;Ae.EQ=function(M,F){return Math.abs(M)>Math.abs(F)?Math.abs(M-F)<=Math.abs(M)*1e-6:Math.abs(M-F)<=Math.abs(F)*1e-6},Ae.NEQ=function(M,F){return!Ae.EQ(M,F)};function Ae(){var M=this,F=32773,P=null,X=null,z=null,Y=null;this.setModules=function(u,o,i,v){P=u,X=o,z=i,Y=v};var K=null,r0=0,s0=0,p=0;this.getframebits=function(u){var o=u.internal_flags,i;o.bitrate_index!=0?i=T0.bitrate_table[u.version][o.bitrate_index]:i=u.brate;var v=0|(u.version+1)*72e3*i/u.out_samplerate+o.padding;return 8*v};function W(u){d1.arraycopy(u.header[u.w_ptr].buf,0,K,s0,u.sideinfo_len),s0+=u.sideinfo_len,r0+=u.sideinfo_len*8,u.w_ptr=u.w_ptr+1&N0.MAX_HEADER_BUF-1}function d(u,o,i){for(;i>0;){var v;p==0&&(p=8,s0++,G0(u.header[u.w_ptr].write_timing>=r0),u.header[u.w_ptr].write_timing==r0&&W(u),K[s0]=0),v=Math.min(i,p),i-=v,p-=v,K[s0]|=o>>i<<p,r0+=v}}function A(u,o,i){for(;i>0;){var v;p==0&&(p=8,s0++,K[s0]=0),v=Math.min(i,p),i-=v,p-=v,K[s0]|=o>>i<<p,r0+=v}}function T(u,o){var i=u.internal_flags,v;if(o>=8&&(d(i,76,8),o-=8),o>=8&&(d(i,65,8),o-=8),o>=8&&(d(i,77,8),o-=8),o>=8&&(d(i,69,8),o-=8),o>=32){var h=z.getLameShortVersion();if(o>=32)for(v=0;v<h.length&&o>=8;++v)o-=8,d(i,h.charAt(v),8)}for(;o>=1;o-=1)d(i,i.ancillary_flag,1),i.ancillary_flag^=u.disable_reservoir?0:1}function e(u,o,i){for(var v=u.header[u.h_ptr].ptr;i>0;){var h=Math.min(i,8-(v&7));i-=h,u.header[u.h_ptr].buf[v>>3]|=o>>i<<8-(v&7)-h,v+=h}u.header[u.h_ptr].ptr=v}function V(u,o){u<<=8;for(var i=0;i<8;i++)u<<=1,o<<=1,(o^u)&65536&&(o^=F);return o}this.CRC_writeheader=function(u,o){var i=65535;i=V(o[2]&255,i),i=V(o[3]&255,i);for(var v=6;v<u.sideinfo_len;v++)i=V(o[v]&255,i);o[4]=byte(i>>8),o[5]=byte(i&255)};function N(u,o){var i=u.internal_flags,v,h,t;if(v=i.l3_side,i.header[i.h_ptr].ptr=0,A2.fill(i.header[i.h_ptr].buf,0,i.sideinfo_len,0),u.out_samplerate<16e3?e(i,4094,12):e(i,4095,12),e(i,u.version,1),e(i,4-3,2),e(i,u.error_protection?0:1,1),e(i,i.bitrate_index,4),e(i,i.samplerate_index,2),e(i,i.padding,1),e(i,u.extension,1),e(i,u.mode.ordinal(),2),e(i,i.mode_ext,2),e(i,u.copyright,1),e(i,u.original,1),e(i,u.emphasis,2),u.error_protection&&e(i,0,16),u.version==1){for(G0(v.main_data_begin>=0),e(i,v.main_data_begin,9),i.channels_out==2?e(i,v.private_bits,3):e(i,v.private_bits,5),t=0;t<i.channels_out;t++){var n;for(n=0;n<4;n++)e(i,v.scfsi[t][n],1)}for(h=0;h<2;h++)for(t=0;t<i.channels_out;t++){var _=v.tt[h][t];e(i,_.part2_3_length+_.part2_length,12),e(i,_.big_values/2,9),e(i,_.global_gain,8),e(i,_.scalefac_compress,4),_.block_type!=c.NORM_TYPE?(e(i,1,1),e(i,_.block_type,2),e(i,_.mixed_block_flag,1),_.table_select[0]==14&&(_.table_select[0]=16),e(i,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),e(i,_.table_select[1],5),e(i,_.subblock_gain[0],3),e(i,_.subblock_gain[1],3),e(i,_.subblock_gain[2],3)):(e(i,0,1),_.table_select[0]==14&&(_.table_select[0]=16),e(i,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),e(i,_.table_select[1],5),_.table_select[2]==14&&(_.table_select[2]=16),e(i,_.table_select[2],5),G0(0<=_.region0_count&&_.region0_count<16),G0(0<=_.region1_count&&_.region1_count<8),e(i,_.region0_count,4),e(i,_.region1_count,3)),e(i,_.preflag,1),e(i,_.scalefac_scale,1),e(i,_.count1table_select,1)}}else for(G0(v.main_data_begin>=0),e(i,v.main_data_begin,8),e(i,v.private_bits,i.channels_out),h=0,t=0;t<i.channels_out;t++){var _=v.tt[h][t];e(i,_.part2_3_length+_.part2_length,12),e(i,_.big_values/2,9),e(i,_.global_gain,8),e(i,_.scalefac_compress,9),_.block_type!=c.NORM_TYPE?(e(i,1,1),e(i,_.block_type,2),e(i,_.mixed_block_flag,1),_.table_select[0]==14&&(_.table_select[0]=16),e(i,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),e(i,_.table_select[1],5),e(i,_.subblock_gain[0],3),e(i,_.subblock_gain[1],3),e(i,_.subblock_gain[2],3)):(e(i,0,1),_.table_select[0]==14&&(_.table_select[0]=16),e(i,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),e(i,_.table_select[1],5),_.table_select[2]==14&&(_.table_select[2]=16),e(i,_.table_select[2],5),G0(0<=_.region0_count&&_.region0_count<16),G0(0<=_.region1_count&&_.region1_count<8),e(i,_.region0_count,4),e(i,_.region1_count,3)),e(i,_.scalefac_scale,1),e(i,_.count1table_select,1)}u.error_protection&&CRC_writeheader(i,i.header[i.h_ptr].buf);{var R=i.h_ptr;G0(i.header[R].ptr==i.sideinfo_len*8),i.h_ptr=R+1&N0.MAX_HEADER_BUF-1,i.header[i.h_ptr].write_timing=i.header[R].write_timing+o,i.h_ptr==i.w_ptr&&d1.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function y(u,o){var i=T0.ht[o.count1table_select+32],v,h=0,t=o.big_values,n=o.big_values;for(G0(o.count1table_select<2),v=(o.count1-o.big_values)/4;v>0;--v){var _=0,R=0,G;G=o.l3_enc[t+0],G!=0&&(R+=8,o.xr[n+0]<0&&_++),G=o.l3_enc[t+1],G!=0&&(R+=4,_*=2,o.xr[n+1]<0&&_++),G=o.l3_enc[t+2],G!=0&&(R+=2,_*=2,o.xr[n+2]<0&&_++),G=o.l3_enc[t+3],G!=0&&(R++,_*=2,o.xr[n+3]<0&&_++),t+=4,n+=4,d(u,_+i.table[R],i.hlen[R]),h+=i.hlen[R]}return h}function s(u,o,i,v,h){var t=T0.ht[o],n=0;if(o==0)return n;for(var _=i;_<v;_+=2){var R=0,G=0,I=t.xlen,H=t.xlen,r=0,l=h.l3_enc[_],$=h.l3_enc[_+1];if(l!=0&&(h.xr[_]<0&&r++,R--),o>15){if(l>14){var Q=l-15;G0(Q<=t.linmax),r|=Q<<1,G=I,l=15}if($>14){var t0=$-15;G0(t0<=t.linmax),r<<=I,r|=t0,G+=I,$=15}H=16}$!=0&&(r<<=1,h.xr[_+1]<0&&r++,R--),l=l*H+$,G-=R,R+=t.hlen[l],d(u,t.table[l],R),d(u,r,G),n+=R+G}return n}function f(u,o){var i=3*u.scalefac_band.s[3];i>o.big_values&&(i=o.big_values);var v=s(u,o.table_select[0],0,i,o);return v+=s(u,o.table_select[1],i,o.big_values,o),v}function S(u,o){var i,v,h,t;i=o.big_values;var n=o.region0_count+1;return G0(n<u.scalefac_band.l.length),h=u.scalefac_band.l[n],n+=o.region1_count+1,G0(n<u.scalefac_band.l.length),t=u.scalefac_band.l[n],h>i&&(h=i),t>i&&(t=i),v=s(u,o.table_select[0],0,h,o),v+=s(u,o.table_select[1],h,t,o),v+=s(u,o.table_select[2],t,i,o),v}function x(u){var o,i,v,h,t=0,n=u.internal_flags,_=n.l3_side;if(u.version==1)for(o=0;o<2;o++)for(i=0;i<n.channels_out;i++){var R=_.tt[o][i],G=Le.slen1_tab[R.scalefac_compress],I=Le.slen2_tab[R.scalefac_compress];for(h=0,v=0;v<R.sfbdivide;v++)R.scalefac[v]!=-1&&(d(n,R.scalefac[v],G),h+=G);for(;v<R.sfbmax;v++)R.scalefac[v]!=-1&&(d(n,R.scalefac[v],I),h+=I);G0(h==R.part2_length),R.block_type==c.SHORT_TYPE?h+=f(n,R):h+=S(n,R),h+=y(n,R),G0(h==R.part2_3_length+R.part2_length),t+=h}else for(o=0,i=0;i<n.channels_out;i++){var R=_.tt[o][i],H,r,l=0;if(G0(R.sfb_partition_table!=null),h=0,v=0,r=0,R.block_type==c.SHORT_TYPE){for(;r<4;r++){var $=R.sfb_partition_table[r]/3,Q=R.slen[r];for(H=0;H<$;H++,v++)d(n,Math.max(R.scalefac[v*3+0],0),Q),d(n,Math.max(R.scalefac[v*3+1],0),Q),d(n,Math.max(R.scalefac[v*3+2],0),Q),l+=3*Q}h+=f(n,R)}else{for(;r<4;r++){var $=R.sfb_partition_table[r],Q=R.slen[r];for(H=0;H<$;H++,v++)d(n,Math.max(R.scalefac[v],0),Q),l+=Q}h+=S(n,R)}h+=y(n,R),G0(h==R.part2_3_length),G0(l==R.part2_length),t+=l+h}return t}function B(){this.total=0}function a(u,o){var i=u.internal_flags,v,h,t,n,_;return _=i.w_ptr,n=i.h_ptr-1,n==-1&&(n=N0.MAX_HEADER_BUF-1),v=i.header[n].write_timing-r0,o.total=v,v>=0&&(h=1+n-_,n<_&&(h=1+n-_+N0.MAX_HEADER_BUF),v-=h*8*i.sideinfo_len),t=M.getframebits(u),v+=t,o.total+=t,o.total%8!=0?o.total=1+o.total/8:o.total=o.total/8,o.total+=s0+1,v<0&&d1.err.println(`strange error flushing buffer ... 
`),v}this.flush_bitstream=function(u){var o=u.internal_flags,i,v,h=o.h_ptr-1;if(h==-1&&(h=N0.MAX_HEADER_BUF-1),i=o.l3_side,!((v=a(u,new B))<0)){if(T(u,v),G0(o.header[h].write_timing+this.getframebits(u)==r0),o.ResvSize=0,i.main_data_begin=0,o.findReplayGain){var t=P.GetTitleGain(o.rgdata);G0(NEQ(t,ie.GAIN_NOT_ENOUGH_SAMPLES)),o.RadioGain=Math.floor(t*10+.5)|0}o.findPeakSample&&(o.noclipGainChange=Math.ceil(Math.log10(o.PeakSample/32767)*20*10)|0,o.noclipGainChange>0&&(EQ(u.scale,1)||EQ(u.scale,0))?o.noclipScale=Math.floor(32767/o.PeakSample*100)/100:o.noclipScale=-1)}},this.add_dummy_byte=function(u,o,i){for(var v=u.internal_flags,h;i-- >0;)for(A(v,o,8),h=0;h<N0.MAX_HEADER_BUF;++h)v.header[h].write_timing+=8},this.format_bitstream=function(u){var o=u.internal_flags,i;i=o.l3_side;var v=this.getframebits(u);T(u,i.resvDrain_pre),N(u,v);var h=8*o.sideinfo_len;if(h+=x(u),T(u,i.resvDrain_post),h+=i.resvDrain_post,i.main_data_begin+=(v-h)/8,a(u,new B)!=o.ResvSize&&d1.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),i.main_data_begin*8!=o.ResvSize&&(d1.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*i.main_data_begin,o.ResvSize,i.resvDrain_post,i.resvDrain_pre,8*o.sideinfo_len,h-i.resvDrain_post-8*o.sideinfo_len,h,h%8,v),d1.err.println("This is a fatal error.  It has several possible causes:"),d1.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),d1.err.println(" 9%%  Your system is overclocked"),d1.err.println(" 1%%  bug in LAME encoding library"),o.ResvSize=i.main_data_begin*8),r0>1e9){var t;for(t=0;t<N0.MAX_HEADER_BUF;++t)o.header[t].write_timing-=r0;r0=0}return 0},this.copy_buffer=function(u,o,i,v,h){var t=s0+1;if(t<=0)return 0;if(v!=0&&t>v)return-1;if(d1.arraycopy(K,0,o,i,t),s0=-1,p=0,h!=0){var n=M2(1);if(n[0]=u.nMusicCRC,Y.updateMusicCRC(n,o,i,t),u.nMusicCRC=n[0],t>0&&(u.VBR_seek_table.nBytesWritten+=t),u.decode_on_the_fly){for(var _=R2([2,1152]),R=t,G=-1,I;G!=0;)if(G=X.hip_decode1_unclipped(u.hip,o,i,R,_[0],_[1]),R=0,G==-1&&(G=0),G>0){if(u.findPeakSample){for(I=0;I<G;I++)_[0][I]>u.PeakSample?u.PeakSample=_[0][I]:-_[0][I]>u.PeakSample&&(u.PeakSample=-_[0][I]);if(u.channels_out>1)for(I=0;I<G;I++)_[1][I]>u.PeakSample?u.PeakSample=_[1][I]:-_[1][I]>u.PeakSample&&(u.PeakSample=-_[1][I])}if(u.findReplayGain&&P.AnalyzeSamples(u.rgdata,_[0],0,_[1],0,G,u.channels_out)==ie.GAIN_ANALYSIS_ERROR)return-6}}}return t},this.init_bit_stream_w=function(u){K=x2(I0.LAME_MAXMP3BUFFER),u.h_ptr=u.w_ptr=0,u.header[u.h_ptr].write_timing=0,s0=-1,p=0,r0=0}}var I1=Ae,E2=o0.System,p0=o0.VbrMode,Ne=o0.ShortBlock,Y1=o0.new_float,va=o0.new_int_n,B2=o0.new_short_n,p1=o0.assert;function $0(){var M=this,F=128*1024;$0.V9=410,$0.V8=420,$0.V7=430,$0.V6=440,$0.V5=450,$0.V4=460,$0.V3=470,$0.V2=480,$0.V1=490,$0.V0=500,$0.R3MIX=1e3,$0.STANDARD=1001,$0.EXTREME=1002,$0.INSANE=1003,$0.STANDARD_FAST=1004,$0.EXTREME_FAST=1005,$0.MEDIUM=1006,$0.MEDIUM_FAST=1007;var P=16384+F;$0.LAME_MAXMP3BUFFER=P;var X,z,Y,K,r0,s0=new Te,p,W,d;this.enc=new c,this.setModules=function(r,l,$,Q,t0,l0,i0,_0,S0){X=r,z=l,Y=$,K=Q,r0=t0,p=l0,W=_0,d=S0,this.enc.setModules(z,s0,K,p)};function A(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=Y1(c.SBMAX_l),this.bo_s_weight=Y1(c.SBMAX_s)}function T(){this.lowerlimit=0}function e(r,l){this.lowpass=l}var V=4294479419;function N(r){var l;return r.class_id=V,l=r.internal_flags=new N0,r.mode=P0.NOT_SET,r.original=1,r.in_samplerate=44100,r.num_channels=2,r.num_samples=-1,r.bWriteVbrTag=!0,r.quality=-1,r.short_blocks=null,l.subblock_gain=-1,r.lowpassfreq=0,r.highpassfreq=0,r.lowpasswidth=-1,r.highpasswidth=-1,r.VBR=p0.vbr_off,r.VBR_q=4,r.ATHcurve=-1,r.VBR_mean_bitrate_kbps=128,r.VBR_min_bitrate_kbps=0,r.VBR_max_bitrate_kbps=0,r.VBR_hard_min=0,l.VBR_min_bitrate=1,l.VBR_max_bitrate=13,r.quant_comp=-1,r.quant_comp_short=-1,r.msfix=-1,l.resample_ratio=1,l.OldValue[0]=180,l.OldValue[1]=180,l.CurrentStep[0]=4,l.CurrentStep[1]=4,l.masking_lower=1,l.nsPsy.attackthre=-1,l.nsPsy.attackthre_s=-1,r.scale=-1,r.athaa_type=-1,r.ATHtype=-1,r.athaa_loudapprox=-1,r.athaa_sensitivity=0,r.useTemporal=null,r.interChRatio=-1,l.mf_samples_to_encode=c.ENCDELAY+c.POSTDELAY,r.encoder_padding=0,l.mf_size=c.ENCDELAY-c.MDCTDELAY,r.findReplayGain=!1,r.decode_on_the_fly=!1,l.decode_on_the_fly=!1,l.findReplayGain=!1,l.findPeakSample=!1,l.RadioGain=0,l.AudiophileGain=0,l.noclipGainChange=0,l.noclipScale=-1,r.preset=0,r.write_id3tag_automatic=!0,0}this.lame_init=function(){var r=new Ua;return N(r),r.lame_allocated_gfp=1,r};function y(r){return r>1?0:r<=0?1:Math.cos(Math.PI/2*r)}this.nearestBitrateFullIndex=function(r){var l=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],$=0,Q=0,t0=0,l0=0;l0=l[16],t0=16,Q=l[16],$=16;for(var i0=0;i0<16;i0++)if(Math.max(r,l[i0+1])!=r){l0=l[i0+1],t0=i0+1,Q=l[i0],$=i0;break}return l0-r>r-Q?$:t0};function s(r,l){var $=44100;return l>=48e3?$=48e3:l>=44100?$=44100:l>=32e3?$=32e3:l>=24e3?$=24e3:l>=22050?$=22050:l>=16e3?$=16e3:l>=12e3?$=12e3:l>=11025?$=11025:l>=8e3&&($=8e3),r==-1?$:(r<=15960&&($=44100),r<=15250&&($=32e3),r<=11220&&($=24e3),r<=9970&&($=22050),r<=7230&&($=16e3),r<=5420&&($=12e3),r<=4510&&($=11025),r<=3970&&($=8e3),l<$?l>44100?48e3:l>32e3?44100:l>24e3?32e3:l>22050?24e3:l>16e3?22050:l>12e3?16e3:l>11025?12e3:l>8e3?11025:8e3:$)}function f(r,l){switch(r){case 44100:return l.version=1,0;case 48e3:return l.version=1,1;case 32e3:return l.version=1,2;case 22050:return l.version=0,0;case 24e3:return l.version=0,1;case 16e3:return l.version=0,2;case 11025:return l.version=0,0;case 12e3:return l.version=0,1;case 8e3:return l.version=0,2;default:return l.version=0,-1}}function S(r,l,$){$<16e3&&(l=2);for(var Q=T0.bitrate_table[l][1],t0=2;t0<=14;t0++)T0.bitrate_table[l][t0]>0&&Math.abs(T0.bitrate_table[l][t0]-r)<Math.abs(Q-r)&&(Q=T0.bitrate_table[l][t0]);return Q}function x(r,l,$){$<16e3&&(l=2);for(var Q=0;Q<=14;Q++)if(T0.bitrate_table[l][Q]>0&&T0.bitrate_table[l][Q]==r)return Q;return-1}function B(r,l){var $=[new e(8,2e3),new e(16,3700),new e(24,3900),new e(32,5500),new e(40,7e3),new e(48,7500),new e(56,1e4),new e(64,11e3),new e(80,13500),new e(96,15100),new e(112,15600),new e(128,17e3),new e(160,17500),new e(192,18600),new e(224,19400),new e(256,19700),new e(320,20500)],Q=M.nearestBitrateFullIndex(l);r.lowerlimit=$[Q].lowpass}function a(r){var l=r.internal_flags,$=32,Q=-1;if(l.lowpass1>0){for(var t0=999,l0=0;l0<=31;l0++){var i0=l0/31;i0>=l.lowpass2&&($=Math.min($,l0)),l.lowpass1<i0&&i0<l.lowpass2&&(t0=Math.min(t0,l0))}t0==999?l.lowpass1=($-.75)/31:l.lowpass1=(t0-.75)/31,l.lowpass2=$/31}if(l.highpass2>0&&l.highpass2<.9*(.75/31)&&(l.highpass1=0,l.highpass2=0,E2.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),l.highpass2>0){for(var _0=-1,l0=0;l0<=31;l0++){var i0=l0/31;i0<=l.highpass1&&(Q=Math.max(Q,l0)),l.highpass1<i0&&i0<l.highpass2&&(_0=Math.max(_0,l0))}l.highpass1=Q/31,_0==-1?l.highpass2=(Q+.75)/31:l.highpass2=(_0+.75)/31}for(var l0=0;l0<32;l0++){var S0,f0,i0=l0/31;l.highpass2>l.highpass1?S0=y((l.highpass2-i0)/(l.highpass2-l.highpass1+1e-20)):S0=1,l.lowpass2>l.lowpass1?f0=y((i0-l.lowpass1)/(l.lowpass2-l.lowpass1+1e-20)):f0=1,l.amp_filter[l0]=S0*f0}}function u(r){var l=r.internal_flags;switch(r.quality){default:case 9:l.psymodel=0,l.noise_shaping=0,l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.use_best_huffman=0,l.full_outer_loop=0;break;case 8:r.quality=7;case 7:l.psymodel=1,l.noise_shaping=0,l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.use_best_huffman=0,l.full_outer_loop=0;break;case 6:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=0,l.full_outer_loop=0;break;case 5:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=0,l.full_outer_loop=0;break;case 4:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 3:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=1,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 2:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=1,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 1:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=2,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 0:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=2,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break}}function o(r){var l=r.internal_flags;r.frameNum=0,r.write_id3tag_automatic&&W.id3tag_write_v2(r),l.bitrate_stereoMode_Hist=va([16,4+1]),l.bitrate_blockType_Hist=va([16,4+1+1]),l.PeakSample=0,r.bWriteVbrTag&&p.InitVbrTag(r)}this.lame_init_params=function(r){var l=r.internal_flags;if(l.Class_ID=0,l.ATH==null&&(l.ATH=new o2),l.PSY==null&&(l.PSY=new A),l.rgdata==null&&(l.rgdata=new h2),l.channels_in=r.num_channels,l.channels_in==1&&(r.mode=P0.MONO),l.channels_out=r.mode==P0.MONO?1:2,l.mode_ext=c.MPG_MD_MS_LR,r.mode==P0.MONO&&(r.force_ms=!1),r.VBR==p0.vbr_off&&r.VBR_mean_bitrate_kbps!=128&&r.brate==0&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==p0.vbr_off||r.VBR==p0.vbr_mtrh||r.VBR==p0.vbr_mt||(r.free_format=!1),r.VBR==p0.vbr_off&&r.brate==0&&I1.EQ(r.compression_ratio,0)&&(r.compression_ratio=11.025),r.VBR==p0.vbr_off&&r.compression_ratio>0&&(r.out_samplerate==0&&(r.out_samplerate=map2MP3Frequency(int(.97*r.in_samplerate))),r.brate=0|r.out_samplerate*16*l.channels_out/(1e3*r.compression_ratio),l.samplerate_index=f(r.out_samplerate,r),r.free_format||(r.brate=S(r.brate,r.version,r.out_samplerate))),r.out_samplerate!=0&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),r.lowpassfreq==0){var $=16e3;switch(r.VBR){case p0.vbr_off:{var Q=new T;B(Q,r.brate),$=Q.lowerlimit;break}case p0.vbr_abr:{var Q=new T;B(Q,r.VBR_mean_bitrate_kbps),$=Q.lowerlimit;break}case p0.vbr_rh:{var t0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var l0=t0[r.VBR_q],i0=t0[r.VBR_q+1],_0=r.VBR_q_frac;$=linear_int(l0,i0,_0)}else $=19500;break}default:{var t0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var l0=t0[r.VBR_q],i0=t0[r.VBR_q+1],_0=r.VBR_q_frac;$=linear_int(l0,i0,_0)}else $=19500}}r.mode==P0.MONO&&(r.VBR==p0.vbr_off||r.VBR==p0.vbr_abr)&&($*=1.5),r.lowpassfreq=$|0}if(r.out_samplerate==0&&(2*r.lowpassfreq>r.in_samplerate&&(r.lowpassfreq=r.in_samplerate/2),r.out_samplerate=s(r.lowpassfreq|0,r.in_samplerate)),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==p0.vbr_off&&(r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.brate)),r.VBR==p0.vbr_abr&&(r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.VBR_mean_bitrate_kbps)),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,l.findPeakSample=!1),l.findReplayGain=r.findReplayGain,l.decode_on_the_fly=r.decode_on_the_fly,l.decode_on_the_fly&&(l.findPeakSample=!0),l.findReplayGain&&X.InitGainAnalysis(l.rgdata,r.out_samplerate)==ie.INIT_GAIN_ANALYSIS_ERROR)return r.internal_flags=null,-6;switch(l.decode_on_the_fly&&!r.decode_only&&(l.hip!=null&&d.hip_decode_exit(l.hip),l.hip=d.hip_decode_init()),l.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*l.mode_gr,r.encoder_delay=c.ENCDELAY,l.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case p0.vbr_mt:case p0.vbr_rh:case p0.vbr_mtrh:{var S0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];r.compression_ratio=S0[r.VBR_q]}break;case p0.vbr_abr:r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.brate);break}if(r.mode==P0.NOT_SET&&(r.mode=P0.JOINT_STEREO),r.highpassfreq>0?(l.highpass1=2*r.highpassfreq,r.highpasswidth>=0?l.highpass2=2*(r.highpassfreq+r.highpasswidth):l.highpass2=(1+0)*2*r.highpassfreq,l.highpass1/=r.out_samplerate,l.highpass2/=r.out_samplerate):(l.highpass1=0,l.highpass2=0),r.lowpassfreq>0?(l.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?(l.lowpass1=2*(r.lowpassfreq-r.lowpasswidth),l.lowpass1<0&&(l.lowpass1=0)):l.lowpass1=(1-0)*2*r.lowpassfreq,l.lowpass1/=r.out_samplerate,l.lowpass2/=r.out_samplerate):(l.lowpass1=0,l.lowpass2=0),a(r),l.samplerate_index=f(r.out_samplerate,r),l.samplerate_index<0)return r.internal_flags=null,-1;if(r.VBR==p0.vbr_off){if(r.free_format)l.bitrate_index=0;else if(r.brate=S(r.brate,r.version,r.out_samplerate),l.bitrate_index=x(r.brate,r.version,r.out_samplerate),l.bitrate_index<=0)return r.internal_flags=null,-1}else l.bitrate_index=1;r.analysis&&(r.bWriteVbrTag=!1),l.pinfo!=null&&(r.bWriteVbrTag=!1),z.init_bit_stream_w(l);for(var f0=l.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),n0=0;n0<c.SBMAX_l+1;n0++)l.scalefac_band.l[n0]=K.sfBandIndex[f0].l[n0];for(var n0=0;n0<c.PSFB21+1;n0++){var w0=(l.scalefac_band.l[22]-l.scalefac_band.l[21])/c.PSFB21,Z0=l.scalefac_band.l[21]+n0*w0;l.scalefac_band.psfb21[n0]=Z0}l.scalefac_band.psfb21[c.PSFB21]=576;for(var n0=0;n0<c.SBMAX_s+1;n0++)l.scalefac_band.s[n0]=K.sfBandIndex[f0].s[n0];for(var n0=0;n0<c.PSFB12+1;n0++){var w0=(l.scalefac_band.s[13]-l.scalefac_band.s[12])/c.PSFB12,Z0=l.scalefac_band.s[12]+n0*w0;l.scalefac_band.psfb12[n0]=Z0}l.scalefac_band.psfb12[c.PSFB12]=192,r.version==1?l.sideinfo_len=l.channels_out==1?4+17:4+32:l.sideinfo_len=l.channels_out==1?4+9:4+17,r.error_protection&&(l.sideinfo_len+=2),o(r),l.Class_ID=V;{var B0;for(B0=0;B0<19;B0++)l.nsPsy.pefirbuf[B0]=700*l.mode_gr*l.channels_out;r.ATHtype==-1&&(r.ATHtype=4)}switch(p1(r.VBR_q<=9),p1(r.VBR_q>=0),r.VBR){case p0.vbr_mt:r.VBR=p0.vbr_mtrh;case p0.vbr_mtrh:{r.useTemporal==null&&(r.useTemporal=!1),Y.apply_preset(r,500-r.VBR_q*10,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?l.sfb21_extra=!1:l.sfb21_extra=r.out_samplerate>44e3,l.iteration_loop=new VBRNewIterationLoop(r0);break}case p0.vbr_rh:{Y.apply_preset(r,500-r.VBR_q*10,0),l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?l.sfb21_extra=!1:l.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),l.iteration_loop=new VBROldIterationLoop(r0);break}default:{var V0;l.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),V0=r.VBR,V0==p0.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),Y.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=V0,l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,V0==p0.vbr_off?l.iteration_loop=new b2(r0):l.iteration_loop=new ABRIterationLoop(r0);break}}if(p1(r.scale>=0),r.VBR!=p0.vbr_off){if(l.VBR_min_bitrate=1,l.VBR_max_bitrate=14,r.out_samplerate<16e3&&(l.VBR_max_bitrate=8),r.VBR_min_bitrate_kbps!=0&&(r.VBR_min_bitrate_kbps=S(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),l.VBR_min_bitrate=x(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),l.VBR_min_bitrate<0)||r.VBR_max_bitrate_kbps!=0&&(r.VBR_max_bitrate_kbps=S(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),l.VBR_max_bitrate=x(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),l.VBR_max_bitrate<0))return-1;r.VBR_min_bitrate_kbps=T0.bitrate_table[r.version][l.VBR_min_bitrate],r.VBR_max_bitrate_kbps=T0.bitrate_table[r.version][l.VBR_max_bitrate],r.VBR_mean_bitrate_kbps=Math.min(T0.bitrate_table[r.version][l.VBR_max_bitrate],r.VBR_mean_bitrate_kbps),r.VBR_mean_bitrate_kbps=Math.max(T0.bitrate_table[r.version][l.VBR_min_bitrate],r.VBR_mean_bitrate_kbps)}return r.tune&&(l.PSY.mask_adjust+=r.tune_value_a,l.PSY.mask_adjust_short+=r.tune_value_a),u(r),p1(r.scale>=0),r.athaa_type<0?l.ATH.useAdjust=3:l.ATH.useAdjust=r.athaa_type,l.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),r.short_blocks==null&&(r.short_blocks=Ne.short_block_allowed),r.short_blocks==Ne.short_block_allowed&&(r.mode==P0.JOINT_STEREO||r.mode==P0.STEREO)&&(r.short_blocks=Ne.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=r.exp_nspsytune|1,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=Te.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=Te.NSATTACKTHRE_S),p1(r.scale>=0),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),r.useTemporal==null&&(r.useTemporal=!0),l.slot_lag=l.frac_SpF=0,r.VBR==p0.vbr_off&&(l.slot_lag=l.frac_SpF=(r.version+1)*72e3*r.brate%r.out_samplerate|0),K.iteration_init(r),s0.psymodel_init(r),p1(r.scale>=0),0};function i(r,l){(r.in_buffer_0==null||r.in_buffer_nsamples<l)&&(r.in_buffer_0=Y1(l),r.in_buffer_1=Y1(l),r.in_buffer_nsamples=l)}this.lame_encode_flush=function(r,l,$,Q){var t0=r.internal_flags,l0=B2([2,1152]),i0=0,_0,S0,f0,n0,w0=t0.mf_samples_to_encode-c.POSTDELAY,Z0=v(r);if(t0.mf_samples_to_encode<1)return 0;for(_0=0,r.in_samplerate!=r.out_samplerate&&(w0+=16*r.out_samplerate/r.in_samplerate),f0=r.framesize-w0%r.framesize,f0<576&&(f0+=r.framesize),r.encoder_padding=f0,n0=(w0+f0)/r.framesize;n0>0&&i0>=0;){var B0=Z0-t0.mf_size,V0=r.frameNum;B0*=r.in_samplerate,B0/=r.out_samplerate,B0>1152&&(B0=1152),B0<1&&(B0=1),S0=Q-_0,Q==0&&(S0=0),i0=this.lame_encode_buffer(r,l0[0],l0[1],B0,l,$,S0),$+=i0,_0+=i0,n0-=V0!=r.frameNum?1:0}if(t0.mf_samples_to_encode=0,i0<0||(S0=Q-_0,Q==0&&(S0=0),z.flush_bitstream(r),i0=z.copy_buffer(t0,l,$,S0,1),i0<0))return i0;if($+=i0,_0+=i0,S0=Q-_0,Q==0&&(S0=0),r.write_id3tag_automatic){if(W.id3tag_write_v1(r),i0=z.copy_buffer(t0,l,$,S0,0),i0<0)return i0;_0+=i0}return _0},this.lame_encode_buffer=function(r,l,$,Q,t0,l0,i0){var _0=r.internal_flags,S0=[null,null];if(_0.Class_ID!=V)return-3;if(Q==0)return 0;i(_0,Q),S0[0]=_0.in_buffer_0,S0[1]=_0.in_buffer_1;for(var f0=0;f0<Q;f0++)S0[0][f0]=l[f0],_0.channels_in>1&&(S0[1][f0]=$[f0]);return h(r,S0[0],S0[1],Q,t0,l0,i0)};function v(r){var l=c.BLKSIZE+r.framesize-c.FFTOFFSET;return l=Math.max(l,512+r.framesize-32),l}function h(r,l,$,Q,t0,l0,i0){var _0=r.internal_flags,S0=0,f0,n0,w0,Z0,B0,V0=[null,null],H0=[null,null];if(_0.Class_ID!=V)return-3;if(Q==0)return 0;if(B0=z.copy_buffer(_0,t0,l0,i0,0),B0<0)return B0;if(l0+=B0,S0+=B0,H0[0]=l,H0[1]=$,I1.NEQ(r.scale,0)&&I1.NEQ(r.scale,1))for(n0=0;n0<Q;++n0)H0[0][n0]*=r.scale,_0.channels_out==2&&(H0[1][n0]*=r.scale);if(I1.NEQ(r.scale_left,0)&&I1.NEQ(r.scale_left,1))for(n0=0;n0<Q;++n0)H0[0][n0]*=r.scale_left;if(I1.NEQ(r.scale_right,0)&&I1.NEQ(r.scale_right,1))for(n0=0;n0<Q;++n0)H0[1][n0]*=r.scale_right;if(r.num_channels==2&&_0.channels_out==1)for(n0=0;n0<Q;++n0)H0[0][n0]=.5*(H0[0][n0]+H0[1][n0]),H0[1][n0]=0;Z0=v(r),V0[0]=_0.mfbuf[0],V0[1]=_0.mfbuf[1];for(var Y0=0;Q>0;){var K0=[null,null],A1=0,o1=0;K0[0]=H0[0],K0[1]=H0[1];var J0=new n;if(H(r,V0,K0,Y0,Q,J0),A1=J0.n_in,o1=J0.n_out,_0.findReplayGain&&!_0.decode_on_the_fly&&X.AnalyzeSamples(_0.rgdata,V0[0],_0.mf_size,V0[1],_0.mf_size,o1,_0.channels_out)==ie.GAIN_ANALYSIS_ERROR)return-6;if(Q-=A1,Y0+=A1,_0.channels_out==2,_0.mf_size+=o1,p1(_0.mf_size<=N0.MFSIZE),_0.mf_samples_to_encode<1&&(_0.mf_samples_to_encode=c.ENCDELAY+c.POSTDELAY),_0.mf_samples_to_encode+=o1,_0.mf_size>=Z0){var u1=i0-S0;if(i0==0&&(u1=0),f0=t(r,V0[0],V0[1],t0,l0,u1),f0<0)return f0;for(l0+=f0,S0+=f0,_0.mf_size-=r.framesize,_0.mf_samples_to_encode-=r.framesize,w0=0;w0<_0.channels_out;w0++)for(n0=0;n0<_0.mf_size;n0++)V0[w0][n0]=V0[w0][n0+r.framesize]}}return S0}function t(r,l,$,Q,t0,l0){var i0=M.enc.lame_encode_mp3_frame(r,l,$,Q,t0,l0);return r.frameNum++,i0}function n(){this.n_in=0,this.n_out=0}function _(){this.num_used=0}function R(r,l){return l!=0?R(l,r%l):r}function G(r,l,$){var Q=Math.PI*l;r/=$,r<0&&(r=0),r>1&&(r=1);var t0=r-.5,l0=.42-.5*Math.cos(2*r*Math.PI)+.08*Math.cos(4*r*Math.PI);return Math.abs(t0)<1e-9?Q/Math.PI:l0*Math.sin($*Q*t0)/(Math.PI*$*t0)}function I(r,l,$,Q,t0,l0,i0,_0,S0){var f0=r.internal_flags,n0,w0=0,Z0,B0=r.out_samplerate/R(r.out_samplerate,r.in_samplerate);B0>N0.BPC&&(B0=N0.BPC);var V0=Math.abs(f0.resample_ratio-Math.floor(.5+f0.resample_ratio))<1e-4?1:0,H0=1/f0.resample_ratio;H0>1&&(H0=1);var Y0=31;Y0%2==0&&--Y0,Y0+=V0;var K0=Y0+1;if(f0.fill_buffer_resample_init==0){for(f0.inbuf_old[0]=Y1(K0),f0.inbuf_old[1]=Y1(K0),n0=0;n0<=2*B0;++n0)f0.blackfilt[n0]=Y1(K0);for(f0.itime[0]=0,f0.itime[1]=0,w0=0;w0<=2*B0;w0++){var A1=0,o1=(w0-B0)/(2*B0);for(n0=0;n0<=Y0;n0++)A1+=f0.blackfilt[w0][n0]=G(n0-o1,H0,Y0);for(n0=0;n0<=Y0;n0++)f0.blackfilt[w0][n0]/=A1}f0.fill_buffer_resample_init=1}var J0=f0.inbuf_old[S0];for(Z0=0;Z0<Q;Z0++){var u1,q1;if(u1=Z0*f0.resample_ratio,w0=0|Math.floor(u1-f0.itime[S0]),Y0+w0-Y0/2>=i0)break;var o1=u1-f0.itime[S0]-(w0+.5*(Y0%2));q1=0|Math.floor(o1*2*B0+B0+.5);var N1=0;for(n0=0;n0<=Y0;++n0){var r1=n0+w0-Y0/2,D1;D1=r1<0?J0[K0+r1]:t0[l0+r1],N1+=D1*f0.blackfilt[q1][n0]}l[$+Z0]=N1}if(_0.num_used=Math.min(i0,Y0+w0-Y0/2),f0.itime[S0]+=_0.num_used-Z0*f0.resample_ratio,_0.num_used>=K0)for(n0=0;n0<K0;n0++)J0[n0]=t0[l0+_0.num_used+n0-K0];else{var T1=K0-_0.num_used;for(n0=0;n0<T1;++n0)J0[n0]=J0[n0+_0.num_used];for(w0=0;n0<K0;++n0,++w0)J0[n0]=t0[l0+w0];p1(w0==_0.num_used)}return Z0}function H(r,l,$,Q,t0,l0){var i0=r.internal_flags;if(i0.resample_ratio<.9999||i0.resample_ratio>1.0001)for(var _0=0;_0<i0.channels_out;_0++){var S0=new _;l0.n_out=I(r,l[_0],i0.mf_size,r.framesize,$[_0],Q,t0,S0,_0),l0.n_in=S0.num_used}else{l0.n_out=Math.min(r.framesize,t0),l0.n_in=l0.n_out;for(var f0=0;f0<l0.n_out;++f0)l[0][i0.mf_size+f0]=$[0][Q+f0],i0.channels_out==2&&(l[1][i0.mf_size+f0]=$[1][Q+f0])}}}var T2=$0,S1=o0.VbrMode;function y2(){function M(p,W,d,A,T,e,V,N,y,s,f,S,x,B,a){this.vbr_q=p,this.quant_comp=W,this.quant_comp_s=d,this.expY=A,this.st_lrm=T,this.st_s=e,this.masking_adj=V,this.masking_adj_short=N,this.ath_lower=y,this.ath_curve=s,this.ath_sensitivity=f,this.interch=S,this.safejoint=x,this.sfb21mod=B,this.msfix=a}function F(p,W,d,A,T,e,V,N,y,s,f,S,x,B){this.quant_comp=W,this.quant_comp_s=d,this.safejoint=A,this.nsmsfix=T,this.st_lrm=e,this.st_s=V,this.nsbass=N,this.scale=y,this.masking_adj=s,this.ath_lower=f,this.ath_curve=S,this.interch=x,this.sfscale=B}var P;this.setModules=function(p){P=p};var X=[new M(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new M(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new M(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new M(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new M(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new M(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new M(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new M(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new M(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new M(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new M(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],z=[new M(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new M(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new M(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new M(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new M(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new M(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new M(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new M(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new M(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new M(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new M(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function Y(p,W,d){var A=p.VBR==S1.vbr_rh?X:z,T=p.VBR_q_frac,e=A[W],V=A[W+1],N=e;e.st_lrm=e.st_lrm+T*(V.st_lrm-e.st_lrm),e.st_s=e.st_s+T*(V.st_s-e.st_s),e.masking_adj=e.masking_adj+T*(V.masking_adj-e.masking_adj),e.masking_adj_short=e.masking_adj_short+T*(V.masking_adj_short-e.masking_adj_short),e.ath_lower=e.ath_lower+T*(V.ath_lower-e.ath_lower),e.ath_curve=e.ath_curve+T*(V.ath_curve-e.ath_curve),e.ath_sensitivity=e.ath_sensitivity+T*(V.ath_sensitivity-e.ath_sensitivity),e.interch=e.interch+T*(V.interch-e.interch),e.msfix=e.msfix+T*(V.msfix-e.msfix),s0(p,N.vbr_q),d!=0?p.quant_comp=N.quant_comp:Math.abs(p.quant_comp- -1)>0||(p.quant_comp=N.quant_comp),d!=0?p.quant_comp_short=N.quant_comp_s:Math.abs(p.quant_comp_short- -1)>0||(p.quant_comp_short=N.quant_comp_s),N.expY!=0&&(p.experimentalY=N.expY!=0),d!=0?p.internal_flags.nsPsy.attackthre=N.st_lrm:Math.abs(p.internal_flags.nsPsy.attackthre- -1)>0||(p.internal_flags.nsPsy.attackthre=N.st_lrm),d!=0?p.internal_flags.nsPsy.attackthre_s=N.st_s:Math.abs(p.internal_flags.nsPsy.attackthre_s- -1)>0||(p.internal_flags.nsPsy.attackthre_s=N.st_s),d!=0?p.maskingadjust=N.masking_adj:Math.abs(p.maskingadjust-0)>0||(p.maskingadjust=N.masking_adj),d!=0?p.maskingadjust_short=N.masking_adj_short:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=N.masking_adj_short),d!=0?p.ATHlower=-N.ath_lower/10:Math.abs(-p.ATHlower*10-0)>0||(p.ATHlower=-N.ath_lower/10),d!=0?p.ATHcurve=N.ath_curve:Math.abs(p.ATHcurve- -1)>0||(p.ATHcurve=N.ath_curve),d!=0?p.athaa_sensitivity=N.ath_sensitivity:Math.abs(p.athaa_sensitivity- -1)>0||(p.athaa_sensitivity=N.ath_sensitivity),N.interch>0&&(d!=0?p.interChRatio=N.interch:Math.abs(p.interChRatio- -1)>0||(p.interChRatio=N.interch)),N.safejoint>0&&(p.exp_nspsytune=p.exp_nspsytune|N.safejoint),N.sfb21mod>0&&(p.exp_nspsytune=p.exp_nspsytune|N.sfb21mod<<20),d!=0?p.msfix=N.msfix:Math.abs(p.msfix- -1)>0||(p.msfix=N.msfix),d==0&&(p.VBR_q=W,p.VBR_q_frac=T)}var K=[new F(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new F(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new F(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new F(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new F(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new F(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new F(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new F(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new F(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new F(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new F(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new F(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new F(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new F(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new F(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new F(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new F(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function r0(p,W,d){var A=W,T=P.nearestBitrateFullIndex(W);if(p.VBR=S1.vbr_abr,p.VBR_mean_bitrate_kbps=A,p.VBR_mean_bitrate_kbps=Math.min(p.VBR_mean_bitrate_kbps,320),p.VBR_mean_bitrate_kbps=Math.max(p.VBR_mean_bitrate_kbps,8),p.brate=p.VBR_mean_bitrate_kbps,p.VBR_mean_bitrate_kbps>320&&(p.disable_reservoir=!0),K[T].safejoint>0&&(p.exp_nspsytune=p.exp_nspsytune|2),K[T].sfscale>0&&(p.internal_flags.noise_shaping=2),Math.abs(K[T].nsbass)>0){var e=int(K[T].nsbass*4);e<0&&(e+=64),p.exp_nspsytune=p.exp_nspsytune|e<<2}return d!=0?p.quant_comp=K[T].quant_comp:Math.abs(p.quant_comp- -1)>0||(p.quant_comp=K[T].quant_comp),d!=0?p.quant_comp_short=K[T].quant_comp_s:Math.abs(p.quant_comp_short- -1)>0||(p.quant_comp_short=K[T].quant_comp_s),d!=0?p.msfix=K[T].nsmsfix:Math.abs(p.msfix- -1)>0||(p.msfix=K[T].nsmsfix),d!=0?p.internal_flags.nsPsy.attackthre=K[T].st_lrm:Math.abs(p.internal_flags.nsPsy.attackthre- -1)>0||(p.internal_flags.nsPsy.attackthre=K[T].st_lrm),d!=0?p.internal_flags.nsPsy.attackthre_s=K[T].st_s:Math.abs(p.internal_flags.nsPsy.attackthre_s- -1)>0||(p.internal_flags.nsPsy.attackthre_s=K[T].st_s),d!=0?p.scale=K[T].scale:Math.abs(p.scale- -1)>0||(p.scale=K[T].scale),d!=0?p.maskingadjust=K[T].masking_adj:Math.abs(p.maskingadjust-0)>0||(p.maskingadjust=K[T].masking_adj),K[T].masking_adj>0?d!=0?p.maskingadjust_short=K[T].masking_adj*.9:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=K[T].masking_adj*.9):d!=0?p.maskingadjust_short=K[T].masking_adj*1.1:Math.abs(p.maskingadjust_short-0)>0||(p.maskingadjust_short=K[T].masking_adj*1.1),d!=0?p.ATHlower=-K[T].ath_lower/10:Math.abs(-p.ATHlower*10-0)>0||(p.ATHlower=-K[T].ath_lower/10),d!=0?p.ATHcurve=K[T].ath_curve:Math.abs(p.ATHcurve- -1)>0||(p.ATHcurve=K[T].ath_curve),d!=0?p.interChRatio=K[T].interch:Math.abs(p.interChRatio- -1)>0||(p.interChRatio=K[T].interch),W}this.apply_preset=function(p,W,d){switch(W){case I0.R3MIX:{W=I0.V3,p.VBR=S1.vbr_mtrh;break}case I0.MEDIUM:{W=I0.V4,p.VBR=S1.vbr_rh;break}case I0.MEDIUM_FAST:{W=I0.V4,p.VBR=S1.vbr_mtrh;break}case I0.STANDARD:{W=I0.V2,p.VBR=S1.vbr_rh;break}case I0.STANDARD_FAST:{W=I0.V2,p.VBR=S1.vbr_mtrh;break}case I0.EXTREME:{W=I0.V0,p.VBR=S1.vbr_rh;break}case I0.EXTREME_FAST:{W=I0.V0,p.VBR=S1.vbr_mtrh;break}case I0.INSANE:return W=320,p.preset=W,r0(p,W,d),p.VBR=S1.vbr_off,W}switch(p.preset=W,W){case I0.V9:return Y(p,9,d),W;case I0.V8:return Y(p,8,d),W;case I0.V7:return Y(p,7,d),W;case I0.V6:return Y(p,6,d),W;case I0.V5:return Y(p,5,d),W;case I0.V4:return Y(p,4,d),W;case I0.V3:return Y(p,3,d),W;case I0.V2:return Y(p,2,d),W;case I0.V1:return Y(p,1,d),W;case I0.V0:return Y(p,0,d),W}return 8<=W&&W<=320?r0(p,W,d):(p.preset=0,W)};function s0(p,W){var d=0;return 0>W&&(d=-1,W=0),9<W&&(d=-1,W=9),p.VBR_q=W,p.VBR_q_frac=0,d}}var w2=y2;function I2(){this.setModules=function(M,F){}}var p2=I2;function L2(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Ve=L2,ha=o0.new_float,N2=o0.new_int;function V2(){this.global_gain=0,this.sfb_count1=0,this.step=N2(39),this.noise=ha(39),this.noise_log=ha(39)}var H2=V2,L1=o0.System,ua=o0.VbrMode,He=o0.Util,j1=o0.Arrays,re=o0.new_float,te=o0.assert;function O2(){var M;this.rv=null;var F;this.qupvt=null;var P,X=new p2,z;this.setModules=function(y,s,f,S){M=y,F=s,this.rv=s,P=f,this.qupvt=f,z=S,X.setModules(P,z)},this.ms_convert=function(y,s){for(var f=0;f<576;++f){var S=y.tt[s][0].xr[f],x=y.tt[s][1].xr[f];y.tt[s][0].xr[f]=(S+x)*(He.SQRT2*.5),y.tt[s][1].xr[f]=(S-x)*(He.SQRT2*.5)}};function Y(y,s,f,S){S=0;for(var x=0;x<=f;++x){var B=Math.abs(y.xr[x]);S+=B,s[x]=Math.sqrt(B*Math.sqrt(B)),s[x]>y.xrpow_max&&(y.xrpow_max=s[x])}return S}this.init_xrpow=function(y,s,f){var S=0,x=0|s.max_nonzero_coeff;if(s.xrpow_max=0,j1.fill(f,x,576,0),S=Y(s,f,x,S),S>1e-20){var B=0;y.substep_shaping&2&&(B=1);for(var a=0;a<s.psymax;a++)y.pseudohalf[a]=B;return!0}return j1.fill(s.l3_enc,0,576,0),!1};function K(y,s){var f=y.ATH,S=s.xr;if(s.block_type!=c.SHORT_TYPE)for(var x=!1,B=c.PSFB21-1;B>=0&&!x;B--){var a=y.scalefac_band.psfb21[B],u=y.scalefac_band.psfb21[B+1],o=P.athAdjust(f.adjust,f.psfb21[B],f.floor);y.nsPsy.longfact[21]>1e-12&&(o*=y.nsPsy.longfact[21]);for(var i=u-1;i>=a;i--)if(Math.abs(S[i])<o)S[i]=0;else{x=!0;break}}else for(var v=0;v<3;v++)for(var x=!1,B=c.PSFB12-1;B>=0&&!x;B--){var a=y.scalefac_band.s[12]*3+(y.scalefac_band.s[13]-y.scalefac_band.s[12])*v+(y.scalefac_band.psfb12[B]-y.scalefac_band.psfb12[0]),u=a+(y.scalefac_band.psfb12[B+1]-y.scalefac_band.psfb12[B]),h=P.athAdjust(f.adjust,f.psfb12[B],f.floor);y.nsPsy.shortfact[12]>1e-12&&(h*=y.nsPsy.shortfact[12]);for(var i=u-1;i>=a;i--)if(Math.abs(S[i])<h)S[i]=0;else{x=!0;break}}}this.init_outer_loop=function(y,s){s.part2_3_length=0,s.big_values=0,s.count1=0,s.global_gain=210,s.scalefac_compress=0,s.table_select[0]=0,s.table_select[1]=0,s.table_select[2]=0,s.subblock_gain[0]=0,s.subblock_gain[1]=0,s.subblock_gain[2]=0,s.subblock_gain[3]=0,s.region0_count=0,s.region1_count=0,s.preflag=0,s.scalefac_scale=0,s.count1table_select=0,s.part2_length=0,s.sfb_lmax=c.SBPSY_l,s.sfb_smin=c.SBPSY_s,s.psy_lmax=y.sfb21_extra?c.SBMAX_l:c.SBPSY_l,s.psymax=s.psy_lmax,s.sfbmax=s.sfb_lmax,s.sfbdivide=11;for(var f=0;f<c.SBMAX_l;f++)s.width[f]=y.scalefac_band.l[f+1]-y.scalefac_band.l[f],s.window[f]=3;if(s.block_type==c.SHORT_TYPE){var S=re(576);s.sfb_smin=0,s.sfb_lmax=0,s.mixed_block_flag!=0&&(s.sfb_smin=3,s.sfb_lmax=y.mode_gr*2+4),s.psymax=s.sfb_lmax+3*((y.sfb21_extra?c.SBMAX_s:c.SBPSY_s)-s.sfb_smin),s.sfbmax=s.sfb_lmax+3*(c.SBPSY_s-s.sfb_smin),s.sfbdivide=s.sfbmax-18,s.psy_lmax=s.sfb_lmax;var x=y.scalefac_band.l[s.sfb_lmax];L1.arraycopy(s.xr,0,S,0,576);for(var f=s.sfb_smin;f<c.SBMAX_s;f++)for(var B=y.scalefac_band.s[f],a=y.scalefac_band.s[f+1],u=0;u<3;u++)for(var o=B;o<a;o++)s.xr[x++]=S[3*o+u];for(var i=s.sfb_lmax,f=s.sfb_smin;f<c.SBMAX_s;f++)s.width[i]=s.width[i+1]=s.width[i+2]=y.scalefac_band.s[f+1]-y.scalefac_band.s[f],s.window[i]=0,s.window[i+1]=1,s.window[i+2]=2,i+=3}s.count1bits=0,s.sfb_partition_table=P.nr_of_sfb_block[0][0],s.slen[0]=0,s.slen[1]=0,s.slen[2]=0,s.slen[3]=0,s.max_nonzero_coeff=575,j1.fill(s.scalefac,0),K(y,s)};function r0(y){this.ordinal=y}r0.BINSEARCH_NONE=new r0(0),r0.BINSEARCH_UP=new r0(1),r0.BINSEARCH_DOWN=new r0(2);function s0(y,s,f,S,x){var B,a=y.CurrentStep[S],u=!1,o=y.OldValue[S],i=r0.BINSEARCH_NONE;for(s.global_gain=o,f-=s.part2_length;;){var v;if(B=z.count_bits(y,x,s,null),a==1||B==f)break;B>f?(i==r0.BINSEARCH_DOWN&&(u=!0),u&&(a/=2),i=r0.BINSEARCH_UP,v=a):(i==r0.BINSEARCH_UP&&(u=!0),u&&(a/=2),i=r0.BINSEARCH_DOWN,v=-a),s.global_gain+=v,s.global_gain<0&&(s.global_gain=0,u=!0),s.global_gain>255&&(s.global_gain=255,u=!0)}for(te(s.global_gain>=0),te(s.global_gain<256);B>f&&s.global_gain<255;)s.global_gain++,B=z.count_bits(y,x,s,null);return y.CurrentStep[S]=o-s.global_gain>=4?4:2,y.OldValue[S]=s.global_gain,s.part2_3_length=B,B}this.trancate_smallspectrums=function(y,s,f,S){var x=re(H1.SFBMAX);if(!(!(y.substep_shaping&4)&&s.block_type==c.SHORT_TYPE||y.substep_shaping&128)){P.calc_noise(s,f,x,new Ve,null);for(var a=0;a<576;a++){var B=0;s.l3_enc[a]!=0&&(B=Math.abs(s.xr[a])),S[a]=B}var a=0,u=8;s.block_type==c.SHORT_TYPE&&(u=6);do{var o,i,v,h,t=s.width[u];if(a+=t,!(x[u]>=1)&&(j1.sort(S,a-t,t),!B1.EQ(S[a-1],0))){o=(1-x[u])*f[u],i=0,h=0;do{var n;for(v=1;h+v<t&&!B1.NEQ(S[h+a-t],S[h+a+v-t]);v++);if(n=S[h+a-t]*S[h+a-t]*v,o<n){h!=0&&(i=S[h+a-t-1]);break}o-=n,h+=v}while(h<t);if(!B1.EQ(i,0))do Math.abs(s.xr[a-t])<=i&&(s.l3_enc[a-t]=0);while(--t>0)}}while(++u<s.psymax);s.part2_3_length=z.noquant_count_bits(y,s,null)}};function p(y){for(var s=0;s<y.sfbmax;s++)if(y.scalefac[s]+y.subblock_gain[y.window[s]]==0)return!1;return!0}function W(y){return He.FAST_LOG10(.368+.632*y*y*y)}function d(y,s){for(var f=1e-37,S=0;S<s.psymax;S++)f+=W(y[S]);return Math.max(1e-20,f)}function A(y,s,f,S,x){var B;switch(y){default:case 9:{s.over_count>0?(B=f.over_SSD<=s.over_SSD,f.over_SSD==s.over_SSD&&(B=f.bits<s.bits)):B=f.max_noise<0&&f.max_noise*10+f.bits<=s.max_noise*10+s.bits;break}case 0:B=f.over_count<s.over_count||f.over_count==s.over_count&&f.over_noise<s.over_noise||f.over_count==s.over_count&&B1.EQ(f.over_noise,s.over_noise)&&f.tot_noise<s.tot_noise;break;case 8:f.max_noise=d(x,S);case 1:B=f.max_noise<s.max_noise;break;case 2:B=f.tot_noise<s.tot_noise;break;case 3:B=f.tot_noise<s.tot_noise&&f.max_noise<s.max_noise;break;case 4:B=f.max_noise<=0&&s.max_noise>.2||f.max_noise<=0&&s.max_noise<0&&s.max_noise>f.max_noise-.2&&f.tot_noise<s.tot_noise||f.max_noise<=0&&s.max_noise>0&&s.max_noise>f.max_noise-.2&&f.tot_noise<s.tot_noise+s.over_noise||f.max_noise>0&&s.max_noise>-.05&&s.max_noise>f.max_noise-.1&&f.tot_noise+f.over_noise<s.tot_noise+s.over_noise||f.max_noise>0&&s.max_noise>-.1&&s.max_noise>f.max_noise-.15&&f.tot_noise+f.over_noise+f.over_noise<s.tot_noise+s.over_noise+s.over_noise;break;case 5:B=f.over_noise<s.over_noise||B1.EQ(f.over_noise,s.over_noise)&&f.tot_noise<s.tot_noise;break;case 6:B=f.over_noise<s.over_noise||B1.EQ(f.over_noise,s.over_noise)&&(f.max_noise<s.max_noise||B1.EQ(f.max_noise,s.max_noise)&&f.tot_noise<=s.tot_noise);break;case 7:B=f.over_count<s.over_count||f.over_noise<s.over_noise;break}return s.over_count==0&&(B=B&&f.bits<s.bits),B}function T(y,s,f,S,x){var B=y.internal_flags,a;s.scalefac_scale==0?a=1.2968395546510096:a=1.6817928305074292;for(var u=0,o=0;o<s.sfbmax;o++)u<f[o]&&(u=f[o]);var i=B.noise_shaping_amp;switch(i==3&&(x?i=2:i=1),i){case 2:break;case 1:u>1?u=Math.pow(u,.5):u*=.95;break;case 0:default:u>1?u=1:u*=.95;break}for(var v=0,o=0;o<s.sfbmax;o++){var h=s.width[o],t;if(v+=h,!(f[o]<u)){if(B.substep_shaping&2&&(B.pseudohalf[o]=B.pseudohalf[o]==0?1:0,B.pseudohalf[o]==0&&B.noise_shaping_amp==2))return;for(s.scalefac[o]++,t=-h;t<0;t++)S[v+t]*=a,S[v+t]>s.xrpow_max&&(s.xrpow_max=S[v+t]);if(B.noise_shaping_amp==2)return}}}function e(y,s){for(var f=1.2968395546510096,S=0,x=0;x<y.sfbmax;x++){var B=y.width[x],a=y.scalefac[x];if(y.preflag!=0&&(a+=P.pretab[x]),S+=B,a&1){a++;for(var u=-B;u<0;u++)s[S+u]*=f,s[S+u]>y.xrpow_max&&(y.xrpow_max=s[S+u])}y.scalefac[x]=a>>1}y.preflag=0,y.scalefac_scale=1}function V(y,s,f){var S,x=s.scalefac;for(S=0;S<s.sfb_lmax;S++)if(x[S]>=16)return!0;for(var B=0;B<3;B++){var a=0,u=0;for(S=s.sfb_lmax+B;S<s.sfbdivide;S+=3)a<x[S]&&(a=x[S]);for(;S<s.sfbmax;S+=3)u<x[S]&&(u=x[S]);if(!(a<16&&u<8)){if(s.subblock_gain[B]>=7)return!0;s.subblock_gain[B]++;var o=y.scalefac_band.l[s.sfb_lmax];for(S=s.sfb_lmax+B;S<s.sfbmax;S+=3){var i,v=s.width[S],h=x[S];if(h=h-(4>>s.scalefac_scale),h>=0){x[S]=h,o+=v*3;continue}x[S]=0;{var t=210+(h<<s.scalefac_scale+1);i=P.IPOW20(t)}o+=v*(B+1);for(var n=-v;n<0;n++)f[o+n]*=i,f[o+n]>s.xrpow_max&&(s.xrpow_max=f[o+n]);o+=v*(3-B-1)}{var i=P.IPOW20(202);o+=s.width[S]*(B+1);for(var n=-s.width[S];n<0;n++)f[o+n]*=i,f[o+n]>s.xrpow_max&&(s.xrpow_max=f[o+n])}}}return!1}function N(y,s,f,S,x){var B=y.internal_flags;T(y,s,f,S,x);var a=p(s);return a?!1:(B.mode_gr==2?a=z.scale_bitcount(s):a=z.scale_bitcount_lsf(B,s),a?(B.noise_shaping>1&&(j1.fill(B.pseudohalf,0),s.scalefac_scale==0?(e(s,S),a=!1):s.block_type==c.SHORT_TYPE&&B.subblock_gain>0&&(a=V(B,s,S)||p(s))),a||(B.mode_gr==2?a=z.scale_bitcount(s):a=z.scale_bitcount_lsf(B,s)),!a):!0)}this.outer_loop=function(y,s,f,S,x,B){var a=y.internal_flags,u=new me,o=re(576),i=re(H1.SFBMAX),v=new Ve,h,t=new H2,n=9999999,_=!1,R=!1,G=0;if(s0(a,s,B,x,S),a.noise_shaping==0)return 100;P.calc_noise(s,f,i,v,t),v.bits=s.part2_3_length,u.assign(s);var I=0;for(L1.arraycopy(S,0,o,0,576);!_;){do{var H=new Ve,r,l=255;if(a.substep_shaping&2?r=20:r=3,a.sfb21_extra&&(i[u.sfbmax]>1||u.block_type==c.SHORT_TYPE&&(i[u.sfbmax+1]>1||i[u.sfbmax+2]>1))||!N(y,u,i,S,R))break;u.scalefac_scale!=0&&(l=254);var $=B-u.part2_length;if($<=0)break;for(;(u.part2_3_length=z.count_bits(a,S,u,t))>$&&u.global_gain<=l;)u.global_gain++;if(u.global_gain>l)break;if(v.over_count==0){for(;(u.part2_3_length=z.count_bits(a,S,u,t))>n&&u.global_gain<=l;)u.global_gain++;if(u.global_gain>l)break}if(P.calc_noise(u,f,i,H,t),H.bits=u.part2_3_length,s.block_type!=c.SHORT_TYPE?h=y.quant_comp:h=y.quant_comp_short,h=A(h,v,H,u,i)?1:0,h!=0)n=s.part2_3_length,v=H,s.assign(u),I=0,L1.arraycopy(S,0,o,0,576);else if(a.full_outer_loop==0&&(++I>r&&v.over_count==0||a.noise_shaping_amp==3&&R&&I>30||a.noise_shaping_amp==3&&R&&u.global_gain-G>15))break}while(u.global_gain+u.scalefac_scale<255);a.noise_shaping_amp==3?R?_=!0:(u.assign(s),L1.arraycopy(o,0,S,0,576),I=0,G=u.global_gain,R=!0):_=!0}return te(s.global_gain+s.scalefac_scale<=255),y.VBR==ua.vbr_rh||y.VBR==ua.vbr_mtrh?L1.arraycopy(o,0,S,0,576):a.substep_shaping&1&&trancate_smallspectrums(a,s,f,S),v.over_count},this.iteration_finish_one=function(y,s,f){var S=y.l3_side,x=S.tt[s][f];z.best_scalefac_store(y,s,f,S),y.use_best_huffman==1&&z.best_huffman_divide(y,x),F.ResvAdjust(y,x)},this.VBR_encode_granule=function(y,s,f,S,x,B,a){var u=y.internal_flags,o=new me,i=re(576),v=a,h=a+1,t=(a+B)/2,n,_,R=0,G=u.sfb21_extra;te(v<=LameInternalFlags.MAX_BITS_PER_CHANNEL),j1.fill(o.l3_enc,0);do t>v-42?u.sfb21_extra=!1:u.sfb21_extra=G,_=outer_loop(y,s,f,S,x,t),_<=0?(R=1,h=s.part2_3_length,o.assign(s),L1.arraycopy(S,0,i,0,576),a=h-32,n=a-B,t=(a+B)/2):(B=t+32,n=a-B,t=(a+B)/2,R!=0&&(R=2,s.assign(o),L1.arraycopy(i,0,S,0,576)));while(n>12);u.sfb21_extra=G,R==2&&L1.arraycopy(o.l3_enc,0,s.l3_enc,0,576),te(s.part2_3_length<=v)},this.get_framebits=function(y,s){var f=y.internal_flags;f.bitrate_index=f.VBR_min_bitrate;var S=M.getframebits(y);f.bitrate_index=1,S=M.getframebits(y);for(var x=1;x<=f.VBR_max_bitrate;x++){f.bitrate_index=x;var B=new MeanBits(S);s[x]=F.ResvFrameBegin(y,B),S=B.bits}},this.VBR_old_prepare=function(y,s,f,S,x,B,a,u,o){var i=y.internal_flags,v,h=0,t=1,n=0;i.bitrate_index=i.VBR_max_bitrate;var _=F.ResvFrameBegin(y,new MeanBits(0))/i.mode_gr;get_framebits(y,B);for(var R=0;R<i.mode_gr;R++){var G=P.on_pe(y,s,u[R],_,R,0);i.mode_ext==c.MPG_MD_MS_LR&&(ms_convert(i.l3_side,R),P.reduce_side(u[R],f[R],_,G));for(var I=0;I<i.channels_out;++I){var H=i.l3_side.tt[R][I];H.block_type!=c.SHORT_TYPE?(h=1.28/(1+Math.exp(3.5-s[R][I]/300))-.05,v=i.PSY.mask_adjust-h):(h=2.56/(1+Math.exp(3.5-s[R][I]/300))-.14,v=i.PSY.mask_adjust_short-h),i.masking_lower=Math.pow(10,v*.1),init_outer_loop(i,H),o[R][I]=P.calc_xmin(y,S[R][I],H,x[R][I]),o[R][I]!=0&&(t=0),a[R][I]=126,n+=u[R][I]}}for(var R=0;R<i.mode_gr;R++)for(var I=0;I<i.channels_out;I++)n>B[i.VBR_max_bitrate]&&(u[R][I]*=B[i.VBR_max_bitrate],u[R][I]/=n),a[R][I]>u[R][I]&&(a[R][I]=u[R][I]);return t},this.bitpressure_strategy=function(y,s,f,S){for(var x=0;x<y.mode_gr;x++)for(var B=0;B<y.channels_out;B++){for(var a=y.l3_side.tt[x][B],u=s[x][B],o=0,i=0;i<a.psy_lmax;i++)u[o++]*=1+.029*i*i/c.SBMAX_l/c.SBMAX_l;if(a.block_type==c.SHORT_TYPE)for(var i=a.sfb_smin;i<c.SBMAX_s;i++)u[o++]*=1+.029*i*i/c.SBMAX_s/c.SBMAX_s,u[o++]*=1+.029*i*i/c.SBMAX_s/c.SBMAX_s,u[o++]*=1+.029*i*i/c.SBMAX_s/c.SBMAX_s;S[x][B]=0|Math.max(f[x][B],.9*S[x][B])}},this.VBR_new_prepare=function(y,s,f,S,x,B){var a=y.internal_flags,u=1,o=0,i=0,v;if(y.free_format){a.bitrate_index=0;var h=new MeanBits(o);v=F.ResvFrameBegin(y,h),o=h.bits,x[0]=v}else{a.bitrate_index=a.VBR_max_bitrate;var h=new MeanBits(o);F.ResvFrameBegin(y,h),o=h.bits,get_framebits(y,x),v=x[a.VBR_max_bitrate]}for(var t=0;t<a.mode_gr;t++){P.on_pe(y,s,B[t],o,t,0),a.mode_ext==c.MPG_MD_MS_LR&&ms_convert(a.l3_side,t);for(var n=0;n<a.channels_out;++n){var _=a.l3_side.tt[t][n];a.masking_lower=Math.pow(10,a.PSY.mask_adjust*.1),init_outer_loop(a,_),P.calc_xmin(y,f[t][n],_,S[t][n])!=0&&(u=0),i+=B[t][n]}}for(var t=0;t<a.mode_gr;t++)for(var n=0;n<a.channels_out;n++)i>v&&(B[t][n]*=v,B[t][n]/=i);return u},this.calc_target_bits=function(y,s,f,S,x,B){var a=y.internal_flags,u=a.l3_side,o,i,v,h,t=0;a.bitrate_index=a.VBR_max_bitrate;var n=new MeanBits(t);for(B[0]=F.ResvFrameBegin(y,n),t=n.bits,a.bitrate_index=1,t=M.getframebits(y)-a.sideinfo_len*8,x[0]=t/(a.mode_gr*a.channels_out),t=y.VBR_mean_bitrate_kbps*y.framesize*1e3,a.substep_shaping&1&&(t*=1.09),t/=y.out_samplerate,t-=a.sideinfo_len*8,t/=a.mode_gr*a.channels_out,o=.93+.07*(11-y.compression_ratio)/(11-5.5),o<.9&&(o=.9),o>1&&(o=1),i=0;i<a.mode_gr;i++){var _=0;for(v=0;v<a.channels_out;v++){if(S[i][v]=int(o*t),s[i][v]>700){var R=int((s[i][v]-700)/1.4),G=u.tt[i][v];S[i][v]=int(o*t),G.block_type==c.SHORT_TYPE&&R<t/2&&(R=t/2),R>t*3/2?R=t*3/2:R<0&&(R=0),S[i][v]+=R}S[i][v]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(S[i][v]=LameInternalFlags.MAX_BITS_PER_CHANNEL),_+=S[i][v]}if(_>LameInternalFlags.MAX_BITS_PER_GRANULE)for(v=0;v<a.channels_out;++v)S[i][v]*=LameInternalFlags.MAX_BITS_PER_GRANULE,S[i][v]/=_}if(a.mode_ext==c.MPG_MD_MS_LR)for(i=0;i<a.mode_gr;i++)P.reduce_side(S[i],f[i],t*a.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(h=0,i=0;i<a.mode_gr;i++)for(v=0;v<a.channels_out;v++)S[i][v]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(S[i][v]=LameInternalFlags.MAX_BITS_PER_CHANNEL),h+=S[i][v];if(h>B[0])for(i=0;i<a.mode_gr;i++)for(v=0;v<a.channels_out;v++)S[i][v]*=B[0],S[i][v]/=h}}var C2=O2,fa=o0.assert;function k2(){var M;this.setModules=function(F){M=F},this.ResvFrameBegin=function(F,P){var X=F.internal_flags,z,Y=X.l3_side,K=M.getframebits(F);P.bits=(K-X.sideinfo_len*8)/X.mode_gr;var r0=8*256*X.mode_gr-8;F.brate>320?z=8*int(F.brate*1e3/(F.out_samplerate/1152)/8+.5):(z=8*1440,F.strict_ISO&&(z=8*int(32e4/(F.out_samplerate/1152)/8+.5))),X.ResvMax=z-K,X.ResvMax>r0&&(X.ResvMax=r0),(X.ResvMax<0||F.disable_reservoir)&&(X.ResvMax=0);var s0=P.bits*X.mode_gr+Math.min(X.ResvSize,X.ResvMax);return s0>z&&(s0=z),fa(X.ResvMax%8==0),fa(X.ResvMax>=0),Y.resvDrain_pre=0,X.pinfo!=null&&(X.pinfo.mean_bits=P.bits/2,X.pinfo.resvsize=X.ResvSize),s0},this.ResvMaxBits=function(F,P,X,z){var Y=F.internal_flags,K,r0=Y.ResvSize,s0=Y.ResvMax;z!=0&&(r0+=P),Y.substep_shaping&1&&(s0*=.9),X.bits=P,r0*10>s0*9?(K=r0-s0*9/10,X.bits+=K,Y.substep_shaping|=128):(K=0,Y.substep_shaping&=127,!F.disable_reservoir&&!(Y.substep_shaping&1)&&(X.bits-=.1*P));var p=r0<Y.ResvMax*6/10?r0:Y.ResvMax*6/10;return p-=K,p<0&&(p=0),p},this.ResvAdjust=function(F,P){F.ResvSize-=P.part2_3_length+P.part2_length},this.ResvFrameEnd=function(F,P){var X,z=F.l3_side;F.ResvSize+=P*F.mode_gr;var Y=0;z.resvDrain_post=0,z.resvDrain_pre=0,(X=F.ResvSize%8)!=0&&(Y+=X),X=F.ResvSize-Y-F.ResvMax,X>0&&(Y+=X);{var K=Math.min(z.main_data_begin*8,Y)/8;z.resvDrain_pre+=8*K,Y-=8*K,F.ResvSize-=8*K,z.main_data_begin-=K}z.resvDrain_post+=Y,F.ResvSize-=Y}}var F2=k2;function X2(){var M="http://www.mp3dev.org/",F=3,P=98,X=4,z=0,Y=93;this.getLameVersion=function(){return F+"."+P+"."+X},this.getLameShortVersion=function(){return F+"."+P+"."+X},this.getLameVeryShortVersion=function(){return"LAME"+F+"."+P+"r"},this.getPsyVersion=function(){return z+"."+Y},this.getLameUrl=function(){return M},this.getLameOsBitness=function(){return"32bits"}}var Y2=X2,q2=o0.System,Oe=o0.VbrMode,ma=o0.ShortBlock,D2=o0.Arrays,xe=o0.new_byte,G2=o0.assert;se.NUMTOCENTRIES=100,se.MAXFRAMESIZE=2880;function se(){var M,F,P;this.setModules=function(t,n,_){M=t,F=n,P=_};var X=1,z=2,Y=4,K=8,r0=se.NUMTOCENTRIES,s0=se.MAXFRAMESIZE,p=r0+4+4+4+4+4,W=p+9+1+1+8+1+1+3+1+1+2+4+2+2,d=128,A=64,T=32,e=null,V="Xing",N="Info",y=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function s(t,n){if(t.nVbrNumFrames++,t.sum+=n,t.seen++,!(t.seen<t.want)&&(t.pos<t.size&&(t.bag[t.pos]=t.sum,t.pos++,t.seen=0),t.pos==t.size)){for(var _=1;_<t.size;_+=2)t.bag[_/2]=t.bag[_];t.want*=2,t.pos/=2}}function f(t,n){if(!(t.pos<=0))for(var _=1;_<r0;++_){var R=_/r0,G,I,H=0|Math.floor(R*t.pos);H>t.pos-1&&(H=t.pos-1),G=t.bag[H],I=t.sum;var r=0|256*G/I;r>255&&(r=255),n[_]=255&r}}this.addVbrFrame=function(t){var n=t.internal_flags,_=Tables.bitrate_table[t.version][n.bitrate_index];G2(n.VBR_seek_table.bag!=null),s(n.VBR_seek_table,_)};function S(t,n){var _=t[n+0]&255;return _<<=8,_|=t[n+1]&255,_<<=8,_|=t[n+2]&255,_<<=8,_|=t[n+3]&255,_}function x(t,n,_){t[n+0]=255&(_>>24&255),t[n+1]=255&(_>>16&255),t[n+2]=255&(_>>8&255),t[n+3]=255&(_&255)}function B(t,n,_){t[n+0]=255&(_>>8&255),t[n+1]=255&(_&255)}function a(t,n){return new String(t,n,V.length(),e).equals(V)||new String(t,n,N.length(),e).equals(N)}function u(t,n,_){return 255&(t<<n|_&~(-1<<n))}function o(t,n){var _=t.internal_flags;n[0]=u(n[0],8,255),n[1]=u(n[1],3,7),n[1]=u(n[1],1,t.out_samplerate<16e3?0:1),n[1]=u(n[1],1,t.version),n[1]=u(n[1],2,4-3),n[1]=u(n[1],1,t.error_protection?0:1),n[2]=u(n[2],4,_.bitrate_index),n[2]=u(n[2],2,_.samplerate_index),n[2]=u(n[2],1,0),n[2]=u(n[2],1,t.extension),n[3]=u(n[3],2,t.mode.ordinal()),n[3]=u(n[3],2,_.mode_ext),n[3]=u(n[3],1,t.copyright),n[3]=u(n[3],1,t.original),n[3]=u(n[3],2,t.emphasis),n[0]=255;var R=255&(n[1]&241),G;t.version==1?G=d:t.out_samplerate<16e3?G=T:G=A,t.VBR==Oe.vbr_off&&(G=t.brate);var I;t.free_format?I=0:I=255&16*M.BitrateIndex(G,t.version,t.out_samplerate),t.version==1?(n[1]=255&(R|10),R=255&(n[2]&13),n[2]=255&(I|R)):(n[1]=255&(R|2),R=255&(n[2]&13),n[2]=255&(I|R))}this.getVbrTag=function(t){var n=new VBRTagData,_=0;n.flags=0;var R=t[_+1]>>3&1,G=t[_+2]>>2&3,I=t[_+3]>>6&3,H=t[_+2]>>4&15;if(H=Tables.bitrate_table[R][H],t[_+1]>>4==14?n.samprate=Tables.samplerate_table[2][G]:n.samprate=Tables.samplerate_table[R][G],R!=0?I!=3?_+=32+4:_+=17+4:I!=3?_+=17+4:_+=9+4,!a(t,_))return null;_+=4,n.hId=R;var r=n.flags=S(t,_);if(_+=4,r&X&&(n.frames=S(t,_),_+=4),r&z&&(n.bytes=S(t,_),_+=4),r&Y){if(n.toc!=null)for(var l=0;l<r0;l++)n.toc[l]=t[_+l];_+=r0}n.vbrScale=-1,r&K&&(n.vbrScale=S(t,_),_+=4),n.headersize=(R+1)*72e3*H/n.samprate,_+=21;var $=t[_+0]<<4;$+=t[_+1]>>4;var Q=(t[_+1]&15)<<8;return Q+=t[_+2]&255,($<0||$>3e3)&&($=-1),(Q<0||Q>3e3)&&(Q=-1),n.encDelay=$,n.encPadding=Q,n},this.InitVbrTag=function(t){var n=t.internal_flags,_;t.version==1?_=d:t.out_samplerate<16e3?_=T:_=A,t.VBR==Oe.vbr_off&&(_=t.brate);var R=(t.version+1)*72e3*_/t.out_samplerate,G=n.sideinfo_len+W;if(n.VBR_seek_table.TotalFrameSize=R,R<G||R>s0){t.bWriteVbrTag=!1;return}n.VBR_seek_table.nVbrNumFrames=0,n.VBR_seek_table.nBytesWritten=0,n.VBR_seek_table.sum=0,n.VBR_seek_table.seen=0,n.VBR_seek_table.want=1,n.VBR_seek_table.pos=0,n.VBR_seek_table.bag==null&&(n.VBR_seek_table.bag=new int[400],n.VBR_seek_table.size=400);var I=xe(s0);o(t,I);for(var H=n.VBR_seek_table.TotalFrameSize,r=0;r<H;++r)F.add_dummy_byte(t,I[r]&255,1)};function i(t,n){var _=n^t;return n=n>>8^y[_&255],n}this.updateMusicCRC=function(t,n,_,R){for(var G=0;G<R;++G)t[0]=i(n[_+G],t[0])};function v(t,n,_,R,G){var I=t.internal_flags,H=0,r=t.encoder_delay,l=t.encoder_padding,$=100-10*t.VBR_q-t.quality,Q=P.getLameVeryShortVersion(),t0,l0=0,i0,_0=[1,5,3,2,4,0,3],S0=0|(t.lowpassfreq/100+.5>255?255:t.lowpassfreq/100+.5),f0=0,n0=0,w0=0,Z0=t.internal_flags.noise_shaping,B0=0,V0=0,H0=0,Y0=0,K0=0,A1=(t.exp_nspsytune&1)!=0,o1=(t.exp_nspsytune&2)!=0,J0=!1,u1=!1,q1=t.internal_flags.nogap_total,N1=t.internal_flags.nogap_current,r1=t.ATHtype,D1=0,T1;switch(t.VBR){case vbr_abr:T1=t.VBR_mean_bitrate_kbps;break;case vbr_off:T1=t.brate;break;default:T1=t.VBR_min_bitrate_kbps}switch(t.VBR.ordinal()<_0.length?t0=_0[t.VBR.ordinal()]:t0=0,i0=16*l0+t0,I.findReplayGain&&(I.RadioGain>510&&(I.RadioGain=510),I.RadioGain<-510&&(I.RadioGain=-510),n0=8192,n0|=3072,I.RadioGain>=0?n0|=I.RadioGain:(n0|=512,n0|=-I.RadioGain)),I.findPeakSample&&(f0=Math.abs(0|I.PeakSample/32767*Math.pow(2,23)+.5)),q1!=-1&&(N1>0&&(u1=!0),N1<q1-1&&(J0=!0)),D1=r1+((A1?1:0)<<4)+((o1?1:0)<<5)+((J0?1:0)<<6)+((u1?1:0)<<7),$<0&&($=0),t.mode){case MONO:B0=0;break;case STEREO:B0=1;break;case DUAL_CHANNEL:B0=2;break;case JOINT_STEREO:t.force_ms?B0=4:B0=3;break;case NOT_SET:default:B0=7;break}t.in_samplerate<=32e3?H0=0:t.in_samplerate==48e3?H0=2:t.in_samplerate>48e3?H0=3:H0=1,(t.short_blocks==ma.short_block_forced||t.short_blocks==ma.short_block_dispensed||t.lowpassfreq==-1&&t.highpassfreq==-1||t.scale_left<t.scale_right||t.scale_left>t.scale_right||t.disable_reservoir&&t.brate<320||t.noATH||t.ATHonly||r1==0||t.in_samplerate<=32e3)&&(V0=1),Y0=Z0+(B0<<2)+(V0<<5)+(H0<<6),K0=I.nMusicCRC,x(_,R+H,$),H+=4;for(var t1=0;t1<9;t1++)_[R+H+t1]=255&Q.charAt(t1);H+=9,_[R+H]=255&i0,H++,_[R+H]=255&S0,H++,x(_,R+H,f0),H+=4,B(_,R+H,n0),H+=2,B(_,R+H,w0),H+=2,_[R+H]=255&D1,H++,T1>=255?_[R+H]=255:_[R+H]=255&T1,H++,_[R+H]=255&r>>4,_[R+H+1]=255&(r<<4)+(l>>8),_[R+H+2]=255&l,H+=3,_[R+H]=255&Y0,H++,_[R+H++]=0,B(_,R+H,t.preset),H+=2,x(_,R+H,n),H+=4,B(_,R+H,K0),H+=2;for(var W1=0;W1<H;W1++)G=i(_[R+W1],G);return B(_,R+H,G),H+=2,H}function h(t){t.seek(0);var n=xe(10);t.readFully(n);var _;return new String(n,"ISO-8859-1").startsWith("ID3")?_=0:_=((n[6]&127)<<21|(n[7]&127)<<14|(n[8]&127)<<7|n[9]&127)+n.length,_}this.getLameTagFrame=function(t,n){var _=t.internal_flags;if(!t.bWriteVbrTag||_.Class_ID!=I0.LAME_ID||_.VBR_seek_table.pos<=0)return 0;if(n.length<_.VBR_seek_table.TotalFrameSize)return _.VBR_seek_table.TotalFrameSize;D2.fill(n,0,_.VBR_seek_table.TotalFrameSize,0),o(t,n);var R=xe(r0);if(t.free_format)for(var G=1;G<r0;++G)R[G]=255&255*G/100;else f(_.VBR_seek_table,R);var I=_.sideinfo_len;t.error_protection&&(I-=2),t.VBR==Oe.vbr_off?(n[I++]=255&N.charAt(0),n[I++]=255&N.charAt(1),n[I++]=255&N.charAt(2),n[I++]=255&N.charAt(3)):(n[I++]=255&V.charAt(0),n[I++]=255&V.charAt(1),n[I++]=255&V.charAt(2),n[I++]=255&V.charAt(3)),x(n,I,X+z+Y+K),I+=4,x(n,I,_.VBR_seek_table.nVbrNumFrames),I+=4;var H=_.VBR_seek_table.nBytesWritten+_.VBR_seek_table.TotalFrameSize;x(n,I,0|H),I+=4,q2.arraycopy(R,0,n,I,R.length),I+=R.length,t.error_protection&&F.CRC_writeheader(_,n);for(var r=0,G=0;G<I;G++)r=i(n[G],r);return I+=v(t,H,n,I,r),_.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(t,n){var _=t.internal_flags;if(_.VBR_seek_table.pos<=0||(n.seek(n.length()),n.length()==0))return-1;var R=h(n);n.seek(R);var G=xe(s0),I=getLameTagFrame(t,G);return I>G.length?-1:(I<1||n.write(G,0,I),0)}}var $2=se,ba=o0.new_byte,P2=o0.assert,I0=T2,Z2=w2,ie=j0,K2=w1,Q2=C2,U2=Le,j2=F2,P0=ra,B1=I1;function W2(){this.setModules=function(M,F){}}function z2(){this.setModules=function(M,F,P){}}function J2(){}function g2(){this.setModules=function(M,F){}}function er(M,F,P){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),M=1,F=44100,P=128);var X=new I0,z=new W2,Y=new ie,K=new B1,r0=new Z2,s0=new K2,p=new Q2,W=new $2,d=new Y2,A=new g2,T=new j2,e=new U2,V=new z2,N=new J2;X.setModules(Y,K,r0,s0,p,W,d,A,N),K.setModules(Y,N,d,W),A.setModules(K,d),r0.setModules(X),p.setModules(K,T,s0,e),s0.setModules(e,T,X.enc.psy),T.setModules(K),e.setModules(s0),W.setModules(X,K,d),z.setModules(V,N),V.setModules(d,A,r0);var y=X.lame_init();y.num_channels=M,y.in_samplerate=F,y.brate=P,y.mode=P0.STEREO,y.quality=3,y.bWriteVbrTag=!1,y.disable_reservoir=!0,y.write_id3tag_automatic=!1,X.lame_init_params(y);var s=1152,f=0|1.25*s+7200,S=ba(f);this.encodeBuffer=function(x,B){M==1&&(B=x),P2(x.length==B.length),x.length>s&&(s=x.length,f=0|1.25*s+7200,S=ba(f));var a=X.lame_encode_buffer(y,x,B,x.length,S,0,f);return new Int8Array(S.subarray(0,a))},this.flush=function(){var x=X.lame_encode_flush(y,S,0,f);return new Int8Array(S.subarray(0,x))}}function Re(M){return M.charCodeAt(0)<<24|M.charCodeAt(1)<<16|M.charCodeAt(2)<<8|M.charCodeAt(3)}Re("RIFF"),Re("WAVE"),Re("fmt "),Re("data");var ar=er,ca=function(M,F){if(!(M instanceof F))throw new TypeError("Cannot call a class as a function")},da=function(){function M(F,P){for(var X=0;X<P.length;X++){var z=P[X];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(F,z.key,z)}}return function(F,P,X){return P&&M(F.prototype,P),X&&M(F,X),F}}(),rr=function(){function M(F){ca(this,M),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,F),this.mp3Encoder=new ar(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return da(M,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(P){this.dataBuffer.push(new Int8Array(P))}},{key:"floatTo16BitPCM",value:function(P,X){for(var z=0;z<P.length;z++){var Y=Math.max(-1,Math.min(1,P[z]));X[z]=Y<0?Y*32768:Y*32767}}},{key:"convertBuffer",value:function(P){var X=new Float32Array(P),z=new Int16Array(P.length);return this.floatTo16BitPCM(X,z),z}},{key:"encode",value:function(P){this.samplesMono=this.convertBuffer(P);for(var X=this.samplesMono.length,z=0;X>=0;z+=this.maxSamples){var Y=this.samplesMono.subarray(z,z+this.maxSamples),K=this.mp3Encoder.encodeBuffer(Y);this.appendToBuffer(K),X-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),M}(),tr=function(){function M(F){ca(this,M),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,F)}return da(M,[{key:"addMicrophoneListener",value:function(P){var X=this;this.activeStream=P,this.timerToStart=setTimeout(function(){delete X.timerToStart},this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(P),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(z){X.timerToStart||X.lameEncoder.encode(z.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&this.context.state!=="closed"&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach(function(P){return P.stop()})),this}},{key:"start",value:function(){var P=this,X=window.AudioContext||window.webkitAudioContext;this.context=new X,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new rr(this.config);var z=this.config.deviceId?{deviceId:{exact:this.config.deviceId}}:!0;return new Promise(function(Y,K){navigator.mediaDevices.getUserMedia({audio:z}).then(function(r0){P.addMicrophoneListener(r0),Y(r0)}).catch(function(r0){K(r0)})})}},{key:"getMp3",value:function(){var P=this,X=this.lameEncoder.finish();return new Promise(function(z,Y){X.length===0?Y(new Error("No buffer to send")):(z([X,new Blob(X,{type:"audio/mp3"})]),P.lameEncoder.clearBuffer())})}}]),M}();return tr})})(ya);var wa=ya.exports;const lr=ir(wa),vr=_r({__proto__:null,default:lr},[wa]);export{vr as i};
